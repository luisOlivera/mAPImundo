// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/4.1/esri/copyright.txt for details.
//>>built
(function(a,l){var n,m=function(){},k=function(f){for(var p in f)return 0;return 1},g={}.toString,h=function(f){return"[object Function]"==g.call(f)},e=function(f){return"[object String]"==g.call(f)},d=function(f){return"[object Array]"==g.call(f)},c=function(f,p){if(f)for(var b=0;b<f.length;)p(f[b++])},b=function(f,p){for(var b in p)f[b]=p[b];return f},s=function(f,p){return b(Error(f),{src:"dojoLoader",info:p})},q=1,v=function(){return"_"+q++},t=function(f,p,b){return ca(f,p,b,0,t)},u=this,r=u.document,
w=r&&r.createElement("DiV"),y=t.has=function(p){return h(f[p])?f[p]=f[p](u,r,w):f[p]},f=y.cache=l.hasCache;y.add=function(p,b,c,d){(void 0===f[p]||d)&&(f[p]=b);return c&&y(p)};y.add("host-webworker","undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope);y("host-webworker")&&(b(l.hasCache,{"host-browser":0,dom:0,"dojo-dom-ready-api":0,"dojo-sniff":0,"dojo-inject-api":1,"host-webworker":1,"dojo-guarantee-console":0}),l.loaderPatch={injectUrl:function(f,p){try{importScripts(f),p()}catch(b){console.info("failed to load resource ("+
f+")"),console.error(b)}}});for(var p in a.has)y.add(p,a.has[p],0,1);t.async=1;var x=y("csp-restrictions")?function(){}:new Function("return eval(arguments[0]);");t.eval=function(f,p){return x(f+"\r\n//# sourceURL\x3d"+p)};var z={},K=t.signal=function(f,p){var b=z[f];c(b&&b.slice(0),function(f){f.apply(null,d(p)?p:[p])})},A=t.on=function(f,p){var b=z[f]||(z[f]=[]);b.push(p);return{remove:function(){for(var f=0;f<b.length;f++)if(b[f]===p){b.splice(f,1);break}}}},E=[],L={},B=[],I={},U=t.map={},S=[],
D={},J="",G={},F={};p={};var M=0,P=function(f){var p,b,c,d;for(p in F)b=F[p],(c=p.match(/^url\:(.+)/))?G["url:"+Ya(c[1],f)]=b:"*now"==p?d=b:"*noref"!=p&&(c=Ta(p,f,!0),G[c.mid]=G["url:"+c.url]=b);d&&d(ma(f));F={}},X=function(f){return f.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(f){return"\\"+f})},N=function(f,p){p.splice(0,p.length);for(var b in f)p.push([b,f[b],RegExp("^"+X(b)+"(/|$)"),b.length]);p.sort(function(f,p){return p[3]-f[3]});return p},H=function(f,p){c(f,function(f){p.push([e(f[0])?
RegExp("^"+X(f[0])+"$"):f[0],f[1]])})},O=function(f){var p=f.name;p||(p=f,f={name:p});f=b({main:"main"},f);f.location=f.location?f.location:p;f.packageMap&&(U[p]=f.packageMap);f.main.indexOf("./")||(f.main=f.main.substring(2));I[p]=f},Y=[],V=function(p,d,a){for(var s in p){"waitSeconds"==s&&(t.waitms=1E3*(p[s]||0));"cacheBust"==s&&(J=p[s]?e(p[s])?p[s]:(new Date).getTime()+"":"");if("baseUrl"==s||"combo"==s)t[s]=p[s];p[s]!==f&&(t.rawConfig[s]=p[s],"has"!=s&&y.add("config-"+s,p[s],0,d))}t.baseUrl||
(t.baseUrl="./");/\/$/.test(t.baseUrl)||(t.baseUrl+="/");for(s in p.has)y.add(s,p.has[s],0,d);c(p.packages,O);for(var q in p.packagePaths)c(p.packagePaths[q],function(f){var p=q+"/"+f;e(f)&&(f={name:f});f.location=p;O(f)});N(b(U,p.map),S);c(S,function(f){f[1]=N(f[1],[]);"*"==f[0]&&(S.star=f)});N(b(L,p.paths),B);H(p.aliases,E);if(d)Y.push({config:p.config});else for(s in p.config)d=Ba(s,a),d.config=b(d.config||{},p.config[s]);p.cache&&(P(),F=p.cache,p.cache["*noref"]&&P());K("config",[p,t.rawConfig])};
if(y("dojo-cdn")){var Z=r.getElementsByTagName("script");n=0;for(var aa,ba,ga,ja;n<Z.length;){aa=Z[n++];if((ga=aa.getAttribute("src"))&&(ja=ga.match(/(((.*)\/)|^)dojo\.js(\W|$)/i)))ba=ja[3]||"",l.baseUrl=l.baseUrl||ba,M=aa;if(ga=aa.getAttribute("data-dojo-config")||aa.getAttribute("djConfig"))p=t.eval("({ "+ga+" })","data-dojo-config"),M=aa}}t.rawConfig={};V(l,1);y("dojo-cdn")&&((I.dojo.location=ba)&&(ba+="/"),I.dijit.location=ba+"../dijit/",I.dojox.location=ba+"../dojox/");V(a,1);V(p,1);var la=function(f){ka(function(){c(f.deps,
nb)})},ca=function(f,p,c,a,q){var x;if(e(f)){if((x=Ba(f,a,!0))&&x.executed)return x.result;throw s("undefinedModule",f);}d(f)||(V(f,0,a),f=p,p=c);if(d(f))if(f.length){c="require*"+v();for(var r,g=[],h=0;h<f.length;)r=f[h++],g.push(Ba(r,a));x=b(pa("",c,0,""),{injected:2,deps:g,def:p||m,require:a?a.require:t,gc:1});D[x.mid]=x;la(x);var k=T&&0!="sync";ka(function(){Pa(x,k)});x.executed||qa.push(x);C()}else p&&p();return q},ma=function(f){if(!f)return t;var p=f.require;p||(p=function(b,c,d){return ca(b,
c,d,f,p)},f.require=b(p,t),p.module=f,p.toUrl=function(p){return Ya(p,f)},p.toAbsMid=function(p){return Ka(p,f)});return p},qa=[],Ha=[],ta={},Ca=function(f){f.injected=1;ta[f.mid]=1;f.url&&(ta[f.url]=f.pack||1);kb()},Da=function(f){f.injected=2;delete ta[f.mid];f.url&&delete ta[f.url];k(ta)&&ob()},La=t.idle=function(){return!Ha.length&&k(ta)&&!qa.length&&!T},za=function(f,p){if(p)for(var b=0;b<p.length;b++)if(p[b][2].test(f))return p[b];return 0},ua=function(f){var p=[],b,c;for(f=f.replace(/\\/g,
"/").split("/");f.length;)b=f.shift(),".."==b&&p.length&&".."!=c?(p.pop(),c=p[p.length-1]):"."!=b&&p.push(c=b);return p.join("/")},pa=function(f,p,b,c){return{pid:f,mid:p,pack:b,url:c,executed:0,def:0}},Ea=function(f,p,b,d,e,a,x,q,r){var v,g,t,k;k=/^\./.test(f);if(/(^\/)|(\:)|(\.js$)/.test(f)||k&&!p)return pa(0,f,0,f);f=ua(k?p.mid+"/../"+f:f);if(/^\./.test(f))throw s("irrationalPath",f);p&&(t=za(p.mid,a));(t=(t=t||a.star)&&za(f,t[1]))&&(f=t[1]+f.substring(t[3]));p=(ja=f.match(/^([^\/]+)(\/(.+))?$/))?
ja[1]:"";(v=b[p])?f=p+"/"+(g=ja[3]||v.main):p="";var m=0;c(q,function(p){var b=f.match(p[0]);b&&0<b.length&&(m=h(p[1])?f.replace(p[0],p[1]):p[1])});if(m)return Ea(m,0,b,d,e,a,x,q,r);if(b=d[f])return r?pa(b.pid,b.mid,b.pack,b.url):d[f];d=(t=za(f,x))?t[1]+f.substring(t[3]):p?v.location+"/"+g:f;/(^\/)|(\:)/.test(d)||(d=e+d);return pa(p,f,v,ua(d+".js"))},Ta=function(f,p,b){return Ea(f,p,I,D,t.baseUrl,b?[]:S,b?[]:B,b?[]:E)},cb=function(f,p,b){return f.normalize?f.normalize(p,function(f){return Ka(f,b)}):
Ka(p,b)},Fa=0,Ba=function(f,p,b){var c,d;(c=f.match(/^(.+?)\!(.*)$/))?(d=Ba(c[1],p,b),5===d.executed&&!d.load&&ea(d),d.load?(c=cb(d,c[2],p),f=d.mid+"!"+(d.dynamic?++Fa+"!":"")+c):(c=c[2],f=d.mid+"!"+ ++Fa+"!waitingForPlugin"),f={plugin:d,mid:f,req:ma(p),prid:c}):f=Ta(f,p);return D[f.mid]||!b&&(D[f.mid]=f)},Ka=t.toAbsMid=function(f,p){return Ta(f,p).mid},Ya=t.toUrl=function(f,p){var b=Ta(f+"/x",p),c=b.url;return fa(0===b.pid?f:c.substring(0,c.length-5))},Za={injected:2,executed:5,def:3,result:3};ba=
function(f){return D[f]=b({mid:f},Za)};var Ua=ba("require"),db=ba("exports"),Q=ba("module"),sa={},Ia=0,ea=function(f){var p=f.result;f.dynamic=p.dynamic;f.normalize=p.normalize;f.load=p.load;return f},Ma=function(f){var p={};c(f.loadQ,function(c){var d=cb(f,c.prid,c.req.module),e=f.dynamic?c.mid.replace(/waitingForPlugin$/,d):f.mid+"!"+d,d=b(b({},c),{mid:e,prid:d,injected:0});if(!D[e]||!D[e].injected)ha(D[e]=d);p[c.mid]=D[e];Da(c);delete D[c.mid]});f.loadQ=0;var d=function(f){for(var b=f.deps||[],
c=0;c<b.length;c++)(f=p[b[c].mid])&&(b[c]=f)},e;for(e in D)d(D[e]);c(qa,d)},Ga=function(f){t.trace("loader-finish-exec",[f.mid]);f.executed=5;f.defOrder=Ia++;f.loadQ&&(ea(f),Ma(f));for(n=0;n<qa.length;)qa[n]===f?qa.splice(n,1):n++;/^require\*/.test(f.mid)&&delete D[f.mid]},ia=[],Pa=function(f,p){if(4===f.executed)return t.trace("loader-circular-dependency",[ia.concat(f.mid).join("-\x3e")]),!f.def||p?sa:f.cjs&&f.cjs.exports;if(!f.executed){if(!f.def)return sa;var b=f.mid,c=f.deps||[],d,e=[],a=0;for(f.executed=
4;d=c[a++];){d=d===Ua?ma(f):d===db?f.cjs.exports:d===Q?f.cjs:Pa(d,p);if(d===sa)return f.executed=0,t.trace("loader-exec-module",["abort",b]),sa;e.push(d)}t.trace("loader-run-factory",[f.mid]);b=f.def;e=h(b)?b.apply(null,e):b;f.result=void 0===e&&f.cjs?f.cjs.exports:e;Ga(f)}return f.result},T=0,ka=function(f){try{T++,f()}catch(p){throw p;}finally{T--}La()&&K("idle",[])},C=function(){T||ka(function(){for(var f,p,b=0;b<qa.length;)f=Ia,p=qa[b],Pa(p),f!=Ia?b=0:b++})};void 0===y("dojo-loader-eval-hint-url")&&
y.add("dojo-loader-eval-hint-url",1);var fa="function"==typeof a.fixupUrl?a.fixupUrl:function(f){f+="";return f+(J?(/\?/.test(f)?"\x26":"?")+J:"")},ha=function(f){var p=f.plugin;5===p.executed&&!p.load&&ea(p);var b=function(p){f.result=p;Da(f);Ga(f);C()};p.load?p.load(f.prid,f.req,b):p.loadQ?p.loadQ.push(f):(p.loadQ=[f],qa.unshift(p),nb(p))},na=0,$=0,da=0,R=function(f,p){y("config-stripStrict")&&(f=f.replace(/(["'])use strict\1/g,""));da=1;f===na?na.call(null):t.eval(f,y("dojo-loader-eval-hint-url")?
p.url:p.mid);da=0},nb=function(f){var p=f.mid,c=f.url;if(!f.executed&&!f.injected&&!(ta[p]||f.url&&(f.pack&&ta[f.url]===f.pack||1==ta[f.url])))if(Ca(f),f.plugin)ha(f);else{var d=function(){gb(f);if(2!==f.injected){if(y("dojo-enforceDefine")){K("error",s("noDefine",f));return}Da(f);b(f,Za);t.trace("loader-define-nonmodule",[f.url])}C()};(na=G[p]||G["url:"+f.url])?(t.trace("loader-inject",["cache",f.mid,c]),R(na,f),d()):(t.trace("loader-inject",["script",f.mid,c]),$=f,t.injectUrl(fa(c),d,f),$=0)}},
hb=function(f,p,c){t.trace("loader-define-module",[f.mid,p]);if(2===f.injected)return K("error",s("multipleDefine",f)),f;b(f,{deps:p,def:c,cjs:{id:f.mid,uri:f.url,exports:f.result={},setExports:function(p){f.cjs.exports=p},config:function(){return f.config}}});for(var d=0;p[d];d++)p[d]=Ba(p[d],f);Da(f);!h(c)&&!p.length&&(f.result=c,Ga(f));return f},gb=function(f,p){for(var b=[],d,e;Ha.length;)e=Ha.shift(),p&&(e[0]=p.shift()),d=e[0]&&Ba(e[0])||f,b.push([d,e[1],e[2]]);P(f);c(b,function(f){la(hb.apply(null,
f))})},ob=m,kb=m;y.add("ie-event-behavior",r.attachEvent&&"undefined"===typeof Windows&&("undefined"===typeof opera||"[object Opera]"!=opera.toString()));var ib=function(f,p,b,c){if(y("ie-event-behavior"))return f.attachEvent(b,c),function(){f.detachEvent(b,c)};f.addEventListener(p,c,!1);return function(){f.removeEventListener(p,c,!1)}},Qa=ib(window,"load","onload",function(){t.pageLoaded=1;try{"complete"!=r.readyState&&(r.readyState="complete")}catch(f){}Qa()}),Z=r.getElementsByTagName("script");
for(n=0;!M;)if(!/^dojo/.test((aa=Z[n++])&&aa.type))M=aa;t.injectUrl=function(f,p,b){b=b.node=r.createElement("script");var c=ib(b,"load","onreadystatechange",function(f){f=f||window.event;var b=f.target||f.srcElement;if("load"===f.type||/complete|loaded/.test(b.readyState))c(),d(),p&&p()}),d=ib(b,"error","onerror",function(p){c();d();K("error",s("scriptError",[f,p]))});b.type="text/javascript";b.charset="utf-8";b.src=f;M.parentNode.insertBefore(b,M);return b};t.log=m;t.trace=m;aa=function(f,p,b){var c=
arguments.length,d=["require","exports","module"],a=[0,f,p];1==c?a=[0,h(f)?d:[],f]:2==c&&e(f)?a=[f,h(p)?d:[],p]:3==c&&(a=[f,p,b]);t.trace("loader-define",a.slice(0,2));if((c=a[0]&&Ba(a[0]))&&!ta[c.mid])la(hb(c,a[1],a[2]));else if(!y("ie-event-behavior")||da)Ha.push(a);else{c=c||$;if(!c)for(f in ta)if((d=D[f])&&d.node&&"interactive"===d.node.readyState){c=d;break}c?(P(c),la(hb(c,a[1],a[2]))):K("error",s("ieDefineFailed",a[0]));C()}};aa.amd={vendor:"dojotoolkit.org"};b(b(t,l.loaderPatch),a.loaderPatch);
A("error",function(f){try{if(console.error(f),f instanceof Error){for(var p in f)console.log(p+":",f[p]);console.log(".")}}catch(b){}});b(t,{uid:v,cache:G,packs:I});u.define||(u.define=aa,u.require=t,c(Y,function(f){V(f)}),A=p.deps||a.deps||l.deps,p=p.callback||a.callback||l.callback,t.boot=A||p?[A||[],p]:0)})(this.dojoConfig||this.djConfig||this.require||{},{aliases:[[/^webgl-engine/,function(){return"esri/views/3d/webgl-engine"}],[/^engine/,function(){return"esri/views/3d/webgl-engine"}],[/^esri-hydra/,
function(){return"esri"}]],async:1,baseUrl:(location.protocol === 'file:' ? 'http:' : location.protocol) + '//' + "js.arcgis.com/4.1/dojo",hasCache:{"config-selectorEngine":"acme","config-tlmSiblingOfDojo":1,"dojo-built":1,"dojo-has-api":1,"dojo-loader":1,"dojo-undef-api":0,dom:1,"host-browser":1},packages:[{location:".",name:"dojo"},{location:"../dijit",name:"dijit"},{location:"../dojox",name:"dojox"},{location:"../dgrid",main:"OnDemandGrid",name:"dgrid"},{location:"../dstore",main:"Store",name:"dstore"},{location:"../esri",name:"esri"},{location:"../moment",
main:"moment",name:"moment"}]});
require({cache:{"dojo/domReady":function(){define(["./has"],function(a){function l(b){d.push(b);e&&n()}function n(){if(!c){for(c=!0;d.length;)try{d.shift()(k)}catch(b){console.error(b,"in domReady callback",b.stack)}c=!1;l._onQEmpty()}}var m=function(){return this}(),k=document,g={loaded:1,complete:1},h="string"!=typeof k.readyState,e=!!g[k.readyState],d=[],c;l.load=function(b,c,d){l(d)};l._Q=d;l._onQEmpty=function(){};h&&(k.readyState="loading");if(!e){var b=[],s=function(b){b=b||m.event;e||"readystatechange"==
b.type&&!g[k.readyState]||(h&&(k.readyState="complete"),e=1,n())},q=function(b,c){b.addEventListener(c,s,!1);d.push(function(){b.removeEventListener(c,s,!1)})};if(!a("dom-addeventlistener")){var q=function(b,c){c="on"+c;b.attachEvent(c,s);d.push(function(){b.detachEvent(c,s)})},v=k.createElement("div");try{v.doScroll&&null===m.frameElement&&b.push(function(){try{return v.doScroll("left"),1}catch(b){}})}catch(t){}}q(k,"DOMContentLoaded");q(m,"load");"onreadystatechange"in k?q(k,"readystatechange"):
h||b.push(function(){return g[k.readyState]});if(b.length){var u=function(){if(!e){for(var c=b.length;c--;)if(b[c]()){s("poller");return}setTimeout(u,30)}};u()}}return l})},"dojo/has":function(){define(["require","module"],function(a,l){var n=a.has||function(){};if(!n("dojo-has-api")){var m="undefined"!=typeof window&&"undefined"!=typeof location&&"undefined"!=typeof document&&window.location==location&&window.document==document,k=function(){return this}(),g=m&&document,h=g&&g.createElement("DiV"),
e=l.config&&l.config()||{},n=function(d){return"function"==typeof e[d]?e[d]=e[d](k,g,h):e[d]};n.cache=e;n.add=function(d,c,b,a){("undefined"==typeof e[d]||a)&&(e[d]=c);return b&&n(d)}}n.add("dom-addeventlistener",!!document.addEventListener);n.add("touch","ontouchstart"in document||"onpointerdown"in document&&0<navigator.maxTouchPoints||window.navigator.msMaxTouchPoints);n.add("touch-events","ontouchstart"in document);n.add("pointer-events","pointerEnabled"in window.navigator?window.navigator.pointerEnabled:
"PointerEvent"in window);n.add("MSPointer",window.navigator.msPointerEnabled);n.add("device-width",screen.availWidth||innerWidth);m=document.createElement("form");n.add("dom-attributes-explicit",0==m.attributes.length);n.add("dom-attributes-specified-flag",0<m.attributes.length&&40>m.attributes.length);n.clearElement=function(d){d.innerHTML="";return d};n.normalize=function(d,c){var b=d.match(/[\?:]|[^:\?]*/g),e=0,a=function(c){var d=b[e++];if(":"==d)return 0;if("?"==b[e++]){if(!c&&n(d))return a();
a(!0);return a(c)}return d||0};return(d=a())&&c(d)};n.load=function(d,c,b){d?c([d],b):b()};return n})},"esri/Map":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/Accessor ./core/CollectionFlattener ./core/Evented ./support/LayersMixin ./Ground ./support/basemapUtils ./support/groundUtils ./core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s){return function(e){function a(b){e.call(this);this.basemap=null;this.ground=
new d;this._basemapCache=c.createCache()}n(a,e);Object.defineProperty(a.prototype,"allLayers",{get:function(){return new g({root:this,rootCollectionNames:["basemap.baseLayers","ground.layers","layers","basemap.referenceLayers"],getChildrenFunction:function(b){return b.layers}})},enumerable:!0,configurable:!0});a.prototype.castBasemap=function(b){return c.ensureType(b,this._basemapCache)};m([s.property({readOnly:!0})],a.prototype,"allLayers",null);m([s.property()],a.prototype,"basemap",void 0);m([s.cast("basemap")],
a.prototype,"castBasemap",null);m([s.property(),s.cast(b.ensureType)],a.prototype,"ground",void 0);return a=m([s.subclass("esri.Map")],a)}(s.declared(k,h,e))})},"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(a,l){return function(a,m){a.__bases__=m.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(a,l,n,m){var k=arguments.length,g=3>k?l:null===m?m=Object.getOwnPropertyDescriptor(l,n):m,h;if("object"===typeof Reflect&&
"function"===typeof Reflect.decorate)g=Reflect.decorate(a,l,n,m);else for(var e=a.length-1;0<=e;e--)if(h=a[e])g=(3>k?h(g):3<k?h(l,n,g):h(l,n))||g;return 3<k&&g&&Object.defineProperty(l,n,g),g}})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(a,l,n,m,k,g){l=l.default;a.before(function(e,d){a.hasMixin(e,h)&&m.processPrototype(d)});a.after(function(e){a.hasMixin(e,
h)&&(m.processClass(e),Object.defineProperties(e.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var h=a(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===h)throw Error("[accessor] cannot instanciate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,
"__accessor__",{value:new l(this)});if(0<arguments.length&&this.normalizeCtorArgs){for(var e=[],d=0;d<arguments.length;d++)e.push(arguments[d]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,e)}},__accessor__:null,postscript:function(e){var d=this.__accessor__;e=d.ctorArgs||e;var c;null!=this.getDefaults&&(c=this.getDefaults(e||{}),this.set(c));d.initialize();e&&(this.set(e),d.ctorArgs=null);this.initialize()},initialize:function(){},destroy:function(){if(this.__accessor__)g.removeTarget(this),
this.__accessor__.destroy();else try{throw Error("instance is already destroyed");}catch(e){console.warn(e.stack)}},get:function(e){return n.get(this,e)},hasOwnProperty:function(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},notifyChange:function(e){this.__accessor__.propertyInvalidated(e)},set:function(e,d){k.set(this,e,d);return this},watch:function(e,d,c){return g.watch(this,
e,d,c)},_clearOverride:function(e){return this.__accessor__.clearOverride(e)},_override:function(e,d){return this.__accessor__.override(e,d)},_isOverridden:function(e){return this.__accessor__.isOverridden(e)},_get:function(e){return this.__accessor__.internalGet(e)},_set:function(e,d){return this.__accessor__.internalSet(e,d)}});return h})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(a,l,n){function m(e,d){if(e&&!(Array.isArray(e)||"function"===typeof e))d=
e,e=null;e=e||[];d=d||{};return k([this].concat(e),d)}function k(e,d){if(e&&!(Array.isArray(e)||"function"===typeof e))d=e,e=null;"function"===typeof e?e=[e]:e||(e=[]);d=d||{};var c,b;c=0;for(b=g.length;c<b;c++)g[c](e,d);var a=n(e,d);a.createSubclass=m;c=0;for(b=h.length;c<b;c++)h[c](a);return a}var g=[],h=[];(function(e){e.hasMixin=function(d,c){var b;b=Array.isArray(d)?d.reduce(function(b,c){return c._meta?b.concat(c._meta.bases):b},[]):d._meta?d._meta.bases:d;if(!b)return!1;if("string"===typeof c)for(var e=
b.length-1;0<=e;e--)if(b[e].prototype.declaredClass===c)return!0;return-1!==b.indexOf(c)};e.safeMixin=function(d,c){return n.safeMixin(d,c)};e.before=function(d){g.push(d)};e.after=function(d){h.push(d)}})(k||(k={}));return k})},"dojo/_base/declare":function(){define(["./kernel","../has","./lang"],function(a,l,n){function m(f,p){throw Error("declare"+(p?" "+p:"")+": "+f);}function k(p,b,c){var d,e,a,s,x,q,r,v=this._inherited=this._inherited||{};"string"==typeof p&&(d=p,p=b,b=c);c=0;s=p.callee;(d=
d||s.nom)||m("can't deduce a name to call inherited()",this.declaredClass);x=this.constructor._meta;a=x.bases;r=v.p;if(d!=K){if(v.c!==s&&(r=0,q=a[0],x=q._meta,x.hidden[d]!==s)){(e=x.chains)&&"string"==typeof e[d]&&m("calling chained method with inherited: "+d,this.declaredClass);do if(x=q._meta,e=q.prototype,x&&(e[d]===s&&e.hasOwnProperty(d)||x.hidden[d]===s))break;while(q=a[++r]);r=q?r:-1}if(q=a[++r])if(e=q.prototype,q._meta&&e.hasOwnProperty(d))c=e[d];else{s=f[d];do if(e=q.prototype,(c=e[d])&&(q._meta?
e.hasOwnProperty(d):c!==s))break;while(q=a[++r])}c=q&&c||f[d]}else{if(v.c!==s&&(r=0,(x=a[0]._meta)&&x.ctor!==s)){e=x.chains;for((!e||"manual"!==e.constructor)&&m("calling chained constructor with inherited",this.declaredClass);(q=a[++r])&&!((x=q._meta)&&x.ctor===s););r=q?r:-1}for(;(q=a[++r])&&!(c=(x=q._meta)?x.ctor:q););c=q&&c}v.c=c;v.p=r;if(c)return!0===b?c:c.apply(this,b||p)}function g(f,p){return"string"==typeof f?this.__inherited(f,p,!0):this.__inherited(f,!0)}function h(f,p,b){var c=this.getInherited(f,
p);if(c)return c.apply(this,b||p||f)}function e(f){for(var p=this.constructor._meta.bases,b=0,c=p.length;b<c;++b)if(p[b]===f)return!0;return this instanceof f}function d(f,p){for(var b in p)b!=K&&p.hasOwnProperty(b)&&(f[b]=p[b]);if(l("bug-for-in-skips-shadowed"))for(var c=n._extraNames,d=c.length;d;)b=c[--d],b!=K&&p.hasOwnProperty(b)&&(f[b]=p[b])}function c(f){w.safeMixin(this.prototype,f);return this}function b(f,p){f instanceof Array||"function"==typeof f||(p=f,f=void 0);p=p||{};f=f||[];return w([this].concat(f),
p)}function s(f,p){return function(){var b=arguments,c=b,d=b[0],e,a;a=f.length;var s;if(!(this instanceof b.callee))return r(b);if(p&&(d&&d.preamble||this.preamble)){s=Array(f.length);s[0]=b;for(e=0;;){if(d=b[0])(d=d.preamble)&&(b=d.apply(this,b)||b);d=f[e].prototype;(d=d.hasOwnProperty("preamble")&&d.preamble)&&(b=d.apply(this,b)||b);if(++e==a)break;s[e]=b}}for(e=a-1;0<=e;--e)d=f[e],(d=(a=d._meta)?a.ctor:d)&&d.apply(this,s?s[e]:b);(d=this.postscript)&&d.apply(this,c)}}function q(f,p){return function(){var b=
arguments,c=b,d=b[0];if(!(this instanceof b.callee))return r(b);p&&(d&&(d=d.preamble)&&(c=d.apply(this,c)||c),(d=this.preamble)&&d.apply(this,c));f&&f.apply(this,b);(d=this.postscript)&&d.apply(this,b)}}function v(f){return function(){var p=arguments,b=0,c,d;if(!(this instanceof p.callee))return r(p);for(;c=f[b];++b)if(c=(d=c._meta)?d.ctor:c){c.apply(this,p);break}(c=this.postscript)&&c.apply(this,p)}}function t(f,p,b){return function(){var c,d,e=0,a=1;b&&(e=p.length-1,a=-1);for(;c=p[e];e+=a)d=c._meta,
(c=(d?d.hidden:c.prototype)[f])&&c.apply(this,arguments)}}function u(f){x.prototype=f.prototype;f=new x;x.prototype=null;return f}function r(f){var p=f.callee,b=u(p);p.apply(b,f);return b}function w(a,x,r){"string"!=typeof a&&(r=x,x=a,a="");r=r||{};var h,l,S,D,J,G,F,M=1,P=x;if("[object Array]"==p.call(x)){M=a;S=[];D=[{cls:0,refs:[]}];G={};for(var X=1,N=x.length,H=0,O,Y,V,Z;H<N;++H){(O=x[H])?"[object Function]"!=p.call(O)&&m("mixin #"+H+" is not a callable constructor.",M):m("mixin #"+H+" is unknown. Did you use dojo.require to pull it in?",
M);Y=O._meta?O._meta.bases:[O];V=0;for(O=Y.length-1;0<=O;--O)Z=Y[O].prototype,Z.hasOwnProperty("declaredClass")||(Z.declaredClass="uniqName_"+z++),Z=Z.declaredClass,G.hasOwnProperty(Z)||(G[Z]={count:0,refs:[],cls:Y[O]},++X),Z=G[Z],V&&V!==Z&&(Z.refs.push(V),++V.count),V=Z;++V.count;D[0].refs.push(V)}for(;D.length;){V=D.pop();S.push(V.cls);for(--X;l=V.refs,1==l.length;){V=l[0];if(!V||--V.count){V=0;break}S.push(V.cls);--X}if(V){H=0;for(N=l.length;H<N;++H)V=l[H],--V.count||D.push(V)}}X&&m("can't build consistent linearization",
M);O=x[0];S[0]=O?O._meta&&O===S[S.length-O._meta.bases.length]?O._meta.bases.length:1:0;G=S;S=G[0];M=G.length-S;x=G[M]}else G=[0],x?"[object Function]"==p.call(x)?(S=x._meta,G=G.concat(S?S.bases:x)):m("base class is not a callable constructor.",a):null!==x&&m("unknown base class. Did you use dojo.require to pull it in?",a);if(x)for(l=M-1;;--l){h=u(x);if(!l)break;S=G[l];(S._meta?d:y)(h,S.prototype);D=new Function;D.superclass=x;D.prototype=h;x=h.constructor=D}else h={};w.safeMixin(h,r);S=r.constructor;
S!==f.constructor&&(S.nom=K,h.constructor=S);for(l=M-1;l;--l)(S=G[l]._meta)&&S.chains&&(F=y(F||{},S.chains));h["-chains-"]&&(F=y(F||{},h["-chains-"]));S=!F||!F.hasOwnProperty(K);G[0]=D=F&&"manual"===F.constructor?v(G):1==G.length?q(r.constructor,S):s(G,S);D._meta={bases:G,hidden:r,chains:F,parents:P,ctor:r.constructor};D.superclass=x&&x.prototype;D.extend=c;D.createSubclass=b;D.prototype=h;h.constructor=D;h.getInherited=g;h.isInstanceOf=e;h.inherited=A;h.__inherited=k;a&&(h.declaredClass=a,n.setObject(a,
D));if(F)for(J in F)h[J]&&("string"==typeof F[J]&&J!=K)&&(S=h[J]=t(J,G,"after"===F[J]),S.nom=J);return D}var y=n.mixin,f=Object.prototype,p=f.toString,x,z=0,K="constructor";x=l("csp-restrictions")?function(){}:new Function;var A=a.config.isDebug?h:k;a.safeMixin=w.safeMixin=function(b,c){var d,e;for(d in c)if(e=c[d],(e!==f[d]||!(d in f))&&d!=K)"[object Function]"==p.call(e)&&(e.nom=d),b[d]=e;if(l("bug-for-in-skips-shadowed")&&c)for(var a=n._extraNames,s=a.length;s;)if(d=a[--s],e=c[d],(e!==f[d]||!(d in
f))&&d!=K)"[object Function]"==p.call(e)&&(e.nom=d),b[d]=e;return b};return a.declare=w})},"dojo/_base/kernel":function(){define(["../has","./config","require","module"],function(a,l,n,m){var k,g=function(){return this}(),h={},e={},d={config:l,global:g,dijit:h,dojox:e},h={dojo:["dojo",d],dijit:["dijit",h],dojox:["dojox",e]};m=n.map&&n.map[m.id.match(/[^\/]+/)[0]];for(k in m)h[k]?h[k][0]=m[k]:h[k]=[m[k],{}];for(k in h)m=h[k],m[1]._scopeName=m[0],l.noGlobals||(g[m[0]]=m[1]);d.scopeMap=h;d.baseUrl=d.config.baseUrl=
n.baseUrl;d.isAsync=n.async;d.locale=l.locale;l="$Rev: 91fa0cb $".match(/[0-9a-f]{7,}/);d.version={major:1,minor:11,patch:2,flag:"",revision:l?l[0]:NaN,toString:function(){var b=d.version;return b.major+"."+b.minor+"."+b.patch+b.flag+" ("+b.revision+")"}};a("csp-restrictions")||Function("d","d.eval \x3d function(){return d.global.eval ? d.global.eval(arguments[0]) : eval(arguments[0]);}")(d);d.exit=function(){};a("host-webworker");a.add("console-as-object",function(){return Function.prototype.bind&&
console&&"object"===typeof console.log});"undefined"!=typeof console||(console={});n="assert count debug dir dirxml error group groupEnd info profile profileEnd time timeEnd trace warn log".split(" ");var c;for(l=0;c=n[l++];)console[c]?a("console-as-object")&&(console[c]=Function.prototype.bind.call(console[c],console)):function(){var b=c+"";console[b]="log"in console?function(){var c=Array.prototype.slice.call(arguments);c.unshift(b+":");console.log(c.join(" "))}:function(){};console[b]._fake=!0}();
d.deprecated=d.experimental=function(){};d._hasResource={};return d})},"dojo/_base/config":function(){define(["../has","require"],function(a,l){var n={},m=l.rawConfig,k;for(k in m)n[k]=m[k];if(!n.locale&&"undefined"!=typeof navigator&&(m=navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language||navigator.userLanguage))n.locale=m.toLowerCase();return n})},"dojo/_base/lang":function(){define(["./kernel","../has","../sniff"],function(a,l){l.add("bug-for-in-skips-shadowed",
function(){for(var c in{toString:1})return 0;return 1});var n=l("bug-for-in-skips-shadowed")?"hasOwnProperty valueOf isPrototypeOf propertyIsEnumerable toLocaleString toString constructor".split(" "):[],m=n.length,k=function(c,b,d){d||(d=c[0]&&a.scopeMap[c[0]]?a.scopeMap[c.shift()][1]:a.global);try{for(var e=0;e<c.length;e++){var v=c[e];if(!(v in d))if(b)d[v]={};else return;d=d[v]}return d}catch(g){}},g=Object.prototype.toString,h=function(c,b,d){return(d||[]).concat(Array.prototype.slice.call(c,
b||0))},e=/\{([^\}]+)\}/g,d={_extraNames:n,_mixin:function(c,b,d){var e,a,g,h={};for(e in b)if(a=b[e],!(e in c)||c[e]!==a&&(!(e in h)||h[e]!==a))c[e]=d?d(a):a;if(l("bug-for-in-skips-shadowed")&&b)for(g=0;g<m;++g)if(e=n[g],a=b[e],!(e in c)||c[e]!==a&&(!(e in h)||h[e]!==a))c[e]=d?d(a):a;return c},mixin:function(c,b){c||(c={});for(var e=1,a=arguments.length;e<a;e++)d._mixin(c,arguments[e]);return c},setObject:function(c,b,d){var e=c.split(".");c=e.pop();return(d=k(e,!0,d))&&c?d[c]=b:void 0},getObject:function(c,
b,d){return!c?d:k(c.split("."),b,d)},exists:function(c,b){return void 0!==d.getObject(c,!1,b)},isString:function(c){return"string"==typeof c||c instanceof String},isArray:Array.isArray||function(c){return"[object Array]"==g.call(c)},isFunction:function(c){return"[object Function]"===g.call(c)},isObject:function(c){return void 0!==c&&(null===c||"object"==typeof c||d.isArray(c)||d.isFunction(c))},isArrayLike:function(c){return!!c&&!d.isString(c)&&!d.isFunction(c)&&!(c.tagName&&"form"==c.tagName.toLowerCase())&&
(d.isArray(c)||isFinite(c.length))},isAlien:function(c){return c&&!d.isFunction(c)&&/\{\s*\[native code\]\s*\}/.test(String(c))},extend:function(c,b){for(var e=1,a=arguments.length;e<a;e++)d._mixin(c.prototype,arguments[e]);return c},_hitchArgs:function(c,b){var e=d._toArray(arguments,2),q=d.isString(b);return function(){var v=d._toArray(arguments),g=q?(c||a.global)[b]:b;return g&&g.apply(c||this,e.concat(v))}},hitch:function(c,b){if(2<arguments.length)return d._hitchArgs.apply(a,arguments);b||(b=
c,c=null);if(d.isString(b)){c=c||a.global;if(!c[b])throw['lang.hitch: scope["',b,'"] is null (scope\x3d"',c,'")'].join("");return function(){return c[b].apply(c,arguments||[])}}return!c?b:function(){return b.apply(c,arguments||[])}},delegate:function(){function c(){}return function(b,e){c.prototype=b;var a=new c;c.prototype=null;e&&d._mixin(a,e);return a}}(),_toArray:l("ie")?function(){function c(b,c,d){d=d||[];for(c=c||0;c<b.length;c++)d.push(b[c]);return d}return function(b){return(b.item?c:h).apply(this,
arguments)}}():h,partial:function(c){return d.hitch.apply(a,[null].concat(d._toArray(arguments)))},clone:function(c){if(!c||"object"!=typeof c||d.isFunction(c))return c;if(c.nodeType&&"cloneNode"in c)return c.cloneNode(!0);if(c instanceof Date)return new Date(c.getTime());if(c instanceof RegExp)return RegExp(c);var b,e,a;if(d.isArray(c)){b=[];e=0;for(a=c.length;e<a;++e)e in c&&(b[e]=d.clone(c[e]))}else b=c.constructor?new c.constructor:{};return d._mixin(b,c,d.clone)},trim:String.prototype.trim?function(c){return c.trim()}:
function(c){return c.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},replace:function(c,b,a){return c.replace(a||e,d.isFunction(b)?b:function(c,e){return d.getObject(e,!1,b)})}};d.mixin(a,d);return d})},"dojo/sniff":function(){define(["./has"],function(a){var l=navigator,n=l.userAgent,l=l.appVersion,m=parseFloat(l);a.add("air",0<=n.indexOf("AdobeAIR"));a.add("wp",parseFloat(n.split("Windows Phone")[1])||void 0);a.add("msapp",parseFloat(n.split("MSAppHost/")[1])||void 0);a.add("khtml",0<=l.indexOf("Konqueror")?
m:void 0);a.add("edge",parseFloat(n.split("Edge/")[1])||void 0);a.add("opr",parseFloat(n.split("OPR/")[1])||void 0);a.add("webkit",!a("wp")&&!a("edge")&&parseFloat(n.split("WebKit/")[1])||void 0);a.add("chrome",!a("edge")&&!a("opr")&&parseFloat(n.split("Chrome/")[1])||void 0);a.add("android",!a("wp")&&parseFloat(n.split("Android ")[1])||void 0);a.add("safari",0<=l.indexOf("Safari")&&!a("wp")&&!a("chrome")&&!a("android")&&!a("edge")&&!a("opr")?parseFloat(l.split("Version/")[1]):void 0);a.add("mac",
0<=l.indexOf("Macintosh"));a.add("quirks","BackCompat"==document.compatMode);if(!a("wp")&&n.match(/(iPhone|iPod|iPad)/)){var k=RegExp.$1.replace(/P/,"p"),g=n.match(/OS ([\d_]+)/)?RegExp.$1:"1",g=parseFloat(g.replace(/_/,".").replace(/_/g,""));a.add(k,g);a.add("ios",g)}a.add("bb",(0<=n.indexOf("BlackBerry")||0<=n.indexOf("BB10"))&&parseFloat(n.split("Version/")[1])||void 0);a.add("trident",parseFloat(l.split("Trident/")[1])||void 0);a.add("svg","undefined"!==typeof SVGAngle);a("webkit")||(0<=n.indexOf("Opera")&&
a.add("opera",9.8<=m?parseFloat(n.split("Version/")[1])||m:m),0<=n.indexOf("Gecko")&&(!a("wp")&&!a("khtml")&&!a("trident")&&!a("edge"))&&a.add("mozilla",m),a("mozilla")&&a.add("ff",parseFloat(n.split("Firefox/")[1]||n.split("Minefield/")[1])||void 0),document.all&&!a("opera")&&(n=parseFloat(l.split("MSIE ")[1])||void 0,(l=document.documentMode)&&(5!=l&&Math.floor(n)!=l)&&(n=l),a.add("ie",n)),a.add("wii","undefined"!=typeof opera&&opera.wiiremote));return a})},"esri/core/accessorSupport/Properties":function(){define("require exports dojo/has ./Store ./PropertyOrigin ./extensions ../Logger".split(" "),
function(a,l,n,m,k,g,h){h.getLogger("esri.core.Accessor");var e=0;a=function(){function d(c){this.host=c;this._origin=k.OriginId.USER;this.cursors={};this.ctorArgs=null;this.destroyed=!1;this.dirties={};this.initialized=!1;this.metadatas=this.host.constructor.__accessorMetadata__;this.overridden=null;this.store=new m.default;Object.defineProperty(this,"uid",{value:e++})}d.prototype.initialize=function(){this.initialized=!0;g.instanceCreated(this.host,this.metadatas)};d.prototype.destroy=function(){this.destroyed=
!0;for(var c=this.cursors,b=0,d=Object.getOwnPropertyNames(c);b<d.length;b++){var e=d[b],a=c[e];if(a){for(;0<a.length;)a.pop().propertyDestroyed(this,e);c[e]=null}}};d.prototype.clearOverride=function(c){this.isOverridden(c)&&(this.overridden[c]=!1,this.propertyInvalidated(c))};d.prototype.get=function(c){var b=this.metadatas[c];if(this.store.has(c)&&!0===!this.dirties[c])return this.store.get(c);var d=b.get;return d?(b=d.call(this.host),this.store.set(c,b,k.OriginId.COMPUTED),this.propertyCommitted(c),
b):b.value};d.prototype.originOf=function(c){var b=this.store.originOf(c);return void 0===b&&(c=this.metadatas[c])&&c.hasOwnProperty("value")?"defaults":k.idToName(b)};d.prototype.has=function(c){return!this.metadatas[c]?!1:this.store.has(c)};d.prototype.internalGet=function(c){if(this.metadatas[c]){var b=this.store;return b.has(c)?b.get(c):this.metadatas[c].value}};d.prototype.internalSet=function(c,b){this.metadatas[c]&&(this.propertyInvalidated(c),this.initialized?this.store.set(c,b,this._origin):
this.store.set(c,b,k.OriginId.DEFAULTS),this.propertyCommitted(c))};d.prototype.isOverridden=function(c){return null!=this.overridden&&!0===this.overridden[c]};d.prototype.keys=function(){return this.store.keys()};d.prototype.override=function(c,b){this.metadatas[c]&&(this.overridden||(this.overridden={}),this.overridden[c]=!0,this.internalSet(c,b))};d.prototype.set=function(c,b){if(this.metadatas[c]){var d=this.metadatas[c],e=d.set;(d=d.cast)&&(b=d.call(this.host,b));e?e.call(this.host,b):this.internalSet(c,
b)}};d.prototype.setDefaultOrigin=function(c){this._origin=k.nameToId(c)};d.prototype.propertyInvalidated=function(c){var b=this.cursors[c];if(b)for(var d=0;d<b.length;d++)b[d].propertyInvalidated(this,c);this.isOverridden(c)||(this.dirties[c]=!0)};d.prototype.propertyCommitted=function(c){this.dirties[c]=!1;var b=this.cursors[c];if(b)for(var d=0;d<b.length;d++)b[d].propertyCommitted(this,c)};d.prototype.addCursor=function(c,b){var d=this.cursors[c];d||(this.cursors[c]=d=[]);d.push(b)};d.prototype.removeCursor=
function(c,b){var d=this.cursors[c];this.cursors[c]&&(d.splice(d.indexOf(b),1),0===d.length&&(this.cursors[c]=null))};return d}();Object.defineProperty(l,"__esModule",{value:!0});l.default=a})},"esri/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(a,l,n){a=function(){function a(){this._values={}}a.prototype.get=function(a){return this._values[a]};a.prototype.originOf=function(a){return n.OriginId.USER};a.prototype.keys=function(){return Object.keys(this._values)};
a.prototype.set=function(a,g){this._values[a]=g};a.prototype.clear=function(a){delete this._values[a]};a.prototype.has=function(a){return a in this._values};return a}();Object.defineProperty(l,"__esModule",{value:!0});l.default=a})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(a,l){function n(a){switch(a){case "defaults":return k.DEFAULTS;case "service":return k.SERVICE;case "portal-item":return k.PORTAL_ITEM;case "web-scene":return k.WEB_SCENE;case "web-map":return k.WEB_MAP;
case "user":return k.USER}}function m(a){switch(a){case k.DEFAULTS:return"defaults";case k.SERVICE:return"service";case k.PORTAL_ITEM:return"portal-item";case k.WEB_SCENE:return"web-scene";case k.WEB_MAP:return"web-map";case k.USER:return"user"}}(function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"})(l.OriginId||(l.OriginId={}));var k=l.OriginId;
l.nameToId=n;l.idToName=m;l.readableNameToId=function(a){return n(a)};l.idToReadableName=function(a){return m(a)};l.writableNameToId=function(a){return n(a)};l.idToWritableName=function(a){return m(a)}})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(a,l,n,m,k){var g=[n.default,m.default,k.default];l.processPrototypeMetadatas=function(a,e){for(var d=Object.getOwnPropertyNames(a),
c=0;c<g.length;c++){var b=g[c];if(b.processPrototypePropertyMetadata)for(var s=0,q=d;s<q.length;s++){var v=q[s];b.processPrototypePropertyMetadata(v,a[v],a,e)}}};l.processClassMetadatas=function(a,e){for(var d=Object.getOwnPropertyNames(a),c=0;c<g.length;c++){var b=g[c];if(b.processClassPropertyMetadata)for(var s=0,q=d;s<q.length;s++){var v=q[s];b.processClassPropertyMetadata(v,a[v],a,e)}}};l.instanceCreated=function(a,e){for(var d=Object.getOwnPropertyNames(e),c=0;c<g.length;c++){var b=g[c];b.instanceCreated&&
b.instanceCreated(a,e,d)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports dojo/has ../wire ../utils ../get ../set".split(" "),function(a,l,n,m,k,g,h){function e(d,c,b){var e=k.getProperties(d);return m.wire(d,b.aliasOf,function(){e.propertyInvalidated(c)})}l.AliasedPropertyExtension={processClassPropertyMetadata:function(d,c,b,e){var a=c.aliasOf;a&&(d=a.split(".")[0],null!=b[d]&&(!c.set&&!c.get)&&(c.get=function(){return g.default(this,a)},c.readOnly||
(c.set=function(b){return h.default(this,a,b)})))},instanceCreated:function(d,c,b){for(var a=0;a<b.length;a++){var q=b[a],v=c[q];v.aliasOf&&e(d,q,v)}}};Object.defineProperty(l,"__esModule",{value:!0});l.default=l.AliasedPropertyExtension})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(a,l,n){function m(c,b,a){b=n.splitPath(b);if(Array.isArray(b)){for(var q=[],v=0;v<b.length;v++)q.push((new k(b[v],a)).install(c));return new e(q)}c=(new k(b,a)).install(c);
return new d(c)}var k=function(){function c(b,c){this.path=b;this.callback=c;this.chain=null;this.path=b;-1<b.indexOf(".")&&(this.chain=n.pathToArray(b));this.callback=c;return this}c.prototype.install=function(b){b=this.chain?new h(this,b):new g(this,b);return b};c.prototype.notify=function(b){this.callback(b,this.path)};return c}(),g=function(){function c(b,c){this.binding=b;this.target=c;n.getProperties(c).addCursor(this.binding.path,this)}c.prototype.destroy=function(){this.target&&(n.getProperties(this.target).removeCursor(this.binding.path,
this),this.target=this.binding=null)};c.prototype.propertyDestroyed=function(b,c){n.getProperties(this.target).removeCursor(c,this)};c.prototype.propertyInvalidated=function(b,c){this.binding&&this.binding.notify(this.target)};c.prototype.propertyCommitted=function(b,c){this.binding&&this.binding.notify(this.target)};return c}(),h=function(){function c(b,c){this.binding=b;this.target=c;this.stack=[];this.properties=n.getProperties(c);this.stack.push({properties:this.properties,propertyName:b.chain[0]});
this.properties.addCursor(b.chain[0],this);this.moveForward();return this}c.prototype.destroy=function(){for(var b;b=this.stack.pop();)b.properties.removeCursor(b.propertyName,this);this.target=this.binding=null};c.prototype.propertyDestroyed=function(b,c){this.moveBackward(b,c)};c.prototype.propertyInvalidated=function(b,c){this.binding&&this.binding.notify(this.target)};c.prototype.propertyCommitted=function(b,c){this.binding&&(this.moveBackward(b,c),this.moveForward(),this.binding.notify(this.target))};
c.prototype.moveBackward=function(b,c){for(var d=this.stack,e=d[d.length-1];e.properties!==b&&e.propertyName!==c;)e.properties.removeCursor(e.propertyName,this),d.pop(),e=d[d.length-1]};c.prototype.moveForward=function(){var b=this.stack,c=b[b.length-1],c=c.properties.internalGet(c.propertyName);if((c=n.getProperties(c))&&b.length<this.binding.chain.length)b=this.binding.chain[b.length],this.stack.push({properties:c,propertyName:b}),c.addCursor(b,this),this.moveForward()};return c}(),e=function(){function c(b){this.cursors=
b}c.prototype.remove=function(){for(var b=this.cursors;0<b.length;)b.pop().destroy();this.cursors=null};return c}(),d=function(){function c(b){this.cursor=b}c.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return c}();l.create=function(c,b){var a=n.splitPath(c);if(Array.isArray(a)){for(var q=[],v=0;v<a.length;v++)q.push(new k(a[v],b));return function(b){for(var c=[],d=0,a=q.length;d<a;d++)c[d]=q[d].install(b);return new e(c)}}var g=new k(a,b);return function(b){return new d(g.install(b))}};
l.wire=m;Object.defineProperty(l,"__esModule",{value:!0});l.default=m})},"esri/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(a,l,n){function m(d){return!d?null:d.__accessor__?d.__accessor__:d._accessorProps?d._accessorProps:d.propertyInvalidated?d:null}function k(d,c){return!c?d:Object.keys(c).reduce(function(b,d){if("value"===d)return b[d]=c[d],b;if(void 0===b[d])return b[d]=n.clone(c[d]),b;var e=b[d],a=c[d];if(e===a)return b;if(Array.isArray(a)||Array.isArray(b))e=
e?Array.isArray(e)?b[d]=e.concat():b[d]=[e]:b[d]=[],a&&(Array.isArray(a)||(a=[a]),a.forEach(function(b){-1===e.indexOf(b)&&e.push(b)}));else if(a&&"object"===typeof a)b[d]=k(e,a);else if(!b.hasOwnProperty(d)||c.hasOwnProperty(d))b[d]=a;return b},d||{})}function g(d){if(Array.isArray(d)||-1<d.indexOf(",")){d=Array.isArray(d)?d:d.split(",");for(var c=0,b=d.length;c<b;c++)d[c]=d[c].trim();return 1===d.length?d[0]:d}return d.trim()}function h(d){var c=!1;return function(){c||(c=!0,d())}}l.getProperties=
m;l.isPropertyDeclared=function(d,c){return d&&(d.metadatas&&null!=d.metadatas[c]||null!=d.properties)};l.merge=k;l.pathToArray=function(d){return Array.isArray(d)?d:d.split(".")};l.splitPath=g;l.parse=function(d,c,b,e){c=g(c);if(Array.isArray(c)){var a=c.map(function(c){return e(d,c.trim(),b)});return{remove:h(function(){return a.forEach(function(b){return b.remove()})})}}return e(d,c.trim(),b)};l.once=h;var e=0;l.uid=function(d){if(null==d)return e++;d=m(d);null==d.uid&&(d.uid=e++);return d.uid}})},
"esri/core/lang":function(){define("dojo/_base/array dojo/_base/kernel dojo/_base/lang dojo/date dojo/number dojo/date/locale dojo/i18n!../nls/common".split(" "),function(a,l,n,m,k,g,h){function e(b){return void 0!==b&&null!==b}function d(b,c,d){var q=d.match(/([^\(]+)(\([^\)]+\))?/i),h=n.trim(q[1]);d=c[b];var q=JSON.parse((q[2]?n.trim(q[2]):"{}").replace(/^\(/,"{").replace(/\)$/,"}").replace(/([{,])\s*([0-9a-zA-Z\_]+)\s*:/gi,'$1"$2":').replace(/\"\s*:\s*\'/gi,'":"').replace(/\'\s*(,|\})/gi,'"$1')),
l=q.utcOffset;if(-1===a.indexOf(s,h))h=n.getObject(h),n.isFunction(h)&&(d=h(d,b,c,q));else if("number"===typeof d||"string"===typeof d&&d&&!isNaN(Number(d)))switch(d=Number(d),h){case "NumberFormat":return k.format(d,q);case "DateString":b=new Date(d);if(q.local||q.systemLocale)return q.systemLocale?b.toLocaleDateString()+(q.hideTime?"":" "+b.toLocaleTimeString()):b.toDateString()+(q.hideTime?"":" "+b.toTimeString());b=b.toUTCString();q.hideTime&&(b=b.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));
return b;case "DateFormat":return b=new Date(d),e(l)&&(b=m.add(b,"minute",b.getTimezoneOffset()-l)),g.format(b,q)}return e(d)?d:""}function c(b,d){var e;if(d)for(e in b)b.hasOwnProperty(e)&&(void 0===b[e]?delete b[e]:b[e]instanceof Object&&c(b[e],!0));else for(e in b)b.hasOwnProperty(e)&&void 0===b[e]&&delete b[e];return b}function b(c){if(!c||"object"!=typeof c||n.isFunction(c))return c;if("function"===typeof c.clone)c=c.clone();else if("function"===typeof c.map&&"function"===typeof c.forEach)c=
c.map(b);else{var d={},e=b,a,q,s={};for(a in c){q=c[a];var f=!(a in s)||s[a]!==q;if(!(a in d)||d[a]!==q&&f)d[a]=e?e(q):q}c=d}return c}var s=["NumberFormat","DateString","DateFormat"],q=/<\/?[^>]+>/g;return{equals:function(b,c){return b===c||"number"===typeof b&&isNaN(b)&&"number"===typeof c&&isNaN(c)||n.isFunction((b||{}).getTime)&&n.isFunction((c||{}).getTime)&&b.getTime()==c.getTime()||n.isFunction((b||{}).equals)&&b.equals(c)||n.isFunction((c||{}).equals)&&c.equals(b)||!1},valueOf:function(b,c){for(var d in b)if(b[d]==
c)return d;return null},stripTags:function(b){if(b){var c=typeof b;if("string"===c)b=b.replace(q,"");else if("object"===c)for(var d in b)(c=b[d])&&"string"===typeof c&&(c=c.replace(q,"")),b[d]=c}return b},substitute:function(b,c,q){var s,g,k;e(q)&&(n.isObject(q)?(s=q.first,g=q.dateFormat,k=q.numberFormat):s=q);if(!c||"{*}"===c){c=[];var f;c.push('\x3ctable summary\x3d"'+h.fieldsSummary+'"\x3e\x3ctbody\x3e');for(f in b){q=b[f];if(g&&-1!==a.indexOf(g.properties||"",f))q=d(f,b,g.formatter||"DateString");
else if(k&&-1!==a.indexOf(k.properties||"",f))q=d(f,b,k.formatter||"NumberFormat");c.push("\x3ctr\x3e\x3cth\x3e"+f+"\x3c/th\x3e\x3ctd\x3e"+(e(q)?q:"")+"\x3c/td\x3e\x3c/tr\x3e");if(s)break}c.push("\x3c/tbody\x3e\x3c/table\x3e");return c.join("")}return n.replace(c,n.hitch({obj:b},function(f,b){var c=b.split(":");return 1<c.length?(b=c[0],c.shift(),d(b,this.obj,c.join(":"))):g&&-1!==a.indexOf(g.properties||"",b)?d(b,this.obj,g.formatter||"DateString"):k&&-1!==a.indexOf(k.properties||"",b)?d(b,this.obj,
k.formatter||"NumberFormat"):e(this.obj[b])?this.obj[b]:""}))},filter:function(b,c,d){c=[n.isString(b)?b.split(""):b,d||l.global,n.isString(c)?new Function("item","index","array",c):c];d={};var e;b=c[0];for(e in b)c[2].call(c[e],b[e],e,b)&&(d[e]=b[e]);return d},startsWith:function(b,c,d){d=d||0;return b.indexOf(c,d)===d},endsWith:function(b,c,d){if("number"!==typeof d||!isFinite(d)||Math.floor(d)!==d||d>b.length)d=b.length;d-=c.length;b=b.indexOf(c,d);return-1!==b&&b===d},isDefined:e,fixJson:c,clone:b}})},
"dojo/_base/array":function(){define(["./kernel","../has","./lang"],function(a,l,n){function m(c){return h[c]=new Function("item","index","array",c)}function k(c){var b=!c;return function(d,e,a){var g=0,k=d&&d.length||0,r;k&&"string"==typeof d&&(d=d.split(""));"string"==typeof e&&(e=h[e]||m(e));if(a)for(;g<k;++g){if(r=!e.call(a,d[g],g,d),c^r)return!r}else for(;g<k;++g)if(r=!e(d[g],g,d),c^r)return!r;return b}}function g(c){var b=1,a=0,q=0;c||(b=a=q=-1);return function(g,h,k,r){if(r&&0<b)return d.lastIndexOf(g,
h,k);r=g&&g.length||0;var m=c?r+q:a;k===e?k=c?a:r+q:0>k?(k=r+k,0>k&&(k=a)):k=k>=r?r+q:k;for(r&&"string"==typeof g&&(g=g.split(""));k!=m;k+=b)if(g[k]==h)return k;return-1}}var h={},e,d={every:k(!1),some:k(!0),indexOf:g(!0),lastIndexOf:g(!1),forEach:function(c,b,d){var e=0,a=c&&c.length||0;a&&"string"==typeof c&&(c=c.split(""));"string"==typeof b&&(b=h[b]||m(b));if(d)for(;e<a;++e)b.call(d,c[e],e,c);else for(;e<a;++e)b(c[e],e,c)},map:function(c,b,d,e){var a=0,g=c&&c.length||0;e=new (e||Array)(g);g&&
"string"==typeof c&&(c=c.split(""));"string"==typeof b&&(b=h[b]||m(b));if(d)for(;a<g;++a)e[a]=b.call(d,c[a],a,c);else for(;a<g;++a)e[a]=b(c[a],a,c);return e},filter:function(c,b,d){var e=0,a=c&&c.length||0,g=[],k;a&&"string"==typeof c&&(c=c.split(""));"string"==typeof b&&(b=h[b]||m(b));if(d)for(;e<a;++e)k=c[e],b.call(d,k,e,c)&&g.push(k);else for(;e<a;++e)k=c[e],b(k,e,c)&&g.push(k);return g},clearCache:function(){h={}}};n.mixin(a,d);return d})},"dojo/date":function(){define(["./has","./_base/lang"],
function(a,l){var n={getDaysInMonth:function(a){var k=a.getMonth();return 1==k&&n.isLeapYear(a)?29:[31,28,31,30,31,30,31,31,30,31,30,31][k]},isLeapYear:function(a){a=a.getFullYear();return!(a%400)||!(a%4)&&!!(a%100)},getTimezoneName:function(a){var k=a.toString(),g="",h=k.indexOf("(");if(-1<h)g=k.substring(++h,k.indexOf(")"));else if(h=/([A-Z\/]+) \d{4}$/,k=k.match(h))g=k[1];else if(k=a.toLocaleString(),h=/ ([A-Z\/]+)$/,k=k.match(h))g=k[1];return"AM"==g||"PM"==g?"":g},compare:function(a,k,g){a=new Date(+a);
k=new Date(+(k||new Date));"date"==g?(a.setHours(0,0,0,0),k.setHours(0,0,0,0)):"time"==g&&(a.setFullYear(0,0,0),k.setFullYear(0,0,0));return a>k?1:a<k?-1:0},add:function(a,k,g){var h=new Date(+a),e=!1,d="Date";switch(k){case "day":break;case "weekday":var c;(k=g%5)?c=parseInt(g/5):(k=0<g?5:-5,c=0<g?(g-5)/5:(g+5)/5);var b=a.getDay(),s=0;6==b&&0<g?s=1:0==b&&0>g&&(s=-1);b+=k;if(0==b||6==b)s=0<g?2:-2;g=7*c+k+s;break;case "year":d="FullYear";e=!0;break;case "week":g*=7;break;case "quarter":g*=3;case "month":e=
!0;d="Month";break;default:d="UTC"+k.charAt(0).toUpperCase()+k.substring(1)+"s"}if(d)h["set"+d](h["get"+d]()+g);e&&h.getDate()<a.getDate()&&h.setDate(0);return h},difference:function(a,k,g){k=k||new Date;g=g||"day";var h=k.getFullYear()-a.getFullYear(),e=1;switch(g){case "quarter":a=a.getMonth();k=k.getMonth();a=Math.floor(a/3)+1;k=Math.floor(k/3)+1;e=k+4*h-a;break;case "weekday":h=Math.round(n.difference(a,k,"day"));g=parseInt(n.difference(a,k,"week"));e=h%7;if(0==e)h=5*g;else{var d=0,c=a.getDay();
k=k.getDay();g=parseInt(h/7);e=h%7;a=new Date(a);a.setDate(a.getDate()+7*g);a=a.getDay();if(0<h)switch(!0){case 6==c:d=-1;break;case 0==c:d=0;break;case 6==k:d=-1;break;case 0==k:d=-2;break;case 5<a+e:d=-2}else if(0>h)switch(!0){case 6==c:d=0;break;case 0==c:d=1;break;case 6==k:d=2;break;case 0==k:d=1;break;case 0>a+e:d=2}h=h+d-2*g}e=h;break;case "year":e=h;break;case "month":e=k.getMonth()-a.getMonth()+12*h;break;case "week":e=parseInt(n.difference(a,k,"day")/7);break;case "day":e/=24;case "hour":e/=
60;case "minute":e/=60;case "second":e/=1E3;case "millisecond":e*=k.getTime()-a.getTime()}return Math.round(e)}};l.mixin(l.getObject("dojo.date",!0),n);return n})},"dojo/number":function(){define(["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(a,l,n,m,k){var g={};a.setObject("dojo.number",g);g.format=function(e,d){d=a.mixin({},d||{});var c=l.normalizeLocale(d.locale),c=l.getLocalization("dojo.cldr","number",c);d.customs=c;c=d.pattern||c[(d.type||"decimal")+"Format"];
return isNaN(e)||Infinity==Math.abs(e)?null:g._applyPattern(e,c,d)};g._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;g._applyPattern=function(e,d,c){c=c||{};var b=c.customs.group,a=c.customs.decimal;d=d.split(";");var q=d[0];d=d[0>e?1:0]||"-"+q;if(-1!=d.indexOf("%"))e*=100;else if(-1!=d.indexOf("\u2030"))e*=1E3;else if(-1!=d.indexOf("\u00a4"))b=c.customs.currencyGroup||b,a=c.customs.currencyDecimal||a,d=d.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(b,d,e,a){b=c[["symbol","currency","displayName"][e.length-
1]]||c.currency||"";return!b?"":d+b+a});else if(-1!=d.indexOf("E"))throw Error("exponential notation not supported");var h=g._numberPatternRE,q=q.match(h);if(!q)throw Error("unable to find a number expression in pattern: "+d);!1===c.fractional&&(c.places=0);return d.replace(h,g._formatAbsolute(e,q[0],{decimal:a,group:b,places:c.places,round:c.round}))};g.round=function(e,d,c){c=10/(c||10);return(c*+e).toFixed(d)/c};if(0==(0.9).toFixed()){var h=g.round;g.round=function(e,d,c){var b=Math.pow(10,-d||
0),a=Math.abs(e);if(!e||a>=b)b=0;else if(a/=b,0.5>a||0.95<=a)b=0;return h(e,d,c)+(0<e?b:-b)}}g._formatAbsolute=function(e,d,c){c=c||{};!0===c.places&&(c.places=0);Infinity===c.places&&(c.places=6);d=d.split(".");var b="string"==typeof c.places&&c.places.indexOf(","),a=c.places;b?a=c.places.substring(b+1):0<=a||(a=(d[1]||[]).length);0>c.round||(e=g.round(e,a,c.round));e=String(Math.abs(e)).split(".");var q=e[1]||"";d[1]||c.places?(b&&(c.places=c.places.substring(0,b)),b=void 0!==c.places?c.places:
d[1]&&d[1].lastIndexOf("0")+1,b>q.length&&(e[1]=m.pad(q,b,"0",!0)),a<q.length&&(e[1]=q.substr(0,a))):e[1]&&e.pop();a=d[0].replace(",","");b=a.indexOf("0");-1!=b&&(b=a.length-b,b>e[0].length&&(e[0]=m.pad(e[0],b)),-1==a.indexOf("#")&&(e[0]=e[0].substr(e[0].length-b)));var a=d[0].lastIndexOf(","),h,k;-1!=a&&(h=d[0].length-a-1,d=d[0].substr(0,a),a=d.lastIndexOf(","),-1!=a&&(k=d.length-a-1));d=[];for(a=e[0];a;)b=a.length-h,d.push(0<b?a.substr(b):a),a=0<b?a.slice(0,b):"",k&&(h=k,delete k);e[0]=d.reverse().join(c.group||
",");return e.join(c.decimal||".")};g.regexp=function(a){return g._parseInfo(a).regexp};g._parseInfo=function(a){a=a||{};var d=l.normalizeLocale(a.locale),d=l.getLocalization("dojo.cldr","number",d),c=a.pattern||d[(a.type||"decimal")+"Format"],b=d.group,s=d.decimal,q=1;if(-1!=c.indexOf("%"))q/=100;else if(-1!=c.indexOf("\u2030"))q/=1E3;else{var h=-1!=c.indexOf("\u00a4");h&&(b=d.currencyGroup||b,s=d.currencyDecimal||s)}d=c.split(";");1==d.length&&d.push("-"+d[0]);d=k.buildGroupRE(d,function(c){c="(?:"+
k.escapeString(c,".")+")";return c.replace(g._numberPatternRE,function(c){var d={signed:!1,separator:a.strict?b:[b,""],fractional:a.fractional,decimal:s,exponent:!1};c=c.split(".");var h=a.places;1==c.length&&1!=q&&(c[1]="###");1==c.length||0===h?d.fractional=!1:(void 0===h&&(h=a.pattern?c[1].lastIndexOf("0")+1:Infinity),h&&void 0==a.fractional&&(d.fractional=!0),!a.places&&h<c[1].length&&(h+=","+c[1].length),d.places=h);c=c[0].split(",");1<c.length&&(d.groupSize=c.pop().length,1<c.length&&(d.groupSize2=
c.pop().length));return"("+g._realNumberRegexp(d)+")"})},!0);h&&(d=d.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(b,c,d,q){b=k.escapeString(a[["symbol","currency","displayName"][d.length-1]]||a.currency||"");if(!b)return"";c=c?"[\\s\\xa0]":"";q=q?"[\\s\\xa0]":"";return!a.strict?(c&&(c+="*"),q&&(q+="*"),"(?:"+c+b+q+")?"):c+b+q}));return{regexp:d.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:b,decimal:s,factor:q}};g.parse=function(a,d){var c=g._parseInfo(d),b=RegExp("^"+c.regexp+"$").exec(a);if(!b)return NaN;
var s=b[1];if(!b[1]){if(!b[2])return NaN;s=b[2];c.factor*=-1}s=s.replace(RegExp("["+c.group+"\\s\\xa0]","g"),"").replace(c.decimal,".");return s*c.factor};g._realNumberRegexp=function(a){a=a||{};"places"in a||(a.places=Infinity);"string"!=typeof a.decimal&&(a.decimal=".");if(!("fractional"in a)||/^0/.test(a.places))a.fractional=[!0,!1];"exponent"in a||(a.exponent=[!0,!1]);"eSigned"in a||(a.eSigned=[!0,!1]);var d=g._integerRegexp(a),c=k.buildGroupRE(a.fractional,function(b){var c="";b&&0!==a.places&&
(c="\\"+a.decimal,c=Infinity==a.places?"(?:"+c+"\\d+)?":c+("\\d{"+a.places+"}"));return c},!0),b=k.buildGroupRE(a.exponent,function(b){return b?"([eE]"+g._integerRegexp({signed:a.eSigned})+")":""}),d=d+c;c&&(d="(?:(?:"+d+")|(?:"+c+"))");return d+b};g._integerRegexp=function(a){a=a||{};"signed"in a||(a.signed=[!0,!1]);"separator"in a?"groupSize"in a||(a.groupSize=3):a.separator="";var d=k.buildGroupRE(a.signed,function(b){return b?"[-+]":""},!0),c=k.buildGroupRE(a.separator,function(b){if(!b)return"(?:\\d+)";
b=k.escapeString(b);" "==b?b="\\s":"\u00a0"==b&&(b="\\s\\xa0");var c=a.groupSize,d=a.groupSize2;return d?(b="(?:0|[1-9]\\d{0,"+(d-1)+"}(?:["+b+"]\\d{"+d+"})*["+b+"]\\d{"+c+"})",0<c-d?"(?:"+b+"|(?:0|[1-9]\\d{0,"+(c-1)+"}))":b):"(?:0|[1-9]\\d{0,"+(c-1)+"}(?:["+b+"]\\d{"+c+"})*)"},!0);return d+c};return g})},"dojo/i18n":function(){define("./_base/kernel require ./has ./_base/array ./_base/config ./_base/lang ./_base/xhr ./json module".split(" "),function(a,l,n,m,k,g,h,e,d){n.add("dojo-preload-i18n-Api",
1);h=a.i18n={};var c=/(^.*(^|\/)nls)(\/|$)([^\/]*)\/?([^\/]*)/,b=function(f,p,b,c){var d=[b+c];p=p.split("-");for(var a="",e=0;e<p.length;e++)if(a+=(a?"-":"")+p[e],!f||f[a])d.push(b+a+"/"+c),d.specificity=a;return d},s={},q=function(f,p,b){b=b?b.toLowerCase():a.locale;f=f.replace(/\./g,"/");p=p.replace(/\./g,"/");return/root/i.test(b)?f+"/nls/"+p:f+"/nls/"+b+"/"+p},v=a.getL10nName=function(f,p,b){return d.id+"!"+q(f,p,b)},t=function(f,p,c,d,a,e){f([p],function(x){var q=g.clone(x.root||x.ROOT),r=b(!x._v1x&&
x,a,c,d);f(r,function(){for(var f=1;f<r.length;f++)q=g.mixin(g.clone(q),arguments[f]);s[p+"/"+a]=q;q.$locale=r.specificity;e()})})},u=function(f){var p=k.extraLocale||[],p=g.isArray(p)?p:[p];p.push(f);return p},r=function(b,d,q){if(n("dojo-preload-i18n-Api")){var r=b.split("*"),h="preload"==r[1];h&&(s[b]||(s[b]=1,p(r[2],e.parse(r[3]),1,d)),q(1));if(!(r=h))y&&f.push([b,d,q]),r=y;if(r)return}b=c.exec(b);var k=b[1]+"/",v=b[5]||b[4],l=k+v,r=(b=b[5]&&b[4])||a.locale||"",w=l+"/"+r;b=b?[r]:u(r);var D=b.length,
J=function(){--D||q(g.delegate(s[w]))};m.forEach(b,function(f){var p=l+"/"+f;n("dojo-preload-i18n-Api")&&x(p);s[p]?J():t(d,l,k,v,f,J)})};n("dojo-preload-i18n-Api");var w=h.normalizeLocale=function(f){f=f?f.toLowerCase():a.locale;return"root"==f?"ROOT":f},y=0,f=[],p=h._preloadLocalizations=function(p,b,c,d){function e(f,p){d([f],p)}function x(f,p){for(var b=f.split("-");b.length;){if(p(b.join("-")))return;b.pop()}p("ROOT")}function q(){for(--y;!y&&f.length;)r.apply(null,f.shift())}function h(f){f=
w(f);x(f,function(c){if(0<=m.indexOf(b,c)){var a=p.replace(/\./g,"/")+"_"+c;y++;e(a,function(p){for(var b in p){var a=p[b],e=b.match(/(.+)\/([^\/]+)$/),r;if(e&&(r=e[2],e=e[1]+"/",a._localized)){var h;if("ROOT"===c){var k=h=a._localized;delete a._localized;k.root=a;s[l.toAbsMid(b)]=k}else h=a._localized,s[l.toAbsMid(e+r+"/"+c)]=a;c!==f&&function(p,b,c,a){var e=[],r=[];x(f,function(f){a[f]&&(e.push(l.toAbsMid(p+f+"/"+b)),r.push(l.toAbsMid(p+b+"/"+f)))});e.length?(y++,d(e,function(){for(var d=e.length-
1;0<=d;d--)c=g.mixin(g.clone(c),arguments[d]),s[r[d]]=c;s[l.toAbsMid(p+b+"/"+f)]=g.clone(c);q()})):s[l.toAbsMid(p+b+"/"+f)]=c}(e,r,a,h)}}q()});return!0}return!1})}d=d||l;h();m.forEach(a.config.extraLocale,h)},x=function(){};new Function("__bundle","__checkForLegacyModules","__mid","__amdValue","var define \x3d function(mid, factory){define.called \x3d 1; __amdValue.result \x3d factory || mid;},\t   require \x3d function(){define.called \x3d 1;};try{define.called \x3d 0;eval(__bundle);if(define.called\x3d\x3d1)return __amdValue;if((__checkForLegacyModules \x3d __checkForLegacyModules(__mid)))return __checkForLegacyModules;}catch(e){}try{return eval('('+__bundle+')');}catch(e){return e;}");
x=function(f){for(var p,b=f.split("/"),c=a.global[b[0]],d=1;c&&d<b.length-1;c=c[b[d++]]);c&&((p=c[b[d]])||(p=c[b[d].replace(/-/g,"_")]),p&&(s[f]=p));return p};h.getLocalization=function(f,p,b){var c;f=q(f,p,b);r(f,l,function(f){c=f});return c};return g.mixin(h,{dynamic:!0,normalize:function(f,p){return/^\./.test(f)?p(f):f},load:r,cache:s,getL10nName:v})})},"dojo/_base/xhr":function(){define("./kernel ./sniff require ../io-query ../dom ../dom-form ./Deferred ./config ./json ./lang ./array ../on ../aspect ../request/watch ../request/xhr ../request/util".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u){a._xhrObj=t._create;var r=a.config;a.objectToQuery=m.objectToQuery;a.queryToObject=m.queryToObject;a.fieldToObject=g.fieldToObject;a.formToObject=g.toObject;a.formToQuery=g.toQuery;a.formToJson=g.toJson;a._blockAsync=!1;l.add("native-xhr2-blob",function(){if(l("native-xhr2")){var f=new XMLHttpRequest;f.open("GET","/",!0);f.responseType="blob";var p=f.responseType;f.abort();return"blob"===p}});var w=a._contentHandlers=a.contentHandlers={text:function(f){return f.responseText},
json:function(f){return d.fromJson(f.responseText||null)},"json-comment-filtered":function(f){e.useCommentedJson||console.warn("Consider using the standard mimetype:application/json. json-commenting can introduce security issues. To decrease the chances of hijacking, use the standard the 'json' handler and prefix your json with: {}\x26\x26\nUse djConfig.useCommentedJson\x3dtrue to turn off this message.");f=f.responseText;var p=f.indexOf("/*"),b=f.lastIndexOf("*/");if(-1==p||-1==b)throw Error("JSON was not comment filtered");
return d.fromJson(f.substring(p+2,b))},javascript:function(f){return a.eval(f.responseText)},xml:function(f){var p=f.responseXML;p&&(l("dom-qsa2.1")&&!p.querySelectorAll&&l("dom-parser"))&&(p=(new DOMParser).parseFromString(f.responseText,"application/xml"));if(l("ie")&&(!p||!p.documentElement)){var c=function(f){return"MSXML"+f+".DOMDocument"},c=["Microsoft.XMLDOM",c(6),c(4),c(3),c(2)];b.some(c,function(b){try{var c=new ActiveXObject(b);c.async=!1;c.loadXML(f.responseText);p=c}catch(d){return!1}return!0})}return p},
"json-comment-optional":function(f){return f.responseText&&/^[^{\[]*\/\*/.test(f.responseText)?w["json-comment-filtered"](f):w.json(f)}};l("native-xhr2")&&(w.arraybuffer=w.blob=w.document=function(f,p){return"blob"===p.args.handleAs&&!l("native-xhr2-blob")?new Blob([f.response],{type:f.getResponseHeader("Content-Type")}):f.response});a._ioSetArgs=function(f,p,b,d){var e={args:f,url:f.url},x=null;if(f.form){var x=k.byId(f.form),q=x.getAttributeNode("action");e.url=e.url||(q?q.value:a.doc?a.doc.URL:
null);x=g.toObject(x)}q=[{}];x&&q.push(x);f.content&&q.push(f.content);f.preventCache&&q.push({"dojo.preventCache":(new Date).valueOf()});e.query=m.objectToQuery(c.mixin.apply(null,q));e.handleAs=f.handleAs||"text";var s=new h(function(f){f.canceled=!0;p&&p(f);var b=f.ioArgs.error;b||(b=Error("request cancelled"),b.dojoType="cancel",f.ioArgs.error=b);return b});s.addCallback(b);var v=f.load;v&&c.isFunction(v)&&s.addCallback(function(p){return v.call(f,p,e)});var t=f.error;t&&c.isFunction(t)&&s.addErrback(function(p){return t.call(f,
p,e)});var l=f.handle;l&&c.isFunction(l)&&s.addBoth(function(p){return l.call(f,p,e)});s.addErrback(function(f){return d(f,s)});r.ioPublish&&(a.publish&&!1!==e.args.ioPublish)&&(s.addCallbacks(function(f){a.publish("/dojo/io/load",[s,f]);return f},function(f){a.publish("/dojo/io/error",[s,f]);return f}),s.addBoth(function(f){a.publish("/dojo/io/done",[s,f]);return f}));s.ioArgs=e;return s};var y=function(f){f=w[f.ioArgs.handleAs](f.ioArgs.xhr,f.ioArgs);return void 0===f?null:f},f=function(f,p){p.ioArgs.args.failOk||
console.error(f);return f},p=function(f){0>=x&&(x=0,r.ioPublish&&(a.publish&&(!f||f&&!1!==f.ioArgs.args.ioPublish))&&a.publish("/dojo/io/stop"))},x=0;q.after(v,"_onAction",function(){x-=1});q.after(v,"_onInFlight",p);a._ioCancelAll=v.cancelAll;a._ioNotifyStart=function(f){r.ioPublish&&(a.publish&&!1!==f.ioArgs.args.ioPublish)&&(x||a.publish("/dojo/io/start"),x+=1,a.publish("/dojo/io/send",[f]))};a._ioWatch=function(f,b,d,a){f.ioArgs.options=f.ioArgs.args;c.mixin(f,{response:f.ioArgs,isValid:function(p){return b(f)},
isReady:function(p){return d(f)},handleResponse:function(p){return a(f)}});v(f);p(f)};a._ioAddQueryToUrl=function(f){f.query.length&&(f.url+=(-1==f.url.indexOf("?")?"?":"\x26")+f.query,f.query=null)};a.xhr=function(p,b,c){var d,e=a._ioSetArgs(b,function(f){d&&d.cancel()},y,f),x=e.ioArgs;"postData"in b?x.query=b.postData:"putData"in b?x.query=b.putData:"rawBody"in b?x.query=b.rawBody:(2<arguments.length&&!c||-1==="POST|PUT".indexOf(p.toUpperCase()))&&a._ioAddQueryToUrl(x);var q;l("native-xhr2")&&(q=
{arraybuffer:1,blob:1,document:1});q=l("native-xhr2")&&q[b.handleAs]?b.handleAs:"text";"blob"===q&&!l("native-xhr2-blob")&&(q="arraybuffer");q={method:p,handleAs:q,responseType:b.responseType,timeout:b.timeout,withCredentials:b.withCredentials,ioArgs:x};"undefined"!==typeof b.headers&&(q.headers=b.headers);"undefined"!==typeof b.contentType&&(q.headers||(q.headers={}),q.headers["Content-Type"]=b.contentType);"undefined"!==typeof x.query&&(q.data=x.query);"undefined"!==typeof b.sync&&(q.sync=b.sync);
a._ioNotifyStart(e);try{d=t(x.url,q,!0)}catch(s){return e.cancel(),e}e.ioArgs.xhr=d.response.xhr;d.then(function(){e.resolve(e)}).otherwise(function(f){x.error=f;f.response&&(f.status=f.response.status,f.responseText=f.response.text,f.xhr=f.response.xhr);e.reject(f)});return e};a.xhrGet=function(f){return a.xhr("GET",f)};a.rawXhrPost=a.xhrPost=function(f){return a.xhr("POST",f,!0)};a.rawXhrPut=a.xhrPut=function(f){return a.xhr("PUT",f,!0)};a.xhrDelete=function(f){return a.xhr("DELETE",f)};a._isDocumentOk=
function(f){return u.checkStatus(f.status)};a._getText=function(f){var p;a.xhrGet({url:f,sync:!0,load:function(f){p=f}});return p};c.mixin(a.xhr,{_xhrObj:a._xhrObj,fieldToObject:g.fieldToObject,formToObject:g.toObject,objectToQuery:m.objectToQuery,formToQuery:g.toQuery,formToJson:g.toJson,queryToObject:m.queryToObject,contentHandlers:w,_ioSetArgs:a._ioSetArgs,_ioCancelAll:a._ioCancelAll,_ioNotifyStart:a._ioNotifyStart,_ioWatch:a._ioWatch,_ioAddQueryToUrl:a._ioAddQueryToUrl,_isDocumentOk:a._isDocumentOk,
_getText:a._getText,get:a.xhrGet,post:a.xhrPost,put:a.xhrPut,del:a.xhrDelete});return a.xhr})},"dojo/_base/sniff":function(){define(["./kernel","./lang","../sniff"],function(a,l,n){a._name="browser";l.mixin(a,{isBrowser:!0,isFF:n("ff"),isIE:n("ie"),isKhtml:n("khtml"),isWebKit:n("webkit"),isMozilla:n("mozilla"),isMoz:n("mozilla"),isOpera:n("opera"),isSafari:n("safari"),isChrome:n("chrome"),isMac:n("mac"),isIos:n("ios"),isAndroid:n("android"),isWii:n("wii"),isQuirks:n("quirks"),isAir:n("air")});return n})},
"dojo/io-query":function(){define(["./_base/lang"],function(a){var l={};return{objectToQuery:function(n){var m=encodeURIComponent,k=[],g;for(g in n){var h=n[g];if(h!=l[g]){var e=m(g)+"\x3d";if(a.isArray(h))for(var d=0,c=h.length;d<c;++d)k.push(e+m(h[d]));else k.push(e+m(h))}}return k.join("\x26")},queryToObject:function(l){var m=decodeURIComponent;l=l.split("\x26");for(var k={},g,h,e=0,d=l.length;e<d;++e)if(h=l[e],h.length){var c=h.indexOf("\x3d");0>c?(g=m(h),h=""):(g=m(h.slice(0,c)),h=m(h.slice(c+
1)));"string"==typeof k[g]&&(k[g]=[k[g]]);a.isArray(k[g])?k[g].push(h):k[g]=h}return k}}})},"dojo/dom":function(){define(["./sniff","./_base/window","./_base/kernel"],function(a,l,n){if(7>=a("ie"))try{document.execCommand("BackgroundImageCache",!1,!0)}catch(m){}var k={};a("ie")?k.byId=function(a,e){if("string"!=typeof a)return a;var d=e||l.doc,c=a&&d.getElementById(a);if(c&&(c.attributes.id.value==a||c.id==a))return c;d=d.all[a];if(!d||d.nodeName)d=[d];for(var b=0;c=d[b++];)if(c.attributes&&c.attributes.id&&
c.attributes.id.value==a||c.id==a)return c}:k.byId=function(a,e){return("string"==typeof a?(e||l.doc).getElementById(a):a)||null};n=n.global.document||null;a.add("dom-contains",!(!n||!n.contains));k.isDescendant=a("dom-contains")?function(a,e){return!(!(e=k.byId(e))||!e.contains(k.byId(a)))}:function(a,e){try{a=k.byId(a);for(e=k.byId(e);a;){if(a==e)return!0;a=a.parentNode}}catch(d){}return!1};a.add("css-user-select",function(a,e,d){if(!d)return!1;a=d.style;e=["Khtml","O","Moz","Webkit"];d=e.length;
var c="userSelect";do if("undefined"!==typeof a[c])return c;while(d--&&(c=e[d]+"UserSelect"));return!1});var g=a("css-user-select");k.setSelectable=g?function(a,e){k.byId(a).style[g]=e?"":"none"}:function(a,e){a=k.byId(a);var d=a.getElementsByTagName("*"),c=d.length;if(e)for(a.removeAttribute("unselectable");c--;)d[c].removeAttribute("unselectable");else for(a.setAttribute("unselectable","on");c--;)d[c].setAttribute("unselectable","on")};return k})},"dojo/_base/window":function(){define(["./kernel",
"./lang","../sniff"],function(a,l,n){var m={global:a.global,doc:a.global.document||null,body:function(k){k=k||a.doc;return k.body||k.getElementsByTagName("body")[0]},setContext:function(k,g){a.global=m.global=k;a.doc=m.doc=g},withGlobal:function(k,g,h,e){var d=a.global;try{return a.global=m.global=k,m.withDoc.call(null,k.document,g,h,e)}finally{a.global=m.global=d}},withDoc:function(k,g,h,e){var d=m.doc,c=n("quirks"),b=n("ie"),s,q,v;try{a.doc=m.doc=k;a.isQuirks=n.add("quirks","BackCompat"==a.doc.compatMode,
!0,!0);if(n("ie")&&(v=k.parentWindow)&&v.navigator)s=parseFloat(v.navigator.appVersion.split("MSIE ")[1])||void 0,(q=k.documentMode)&&(5!=q&&Math.floor(s)!=q)&&(s=q),a.isIE=n.add("ie",s,!0,!0);h&&"string"==typeof g&&(g=h[g]);return g.apply(h,e||[])}finally{a.doc=m.doc=d,a.isQuirks=n.add("quirks",c,!0,!0),a.isIE=n.add("ie",b,!0,!0)}}};l.mixin(a,m);return m})},"dojo/dom-form":function(){define(["./_base/lang","./dom","./io-query","./json"],function(a,l,n,m){var k={fieldToObject:function(a){var h=null;
if(a=l.byId(a)){var e=a.name,d=(a.type||"").toLowerCase();if(e&&d&&!a.disabled)if("radio"==d||"checkbox"==d)a.checked&&(h=a.value);else if(a.multiple){h=[];for(a=[a.firstChild];a.length;)for(e=a.pop();e;e=e.nextSibling)if(1==e.nodeType&&"option"==e.tagName.toLowerCase())e.selected&&h.push(e.value);else{e.nextSibling&&a.push(e.nextSibling);e.firstChild&&a.push(e.firstChild);break}}else h=a.value}return h},toObject:function(g){var h={};g=l.byId(g).elements;for(var e=0,d=g.length;e<d;++e){var c=g[e],
b=c.name,s=(c.type||"").toLowerCase();if(b&&s&&0>"file|submit|image|reset|button".indexOf(s)&&!c.disabled){var q=h,v=b,c=k.fieldToObject(c);if(null!==c){var t=q[v];"string"==typeof t?q[v]=[t,c]:a.isArray(t)?t.push(c):q[v]=c}"image"==s&&(h[b+".x"]=h[b+".y"]=h[b].x=h[b].y=0)}}return h},toQuery:function(a){return n.objectToQuery(k.toObject(a))},toJson:function(a,h){return m.stringify(k.toObject(a),null,h?4:0)}};return k})},"dojo/json":function(){define(["./has"],function(a){var l="undefined"!=typeof JSON;
a.add("json-parse",l);a.add("json-stringify",l&&'{"a":1}'==JSON.stringify({a:0},function(a,k){return k||1}));if(a("json-stringify"))return JSON;var n=function(a){return('"'+a.replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r")};return{parse:a("json-parse")?JSON.parse:function(a,k){if(k&&!/^([\s\[\{]*(?:"(?:\\.|[^"])*"|-?\d[\d\.]*(?:[Ee][+-]?\d+)?|null|true|false|)[\s\]\}]*(?:,|:|$))+$/.test(a))throw new SyntaxError("Invalid characters in JSON");
return eval("("+a+")")},stringify:function(a,k,g){function h(d,c,b){k&&(d=k(b,d));var a;a=typeof d;if("number"==a)return isFinite(d)?d+"":"null";if("boolean"==a)return d+"";if(null===d)return"null";if("string"==typeof d)return n(d);if("function"==a||"undefined"==a)return e;if("function"==typeof d.toJSON)return h(d.toJSON(b),c,b);if(d instanceof Date)return'"{FullYear}-{Month+}-{Date}T{Hours}:{Minutes}:{Seconds}Z"'.replace(/\{(\w+)(\+)?\}/g,function(b,c,f){b=d["getUTC"+c]()+(f?1:0);return 10>b?"0"+
b:b});if(d.valueOf()!==d)return h(d.valueOf(),c,b);var q=g?c+g:"",v=g?" ":"",t=g?"\n":"";if(d instanceof Array){var v=d.length,m=[];for(b=0;b<v;b++)a=h(d[b],q,b),"string"!=typeof a&&(a="null"),m.push(t+q+a);return"["+m.join(",")+t+c+"]"}m=[];for(b in d){var r;if(d.hasOwnProperty(b)){if("number"==typeof b)r='"'+b+'"';else if("string"==typeof b)r=n(b);else continue;a=h(d[b],q,b);"string"==typeof a&&m.push(t+q+r+":"+v+a)}}return"{"+m.join(",")+t+c+"}"}var e;"string"==typeof k&&(g=k,k=null);return h(a,
"","")}}})},"dojo/_base/Deferred":function(){define("./kernel ../Deferred ../promise/Promise ../errors/CancelError ../has ./lang ../when".split(" "),function(a,l,n,m,k,g,h){var e=function(){},d=Object.freeze||function(){},c=a.Deferred=function(b){function a(f){if(t)throw Error("This deferred has already been resolved");h=f;t=!0;q()}function q(){for(var p;!p&&f;){var b=f;f=f.next;if(p=b.progress==e)t=!1;var c=w?b.error:b.resolved;k("config-useDeferredInstrumentation")&&w&&l.instrumentRejected&&l.instrumentRejected(h,
!!c);if(c)try{var d=c(h);d&&"function"===typeof d.then?d.then(g.hitch(b.deferred,"resolve"),g.hitch(b.deferred,"reject"),g.hitch(b.deferred,"progress")):(c=p&&void 0===d,p&&!c&&(w=d instanceof Error),b.deferred[c&&w?"reject":"resolve"](c?h:d))}catch(a){b.deferred.reject(a)}else w?b.deferred.reject(h):b.deferred.resolve(h)}}var h,t,u,r,w,y,f,p=this.promise=new n;this.isResolved=p.isResolved=function(){return 0==r};this.isRejected=p.isRejected=function(){return 1==r};this.isFulfilled=p.isFulfilled=
function(){return 0<=r};this.isCanceled=p.isCanceled=function(){return u};this.resolve=this.callback=function(f){this.fired=r=0;this.results=[f,null];a(f)};this.reject=this.errback=function(p){w=!0;this.fired=r=1;k("config-useDeferredInstrumentation")&&l.instrumentRejected&&l.instrumentRejected(p,!!f);a(p);this.results=[null,p]};this.progress=function(p){for(var b=f;b;){var c=b.progress;c&&c(p);b=b.next}};this.addCallbacks=function(f,p){this.then(f,p,e);return this};p.then=this.then=function(b,d,
a){var x=a==e?this:new c(p.cancel);b={resolved:b,error:d,progress:a,deferred:x};f?y=y.next=b:f=y=b;t&&q();return x.promise};var x=this;p.cancel=this.cancel=function(){if(!t){var f=b&&b(x);t||(f instanceof Error||(f=new m(f)),f.log=!1,x.reject(f))}u=!0};d(p)};g.extend(c,{addCallback:function(b){return this.addCallbacks(g.hitch.apply(a,arguments))},addErrback:function(b){return this.addCallbacks(null,g.hitch.apply(a,arguments))},addBoth:function(b){var c=g.hitch.apply(a,arguments);return this.addCallbacks(c,
c)},fired:-1});c.when=a.when=h;return c})},"dojo/Deferred":function(){define(["./has","./_base/lang","./errors/CancelError","./promise/Promise","require"],function(a,l,n,m,k){var g=Object.freeze||function(){},h=function(b,c,d,a,g){for(g=0;g<b.length;g++)e(b[g],c,d,a)},e=function(b,a,e,g){g=b[a];var h=b.deferred;if(g)try{var r=g(e);0===a?"undefined"!==typeof r&&c(h,a,r):r&&"function"===typeof r.then?(b.cancel=r.cancel,r.then(d(h,1),d(h,2),d(h,0))):c(h,1,r)}catch(k){c(h,2,k)}else c(h,a,e)},d=function(b,
d){return function(a){c(b,d,a)}},c=function(b,c,d){if(!b.isCanceled())switch(c){case 0:b.progress(d);break;case 1:b.resolve(d);break;case 2:b.reject(d)}},b=function(c){var d=this.promise=new m,a=this,k,l,r=!1,w=[];this.isResolved=d.isResolved=function(){return 1===k};this.isRejected=d.isRejected=function(){return 2===k};this.isFulfilled=d.isFulfilled=function(){return!!k};this.isCanceled=d.isCanceled=function(){return r};this.progress=function(f,p){if(k){if(!0===p)throw Error("This deferred has already been fulfilled.");
return d}h(w,0,f,null,a);return d};this.resolve=function(f,p){if(k){if(!0===p)throw Error("This deferred has already been fulfilled.");return d}h(w,k=1,l=f,null,a);w=null;return d};var y=this.reject=function(f,p){if(k){if(!0===p)throw Error("This deferred has already been fulfilled.");return d}h(w,k=2,l=f,void 0,a);w=null;return d};this.then=d.then=function(f,p,c){var a=[c,f,p];a.cancel=d.cancel;a.deferred=new b(function(f){return a.cancel&&a.cancel(f)});k&&!w?e(a,k,l,void 0):w.push(a);return a.deferred.promise};
this.cancel=d.cancel=function(f,p){if(k){if(!0===p)throw Error("This deferred has already been fulfilled.");}else{if(c){var b=c(f);f="undefined"===typeof b?f:b}r=!0;if(k){if(2===k&&l===f)return f}else return"undefined"===typeof f&&(f=new n),y(f),f}};g(d)};b.prototype.toString=function(){return"[object Deferred]"};k&&k(b);return b})},"dojo/errors/CancelError":function(){define(["./create"],function(a){return a("CancelError",null,null,{dojoType:"cancel"})})},"dojo/errors/create":function(){define(["../_base/lang"],
function(a){return function(l,n,m,k){m=m||Error;var g=function(a){if(m===Error){Error.captureStackTrace&&Error.captureStackTrace(this,g);var e=Error.call(this,a),d;for(d in e)e.hasOwnProperty(d)&&(this[d]=e[d]);this.message=a;this.stack=e.stack}else m.apply(this,arguments);n&&n.apply(this,arguments)};g.prototype=a.delegate(m.prototype,k);g.prototype.name=l;return g.prototype.constructor=g}})},"dojo/promise/Promise":function(){define(["../_base/lang"],function(a){function l(){throw new TypeError("abstract");
}return a.extend(function(){},{then:function(a,m,k){l()},cancel:function(a,m){l()},isResolved:function(){l()},isRejected:function(){l()},isFulfilled:function(){l()},isCanceled:function(){l()},always:function(a){return this.then(a,a)},otherwise:function(a){return this.then(null,a)},trace:function(){return this},traceRejected:function(){return this},toString:function(){return"[object Promise]"}})})},"dojo/when":function(){define(["./Deferred","./promise/Promise"],function(a,l){return function(n,m,k,
g){var h=n&&"function"===typeof n.then,e=h&&n instanceof l;if(h)e||(h=new a(n.cancel),n.then(h.resolve,h.reject,h.progress),n=h.promise);else return 1<arguments.length?m?m(n):n:(new a).resolve(n);return m||k||g?n.then(m,k,g):n}})},"dojo/_base/json":function(){define(["./kernel","../json"],function(a,l){a.fromJson=function(a){return eval("("+a+")")};a._escapeString=l.stringify;a.toJsonIndentStr="\t";a.toJson=function(n,m){return l.stringify(n,function(a,g){if(g){var h=g.__json__||g.json;if("function"==
typeof h)return h.call(g)}return g},m&&a.toJsonIndentStr)};return a})},"dojo/on":function(){define(["./has!dom-addeventlistener?:./aspect","./_base/kernel","./sniff"],function(a,l,n){function m(f,p,b,c,a){if(c=p.match(/(.*):(.*)/))return p=c[2],c=c[1],e.selector(c,p).call(a,f,b);n("touch")&&(d.test(p)&&(b=z(b)),!n("event-orientationchange")&&"orientationchange"==p&&(p="resize",f=window,b=z(b)));v&&(b=v(b));if(f.addEventListener){var x=p in s,q=x?s[p]:p;f.addEventListener(q,b,x);return{remove:function(){f.removeEventListener(q,
b,x)}}}if(w&&f.attachEvent)return w(f,"on"+p,b);throw Error("Target must be an event emitter");}function k(){this.cancelable=!1;this.defaultPrevented=!0}function g(){this.bubbles=!1}var h=window.ScriptEngineMajorVersion;n.add("jscript",h&&h()+ScriptEngineMinorVersion()/10);n.add("event-orientationchange",n("touch")&&!n("android"));n.add("event-stopimmediatepropagation",window.Event&&!!window.Event.prototype&&!!window.Event.prototype.stopImmediatePropagation);n.add("event-focusin",function(f,p,b){return"onfocusin"in
b});n("touch")&&n.add("touch-can-modify-event-delegate",function(){var f=function(){};f.prototype=document.createEvent("MouseEvents");try{var p=new f;p.target=null;return null===p.target}catch(b){return!1}});var e=function(f,p,b,c){return"function"==typeof f.on&&"function"!=typeof p&&!f.nodeType?f.on(p,b):e.parse(f,p,b,m,c,this)};e.pausable=function(f,p,b,c){var d;f=e(f,p,function(){if(!d)return b.apply(this,arguments)},c);f.pause=function(){d=!0};f.resume=function(){d=!1};return f};e.once=function(f,
p,b,c){var d=e(f,p,function(){d.remove();return b.apply(this,arguments)});return d};e.parse=function(f,p,b,c,d,a){var x;if(p.call)return p.call(a,f,b);p instanceof Array?x=p:-1<p.indexOf(",")&&(x=p.split(/\s*,\s*/));if(x){var q=[];p=0;for(var r;r=x[p++];)q.push(e.parse(f,r,b,c,d,a));q.remove=function(){for(var f=0;f<q.length;f++)q[f].remove()};return q}return c(f,p,b,d,a)};var d=/^touch/;e.matches=function(f,p,b,c,d){d=d&&"function"==typeof d.matches?d:l.query;c=!1!==c;1!=f.nodeType&&(f=f.parentNode);
for(;!d.matches(f,p,b);)if(f==b||!1===c||!(f=f.parentNode)||1!=f.nodeType)return!1;return f};e.selector=function(f,p,b){return function(c,d){function a(p){return e.matches(p,f,c,b,x)}var x="function"==typeof f?{matches:f}:this,q=p.bubble;return q?e(c,q(a),d):e(c,p,function(f){var p=a(f.target);if(p)return f.selectorTarget=p,d.call(p,f)})}};var c=[].slice,b=e.emit=function(f,p,b){var d=c.call(arguments,2),a="on"+p;if("parentNode"in f){var e=d[0]={},x;for(x in b)e[x]=b[x];e.preventDefault=k;e.stopPropagation=
g;e.target=f;e.type=p;b=e}do f[a]&&f[a].apply(f,d);while(b&&b.bubbles&&(f=f.parentNode));return b&&b.cancelable&&b},s=n("event-focusin")?{}:{focusin:"focus",focusout:"blur"};if(!n("event-stopimmediatepropagation"))var q=function(){this.modified=this.immediatelyStopped=!0},v=function(f){return function(p){if(!p.immediatelyStopped)return p.stopImmediatePropagation=q,f.apply(this,arguments)}};if(n("dom-addeventlistener"))e.emit=function(f,p,c){if(f.dispatchEvent&&document.createEvent){var d=(f.ownerDocument||
document).createEvent("HTMLEvents");d.initEvent(p,!!c.bubbles,!!c.cancelable);for(var a in c)a in d||(d[a]=c[a]);return f.dispatchEvent(d)&&d}return b.apply(e,arguments)};else{e._fixEvent=function(p,b){p||(p=(b&&(b.ownerDocument||b.document||b).parentWindow||window).event);if(!p)return p;try{t&&(p.type==t.type&&p.srcElement==t.target)&&(p=t)}catch(c){}if(!p.target)switch(p.target=p.srcElement,p.currentTarget=b||p.srcElement,"mouseover"==p.type&&(p.relatedTarget=p.fromElement),"mouseout"==p.type&&
(p.relatedTarget=p.toElement),p.stopPropagation||(p.stopPropagation=y,p.preventDefault=f),p.type){case "keypress":var d="charCode"in p?p.charCode:p.keyCode;10==d?(d=0,p.keyCode=13):13==d||27==d?d=0:3==d&&(d=99);p.charCode=d;d=p;d.keyChar=d.charCode?String.fromCharCode(d.charCode):"";d.charOrCode=d.keyChar||d.keyCode}return p};var t,u=function(f){this.handle=f};u.prototype.remove=function(){delete _dojoIEListeners_[this.handle]};var r=function(f){return function(p){p=e._fixEvent(p,this);var b=f.call(this,
p);p.modified&&(t||setTimeout(function(){t=null}),t=p);return b}},w=function(f,p,b){b=r(b);if(((f.ownerDocument?f.ownerDocument.parentWindow:f.parentWindow||f.window||window)!=top||5.8>n("jscript"))&&!n("config-_allow_leaks")){"undefined"==typeof _dojoIEListeners_&&(_dojoIEListeners_=[]);var c=f[p];if(!c||!c.listeners){var d=c,c=Function("event","var callee \x3d arguments.callee; for(var i \x3d 0; i\x3ccallee.listeners.length; i++){var listener \x3d _dojoIEListeners_[callee.listeners[i]]; if(listener){listener.call(this,event);}}");
c.listeners=[];f[p]=c;c.global=this;d&&c.listeners.push(_dojoIEListeners_.push(d)-1)}c.listeners.push(f=c.global._dojoIEListeners_.push(b)-1);return new u(f)}return a.after(f,p,b,!0)},y=function(){this.cancelBubble=!0},f=e._preventDefault=function(){this.bubbledKeyCode=this.keyCode;if(this.ctrlKey)try{this.keyCode=0}catch(f){}this.defaultPrevented=!0;this.returnValue=!1;this.modified=!0}}if(n("touch"))var p=function(){},x=window.orientation,z=function(f){return function(b){var c=b.corrected;if(!c){var d=
b.type;try{delete b.type}catch(a){}if(b.type){if(n("touch-can-modify-event-delegate"))p.prototype=b,c=new p;else{var c={},e;for(e in b)c[e]=b[e]}c.preventDefault=function(){b.preventDefault()};c.stopPropagation=function(){b.stopPropagation()}}else c=b,c.type=d;b.corrected=c;if("resize"==d){if(x==window.orientation)return null;x=window.orientation;c.type="orientationchange";return f.call(this,c)}"rotation"in c||(c.rotation=0,c.scale=1);var d=c.changedTouches[0],q;for(q in d)delete c[q],c[q]=d[q]}return f.call(this,
c)}};return e})},"dojo/aspect":function(){define([],function(){function a(a,e,d,c){var b=a[e],s="around"==e,q;if(s){var g=d(function(){return b.advice(this,arguments)});q={remove:function(){g&&(g=a=d=null)},advice:function(c,d){return g?g.apply(c,d):b.advice(c,d)}}}else q={remove:function(){if(q.advice){var b=q.previous,c=q.next;!c&&!b?delete a[e]:(b?b.next=c:a[e]=c,c&&(c.previous=b));a=d=q.advice=null}},id:a.nextId++,advice:d,receiveArguments:c};if(b&&!s)if("after"==e){for(;b.next&&(b=b.next););
b.next=q;q.previous=b}else"before"==e&&(a[e]=q,q.next=b,b.previous=q);else a[e]=q;return q}function l(g){return function(e,d,c,b){var s=e[d],q;if(!s||s.target!=e)e[d]=q=function(){for(var b=q.nextId,c=arguments,d=q.before;d;)d.advice&&(c=d.advice.apply(this,c)||c),d=d.next;if(q.around)var a=q.around.advice(this,c);for(d=q.after;d&&d.id<b;){if(d.advice)if(d.receiveArguments)var e=d.advice.apply(this,c),a=e===n?a:e;else a=d.advice.call(this,a,c);d=d.next}return a},s&&(q.around={advice:function(b,c){return s.apply(b,
c)}}),q.target=e,q.nextId=q.nextId||0;e=a(q||s,g,c,b);c=null;return e}}var n,m=l("after"),k=l("before"),g=l("around");return{before:k,around:g,after:m}})},"dojo/request/watch":function(){define("./util ../errors/RequestTimeoutError ../errors/CancelError ../_base/array ../_base/window ../has!host-browser?dom-addeventlistener?:../on:".split(" "),function(a,l,n,m,k,g){function h(){for(var b=+new Date,a=0,q;a<c.length&&(q=c[a]);a++){var g=q.response,h=g.options;if(q.isCanceled&&q.isCanceled()||q.isValid&&
!q.isValid(g))c.splice(a--,1),e._onAction&&e._onAction();else if(q.isReady&&q.isReady(g))c.splice(a--,1),q.handleResponse(g),e._onAction&&e._onAction();else if(q.startTime&&q.startTime+(h.timeout||0)<b)c.splice(a--,1),q.cancel(new l("Timeout exceeded",g)),e._onAction&&e._onAction()}e._onInFlight&&e._onInFlight(q);c.length||(clearInterval(d),d=null)}function e(b){b.response.options.timeout&&(b.startTime=+new Date);b.isFulfilled()||(c.push(b),d||(d=setInterval(h,50)),b.response.options.sync&&h())}var d=
null,c=[];e.cancelAll=function(){try{m.forEach(c,function(b){try{b.cancel(new n("All requests canceled."))}catch(c){}})}catch(b){}};k&&(g&&k.doc.attachEvent)&&g(k.global,"unload",function(){e.cancelAll()});return e})},"dojo/request/util":function(){define("exports ../errors/RequestError ../errors/CancelError ../Deferred ../io-query ../_base/array ../_base/lang ../promise/Promise".split(" "),function(a,l,n,m,k,g,h,e){function d(c){return b(c)}function c(b){return void 0!==b.data?b.data:b.text}a.deepCopy=
function(b,c){for(var d in c){var e=b[d],g=c[d];e!==g&&(e&&"object"===typeof e&&g&&"object"===typeof g?a.deepCopy(e,g):b[d]=g)}return b};a.deepCreate=function(b,c){c=c||{};var d=h.delegate(b),e,g;for(e in b)(g=b[e])&&"object"===typeof g&&(d[e]=a.deepCreate(g,c[e]));return a.deepCopy(d,c)};var b=Object.freeze||function(b){return b};a.deferred=function(g,q,k,t,u,r){var w=new m(function(f){q&&q(w,g);return!f||!(f instanceof l)&&!(f instanceof n)?new n("Request canceled",g):f});w.response=g;w.isValid=
k;w.isReady=t;w.handleResponse=u;k=w.then(d).otherwise(function(f){f.response=g;throw f;});a.notify&&k.then(h.hitch(a.notify,"emit","load"),h.hitch(a.notify,"emit","error"));t=k.then(c);u=new e;for(var y in t)t.hasOwnProperty(y)&&(u[y]=t[y]);u.response=k;b(u);r&&w.then(function(f){r.call(w,f)},function(f){r.call(w,g,f)});w.promise=u;w.then=u.then;return w};a.addCommonMethods=function(b,c){g.forEach(c||["GET","POST","PUT","DELETE"],function(c){b[("DELETE"===c?"DEL":c).toLowerCase()]=function(d,a){a=
h.delegate(a||{});a.method=c;return b(d,a)}})};a.parseArgs=function(b,c,d){var a=c.data,e=c.query;if(a&&!d&&"object"===typeof a&&!(a instanceof ArrayBuffer||a instanceof Blob))c.data=k.objectToQuery(a);e?("object"===typeof e&&(e=k.objectToQuery(e)),c.preventCache&&(e+=(e?"\x26":"")+"request.preventCache\x3d"+ +new Date)):c.preventCache&&(e="request.preventCache\x3d"+ +new Date);b&&e&&(b+=(~b.indexOf("?")?"\x26":"?")+e);return{url:b,options:c,getHeader:function(b){return null}}};a.checkStatus=function(b){b=
b||0;return 200<=b&&300>b||304===b||1223===b||!b}})},"dojo/errors/RequestError":function(){define(["./create"],function(a){return a("RequestError",function(a,n){this.response=n})})},"dojo/errors/RequestTimeoutError":function(){define(["./create","./RequestError"],function(a,l){return a("RequestTimeoutError",null,l,{dojoType:"timeout"})})},"dojo/request/xhr":function(){define(["../errors/RequestError","./watch","./handlers","./util","../has"],function(a,l,n,m,k){function g(b,c){var f=b.xhr;b.status=
b.xhr.status;try{b.text=f.responseText}catch(p){}"xml"===b.options.handleAs&&(b.data=f.responseXML);if(!c)try{n(b)}catch(d){c=d}var e;if(c)this.reject(c);else{try{n(b)}catch(q){e=q}m.checkStatus(f.status)?e?this.reject(e):this.resolve(b):(c=e?new a("Unable to load "+b.url+" status: "+f.status+" and an error in handleAs: transformation of response",b):new a("Unable to load "+b.url+" status: "+f.status,b),this.reject(c))}}function h(b){return this.xhr.getResponseHeader(b)}function e(r,n,f){var p=k("native-formdata")&&
n&&n.data&&n.data instanceof FormData,x=m.parseArgs(r,m.deepCreate(t,n),p);r=x.url;n=x.options;var z,u=m.deferred(x,q,c,b,g,function(){z&&z()}),A=x.xhr=e._create();if(!A)return u.cancel(new a("XHR was not created")),f?u:u.promise;x.getHeader=h;s&&(z=s(A,u,x));var E=n.data,L=!n.sync,B=n.method;try{A.open(B,r,L,n.user||v,n.password||v);n.withCredentials&&(A.withCredentials=n.withCredentials);k("native-response-type")&&n.handleAs in d&&(A.responseType=d[n.handleAs]);var I=n.headers;r=p?!1:"application/x-www-form-urlencoded";
if(I)for(var U in I)"content-type"===U.toLowerCase()?r=I[U]:I[U]&&A.setRequestHeader(U,I[U]);r&&!1!==r&&A.setRequestHeader("Content-Type",r);(!I||!("X-Requested-With"in I))&&A.setRequestHeader("X-Requested-With","XMLHttpRequest");m.notify&&m.notify.emit("send",x,u.promise.cancel);A.send(E)}catch(S){u.reject(S)}l(u);A=null;return f?u:u.promise}k.add("native-xhr",function(){return"undefined"!==typeof XMLHttpRequest});k.add("dojo-force-activex-xhr",function(){return k("activex")&&"file:"===window.location.protocol});
k.add("native-xhr2",function(){if(k("native-xhr")&&!k("dojo-force-activex-xhr")){var b=new XMLHttpRequest;return"undefined"!==typeof b.addEventListener&&("undefined"===typeof opera||"undefined"!==typeof b.upload)}});k.add("native-formdata",function(){return"undefined"!==typeof FormData});k.add("native-response-type",function(){return k("native-xhr")&&"undefined"!==typeof(new XMLHttpRequest).responseType});k.add("native-xhr2-blob",function(){if(k("native-response-type")){var b=new XMLHttpRequest;b.open("GET",
"/",!0);b.responseType="blob";var c=b.responseType;b.abort();return"blob"===c}});var d={blob:k("native-xhr2-blob")?"blob":"arraybuffer",document:"document",arraybuffer:"arraybuffer"},c,b,s,q;k("native-xhr2")?(c=function(b){return!this.isFulfilled()},q=function(b,c){c.xhr.abort()},s=function(b,c,f){function p(p){c.handleResponse(f)}function d(p){p=new a("Unable to load "+f.url+" status: "+p.target.status,f);c.handleResponse(f,p)}function e(p){p.lengthComputable?(f.loaded=p.loaded,f.total=p.total,c.progress(f)):
3===f.xhr.readyState&&(f.loaded="loaded"in p?p.loaded:p.position,c.progress(f))}b.addEventListener("load",p,!1);b.addEventListener("error",d,!1);b.addEventListener("progress",e,!1);return function(){b.removeEventListener("load",p,!1);b.removeEventListener("error",d,!1);b.removeEventListener("progress",e,!1);b=null}}):(c=function(b){return b.xhr.readyState},b=function(b){return 4===b.xhr.readyState},q=function(b,c){var f=c.xhr,p=typeof f.abort;("function"===p||"object"===p||"unknown"===p)&&f.abort()});
var v,t={data:null,query:null,sync:!1,method:"GET"};e._create=function(){throw Error("XMLHTTP not available");};if(k("native-xhr")&&!k("dojo-force-activex-xhr"))e._create=function(){return new XMLHttpRequest};else if(k("activex"))try{new ActiveXObject("Msxml2.XMLHTTP"),e._create=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}catch(u){try{new ActiveXObject("Microsoft.XMLHTTP"),e._create=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}catch(r){}}m.addCommonMethods(e);return e})},"dojo/request/handlers":function(){define(["../json",
"../_base/kernel","../_base/array","../has","../selector/_loader"],function(a,l,n,m){function k(b){var d=c[b.options.handleAs];b.data=d?d(b):b.data||b.text;return b}m.add("activex","undefined"!==typeof ActiveXObject);m.add("dom-parser",function(b){return"DOMParser"in b});var g;if(m("activex")){var h=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","MSXML.DOMDocument"],e;g=function(b){function c(b){try{var g=new ActiveXObject(b);g.async=!1;g.loadXML(a);d=g;e=b}catch(r){return!1}return!0}
var d=b.data,a=b.text;d&&(m("dom-qsa2.1")&&!d.querySelectorAll&&m("dom-parser"))&&(d=(new DOMParser).parseFromString(a,"application/xml"));if(!d||!d.documentElement)(!e||!c(e))&&n.some(h,c);return d}}var d=function(b){return!m("native-xhr2-blob")&&"blob"===b.options.handleAs&&"undefined"!==typeof Blob?new Blob([b.xhr.response],{type:b.xhr.getResponseHeader("Content-Type")}):b.xhr.response},c={javascript:function(b){return l.eval(b.text||"")},json:function(b){return a.parse(b.text||null)},xml:g,blob:d,
arraybuffer:d,document:d};k.register=function(b,d){c[b]=d};return k})},"dojo/selector/_loader":function(){define(["../has","require"],function(a,l){if("undefined"!==typeof document){var n=document.createElement("div");a.add("dom-qsa2.1",!!n.querySelectorAll);a.add("dom-qsa3",function(){try{return n.innerHTML="\x3cp class\x3d'TEST'\x3e\x3c/p\x3e",1==n.querySelectorAll(".TEST:empty").length}catch(a){}})}var m;return{load:function(k,g,h,e){if(e&&e.isBuild)h();else{e=l;k="default"==k?a("config-selectorEngine")||
"css3":k;k="css2"==k||"lite"==k?"./lite":"css2.1"==k?a("dom-qsa2.1")?"./lite":"./acme":"css3"==k?a("dom-qsa3")?"./lite":"./acme":"acme"==k?"./acme":(e=g)&&k;if("?"==k.charAt(k.length-1)){k=k.substring(0,k.length-1);var d=!0}if(d&&(a("dom-compliant-qsa")||m))return h(m);e([k],function(c){"./lite"!=k&&(m=c);h(c)})}}}})},"dojo/string":function(){define(["./_base/kernel","./_base/lang"],function(a,l){var n=/[&<>'"\/]/g,m={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;",
"/":"\x26#x2F;"},k={};l.setObject("dojo.string",k);k.escape=function(a){return!a?"":a.replace(n,function(a){return m[a]})};k.rep=function(a,h){if(0>=h||!a)return"";for(var e=[];;){h&1&&e.push(a);if(!(h>>=1))break;a+=a}return e.join("")};k.pad=function(a,h,e,d){e||(e="0");a=String(a);h=k.rep(e,Math.ceil((h-a.length)/e.length));return d?a+h:h+a};k.substitute=function(g,h,e,d){d=d||a.global;e=e?l.hitch(d,e):function(c){return c};return g.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(c,b,
a){if(""==b)return"$";c=l.getObject(b,!1,h);a&&(c=l.getObject(a,!1,d).call(d,c,b));return e(c,b).toString()})};k.trim=String.prototype.trim?l.trim:function(a){a=a.replace(/^\s+/,"");for(var h=a.length-1;0<=h;h--)if(/\S/.test(a.charAt(h))){a=a.substring(0,h+1);break}return a};return k})},"dojo/regexp":function(){define(["./_base/kernel","./_base/lang"],function(a,l){var n={};l.setObject("dojo.regexp",n);n.escapeString=function(a,k){return a.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,function(a){return k&&
-1!=k.indexOf(a)?a:"\\"+a})};n.buildGroupRE=function(a,k,g){if(!(a instanceof Array))return k(a);for(var h=[],e=0;e<a.length;e++)h.push(k(a[e]));return n.group(h.join("|"),g)};n.group=function(a,k){return"("+(k?"?:":"")+a+")"};return n})},"dojo/date/locale":function(){define("../_base/lang ../_base/array ../date ../cldr/supplemental ../i18n ../regexp ../string ../i18n!../cldr/nls/gregorian module".split(" "),function(a,l,n,m,k,g,h,e,d){function c(b,c,d,a){return a.replace(/([a-z])\1*/ig,function(f){var p,
e,g=f.charAt(0);f=f.length;var s=["abbr","wide","narrow"];switch(g){case "G":p=c[4>f?"eraAbbr":"eraNames"][0>b.getFullYear()?0:1];break;case "y":p=b.getFullYear();switch(f){case 1:break;case 2:if(!d.fullYear){p=String(p);p=p.substr(p.length-2);break}default:e=!0}break;case "Q":case "q":p=Math.ceil((b.getMonth()+1)/3);e=!0;break;case "M":case "L":p=b.getMonth();3>f?(p+=1,e=!0):(g=["months","L"==g?"standAlone":"format",s[f-3]].join("-"),p=c[g][p]);break;case "w":p=q._getWeekOfYear(b,0);e=!0;break;case "d":p=
b.getDate();e=!0;break;case "D":p=q._getDayOfYear(b);e=!0;break;case "e":case "c":if(p=b.getDay(),2>f){p=(p-m.getFirstDayOfWeek(d.locale)+8)%7;break}case "E":p=b.getDay();3>f?(p+=1,e=!0):(g=["days","c"==g?"standAlone":"format",s[f-3]].join("-"),p=c[g][p]);break;case "a":g=12>b.getHours()?"am":"pm";p=d[g]||c["dayPeriods-format-wide-"+g];break;case "h":case "H":case "K":case "k":e=b.getHours();switch(g){case "h":p=e%12||12;break;case "H":p=e;break;case "K":p=e%12;break;case "k":p=e||24}e=!0;break;case "m":p=
b.getMinutes();e=!0;break;case "s":p=b.getSeconds();e=!0;break;case "S":p=Math.round(b.getMilliseconds()*Math.pow(10,f-3));e=!0;break;case "v":case "z":if(p=q._getZone(b,!0,d))break;f=4;case "Z":g=q._getZone(b,!1,d);g=[0>=g?"+":"-",h.pad(Math.floor(Math.abs(g)/60),2),h.pad(Math.abs(g)%60,2)];4==f&&(g.splice(0,0,"GMT"),g.splice(3,0,":"));p=g.join("");break;default:throw Error("dojo.date.locale.format: invalid pattern char: "+a);}e&&(p=h.pad(p,f));return p})}function b(b,c,d,a){var f=function(f){return f};
c=c||f;d=d||f;a=a||f;var p=b.match(/(''|[^'])+/g),e="'"==b.charAt(0);l.forEach(p,function(f,b){f?(p[b]=(e?d:c)(f.replace(/''/g,"'")),e=!e):p[b]=""});return a(p.join(""))}function s(b,c,d,a){a=g.escapeString(a);d.strict||(a=a.replace(" a"," ?a"));return a.replace(/([a-z])\1*/ig,function(f){var p;p=f.charAt(0);var a=f.length,e="",q="";d.strict?(1<a&&(e="0{"+(a-1)+"}"),2<a&&(q="0{"+(a-2)+"}")):(e="0?",q="0{0,2}");switch(p){case "y":p="\\d{2,4}";break;case "M":case "L":p=2<a?"\\S+?":"1[0-2]|"+e+"[1-9]";
break;case "D":p="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+e+"[1-9][0-9]|"+q+"[1-9]";break;case "d":p="3[01]|[12]\\d|"+e+"[1-9]";break;case "w":p="[1-4][0-9]|5[0-3]|"+e+"[1-9]";break;case "E":case "e":case "c":p=".+?";break;case "h":p="1[0-2]|"+e+"[1-9]";break;case "k":p="1[01]|"+e+"\\d";break;case "H":p="1\\d|2[0-3]|"+e+"\\d";break;case "K":p="1\\d|2[0-4]|"+e+"[1-9]";break;case "m":case "s":p="[0-5]\\d";break;case "S":p="\\d{"+a+"}";break;case "a":a=d.am||c["dayPeriods-format-wide-am"];e=d.pm||c["dayPeriods-format-wide-pm"];
p=a+"|"+e;d.strict||(a!=a.toLowerCase()&&(p+="|"+a.toLowerCase()),e!=e.toLowerCase()&&(p+="|"+e.toLowerCase()),-1!=p.indexOf(".")&&(p+="|"+p.replace(/\./g,"")));p=p.replace(/\./g,"\\.");break;default:p=".*"}b&&b.push(f);return"("+p+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var q={};a.setObject(d.id.replace(/\//g,"."),q);q._getZone=function(b,c,d){return c?n.getTimezoneName(b):b.getTimezoneOffset()};q.format=function(d,e){e=e||{};var g=k.normalizeLocale(e.locale),s=e.formatLength||"short",g=q._getGregorianBundle(g),
f=[],p=a.hitch(this,c,d,g,e);if("year"==e.selector)return b(g["dateFormatItem-yyyy"]||"yyyy",p);var x;"date"!=e.selector&&(x=e.timePattern||g["timeFormat-"+s])&&f.push(b(x,p));"time"!=e.selector&&(x=e.datePattern||g["dateFormat-"+s])&&f.push(b(x,p));return 1==f.length?f[0]:g["dateTimeFormat-"+s].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(p,b){return f[b]})};q.regexp=function(b){return q._parseInfo(b).regexp};q._parseInfo=function(c){c=c||{};var d=k.normalizeLocale(c.locale),d=q._getGregorianBundle(d),
e=c.formatLength||"short",g=c.datePattern||d["dateFormat-"+e],f=c.timePattern||d["timeFormat-"+e],e="date"==c.selector?g:"time"==c.selector?f:d["dateTimeFormat-"+e].replace(/\{(\d+)\}/g,function(p,b){return[f,g][b]}),p=[];return{regexp:b(e,a.hitch(this,s,p,d,c)),tokens:p,bundle:d}};q.parse=function(b,c){var d=/[\u200E\u200F\u202A\u202E]/g,a=q._parseInfo(c),f=a.tokens,p=a.bundle,d=RegExp("^"+a.regexp.replace(d,"")+"$",a.strict?"":"i").exec(b&&b.replace(d,""));if(!d)return null;var e=["abbr","wide",
"narrow"],g=[1970,0,1,0,0,0,0],s="",d=l.every(d,function(b,d){if(!d)return!0;var a=f[d-1],q=a.length,a=a.charAt(0);switch(a){case "y":if(2!=q&&c.strict)g[0]=b;else if(100>b)b=Number(b),a=""+(new Date).getFullYear(),q=100*a.substring(0,2),a=Math.min(Number(a.substring(2,4))+20,99),g[0]=b<a?q+b:q-100+b;else{if(c.strict)return!1;g[0]=b}break;case "M":case "L":if(2<q){if(q=p["months-"+("L"==a?"standAlone":"format")+"-"+e[q-3]].concat(),c.strict||(b=b.replace(".","").toLowerCase(),q=l.map(q,function(f){return f.replace(".",
"").toLowerCase()})),b=l.indexOf(q,b),-1==b)return!1}else b--;g[1]=b;break;case "E":case "e":case "c":q=p["days-"+("c"==a?"standAlone":"format")+"-"+e[q-3]].concat();c.strict||(b=b.toLowerCase(),q=l.map(q,function(f){return f.toLowerCase()}));b=l.indexOf(q,b);if(-1==b)return!1;break;case "D":g[1]=0;case "d":g[2]=b;break;case "a":q=c.am||p["dayPeriods-format-wide-am"];a=c.pm||p["dayPeriods-format-wide-pm"];if(!c.strict){var h=/\./g;b=b.replace(h,"").toLowerCase();q=q.replace(h,"").toLowerCase();a=
a.replace(h,"").toLowerCase()}if(c.strict&&b!=q&&b!=a)return!1;s=b==a?"p":b==q?"a":"";break;case "K":24==b&&(b=0);case "h":case "H":case "k":if(23<b)return!1;g[3]=b;break;case "m":g[4]=b;break;case "s":g[5]=b;break;case "S":g[6]=b}return!0}),a=+g[3];"p"===s&&12>a?g[3]=a+12:"a"===s&&12==a&&(g[3]=0);a=new Date(g[0],g[1],g[2],g[3],g[4],g[5],g[6]);c.strict&&a.setFullYear(g[0]);var h=f.join(""),k=-1!=h.indexOf("d"),h=-1!=h.indexOf("M");if(!d||h&&a.getMonth()>g[1]||k&&a.getDate()>g[2])return null;if(h&&
a.getMonth()<g[1]||k&&a.getDate()<g[2])a=n.add(a,"hour",1);return a};var v=[],t={};q.addCustomFormats=function(b,c){v.push({pkg:b,name:c});t={}};q._getGregorianBundle=function(b){if(t[b])return t[b];var c={};l.forEach(v,function(d){d=k.getLocalization(d.pkg,d.name,b);c=a.mixin(c,d)},this);return t[b]=c};q.addCustomFormats(d.id.replace(/\/date\/locale$/,".cldr"),"gregorian");q.getNames=function(b,c,d,a){var f;a=q._getGregorianBundle(a);b=[b,d,c];"standAlone"==d&&(d=b.join("-"),f=a[d],1==f[0]&&(f=void 0));
b[1]="format";return(f||a[b.join("-")]).concat()};q.isWeekend=function(b,c){var d=m.getWeekend(c),a=(b||new Date).getDay();d.end<d.start&&(d.end+=7,a<d.start&&(a+=7));return a>=d.start&&a<=d.end};q._getDayOfYear=function(b){return n.difference(new Date(b.getFullYear(),0,1,b.getHours()),b)+1};q._getWeekOfYear=function(b,c){1==arguments.length&&(c=0);var d=(new Date(b.getFullYear(),0,1)).getDay(),a=Math.floor((q._getDayOfYear(b)+(d-c+7)%7-1)/7);d==c&&a++;return a};return q})},"dojo/cldr/supplemental":function(){define(["../_base/lang",
"../i18n"],function(a,l){var n={};a.setObject("dojo.cldr.supplemental",n);n.getFirstDayOfWeek=function(a){a={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0}[n._region(a)];
return void 0===a?1:a};n._region=function(a){a=l.normalizeLocale(a);a=a.split("-");var k=a[1];k?4==k.length&&(k=a[2]):k={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",
gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",
nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",
zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",
dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",
kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",
pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",
tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[a[0]];return k};n.getWeekend=function(a){var k=n._region(a);a={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5}[k];k={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6}[k];void 0===a&&(a=6);void 0===k&&(k=0);return{start:a,
end:k}};return n})},"esri/core/accessorSupport/get":function(){define(["require","exports","./utils"],function(a,l,n){function m(a,d,c){if(null!=c.getItemAt||Array.isArray(c)){var b=parseInt(a,10);if(!isNaN(b))return Array.isArray(c)?c[b]:c.getItemAt(b)}b=n.getProperties(c);return d?n.isPropertyDeclared(b,a)?b.get(a):c[a]:n.isPropertyDeclared(b,a)?b.internalGet(a):c[a]}function k(a,d,c,b){if(null==a)return a;a=m(d[b],c,a);return!a&&b<d.length-1?void 0:b===d.length-1?a:k(a,d,c,b+1)}function g(a,d,
c,b){void 0===c&&(c=!1);void 0===b&&(b=0);return"string"===typeof d&&-1===d.indexOf(".")?m(d,c,a):k(a,n.pathToArray(d),c,b)}function h(a,d){return g(a,d,!0)}l.valueOf=g;l.get=h;l.exists=function(a,d){return void 0!==g(d,a,!0)};Object.defineProperty(l,"__esModule",{value:!0});l.default=h})},"esri/core/accessorSupport/set":function(){define(["require","exports","./get"],function(a,l,n){function m(a,g,h){if(a&&g)if("object"===typeof g){h=0;for(var e=Object.getOwnPropertyNames(g);h<e.length;h++){var d=
e[h];m(a,d,g[d])}}else"_"!==g[0]&&(-1!==g.indexOf(".")?(g=g.split("."),d=g.splice(g.length-1,1)[0],m(n.default(a,g),d,h)):a[g]=h)}l.set=m;Object.defineProperty(l,"__esModule",{value:!0});l.default=m})},"esri/core/accessorSupport/extensions/computedProperty":function(){define(["require","exports","dojo/has","../utils","../wire"],function(a,l,n,m,k){l.ComputedPropertyExtension={processClassPropertyMetadata:function(a,h,e,d){h.dependsOn&&(h.wire=k.create(h.dependsOn,function(c){return m.getProperties(c).propertyInvalidated(a)}))},
instanceCreated:function(a,h,e){for(var d=0;d<e.length;d++){var c=h[e[d]];c.wire&&c.wire(a)}}};Object.defineProperty(l,"__esModule",{value:!0});l.default=l.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define(["require","exports","dojo/_base/lang"],function(a,l,n){function m(b){return!!b&&!!b.prototype.declaredClass&&0===b.prototype.declaredClass.indexOf("esri.core.Collection")}function k(b){return!!b&&(!!b.prototype.read||!!b.fromJSON||m(b)&&
k(b.prototype.itemType))}function g(b){return b.prototype.read?function(c,d,a){return null==c?c:(new b).read(c,a)}:b.fromJSON}function h(b){var c=g(b);return function(b,d,a){return null==b?b:Array.isArray(b)?b.map(function(b){return c(b,null,a)}):[c(b,null,a)]}}function e(b,c,d){if(k(b)&&(d.json||(d.json={}),!d.json.read))if(c)d.json.read=h(b);else if(m(b)&&k(b.prototype.itemType)){var a=h(b.prototype.itemType);d.json.read=function(c,d){var f=a(c,d);return f?new b(f):f}}else d.json.read=g(b)}function d(b,
c){return b&&"function"===typeof b.toJSON&&!b.toJSON.isDefaultToJSON?b.toJSON():b&&"function"===typeof b.write?b.write({},c):b}function c(b){return function(c,a,e){null===c?c=null:c&&"function"===typeof c.map?(c=c.map(function(b){return d(b,e)}),"function"===typeof c.toArray&&(c=c.toArray())):c=[d(c,e)];n.setObject(b,c,a)}}function b(b){return function(c,a,e){n.setObject(b,d(c,e),a)}}function s(d,a,e,q){if(!1!==q.writable&&(null!=q.write||q.writeTo||q.writeWith||q.writeAlways))q.writable=!0;null==
q.write&&q.writable&&(null!=q.writeTo&&(e=q.writeTo),a||m(d)?q.write=c(e):q.write=b(e))}function q(b){if(b.json&&b.json.origins){var c=b.json.origins,d={portalItem:["portal-item"],webScene:["web-scene"],webMap:["web-map"],webDocument:["web-scene","web-map"],"web-document":["web-scene","web-map"]};b=function(b){if(c[b]){var a=c[b];d[b].forEach(function(f){c[f]=a});delete c[b]}};for(var a in d)b(a)}}l.originSpecificPropertyDefinition=function(b,c){var d=b&&b.json;b&&(b.json&&b.json.origins)&&(d=b.json.origins[c.origin]||
d);return d};l.SerializablePropertyExtension={processPrototypePropertyMetadata:function(b,c,d,a){a=(d=Array.isArray(c.type))?c.type[0]:c.type;q(c);e(a,d,c);if(c.json){if(c.json.origins)for(var g in c.json.origins)s(a,d,b,c.json.origins[g]);s(a,d,b,c.json)}}};Object.defineProperty(l,"__esModule",{value:!0});l.default=l.SerializablePropertyExtension})},"esri/core/Logger":function(){define(["require","exports","dojo/has"],function(a,l,n){var m={info:0,warn:1,error:2};a=function(){function a(g){void 0===
g&&(g={});this.module=g.module||"";this.writer=g.writer||null;this.level=g.level||null;null!=g.enabled&&(this.enabled=!!g.enabled);a._loggers[this.module]=this;g=this.module.lastIndexOf(".");-1!==g&&(this.parent=a.getLogger(this.module.slice(0,g)))}a.prototype.log=function(a){for(var h=[],e=1;e<arguments.length;e++)h[e-1]=arguments[e];this._isEnabled()&&this._matchLevel(a)&&(e=this._inheritedWriter())&&e.apply(void 0,[a,this.module].concat(h))};a.prototype.error=function(){for(var a=[],h=0;h<arguments.length;h++)a[h-
0]=arguments[h];this.log.apply(this,["error"].concat(a))};a.prototype.warn=function(){for(var a=[],h=0;h<arguments.length;h++)a[h-0]=arguments[h];this.log.apply(this,["warn"].concat(a))};a.prototype.info=function(){for(var a=[],h=0;h<arguments.length;h++)a[h-0]=arguments[h];this.log.apply(this,["info"].concat(a))};a.prototype.getLogger=function(g){return a.getLogger(this.module+"."+g)};a.getLogger=function(g){var h=a._loggers[g];h||(h=new a({module:g}));return h};a.prototype._parentWithMember=function(a,
h){for(var e=this;e&&null==e[a];)e=e.parent;return e?e[a]:h};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=function(a,h){for(var e=[],d=2;d<arguments.length;d++)e[d-2]=arguments[d];console[a].apply(console,["["+h+"]"].concat(e))};a.prototype._matchLevel=function(a){return m[this._parentWithMember("level","error")]<=m[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};a._loggers={};return a}();
a.getLogger("esri").level="warn";return a})},"esri/core/accessorSupport/introspection":function(){define("require exports ./utils ./metadata ./ensureType ./extensions ./decorators/cast".split(" "),function(a,l,n,m,k,g,h){var e=Object.prototype.hasOwnProperty,d=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Caster)$/,c={Getter:"get",Setter:"set",Reader:"read",Caster:"cast"},b=/^_(set|get)([a-zA-Z0-9]+)Attr$/;l.processPrototype=function(a){for(var q=a.declaredClass,h=a.properties,h=h||{},t=0,l=Object.getOwnPropertyNames(h);t<
l.length;t++){var r=l[t],w=h[r],y=typeof w;null==w?m.setPropertyMetadata(a,r,{value:w}):Array.isArray(w)?m.setPropertyMetadata(a,r,{type:w,value:null}):"object"===y?n.getProperties(w)||w instanceof Date?m.setPropertyMetadata(a,r,{type:w.constructor,value:w}):m.setPropertyMetadata(a,r,w):"boolean"===y?m.setPropertyMetadata(a,r,{type:Boolean,value:w}):"string"===y?m.setPropertyMetadata(a,r,{type:String,value:w}):"number"===y?m.setPropertyMetadata(a,r,{type:Number,value:w}):"function"===y&&m.setPropertyMetadata(a,
r,{type:w,value:null})}t=0;for(l=Object.getOwnPropertyNames(a);t<l.length;t++){var w=l[t],y=a[w],f=void 0,h=r=void 0;if(f=d.exec(w))r=f[1],h=c[f[2]];else if(f=b.exec(w))r=f[2][0].toLowerCase()+f[2].substr(1),h=f[1].toLowerCase();r&&h&&("read"===h?m.getPropertyMetadata(a,r).json?m.getPropertyMetadata(a,r).json.read=y:m.getPropertyMetadata(a,r).json={read:y}:m.getPropertyMetadata(a,r)[h]=y)}t=0;for(l=Object.getOwnPropertyNames(m.getPropertiesMetadata(a));t<l.length;t++)if(r=l[t],w=m.getPropertyMetadata(a,
r),h=w.type,void 0===w.value&&e.call(a,r)&&(w.value=a[r]),!w.cast&&h)switch(h){case Number:w.cast=k.ensureNumber;break;case Boolean:w.cast=k.ensureBoolean;break;case String:w.cast=k.ensureString;break;case Date:w.cast=k.ensureDate;break;default:Array.isArray(h)?w.cast=k.ensureArray(h[0]):w.cast=k.ensureType(h)}g.processPrototypeMetadatas(m.getPropertiesMetadata(a),q);return m.getPropertiesMetadata(a)};l.processClass=function(b){for(var c=b.prototype,a=c.declaredClass,d=b._meta.bases,e={},r=d.length-
1;0<=r;r--)n.merge(e,m.getMetadata(d[r].prototype));var k=e.properties;g.processClassMetadatas(k,a);Object.defineProperty(b,"__accessorMetadata__",{value:k});for(var l={},a=function(f){var b=k[f];l[f]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(f):b.value},set:function(c){var a=this.__accessor__;if(a){if(!Object.isFrozen(this)){if(a.initialized&&b.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+f+"' of "+this.declaredClass);
a.set(f,c)}}else Object.defineProperty(this,f,{enumerable:!0,configurable:!0,writable:!0,value:c})}}},d=0,r=Object.getOwnPropertyNames(k);d<r.length;d++)a(r[d]);Object.defineProperties(b.prototype,l);if(e.parameters){b=0;for(a=Object.getOwnPropertyNames(e.parameters);b<a.length;b++)d=a[b],r=Object.getOwnPropertyDescriptor(c,d)||{value:c[d]},(r=h.autocastMethod(c,d,r))&&Object.defineProperty(c,d,r)}return e}})},"esri/core/accessorSupport/metadata":function(){define(["require","exports"],function(a,
l){function n(a){return null!=a.__accessorMetadata__}function m(a){return n(a)&&null!=k(a).properties}function k(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function g(a){a=k(a);var d=a.properties;d||(d=a.properties={});return d}function h(a,d){var c=k(a),b=c.parameters;b||(b=c.parameters={});c=b[d];c||(c=[],b[d]=c);return c}l.hasMetadata=n;l.hasPropertiesMetadata=m;l.hasPropertyMetadata=
function(a,d){return m(a)&&null!=g(a)[d]};l.hasParametersMetadata=function(a,d){return n(a)&&null!=k(a).parameters&&null!=k(a).parameters[d]};l.getMetadata=k;l.getPropertiesMetadata=g;l.getPropertyMetadata=function(a,d){var c=g(a),b=c[d];b||(b=c[d]={});return b};l.setPropertyMetadata=function(a,d,c){g(a)[d]=c};l.getParametersMetadata=h;l.getParameterMetadata=function(a,d,c){var b=h(a,d)[c];b||(h(a,d)[c]=b={index:c});return b}})},"esri/core/accessorSupport/ensureType":function(){define(["require",
"exports","dojo/has"],function(a,l,n){function m(a,d){return d.isInstanceOf?d.isInstanceOf(a):d instanceof a}function k(a,d){if(1===arguments.length)return k.bind(null,a);d&&(a&&!m(a,d))&&(h&&d.constructor&&void 0!==d.constructor._meta?console.warn("Assigning an instance of '"+(d.declaredClass||"unknown")+"' which is not a subclass of '"+(a.prototype&&a.prototype.declaredClass||"unknown")+"'"):d=new a(d));return d}function g(a,d){return 1===arguments.length?g.bind(null,a):!d?d:Array.isArray(d)?d.map(k.bind(null,
a)):[k(a,d)]}var h=0;l.isInstanceOf=m;l.ensureDate=function(a){return null==a?a:new Date(a)};l.ensureBoolean=function(a){return!0===a||!1===a?a:!!a};l.ensureString=function(a){return null==a?a:a.toString()};l.ensureNumber=function(a){return null==a?a:parseFloat(a)};l.ensureType=k;l.ensureArray=g;Object.defineProperty(l,"__esModule",{value:!0});l.default=k})},"esri/core/accessorSupport/decorators/cast":function(){define(["require","exports","../metadata","../ensureType"],function(a,l,n,m){function k(c){var b=
"_meta"in c?m.ensureType(c):c;return function(){for(var c=[],a=0;a<arguments.length;a++)c[a-0]=arguments[a];c.push(b);return"number"===typeof c[2]?h.apply(this,c):g.apply(this,c)}}function g(c,b,a,d){n.getPropertyMetadata(c,b).cast=d}function h(c,b,a,d){n.getParameterMetadata(c,b,a).cast=d}function e(c){return function(b,a,d){n.getPropertyMetadata(b,c).cast=b[a]}}var d=Object.prototype.toString;l.autocastMethod=function(c,b,a){if(n.hasParametersMetadata(c,b)){var d=n.getParametersMetadata(c,b).filter(function(b){return null!=
b.cast});if(d.length){var e=a.value;a.value=function(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];for(c=0;c<d.length;c++){var a=d[c];b[a.index]=a.cast(b[a.index])}return e.apply(this,b)};return a}}console.warn("Method "+c.declaredClass+"::"+b+" is decorated with @autocast but no parameters are decorated")};l.cast=function(){for(var c=[],b=0;b<arguments.length;b++)c[b-0]=arguments[b];if(!(3===c.length&&"string"===typeof c[1])){if(1===c.length&&"[object Function]"===d.call(c[0]))return k(c[0]);
if(1===c.length&&"string"===typeof c[0])return e(c[0])}}})},"esri/core/accessorSupport/watch":function(){define("require exports ../Scheduler ../ArrayPool ../lang ./utils ./get ./wire".split(" "),function(a,l,n,m,k,g,h,e){function d(f){if(!f.removed){var b=f.callback,c=f.propertyName,a=f.oldValue,d=f.target,e=h.valueOf(d,c,!0);k.equals(a,e)||(f.oldValue=e,b.call(d,e,a,c,d))}}function c(){if(y){y=null;var f=w;u={};r={};w=v.acquire();for(var b=0;b<f.length;b++)d(f[b]);v.release(f)}}function b(f,b,a){return g.parse(f,
b,a,function(f,b,p){var a=h.valueOf(f,b,!0),d,x=e.wire(f,b,function(f,b){d||(d={uid:g.uid(),target:f,propertyName:b,oldValue:a,callback:p,removed:!1});var e=d,x=e.uid,q=g.uid(e.target),h=u[x];h?w.splice(w.indexOf(h),1):(u[x]=e,r[q]||(r[q]=t.acquire()),r[q].push(x));w.push(e);y||(y=n.schedule(c))});return{remove:g.once(function(){x.remove();d&&(d.removed=!0)})}})}function s(f,b,c){return g.parse(f,b,c,function(f,b,p){var c=h.valueOf(f,b,!0),a=!1;return e.wire(f,b,function(f,b){if(!a){a=!0;var d=h.valueOf(f,
b,!0);k.equals(c,d)||p.call(f,d,c,b,f);c=h.valueOf(f,b,!0);a=!1}})})}function q(f,p,c,a){void 0===a&&(a=!1);return a?s(f,p,c):b(f,p,c)}var v=new m,t=new m,u={},r={},w=[],y;l.dispatchTarget=function(f){var b="string"!==typeof f?g.uid(f):f;if(f=r[b]){delete r[b];for(b=0;b<f.length;b++){var c=f[b],a=u[c];delete u[c];w.splice(w.indexOf(a),1);d(a)}t.release(f)}};l.removeTarget=function(f){var b="string"!==typeof f?g.uid(f):f;if(f=r[b]){delete r[b];for(b=0;b<f.length;b++){var c=f[b],a=u[c];delete u[c];
w.splice(w.indexOf(a),1)}}};l.dispatch=c;l.watch=q;Object.defineProperty(l,"__esModule",{value:!0});l.default=q})},"esri/core/Scheduler":function(){define(["./ArrayPool","./ObjectPool","./nextTick","./requestAnimationFrame","./now"],function(a,l,n,m,k){var g=["prepare","preRender","render","postRender","update"],h=new l(function(){this.isActive=!0;this.callback=null},function(){this.isActive=!1;this.callback=null}),e=function(){},d=function(){this.item.isActive=!1;b.release(this)},c={time:0,deltaTime:0,
spendInFrame:0,spendInTask:0},b=new l(function(){this.remove=d;this.item=null},function(){this.remove=e;this.item=null});l=function(){this._boundDispatch=this._dispatch.bind(this);this.willDispatch=!1;this._queue=a.acquire();this._frameTasks=a.acquire();this._phaseTasks={};this._previousFrameTime=-1;for(var b=0;b<g.length;b++)this._phaseTasks[g[b]]=a.acquire();this._boundAnimationFrame=this._animationFrame.bind(this);this.executing=!1;this._animationFrameRequestId=null};l.prototype={schedule:function(c){var a=
h.acquire();a.callback=c;this._schedule(a);c=b.acquire();c.item=a;return c},_dispatch:function(){for(var b=this._queue;b.length;){var c=b.shift();c.isActive&&(c.isActive=!1,c.callback())}this.willDispatch=!1},_schedule:function(b){this._queue.push(b);this.willDispatch||(this.willDispatch=!0,n(this._boundDispatch))},addFrameTask:function(b){var c={phases:b,paused:!1,pausedAt:0,epoch:-1,dt:0,ticks:-1,removed:!1};this._frameTasks.push(c);for(var a=0;a<g.length;a++){var d=g[a];b[d]&&this._phaseTasks[d].push(c)}this._animationFrameRequestId||
(this._previousFrameTime=-1,this._requestAnimationFrame());return{isPaused:function(){return c.paused},remove:function(){c.removed=!0},pause:function(){c.paused=!0;c.pausedAt=k()},resume:function(){c.paused=!1;-1!==c.epoch&&(c.epoch+=k()-c.pausedAt)}}},clearFrameTasks:function(){for(var b=0;b<this._frameTasks.length;b++)this._frameTasks[b].removed=!0},_purge:function(){for(var b=0;b<this._frameTasks.length;){var c=this._frameTasks[b];b++;if(c.removed){this._frameTasks.splice(b-1,1);for(var a=0;a<
g.length;a++){var d=g[a];if(c.phases[d]){var d=this._phaseTasks[d],e=d.indexOf(c);-1!==e&&d.splice(e,1)}}}}},_animationFrame:function(b){this._animationFrameRequestId=null;this.executing=!0;0<this._frameTasks.length&&this._requestAnimationFrame();b=k();0>this._previousFrameTime&&(this._previousFrameTime=b);var a=b-this._previousFrameTime;this._previousFrameTime=b;for(var d=0;d<this._frameTasks.length;d++){var e=this._frameTasks[d];-1!==e.epoch&&(e.dt=a)}for(d=0;d<g.length;d++)for(var a=g[d],h=this._phaseTasks[a],
s=0;s<h.length;s++)e=h[s],!e.paused&&!e.removed&&(0===d&&e.ticks++,-1===e.epoch&&(e.epoch=b),c.time=b,c.deltaTime=e.dt,c.spendInFrame=k()-b,c.spendInTask=b-e.epoch,e.phases[a].call(e,c));this._purge();this.executing=!1},_requestAnimationFrame:function(){this._animationFrameRequestId=m(this._boundAnimationFrame)}};var s=new l;l.schedule=function(b){return s.schedule(b)};l.addFrameTask=function(b){return s.addFrameTask(b)};l.clearFrameTasks=function(){return s.clearFrameTasks()};Object.defineProperty(l,
"executing",{get:function(){return s.executing}});l.instance=s;return l})},"esri/core/ArrayPool":function(){define(["require","exports"],function(a,l){var n=Array.prototype.splice,m=function(){function a(g,e){void 0===g&&(g=50);void 0===e&&(e=50);this.allocationSize=e;this.pool=[];this.index=-1;for(var d=g;0<d;--d)this.pool.push([]);this.index=g-1}a.prototype.acquire=function(){if(-1===this.index){for(var a=this.allocationSize;0<a;--a)this.pool.push([]);this.index+=this.allocationSize}this.index-=
1;return this.pool.pop()};a.prototype.copy=function(a){var e=this.acquire();a.unshift(0,0);n.apply(e,a);a.splice(0,2);return e};a.prototype.release=function(a){a&&(a.length=0,this.index+=1,this.pool[this.index]=a)};a.acquire=function(){return k.acquire()};a.copy=function(a){return k.copy(a)};a.release=function(a){return k.release(a)};return a}(),k=new m(100);return m})},"esri/core/ObjectPool":function(){define(["require","exports"],function(a,l){var n=function(){};return function(){function a(k,g){void 0===
k&&(k=new n);this.cls=k;this.dispose=g;this._pool=[]}a.prototype.acquire=function(){for(var a=0;a<arguments.length;a++);this._pool.length?(a=this._pool.pop(),this.cls.call(a)):a=new this.cls;return a};a.prototype.release=function(a){a&&(a&&a.dispose&&"function"===typeof a.dispose?a.dispose():this.dispose&&this.dispose.call(a),this._pool.push(a))};return a}()})},"esri/core/nextTick":function(){define(["require","exports"],function(a,l){function n(){if(m.postMessage&&!m.importScripts){var a=m.onmessage,
h=!0;m.onmessage=function(){h=!1};m.postMessage("","*");m.onmessage=a;return h}return!1}var m=function(){return this}(),k=m.MutationObserver||m.WebKitMutationObserver;return function(){var a;if(m.process&&m.process.nextTick)a=function(c){m.process.nextTick(c)};else if(m.Promise)a=function(c){m.Promise.resolve().then(c)};else if(k){var h=[],e=document.createElement("div");(new k(function(){for(;0<h.length;)h.shift()()})).observe(e,{attributes:!0});a=function(c){h.push(c);e.setAttribute("queueStatus",
"1")}}else if(n()){var d=[];m.addEventListener("message",function(c){if(c.source===m&&"esri-nexttick-message"===c.data)for(c.stopPropagation();d.length;)d.shift()()},!0);a=function(c){d.push(c);m.postMessage("esri-nexttick-message","*")}}else a=m.setImmediate?function(c){return m.setImmediate(c)}:function(c){return m.setTimeout(c,0)};return a}()})},"esri/core/requestAnimationFrame":function(){define(["dojo/_base/window","dojo/sniff","./now"],function(a,l,n){var m=a.global;a=l("ff");var k=l("ie"),
g=l("webkit");l=l("opera");var h=Date.now(),e=m.requestAnimationFrame;e||(e=m[(g&&"webkit"||a&&"moz"||l&&"o"||k&&"ms")+"RequestAnimationFrame"])||(e=function(a){var c=Date.now(),b=Math.max(0,16-(c-h)),e=m.setTimeout(function(){a(n())},b);h=c+b;return e});return e})},"esri/core/now":function(){define(["dojo/_base/window"],function(a){var l=a.global;return function(){var a,m=l.performance||{},k=m.now||m.webkitNow||m.msNow||m.oNow||m.mozNow;if(void 0!==k)return function(){return k.call(m)};a=l.performance&&
l.performance.timing&&l.performance.timing.navigationStart?l.performance.timing.navigationStart:Date.now();return function(){return Date.now()-a}}()})},"esri/core/CollectionFlattener":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./accessorSupport/decorators ./Collection ./HandleRegistry".split(" "),function(a,l,n,m,k,g,h){return function(a){function d(c){a.call(this);this._handles=new h;this.root=null;this.refresh=this.refresh.bind(this);this.updateCollections=
this.updateCollections.bind(this)}n(d,a);d.prototype.initialize=function(){this._handles.add(this.rootCollectionNames.map(function(c){return this.watch("root."+c,this.updateCollections,!0)},this));this.updateCollections()};d.prototype.destroy=function(){this.root=null;this.refresh();this._handles.destroy();this._handles=null};d.prototype.updateCollections=function(){var c=this;this._collections=this.rootCollectionNames.map(function(b){return c.get("root."+b)}).filter(function(b){return null!=b});
this.refresh()};d.prototype.refresh=function(){var c=this._handles;c.remove("collections");this.removeAll();for(var b=this._collections.slice(),a=0,d=this._collections;a<d.length;a++)this._processCollection(b,this,d[a]);for(a=0;a<b.length;a++)c.add(b[a].on("after-changes",this.refresh),"collections")};d.prototype._createNewInstance=function(c){return new g(c)};d.prototype._processCollection=function(c,b,a){var d=this;a&&(c.push(a),a.forEach(function(a){a&&(b.push(a),d._processCollection(c,b,d.getChildrenFunction(a)))}))};
m([k.property()],d.prototype,"rootCollectionNames",void 0);m([k.property()],d.prototype,"root",void 0);m([k.property()],d.prototype,"getChildrenFunction",void 0);return d=m([k.subclass("esri.core.CollectionFlattener")],d)}(k.declared(g))})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/cast ./decorators/declared ./decorators/property ./decorators/read ./decorators/shared ./decorators/subclass ./decorators/write".split(" "),function(a,l,n,m,k,g,h,e,d){function c(b){for(var c in b)l.hasOwnProperty(c)||
(l[c]=b[c])}c(n);c(m);c(k);c(g);c(h);c(e);c(d)})},"esri/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(a,l){l.declared=function(a){for(var m=[],k=1;k<arguments.length;k++)m[k-1]=arguments[k];k=function(){return{}};k.__bases__=[a].concat(m);return k}})},"esri/core/accessorSupport/decorators/property":function(){define(["require","exports","../../lang","../metadata"],function(a,l,n,m){l.property=function(a){void 0===a&&(a={});return function(g,h){var e=g.constructor.prototype,
d=Object.getOwnPropertyDescriptor(g,h);if(d&&(d.get||d.set))a=n.clone(a),d.set&&(a.set=d.set),d.get&&(a.get=d.get);var e=m.getPropertyMetadata(e,h),c;for(c in a)d=a[c],Array.isArray(d)?e[c]=(e[c]||[]).concat(d):e[c]=d}};l.propertyJSONMeta=function(a,g,h){a=m.getPropertyMetadata(a.constructor.prototype,h);a.json||(a.json={});a=a.json;void 0!==g&&(a.origins||(a.origins={}),a.origins[g]||(a.origins[g]={}),a=a.origins[g]);return a}})},"esri/core/accessorSupport/decorators/read":function(){define(["require",
"exports","./property"],function(a,l,n){l.read=function(a,k,g){var h,e;void 0===k||Array.isArray(k)?(e=a,g=k,h=[void 0]):(e=k,h=Array.isArray(a)?a:[a]);return function(a,c,b){var s=a.constructor.prototype;h.forEach(function(b){b=n.propertyJSONMeta(a,b,e);b.read=s[c];g&&(b.readFrom=(b.readFrom||[]).concat(g))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(a,l){l.shared=function(a){return function(m,k){m[k]=a}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require",
"exports","../../declare","../metadata"],function(a,l,n,m){function k(a){var d=[];a=m.getPropertiesMetadata(a.prototype);if(!a)return d;for(var c in a){var b=a[c];b.cast&&d.push(b.cast);b.copy&&d.push(b.copy);if(b=b.json)if(b.read&&d.push(b.read),b.write&&d.push(b.write),b=b.origins)for(var g in b){var q=b[g];q.read&&d.push(q.read);q.write&&d.push(q.write)}}return d}function g(a){var d={},c=["__bases__"],b=m.getPropertiesMetadata(a.prototype),g=k(a);Object.getOwnPropertyNames(a.prototype).filter(function(d){return-1!==
c.indexOf(d)||b&&b.hasOwnProperty(d)||-1!==g.indexOf(a.prototype[d])?!1:!0}).forEach(function(b){d[b]=a.prototype[b]});return d}function h(a){var d=Object.getOwnPropertyNames(a),c=Object.getOwnPropertyNames(Object.getPrototypeOf(a.prototype).constructor);c.push("__bases__");var b={};d.filter(function(b){return-1===c.indexOf(b)}).forEach(function(c){b[c]=a[c]});return b}l.subclass=function(a){return function(d){var c=g(d),b=h(d);null!=a&&(c.declaredClass=a);d=n(d.__bases__,c);for(var s in b)d[s]=b[s];
return d}}})},"esri/core/accessorSupport/decorators/write":function(){define(["require","exports","./property"],function(a,l,n){l.write=function(a,k){var g;void 0===k?(k=a,g=[void 0]):g=Array.isArray(a)?a:[a];return function(a,e,d){var c=a.constructor.prototype;g.forEach(function(b){n.propertyJSONMeta(a,b,k).write=c[e]})}}})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./accessorSupport/decorators ./accessorSupport/ensureType ./Accessor ./ArrayPool ./Evented ./ObjectPool ./Scheduler ./lang".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q){function v(f){return!f?!1:f.isInstanceOf&&f.isInstanceOf(A)?!0:!1}function t(f){return!f?[]:v(f)?f.toArray():f.length?Array.prototype.slice.apply(f):[]}function u(f){return!f||!f.length?void 0:f[0]}function r(f,b,a,c){b&&b.forEach(function(b,p,d){f.push(b);r(f,a.call(c,b,p,d),a,c)})}(function(){return function(){}})();a=function(){function f(){this.target=null;this.defaultPrevented=this.cancellable=!1}f.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=
!0)};f.prototype.reset=function(f){this.defaultPrevented=!1;this.item=f};return f}();var w=function(){},y=new b(a,function(){this.target=this.item=null}),f=new Set,p=new Set,x=new Set,z=new Map,K=0,A=function(b){function a(f){b.call(this,f);this._boundDispatch=this._dispatchColChange.bind(this);this._chgListeners=[];this._timer=this._notification=null;this.length=0;this._items=[];Object.defineProperty(this,"uid",{value:K++})}n(a,b);a.ofType=function(f){if(!f)return a;if(z.has(f))return z.get(f);var b=
a.createSubclass({declaredClass:"esri.core.Collection\x3c"+f.prototype.declaredClass+"\x3e"});Object.defineProperty(b.prototype,"itemType",{value:f});z.set(f,b);return b};a.prototype.normalizeCtorArgs=function(f){return!f?{}:Array.isArray(f)||v(f)?{items:f}:f};Object.defineProperty(a.prototype,"items",{get:function(){return this._items},set:function(f){this._emitBeforeChanges()||(this._splice.apply(this,[0,this.length].concat(t(f))),this._emitAfterChanges())},enumerable:!0,configurable:!0});a.prototype.on=
function(f,b){var a;Array.isArray(f)?a=f:-1<f.indexOf(",")&&(a=f.split(/\s*,\s*/));if(a){for(var c=[],p=0;p<a.length;p++)c.push(this.on(a[p],b));c.remove=function(){for(var f=0;f<c.length;f++)c[f].remove()};return c}if("change"===f){var d=this._chgListeners;this._notification&&this._dispatchColChange();var e={removed:!1,callback:b};d.push(e);return{remove:function(){this.remove=w;e.removed=!0;d.splice(d.indexOf(e),1)}}}return k.after(this,"on"+f,b,!0)};a.prototype.hasEventListener=function(f){return"change"===
f?0<this._chgListeners.length:this.inherited(arguments)};a.prototype.add=function(f,b){if(this._emitBeforeChanges())return this;var a=this.getNextIndex(b);this._splice(a,0,f);this._emitAfterChanges();return this};a.prototype.addMany=function(f,b){void 0===b&&(b=this._items.length);if(this._emitBeforeChanges())return this;var a=this.getNextIndex(b);this._splice.apply(this,[a,0].concat(t(f)));this._emitAfterChanges();return this};a.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];
var f=this._splice(0,this.length)||[];this._emitAfterChanges();return f};a.prototype.clone=function(){return this._createNewInstance({items:this._items.map(q.clone)})};a.prototype.concat=function(){for(var f=[],b=0;b<arguments.length;b++)f[b-0]=arguments[b];f=f.map(t);return this._createNewInstance({items:(a=this._items).concat.apply(a,f)});var a};a.prototype.drain=function(f,b){if(this.length&&!this._emitBeforeChanges()){for(var a=this._splice(0,this.length),c=0,p=a.length;c<p;c++)f.call(b,a[c],
c,a);this._emitAfterChanges()}};a.prototype.every=function(f,b){return this._items.every(f,b)};a.prototype.filter=function(f,b){var a;a=2===arguments.length?this._items.filter(f,b):this._items.filter(f);return this._createNewInstance({items:a})};a.prototype.find=function(f,b){if("function"!==typeof f)throw new TypeError(f+" is not a function");for(var a=this._items,c=0,p=a.length;c<p;c++){var d=a[c];if(f.call(b,d,c,a))return d}};a.prototype.findIndex=function(f,b){if("function"!==typeof f)throw new TypeError(f+
" is not a function");for(var a=this._items,c=0,p=a.length;c<p;c++)if(f.call(b,a[c],c,a))return c;return-1};a.prototype.flatten=function(f,b){var c=[];r(c,this,f,b);return new a(c)};a.prototype.forEach=function(f,b){return this._items.forEach(f,b)};a.prototype.getItemAt=function(f){return this._items[f]};a.prototype.getNextIndex=function(f){var b=this.length;f=null==f?b:f;0>f?f=0:f>b&&(f=b);return f};a.prototype.includes=function(f,b){void 0===b&&(b=0);return!arguments.length?!1:-1!==this._items.indexOf(f,
b)};a.prototype.indexOf=function(f,b){void 0===b&&(b=0);return this._items.indexOf(f,b)};a.prototype.join=function(f){void 0===f&&(f=",");return this._items.join(f)};a.prototype.lastIndexOf=function(f,b){void 0===b&&(b=this.length-1);return this._items.lastIndexOf(f,b)};a.prototype.map=function(f,b){var c=this._items.map(f,b);return new a({items:c})};a.prototype.reorder=function(f,b){void 0===b&&(b=this.length-1);var a=this.indexOf(f);if(-1!==a){0>b?b=0:b>=this.length&&(b=this.length-1);if(a!==b){if(this._emitBeforeChanges())return f;
this._splice(a,1);this._splice(b,0,f);this._emitAfterChanges()}return f}};a.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var f=u(this._splice(this.length-1,1));this._emitAfterChanges();return f}};a.prototype.push=function(){for(var f=[],b=0;b<arguments.length;b++)f[b-0]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(f));this._emitAfterChanges();return this.length};a.prototype.reduce=function(f,b){var a=this._items;
return 2===arguments.length?a.reduce(f,b):a.reduce(f)};a.prototype.reduceRight=function(f,b){var a=this._items;return 2===arguments.length?a.reduceRight(f,b):a.reduceRight(f)};a.prototype.remove=function(f){return this.removeAt(this.indexOf(f))};a.prototype.removeAt=function(f){if(!(0>f||f>=this.length||this._emitBeforeChanges()))return f=u(this._splice(f,1)),this._emitAfterChanges(),f};a.prototype.removeMany=function(f){if(!f||!f.length||this._emitBeforeChanges())return[];f=v(f)?f.toArray():f;for(var b=
this._items,a=[],c=0,p=f.length;c<p;c++){var d=b.indexOf(f[c]);-1<d&&(d=u(this._splice(d,1)))&&a.push(d)}this._emitAfterChanges();return a};a.prototype.reverse=function(){if(this._emitBeforeChanges())return this;var f=this._splice(0,this.length);f&&(f.reverse(),this._splice.apply(this,[0,0].concat(f)));this._emitAfterChanges();return this};a.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var f=u(this._splice(0,1));this._emitAfterChanges();return f}};a.prototype.slice=function(f,
b){void 0===f&&(f=0);void 0===b&&(b=this.length);return this._createNewInstance({items:this._items.slice(f,b)})};a.prototype.some=function(f,b){return this._items.some(f,b)};a.prototype.sort=function(f){if(!this.length||this._emitBeforeChanges())return this;var b=this._splice(0,this.length);arguments.length?b.sort(f):b.sort();this._splice.apply(this,[0,0].concat(b));return this};a.prototype.splice=function(f,b){for(var a=[],c=2;c<arguments.length;c++)a[c-2]=arguments[c];if(this._emitBeforeChanges())return[];
a=this._splice.apply(this,[f,b].concat(a))||[];this._emitAfterChanges();return a};a.prototype.toArray=function(){return this._items.slice()};a.prototype.toJSON=function(){return this.toArray()};a.prototype.toLocaleString=function(){return this._items.toLocaleString()};a.prototype.toString=function(){return this._items.toString()};a.prototype.unshift=function(){for(var f=[],b=0;b<arguments.length;b++)f[b-0]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(f));
this._emitAfterChanges();return this.length};a.prototype._createNewInstance=function(f){return new this.constructor(f)};a.prototype._splice=function(f,b){for(var a=this,c=[],p=2;p<arguments.length;p++)c[p-2]=arguments[p];var d=this._items,e=this.constructor.prototype.itemType,x,q;!this._notification&&this.hasEventListener("change")&&(this._notification={listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]},this._timer&&this._timer.remove(),this._timer=s.schedule(this._boundDispatch));
if(b){q=d.splice(f,b);if(this.hasEventListener("before-remove")){p=y.acquire();p.target=this;p.cancellable=!0;for(var g=0,r=q.length;g<r;g++)x=q[g],p.reset(x),this.emit("before-remove",p),p.defaultPrevented&&(q.splice(g,1),d.splice(f,0,x),f+=1,g-=1,r-=1);y.release(p)}this.length=this._items.length;if(this.hasEventListener("after-remove")){p=y.acquire();p.target=this;p.cancellable=!1;g=0;for(r=q.length;g<r;g++)p.reset(q[g]),this.emit("after-remove",p);y.release(p)}this._notifyChangeEvent(null,q)}if(c&&
c.length){e&&(c=c.map(h.ensureType.bind(null,e)));if(this.hasEventListener("before-add")){var k=y.acquire();k.target=this;k.cancellable=!0;c=c.filter(function(f){k.reset(f);a.emit("before-add",k);return!k.defaultPrevented});y.release(k)}d.splice.apply(d,[f,0].concat(c));this.length=this._items.length;if(this.hasEventListener("after-add")){p=y.acquire();p.target=this;p.cancellable=!1;d=0;for(e=c;d<e.length;d++)x=e[d],p.reset(x),this.emit("after-add",p);y.release(p)}this._notifyChangeEvent(c,null)}return q};
a.prototype._emitBeforeChanges=function(){var f=!1;if(this.hasEventListener("before-changes")){var b=y.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);f=b.defaultPrevented;y.release(b)}return f};a.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var f=y.acquire();f.target=this;f.cancellable=!1;this.emit("after-changes",f);y.release(f)}};a.prototype._notifyChangeEvent=function(f,b){this.hasEventListener("change")&&this._notification.changes.push({added:f,
removed:b})};a.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notification){var b=this._notification;this._notification=null;var a=b.changes;f.clear();p.clear();x.clear();for(var c=0;c<a.length;c++){var e=a[c],q=e.added,e=e.removed;if(q)if(0===x.size&&0===p.size)for(var g=0,h=q;g<h.length;g++)q=h[g],f.add(q);else{g=0;for(h=q;g<h.length;g++)q=h[g],p.has(q)?(x.add(q),p.delete(q)):x.has(q)||f.add(q)}if(e)if(0===x.size&&0===f.size)for(g=0;g<e.length;g++)q=
e[g],p.add(q);else for(g=0;g<e.length;g++)q=e[g],f.has(q)?f.delete(q):(x.delete(q),p.add(q))}var r=d.acquire();f.forEach(function(f){r.push(f)});var s=d.acquire();p.forEach(function(f){s.push(f)});var k=this._items,m=b.items,v=d.acquire();x.forEach(function(f){m.indexOf(f)!==k.indexOf(f)&&v.push(f)});if(b.listeners&&(r.length||s.length||v.length)){a={target:this,added:r,removed:s,moved:v};c=0;for(q=b.listeners.length;c<q;c++)e=b.listeners[c],e.removed||e.callback.call(this,a)}d.release(r);d.release(s);
d.release(v)}};m([g.property()],a.prototype,"length",void 0);m([g.property()],a.prototype,"items",null);return a=m([g.subclass("esri.core.Collection")],a)}(g.declared(e,c));return A})},"esri/core/Evented":function(){define(["./declare","dojo/Evented"],function(a,l){return a(l,{declaredClass:"esri.core.Evented",hasEventListener:function(a){a="on"+a;return!(!this[a]||!this[a].after)},emit:function(a,m){if(this.hasEventListener(a))return m=m||{},m.target||(m.target=this),this.inherited(arguments,[a,
m])}})})},"dojo/Evented":function(){define(["./aspect","./on"],function(a,l){function n(){}var m=a.after;n.prototype={on:function(a,g){return l.parse(this,a,g,function(a,e){return m(a,"on"+e,g,!0)})},emit:function(a,g){var h=[this];h.push.apply(h,arguments);return l.emit.apply(l,h)}};return n})},"esri/core/HandleRegistry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./accessorSupport/decorators".split(" "),function(a,l,n,m,k,
g){return function(a){function e(){a.call(this);this._groups=null;this._groups={}}n(e,a);e.prototype.destroy=function(){this.removeAll();this._groups=null};Object.defineProperty(e.prototype,"size",{get:function(){var a=0,c=this._groups,b;for(b in c)a+=c[b].length;return a},enumerable:!0,configurable:!0});e.prototype.add=function(a,c){if(!this._isHandle(a)&&!Array.isArray(a))return this;var b=this._getOrCreateGroup(c);if(Array.isArray(a))for(var e=0;e<a.length;e++)b.push(a[e]);else b.push(a);this.notifyChange("size");
return this};e.prototype.has=function(a){a=this._groups[a];return!!a&&0<a.length};e.prototype.remove=function(a){if(Array.isArray(a))a.forEach(this.remove.bind(this));else{a=this._getGroup(a);if(!a)return this;for(var c=0;c<a.length;c++)a[c].remove();a.length=0;this.notifyChange("size")}return this};e.prototype.removeAll=function(){var a=this._groups,c;for(c in a)this.remove(c),delete a[c];return this};e.prototype._isHandle=function(a){return a&&!!a.remove};e.prototype._getOrCreateGroup=function(a){return this._getGroup(a)||
(this._groups[this._ensureGroupName(a)]=[])};e.prototype._getGroup=function(a){return this._groups[this._ensureGroupName(a)]};e.prototype._ensureGroupName=function(a){return a||"_default_"};m([g.property({readOnly:!0})],e.prototype,"size",null);return e=m([g.subclass()],e)}(g.declared(k))})},"esri/support/LayersMixin":function(){define(["../core/Accessor","../core/Collection","../core/Logger"],function(a,l,n){var m=function(a,h){for(var e,d=0,c=a.length;d<c;d++)if(e=a.getItemAt(d),e.id===h||e.layers&&
(e=m(e.layers,h)))return e},k=n.getLogger("esri.Map");return a.createSubclass({declaredClass:"esri.support.LayersMixin",destroy:function(){this._layersHandle.remove();this._layersHandle=null;this.layers.drain(this._lyrRemove,this)},properties:{layers:{type:l,get:function(){var a=this._get("layers");if(a)return a;a=new l;a.on("after-add",function(a){a=a.item;a.parent&&a.parent!==this&&a.parent.remove(a);a.parent=this;this.layerAdded(a);"esri.layers.ElevationLayer"===a.declaredClass&&k.error("Layer '"+
a.title+", id:"+a.id+"' of type '"+a.declaredClass+"' cannot be added as an operational layer.")}.bind(this));a.on("after-remove",function(a){a=a.item;a.parent=null;this.layerRemoved(a)}.bind(this));return a},set:function(a){var h=this._get("layers");h&&this.remove(h.toArray());this.addMany(a.toArray())}}},findLayerById:function(a){return m(this.layers,a)},add:function(a,h){var e=this.layers;h=e.getNextIndex(h);a.parent===this?this.reorder(a,h):e.add(a,h)},addMany:function(a,h){var e=this.layers;
h=e.getNextIndex(h);a.slice().forEach(function(a){a.parent===this?this.reorder(a,h):(e.add(a,h),h+=1)},this)},remove:function(a){return this.layers.remove(a)},removeMany:function(a){return this.layers.removeMany(a)},removeAll:function(){return this.layers.removeAll()},reorder:function(a,h){return this.layers.reorder(a,h)},layerAdded:function(a){},layerRemoved:function(a){}})})},"esri/Ground":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators ./core/Accessor ./core/Collection ./core/collectionUtils ./core/Logger ./layers/Layer".split(" "),
function(a,l,n,m,k,g,h,e,d,c){var b=h.ofType(c),s=d.getLogger("esri.Ground");return function(a){function c(d){a.call(this);this.layers=new b;this.layers.on("after-add",function(b){b=b.item;"esri.layers.ElevationLayer"!==b.declaredClass&&s.error("Layer '"+b.title+", id:"+b.id+"' of type '"+b.declaredClass+"' cannot be added as a ground layer. Only layers of type esri.layers.ElevationLayer are supported.")})}n(c,a);Object.defineProperty(c.prototype,"layers",{set:function(a){this._set("layers",e.referenceSetter(a,
this._get("layers"),b))},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new c({layers:this.layers.slice()})};m([k.property({type:b}),k.cast(e.castForReferenceSetter)],c.prototype,"layers",null);return c=m([k.subclass("esri.Ground")],c)}(k.declared(g))})},"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(a,l,n){l.referenceSetter=function(a,k,g){void 0===g&&(g=n);k||(k=new g);k.removeAll();a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(n))?
k.addMany(a):k.add(a);return k};l.castForReferenceSetter=function(a){return a}})},"esri/layers/Layer":function(){define("require dojo/Deferred ../core/Accessor ../core/Error ../core/Evented ../core/Identifiable ../core/Loadable ../core/urlUtils ../core/requireUtils ../core/promiseUtils ../kernel ../request ../geometry/SpatialReference ../geometry/Extent".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s,q,v){var t=0;n=n.createSubclass([k,g,h],{declaredClass:"esri.layers.Layer",properties:{attributionDataUrl:null,
credential:{value:null,readOnly:!0,dependsOn:["loaded","parsedUrl"],get:function(){var a=this.loaded&&this.parsedUrl&&b.id&&b.id.findCredential(this.parsedUrl.path)||null;a&&a.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));return a}},fullExtent:new v(-180,-90,180,90,q.WGS84),hasAttributionData:{readOnly:!0,dependsOn:["attributionDataUrl"],get:function(){return null!=this.attributionDataUrl}},id:{get:function(){return Date.now().toString(16)+"-layer-"+t++}},legendEnabled:!0,listMode:"show",opacity:{value:1,
type:Number,cast:function(b){return 0>b?0:1<b?1:b}},parsedUrl:{readOnly:!0,dependsOn:["url"],get:function(){var b=this._get("url");return b?e.urlToObject(b):null}},popupEnabled:!0,refreshInterval:0,attributionVisible:!0,spatialReference:q.WGS84,title:null,token:{dependsOn:["credential.token"],get:function(){var b=this.get("parsedUrl.query.token"),a=this.get("credential.token");return b||a||null},set:function(b){b?this._override("token",b):this._clearOverride("token")}},url:{value:null},visible:!0},
createLayerView:function(b){var e=this.viewModulePaths[b.type];return e?d.when(a,e).then(function(a){return new a({layer:this,view:b})}.bind(this)):c.reject(new m("layerview:module-unavailable","No LayerView module available for layer '${layer.declaredClass}' and view type: '${view.type}'",{view:b,layer:this}))},destroyLayerView:function(b){b.destroy()},fetchAttributionData:function(){var b=this.attributionDataUrl;this.hasAttributionData&&b?b=s(b,{query:{f:"json"},responseType:"json"}).then(function(b){return b.data}):
(b=new l,b.reject(new m("Layer does not have attribution data")),b=b.promise);return b},refresh:function(){this.emit("refresh")}});n.fromArcGISServerUrl=function(b){"string"===typeof b&&(b={url:b});return d.when(a,"./support/arcgisLayers").then(function(a){return a.fromUrl(b)})};n.fromPortalItem=function(b){if(b&&!b.portalItem&&"object"===typeof b&&(!b.declaredClass||"esri.portal.PortalItem"===b.declaredClass))b={portalItem:b};return d.when(a,"../portal/support/portalLayers").then(function(a){return a.fromItem(b)})};
return n})},"esri/core/Error":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(a,l,n,m,k){a=function(a){function h(){a.apply(this,arguments)}n(h,a);return h}(k);a.prototype.type="error";return a})},"esri/core/tsSupport/extendsHelper":function(){define([],function(){return function(a,l){function n(){this.constructor=a}for(var m in l)l.hasOwnProperty(m)&&(a[m]=l[m]);a.prototype=null===l?Object.create(l):(n.prototype=l.prototype,new n)}})},
"esri/core/Message":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","dojo/string"],function(a,l,n,m,k){return function(){function a(g,e,d){this.name=g;this.message=e&&k.substitute(e,d,function(a){return null==a?"":a})||"";this.details=d}a.prototype.toString=function(){return"["+this.name+"]: "+this.message};return a}()})},"esri/core/Identifiable":function(){define(["./declare"],function(a){var l=0;return a(null,{constructor:function(){Object.defineProperty(this,
"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+l++})}})})},"esri/core/Loadable":function(){define("./Promise ./Accessor ./Error ./Warning dojo/aspect dojo/_base/lang dojo/Deferred".split(" "),function(a,l,n,m,k,g,h){return a.createSubclass([l],{declaredClass:"esri.core.Loadable","-chains-":g.mixin(l._meta.chains,{load:"after"}),constructor:function(){this._set("loadWarnings",[]);var a=new h;this.addResolvingPromise(a.promise);k.around(this,"load",function(d){return function(){"not-loaded"===
this.loadStatus&&(this.loadStatus="loading",d.apply(this),a.resolve(),a=null);return this}});this.then(function(a){this.loadStatus="loaded"}.bind(this),function(a){this.loadStatus="failed";this.loadError=a}.bind(this))},properties:{loaded:{readOnly:!0,dependsOn:["loadStatus"],get:function(){return"loaded"===this.loadStatus}},loadError:null,loadStatus:"not-loaded",loadWarnings:{type:[m],readOnly:!0}},load:function(){},cancelLoad:function(){if(this.isFulfilled())return this;this.loadError=new n("load:cancelled",
"Cancelled");this._promiseProps.cancel(this.loadError);return this}})})},"esri/core/Promise":function(){define("./declare dojo/promise/all dojo/aspect dojo/Deferred dojo/errors/create ./Scheduler".split(" "),function(a,l,n,m,k,g){var h=function(b){if(!b.isFulfilled()){var a=b._promiseProps,c=a.resolvingPromises,d,e;a.allPromise&&a.allPromise.cancel();var h=new m;for(d=c.length-1;0<=d;d--)e=c[d],e.isCanceled&&e.isCanceled()?c.splice(d,1):e.then(null,null,a.resolver.progress);e=null;(a.allPromise=l(c.concat([h.promise]))).then(function(){a.resolver.resolve(b);
b=a=h=a.allPromise=a.resolvingPromises=null},function(c){a.allPromise=null;if(!c||"cancel"!==c.dojoType){var d=Array.prototype.slice.call(arguments,0);a.resolver.reject(d[0]);b=a=h=a.allPromise=a.resolvingPromises=null}});h&&g.schedule(function(){h&&h.resolve()})}},e=k("CancelError",null,function(b){this.target=b}),d=function(b){return b||new e(this.instance)},c=function(b){this.instance=b;this.canceler=d.bind(this);this.resolver=new m;this.initialized=!1;this.resolvingPromises=[]};c.prototype={canceler:null,
cancel:function(b){if(!this.resolver.isFulfilled()){this.allPromise.cancel();for(var a=this.resolvingPromises.concat(),c=a.length-1;0<=c;c--)a[c].cancel(b);this.resolver.cancel(b)}}};return a(null,{declaredClass:"esri.core.Promise",constructor:function(){Object.defineProperty(this,"_promiseProps",{value:new c(this),enumerable:!1,configurable:!1,writable:!0});var b=n.after(this,"postscript",function(a,c){b.remove();b=null;h(this)},!0)},_promiseProps:null,always:function(b){return this.then(b,b)},then:function(b,
a,c){var d=new m(this._promiseProps.canceler);b=d.then(b,a,c);this._promiseProps.resolver.then(d.resolve,d.reject,d.progress);return b},isResolved:function(){return this._promiseProps.resolver.isResolved()},isRejected:function(){return this._promiseProps.resolver.isRejected()},isFulfilled:function(){return this._promiseProps.resolver.isFulfilled()},otherwise:function(b){return this.then(null,b)},addResolvingPromise:function(b){b&&!this.isFulfilled()&&(this._promiseProps.resolvingPromises.push(b),
h(this))}})})},"dojo/promise/all":function(){define(["../_base/array","../Deferred","../when"],function(a,l,n){var m=a.some;return function(a){var g,h;a instanceof Array?h=a:a&&"object"===typeof a&&(g=a);var e,d=[];if(g){h=[];for(var c in g)Object.hasOwnProperty.call(g,c)&&(d.push(c),h.push(g[c]));e={}}else h&&(e=[]);if(!h||!h.length)return(new l).resolve(e);var b=new l;b.promise.always(function(){e=d=null});var s=h.length;m(h,function(a,c){g||d.push(c);n(a,function(a){b.isFulfilled()||(e[d[c]]=a,
0===--s&&b.resolve(e))},b.reject);return b.isFulfilled()});return b.promise}})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(a,l,n,m,k){a=function(a){function h(){a.apply(this,arguments)}n(h,a);return h}(k);a.prototype.type="warning";return a})},"esri/core/urlUtils":function(){define("require exports dojo/_base/window dojo/_base/lang dojo/_base/url dojo/io-query ../config ./lang ./sniff ./Logger ./Error".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b){function s(f){var b={path:null,query:null},a=new k(f),c=f.indexOf("?");null===a.query?b.path=f:(b.path=f.substring(0,c),b.query=g.queryToObject(a.query));a.fragment&&(b.hash=a.fragment,null===a.query&&(b.path=b.path.substring(0,b.path.length-(a.fragment.length+1))));return b}function q(f,a){void 0===f&&(f=!1);void 0===a&&(a=!0);var c,p=D.proxyUrl;if("string"===typeof f){c=/^\s*https:/i.test(f)||E(f)&&"https"===l.appUrl.scheme;var d=u(f);d&&(p=d.proxyUrl)}else c=!!f;
if(!p)throw S.warn(J),new b("urlutils:proxy-not-set",J);var e;c&&(a&&"https"===l.appUrl.scheme)&&(c=L(p),y(c)&&(p=c,e=1));p=s(p);p._xo=e;return p}function v(f){var b=f.indexOf("?");-1!==b?(P.path=f.slice(0,b),P.query=f.slice(b+1)):(P.path=f,P.query=null);return P}function t(f){f=v(f).path;if(!f||"/"!==f[f.length-1])f+="/";f=B(f,!0);return f=f.toLowerCase()}function u(f){var b=D.proxyRules;f=t(f);for(var a=0;a<b.length;a++)if(0===f.indexOf(b[a].urlPrefix))return b[a]}function r(f){f=x(f);var b=f.indexOf("/sharing");
return 0<b?f.substring(0,b):f.replace(/\/+$/,"")}function w(f,b,a){void 0===a&&(a=!1);f=U(f);b=U(b);return!a&&f.scheme!==b.scheme?!1:f.host.toLowerCase()===b.host.toLowerCase()&&f.port===b.port}function y(b){if(d("esri-phonegap"))return!0;if(!d("esri-cors"))return!1;var a=D.corsEnabledServers||[];"string"===typeof b&&(b=K(b)?U(b):l.appUrl);for(var c=0;c<a.length;c++){var p;p=a[c];l.corsServersUrlCache[p]||(!G.test(p)&&!E(p)?l.corsServersUrlCache[p]=[new k("http://"+p),new k("https://"+p)]:l.corsServersUrlCache[p]=
[new k(f(p))]);p=l.corsServersUrlCache[p];for(var e=0;e<p.length;e++)if(w(b,p[e]))return!0}return!1}function f(f,b,a){void 0===b&&(b=l.appBaseUrl);if(E(f))return a&&a.preserveProtocolRelative?f:"file"===l.appUrl.scheme?"https:"+f:l.appUrl.scheme+":"+f;if(G.test(f))return f;a=z;if("/"===f[0]){var c=b.indexOf("//"),c=b.indexOf("/",c+2);b=-1===c?b:b.slice(0,c)}return a(b,f)}function p(f,b){void 0===b&&(b=l.appBaseUrl);if(!K(f))return f;for(var a=x(f),c=a.toLowerCase(),p=x(b).toLowerCase().replace(/\/+$/,
""),d=function(f,b,a){a=f.indexOf(b,a);return-1===a?f.length:a},e=d(c,"/",c.indexOf("//")+2),q=-1;c.slice(0,e+1)===p.slice(0,e)+"/";){q=e+1;if(e===c.length)break;e=d(c,"/",e+1)}if(-1===q)return f;f=a.slice(q);a=p.slice(q-1).replace(/[^/]+/g,"").length;if(0<a)for(c=0;c<a;c++)f="../"+f;else f="./"+f;return f}function x(b){b=f(b);b=I(b);return b=b.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function z(){for(var f=[],b=0;b<arguments.length;b++)f[b-0]=arguments[b];if(f&&f.length){b=[];if(K(f[0])){var a=
f[0],c=a.indexOf("//");b.push(a.slice(0,c+1));M.test(f[0])&&(b[0]+="/");f[0]=a.slice(c+2)}else"/"===f[0][0]&&b.push("");f=f.reduce(function(f,b){return f.concat(b.split("/"))},[]);for(a=0;a<f.length;a++)c=f[a],".."===c&&0<b.length?b.pop():c&&("."!==c||0===b.length)&&b.push(c);return b.join("/")}}function K(f){return E(f)||G.test(f)}function A(f){return"data:"===f.slice(0,5)}function E(f){return f&&"/"===f[0]&&"/"===f[1]}function L(f){return E(f)?"https:"+f:f.replace(F,"https:")}function B(f,b){void 0===
b&&(b=!1);if(E(f))return f.slice(2);f=f.replace(G,"");b&&(1<f.length&&"/"===f[0]&&"/"===f[1])&&(f=f.slice(2));return f}function I(f){var b=h.request.httpsDomains;if(!(F.test(f)||E(f)&&"http"===l.appUrl.scheme)||"https"!==l.appUrl.scheme&&!M.test(l.appBaseUrl))return f;var a=f.indexOf("/",7),c;c=-1===a?f:f.slice(0,a);if(e.endsWith(c,""+l.appUrl.host+(null!=l.appUrl.port?":"+l.appUrl.port:""))||b&&b.some(function(f){return e.endsWith(c,f)}))f=L(f);return f}function U(b){if("string"===typeof b)return new k(f(b));
b.scheme||(b.scheme=l.appUrl.scheme);return b}a=n.global;var S=c.getLogger("esri.core.urlUtils"),D=h.request,J="esri/config: esriConfig.request.proxyUrl is not set. If making a request to a CORS-enabled\n server, please push the domain into esriConfig.request.corsEnabledServers.",G=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,F=/^\s*http:/i,M=/^\s*file:/i;l.appUrl=new k(a.location);l.corsServersUrlCache={};l.appBaseUrl=function(){var f=l.appUrl.path,f=f.substring(0,f.lastIndexOf(f.split("/")[f.split("/").length-
1]));return""+(l.appUrl.scheme+"://"+l.appUrl.host+(null!=l.appUrl.port?":"+l.appUrl.port:""))+f}();l.urlToObject=s;l.getProxyUrl=q;l.addProxy=function(f){var b=u(f),a,c;b?(c=v(b.proxyUrl),a=c.path,c=c.query?g.queryToObject(c.query):null):D.forceProxy&&(c=q(),a=c.path,c=c.query);a&&(b=s(f),f=a+"?"+b.path,(a=g.objectToQuery(m.mixin(c||{},b.query)))&&(f=f+"?"+a));return f};var P={path:"",query:""};l.addProxyRule=function(f){for(var b=t(f.urlPrefix),a=D.proxyRules,c=a.length,p=0;p<a.length;p++){var d=
a[p].urlPrefix;if(0===b.indexOf(d)){if(b.length===d.length)return-1;c=p;break}0===d.indexOf(b)&&(c=p+1)}a.splice(c,0,f);return c};l.getProxyRule=u;l.hasSamePortal=function(f,b){f=r(f);b=r(b);return B(f)===B(b)};l.hasSameOrigin=w;l.canUseXhr=y;l.makeAbsolute=f;l.makeRelative=p;l.normalize=x;l.join=z;l.getOrigin=function(f){if(A(f))return null;var b=f.indexOf("://");if(-1===b&&E(f))b=2;else if(-1!==b)b+=3;else return null;b=f.indexOf("/",b);return-1===b?f:f.slice(0,b)};l.isAbsolute=K;l.isDataProtocol=
A;l.read=function(b,a){var c=a&&a.url&&a.url.path;return!b||!c?b:f(b,c,{preserveProtocolRelative:!0})};l.write=function(b,a){if(!b)return b;b=f(b);var c=a&&a.url&&a.url.path;c&&(b=p(b,c));return b}})},"dojo/_base/url":function(){define(["./kernel"],function(a){var l=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,n=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,m=function(){for(var a=arguments,g=[a[0]],h=1;h<a.length;h++)if(a[h]){var e=new m(a[h]+""),g=new m(g[0]+
"");if(""==e.path&&!e.scheme&&!e.authority&&!e.query)null!=e.fragment&&(g.fragment=e.fragment),e=g;else if(!e.scheme&&(e.scheme=g.scheme,!e.authority&&(e.authority=g.authority,"/"!=e.path.charAt(0)))){for(var g=(g.path.substring(0,g.path.lastIndexOf("/")+1)+e.path).split("/"),d=0;d<g.length;d++)"."==g[d]?d==g.length-1?g[d]="":(g.splice(d,1),d--):0<d&&(!(1==d&&""==g[0])&&".."==g[d]&&".."!=g[d-1])&&(d==g.length-1?(g.splice(d,1),g[d-1]=""):(g.splice(d-1,2),d-=2));e.path=g.join("/")}g=[];e.scheme&&g.push(e.scheme,
":");e.authority&&g.push("//",e.authority);g.push(e.path);e.query&&g.push("?",e.query);e.fragment&&g.push("#",e.fragment)}this.uri=g.join("");a=this.uri.match(l);this.scheme=a[2]||(a[1]?"":null);this.authority=a[4]||(a[3]?"":null);this.path=a[5];this.query=a[7]||(a[6]?"":null);this.fragment=a[9]||(a[8]?"":null);null!=this.authority&&(a=this.authority.match(n),this.user=a[3]||null,this.password=a[4]||null,this.host=a[6]||a[7],this.port=a[9]||null)};m.prototype.toString=function(){return this.uri};
return a._Url=m})},"esri/config":function(){define(["require","exports","dojo/_base/window"],function(a,l,n){a=n.global;return{screenDPI:96,geometryService:null,geometryServiceUrl:null,geoRSSServiceUrl:null,kmlServiceUrl:null,portalUrl:"https://www.arcgis.com",request:{corsDetection:!(a&&a.cordova),corsDetectionTimeout:15,corsEnabledServers:"dev.arcgis.com devext.arcgis.com elevation3d.arcgis.com elevation3ddev.arcgis.com js.arcgis.com jsdev.arcgis.com jsqa.arcgis.com geocode.arcgis.com geocodedev.arcgis.com geocodeqa.arcgis.com geoenrich.arcgis.com geoenrichdev.arcgis.com geoenrichqa.arcgis.com qaext.arcgis.com server.arcgisonline.com services.arcgis.com services.arcgisonline.com services1.arcgis.com services2.arcgis.com services3.arcgis.com services4.arcgis.com services5.arcgis.com services6.arcgis.com services7.arcgis.com servicesdev.arcgis.com servicesdev1.arcgis.com servicesdev2.arcgis.com servicesdev3.arcgis.com servicesqa.arcgis.com servicesqa1.arcgis.com servicesqa2.arcgis.com servicesqa3.arcgis.com static.arcgis.com staticdev.arcgis.com tiles.arcgis.com tiles1.arcgis.com tiles2.arcgis.com tiles3.arcgis.com tiles4.arcgis.com tilesdevext.arcgis.com tilesqa.arcgis.com utility.arcgisonline.com www.arcgis.com".split(" "),
corsStatus:{},forceProxy:!1,maxUrlLength:2E3,maxWorkers:5,proxyRules:[],proxyUrl:null,timeout:6E4,useCors:!0,useWorkers:"on-request",webTierAuthServers:[],httpsDomains:"arcgis.com arcgisonline.com esrikr.com premiumservices.blackbridge.com esripremium.accuweather.com gbm.digitalglobe.com firstlook.digitalglobe.com msi.digitalglobe.com".split(" ")},useSpatialIndex:!1}})},"esri/core/sniff":function(){define(["dojo/_base/window","dojo/sniff","../kernel"],function(a,l,n){var m=l("ff"),k=l("ie"),g=void 0===
k&&7<=l("trident"),h=l("webkit"),e=l("opera"),d=l("chrome"),c=l("safari"),b=a.global;a=navigator.userAgent;var s;(s=a.match(/(iPhone|iPad|CPU)\s+OS\s+(\d+\_\d+)/i))&&l.add("esri-iphone",parseFloat(s[2].replace("_",".")));(s=a.match(/Android\s+(\d+\.\d+)/i))&&l.add("esri-android",parseFloat(s[1]));(s=a.match(/Fennec\/(\d+\.\d+)/i))&&l.add("esri-fennec",parseFloat(s[1]));0<=a.indexOf("BlackBerry")&&0<=a.indexOf("WebKit")&&l.add("esri-blackberry",1);l.add("esri-touch",l("esri-iphone")||l("esri-android")||
l("esri-blackberry")||6<=l("esri-fennec")||(m||h)&&document.createTouch?!0:!1);(s=a.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i))&&l.add("esri-mobile",s);l.add("esri-pointer",navigator.pointerEnabled||navigator.msPointerEnabled);n._getDOMAccessor=function(b){var a="";m?a="Moz":h?a="Webkit":k?a="ms":e&&(a="O");return a+b.charAt(0).toUpperCase()+b.substr(1)};l.add("esri-phonegap",!!b.cordova);l.add("esri-cors",l("esri-phonegap")||"XMLHttpRequest"in b&&"withCredentials"in new XMLHttpRequest);
if(l("host-webworker"))return l;l.add("esri-file-upload",b.FormData&&b.FileList?!0:!1);l.add("esri-workers",b.Worker?!0:!1);l.add("esri-transforms",g||9<=k||3.5<=m||4<=d||3.1<=c||10.5<=e||3.2<=l("esri-iphone")||2.1<=l("esri-android"));l.add("esri-transitions",g||10<=k||4<=m||4<=d||3.1<=c||10.5<=e||3.2<=l("esri-iphone")||2.1<=l("esri-android"));l.add("esri-transforms3d",g||10<=m||12<=d||4<=c||3.2<=l("esri-iphone")||3<=l("esri-android"));l.add("esri-url-encodes-apostrophe",function(){var a=b.document.createElement("a");
a.href="?'";return-1<a.href.indexOf("?%27")});3>l("esri-android")&&(l.add("esri-transforms",!1,!1,!0),l.add("esri-transitions",!1,!1,!0),l.add("esri-transforms3d",!1,!1,!0));n._css=function(b){var a=l("esri-transforms3d");if(void 0!==b&&null!==b)a=b;else if(a&&(d||c&&!l("esri-iphone")))a=!1;var g=a?"translate3d(":"translate(",s=a?d?",-1px)":",0px)":")",r=a?"scale3d(":"scale(",n=a?",1)":")",y=a?"rotate3d(0,0,1,":"rotate(",f=a?"matrix3d(":"matrix(",p=a?",0,0,":",",x=a?",0,0,0,0,1,0,":",",z=a?",0,1)":
")";return{names:{transition:h&&"-webkit-transition"||m&&"MozTransition"||e&&"OTransition"||k&&"msTransition"||"transition",transform:h&&"-webkit-transform"||m&&"MozTransform"||e&&"OTransform"||k&&"msTransform"||"transform",transformName:h&&"-webkit-transform"||m&&"-moz-transform"||e&&"-o-transform"||k&&"-ms-transform"||"transform",origin:h&&"-webkit-transform-origin"||m&&"MozTransformOrigin"||e&&"OTransformOrigin"||k&&"msTransformOrigin"||"transformOrigin",endEvent:h&&"webkitTransitionEnd"||m&&"transitionend"||
e&&"oTransitionEnd"||k&&"MSTransitionEnd"||"transitionend"},translate:function(f,b){return g+f+"px,"+b+"px"+s},scale:function(f){return r+f+","+f+n},rotate:function(f){return y+f+"deg)"},matrix:function(b){return b.m?(b=b.m,f+b[0].toFixed(10)+","+b[1].toFixed(10)+p+b[2].toFixed(10)+","+b[3].toFixed(10)+x+b[4].toFixed(10)+(m?"px,":",")+b[5].toFixed(10)+(m?"px":"")+z):f+b.xx.toFixed(10)+","+b.yx.toFixed(10)+p+b.xy.toFixed(10)+","+b.yy.toFixed(10)+x+b.dx.toFixed(10)+(m?"px,":",")+b.dy.toFixed(10)+(m?
"px":"")+z},matrix3d:function(f){f=f.m;return"matrix3d("+f[0].toFixed(10)+","+f[1].toFixed(10)+",0,0,"+f[2].toFixed(10)+","+f[3].toFixed(10)+",0,0,0,0,1,0,"+f[4].toFixed(10)+","+f[5].toFixed(10)+",0,1)"},getScaleFromMatrix:function(f){if(!f)return 1;f=f.toLowerCase();var b=-1<f.indexOf("matrix3d")?"matrix3d(":"matrix(";return Number(f.substring(b.length,f.indexOf(",")))}}};l.add("esri-webgl",function(){var a;try{if(!b.WebGLRenderingContext)throw 0;a=document.createElement("canvas")}catch(c){return!1}for(var d=
["webgl","experimental-webgl","webkit-3d","moz-webgl"],e=null,g=0;g<d.length;++g){try{e=a.getContext(d[g])}catch(h){}if(e)break}a=e;if(!a)return!1;a=a.getParameter(a.VERSION);return!a?!1:(a=a.match(/^WebGL\s+([\d.]*)/))&&0.91<parseFloat(a[1])});return l})},"esri/kernel":function(){define([],function(){return{version:"4.1",workerMessages:{}}})},"esri/core/requireUtils":function(){define(["require","exports","dojo/Deferred"],function(a,l,n){function m(a,g){if(Array.isArray(g)){var h=new n;a(g,function(){for(var a=
[],d=0;d<arguments.length;d++)a[d-0]=arguments[d];h.resolve(a)});return h.promise}return m(a,[g]).then(function(a){return a[0]})}l.when=m})},"esri/core/promiseUtils":function(){define(["require","exports","dojo/Deferred","./Error"],function(a,l,n,m){l.eachAlways=function(a){var g=new n,h=[],e=a.length;0===e&&g.resolve(h);a.forEach(function(a){var c={promise:a};h.push(c);a.then(function(b){c.value=b}).otherwise(function(b){c.error=b}).then(function(){--e;0===e&&g.resolve(h)})});return g.promise};l.reject=
function(a){var g=new n;g.reject(a);return g.promise};l.resolve=function(a){void 0===a&&(a=null);var g=new n;g.resolve(a);return g.promise};l.after=function(a,g){void 0===g&&(g=null);var h=0,e=new n(function(){h&&(clearTimeout(h),h=0)}),h=setTimeout(function(){e.resolve(g)},a);return e.promise};l.timeout=function(a,g,h){var e=0,d=new n(a.cancel);a.then(function(a){d.isFulfilled()||(d.resolve(a),e&&(clearTimeout(e),e=0))});a.otherwise(function(a){d.isFulfilled()||(d.reject(a),e&&(clearTimeout(e),e=
0))});e=setTimeout(function(){var a=h||new m("promiseUtils:timeout","The wrapped promise did not resolve within "+g+" ms");d.reject(a)},g);return d.promise}})},"esri/request":function(){define("require dojo/_base/array dojo/_base/config dojo/Deferred dojo/_base/lang dojo/_base/url dojo/request dojo/io-query dojo/when ./kernel ./config ./core/sniff ./core/lang ./core/urlUtils ./core/deferredUtils ./core/promiseUtils dojo/io/script dojo/io/iframe dojo/dom-construct".split(" "),function(a,l,n,m,k,g,
h,e,d,c,b,s,q,v,t,u,r,w,y){function f(f,b,a){if(a)return u.reject(k.mixin(Error(),{message:"When using responseType 'image', URL length cannot exceed 2000 characters."}));if(a=e.objectToQuery(f.content))f.url+=(-1===f.url.indexOf("?")?"?":"\x26")+a;a=new Image;f.allowImageDataAccess&&(f.withCredentials?a.crossOrigin="use-credentials":b&&(a.crossOrigin="anonymous"));a.src=f.url;return u.resolve(a)}function p(f){f=new g(f);return(f.host+(f.port?":"+f.port:"")).toLowerCase()}function x(b,a,d){var x=
!!b.useProxy,g=b.method||"auto",t;t=b.crossOrigin;b=k.mixin({},b);b._ssl&&(b.url=b.url.replace(/^http:/i,"https:"));var E=b.content,z=b.url,u=a&&b.form;t=q.isDefined(t)?t:I.useCors;b.load=function(f){var b;f&&(f.error?(b=k.mixin(Error(),f.error),b.log=n.isDebug):"error"===f.status&&(b=k.mixin(Error(),f),b.log=n.isDebug),b&&!q.isDefined(b.httpCode)&&(b.httpCode=b.code));return b||f};b.error=function(f,b){b&&b.xhr&&b.xhr.abort();f instanceof Error||(f=k.mixin(Error(),f));f.log=n.isDebug;return f};b._token&&
(b.content=b.content||{},b.content.token=b._token);var K=0,L;z&&(L=e.objectToQuery(E),K=L.length+z.length+1,s("esri-url-encodes-apostrophe")&&(K=L.replace(/'/g,"%27").length+z.length+1));b.timeout=q.isDefined(b.timeout)?b.timeout:I.timeout;b.handleAs=b.handleAs||"json";try{var A,U,aa=t&&v.canUseXhr(b.urlObj)&&!/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i.test(b.url),ba=v.hasSameOrigin(b.urlObj,v.appUrl)||aa,ga="post"===g||a||K>I.maxUrlLength?!0:!1,ja=!ba&&-1!==b.handleAs.indexOf("json")&&b.callbackParamName&&
!a?!0:!1,la=v.getProxyRule(b.url)||I.forceProxy||x||("image"!==b.handleAs||b.allowImageDataAccess)&&(!ja||ga)&&!ba?!0:!1;a&&(!s("esri-file-upload")&&!la&&aa)&&(la=!0);if(la)if(A=v.getProxyUrl(z,t),U=A.path,A._xo&&(aa=!0),!ga&&U.length+1+K>I.maxUrlLength&&(ga=!0),b.url=U+"?"+z,ga)b.content=k.mixin(A.query||{},E);else{var ca=e.objectToQuery(k.mixin(A.query||{},E));ca&&(b.url+=(-1===z.indexOf("?")?"?":"\x26")+ca);b.content=null}if(ja&&!ga)return!q.isDefined(b.isAsync)&&4>s("ff")&&(b.isAsync=!0),r.get(B?
B(b):b);var ma=b.headers;if(!ma||!ma.hasOwnProperty("X-Requested-With"))ma=b.headers=ma||{},ma["X-Requested-With"]=null;if(a){var qa=b.callbackParamName||"callback.html",Ha=b.callbackElementName||"textarea",ta,Ca,Da,La,za=u.elements?u.elements.length:0,ua;if(E=b.content)for(ta in E)if(Da=E[ta],q.isDefined(Da)){Ca=null;for(La=0;La<za;La++)if(ua=u.elements[La],ua.name===ta){Ca=ua;break}Ca?Ca.value=Da:d?u.append(ta,Da):u.appendChild(y.create("input",{type:"hidden",name:ta,value:Da}))}if(s("esri-file-upload"))l.forEach(u.elements,
function(f){f.name===qa&&u.removeChild(f)}),b.contentType=!1,b.postData=d?u:new FormData(u),delete b.form;else{u.enctype="multipart/form-data";9>s("ie")&&(u.encoding="multipart/form-data");u.method="post";l.some(u.elements,function(f){return f.name===qa})||u.appendChild(y.create("input",{type:"hidden",name:qa,value:Ha}));if(-1!==z.toLowerCase().indexOf("addattachment")||-1!==z.toLowerCase().indexOf("updateattachment"))b.url=z+(-1===z.indexOf("?")?"?":"\x26")+qa+"\x3d"+Ha,la&&(b.url=U+"?"+b.url);delete b.content}}if(aa&&
!b.hasOwnProperty("withCredentials"))if(d=la?U:z,-1!==l.indexOf(I.webTierAuthServers,p(d)))b.withCredentials=!0;else if(c.id){var pa=c.id.findServerInfo(d);pa&&pa.webTierAuth&&(b.withCredentials=!0)}b=B?B(b):b;if("image"===b.handleAs)return f(b,aa,ga);if(ga){b.data=b.content;if(a&&!s("esri-file-upload"))return w.send(b);!la&&s("safari")&&(b.url+=(-1===b.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+S++);return h.post(b.url,b)}b.query=b.content;return h.get(b.url,b)}catch(Ea){return a=
new m,a.reject(b.error(Ea)),a}}function z(f){var b=I.corsStatus,a=v.canUseXhr(f,!0);-1<a&&I.corsEnabledServers.splice(a,1);b[p(f)]=1;return a}function K(f){var b=I.corsStatus;try{var a=p(f.url);if(I.corsDetection&&I.useCors&&s("esri-cors")&&f.url&&-1!==f.url.toLowerCase().indexOf("/rest/services")&&!v.hasSameOrigin(f.urlObj,v.appUrl)&&!v.canUseXhr(f.urlObj)){if(b[a])return b[a];var c=new m;b[a]=c.promise;var d=f.url.substring(0,f.url.toLowerCase().indexOf("/rest/")+6)+"info";h.get(d,{query:{f:"json"},
failOk:!0,handleAs:"json",headers:{"X-Requested-With":null},timeout:1E3*I.corsDetectionTimeout}).then(function(b){b?(v.canUseXhr(f.url)||I.corsEnabledServers.push(a),c.resolve()):c.reject()},function(f){c.reject()});return c.promise}}catch(e){console.log("esri._detectCors: an unknown error occurred while detecting CORS support")}}function A(f,b,d,e){function g(f){f._pendingDfd=x(d,w,u);if(f._pendingDfd)f._pendingDfd.then(function(b){var a=null;f.ioArgs=f._pendingDfd&&f._pendingDfd.ioArgs;if(b&&(b.error?
(a=k.mixin(Error(),b.error),a.log=n.isDebug):"error"===b.status&&(a=k.mixin(Error(),b),a.log=n.isDebug),a&&!q.isDefined(a.httpCode)&&(a.httpCode=a.code),a))throw a;f.resolve({data:b,url:e.url,requestOptions:e.requestOptions});f._pendingDfd=null}).then(null,function(b){var a,p,x;b&&(a=b.code,p=b.subcode,x=(x=b.messageCode)&&x.toUpperCase());if(b&&403==a&&(4==p||b.message&&-1<b.message.toLowerCase().indexOf("ssl")&&-1===b.message.toLowerCase().indexOf("permission"))){if(!d._ssl){d._ssl=d._sslFromServer=
!0;A(f,!0,d,e);return}}else if(b&&415==b.status){if(z(d.url),!d._err415){d._err415=1;A(f,!0,d,e);return}}else if(c.id&&-1!==l.indexOf(c.id._errorCodes,a)&&!c.id._isPublic(d.url)&&!m&&(403!=a||-1===l.indexOf(U,x)&&(!q.isDefined(p)||2==p&&d._token))){E(f,d,e,b);return}f.ioArgs=f._pendingDfd&&f._pendingDfd.ioArgs;f.reject(b);f._pendingDfd=null});else{f.ioArgs=f._pendingDfd&&f._pendingDfd.ioArgs;var b=Error("Deferred object is missing");b.log=n.isDebug;f.reject(b);f._pendingDfd=null}}var r=d.form,m=d.disableIdentityLookup,
v=d._preLookup,t=!1;if(s("esri-workers")&&!1!==I.useWorkers)if(!0===d.useWorkers||!0===I.useWorkers)t=!0;else if(d.workerOptions){var y=d.workerOptions;if(y.callback||y.worker&&y.worker.worker instanceof Worker)t=!0}var u=r&&s("esri-file-upload")&&r instanceof FormData,w=r&&(r.elements?l.some(r.elements,function(f){return"file"===f.type}):u),K=-1!==d.url.toLowerCase().indexOf("token\x3d")||d.content&&d.content.token||w&&l.some(r.elements,function(f){return"token"===f.name})?1:0;if(!b){f.then(function(f){/\/sharing\/rest\/accounts\/self/i.test(d.url)&&
(!K&&!d._token&&f.user&&f.user.username)&&I.webTierAuthServers.push(p(d.url));var b=d._credential;if(b){var a=c.id.findServerInfo(b.server);if(a=a&&a.owningSystemUrl)a=a.replace(/\/?$/,"/sharing"),(b=c.id.findCredential(a,b.userId))&&-1===c.id._getIdenticalSvcIdx(a,b)&&b.resources.splice(0,0,a)}return f}).always(function(f){delete d._credential;f&&(f.ssl=!!d._ssl)});var L=d.load,B=d.error;L&&f.then(function(b){var a=f._pendingDfd,a=a&&a.ioArgs;return L.call(a&&a.args,b,a)});B&&f.then(null,function(b){var a=
f._pendingDfd,a=a&&a.ioArgs;return B.call(a&&a.args,b,a)})}if(c.id&&!K&&!d._token&&!c.id._isPublic(d.url)&&(!m||v))if(b=c.id.findCredential(d.url))d._token=b.token,d._ssl=b.ssl;t?d.workerOptions&&d.workerOptions.worker?(h=d.workerOptions.worker,g(f)):a(["./workers/RequestClient"],function(b){if(d.workerOptions){var a=d.workerOptions;h=b.getClient(a.callback,a.cbFunction)}else h=b.getClient();g(f)}):g(f);return f.promise}function E(f,b,a,p){f._pendingDfd=c.id.getCredential(b.url,{token:b._token,error:p});
f._pendingDfd.then(function(c){b._token=c.token;b._credential=c;b._ssl=b._sslFromServer||c.ssl;A(f,!0,b,a)}).then(null,function(b){f.reject(b);f._pendingDfd=null})}function L(f,b){"string"!==typeof f&&console.error("esri/request: the first parameter should be a url string");var a=k.mixin({},b),c={url:f,requestOptions:k.mixin({},b)};a.content=a.query;delete a.query;a.preventCache=!!a.cacheBust;delete a.cacheBust;a.handleAs=a.responseType;delete a.responseType;"array-buffer"===a.handleAs&&(a.handleAs=
"arraybuffer");if("image"===a.handleAs){if(s("host-webworker"))return u.reject(k.mixin(Error(),{message:"The responseType 'image' is not supported in Web Workers or Node environment."}));a.preventCache&&(a.content=a.content||{},a.content["request.preventCache"]=Date.now());a.method="auto"}a.url=v.normalize(f);"file"!==v.appUrl.scheme&&(a.url=v.makeAbsolute(a.url));a.urlObj=new g(a.url);var p=t.makeDeferredCancellingPending();d(K(a)).always(function(){A(p,!1,a,c)});return p.promise}var B,I=b.request,
U=["COM_0056","COM_0057"],S=0;L._makeRequest=x;L._processRequest=A;L._disableCors=z;L._detectCors=K;L.setRequestPreCallback=function(f){B=f};return L})},"dojo/request":function(){define(["./request/default!"],function(a){return a})},"dojo/request/default":function(){define(["exports","require","../has"],function(a,l,n){var m=n("config-requestProvider");m||(m="./xhr");a.getPlatformDefaultId=function(){return"./xhr"};a.load=function(a,g,h,e){l(["platform"==a?"./xhr":m],function(a){h(a)})}})},"esri/core/deferredUtils":function(){define(["dojo/Deferred"],
function(a){var l={makeDeferredCancellingPending:function(){var n={},m=l._dfdCanceller.bind(null,n),m=new a(m);return n.deferred=m},_dfdCanceller:function(a){a=a.deferred?a.deferred:a;a.canceled=!0;var m=a._pendingDfd;!a.isResolved()&&(m&&!m.isResolved())&&m.cancel();a._pendingDfd=null},_fixDfd:function(a){var m=a.then;a.then=function(a,g,h){if(a){var e=a;a=function(a){return a&&a._argsArray?e.apply(null,a):e(a)}}return m.call(this,a,g,h)};return a},_resDfd:function(a,m,k){var g=m.length;1===g?k?
a.reject(m[0]):a.resolve(m[0]):1<g?(m._argsArray=!0,a.resolve(m)):a.resolve()}};return l})},"dojo/io/script":function(){define("../_base/connect ../_base/kernel ../_base/lang ../sniff ../_base/window ../_base/xhr ../dom ../dom-construct ../request/script ../aspect".split(" "),function(a,l,n,m,k,g,h,e,d,c){l.deprecated("dojo/io/script","Use dojo/request/script.","2.0");var b={get:function(a){var e,h=this._makeScriptDeferred(a,function(b){e&&e.cancel()}),k=h.ioArgs;g._ioAddQueryToUrl(k);g._ioNotifyStart(h);
e=d.get(k.url,{timeout:a.timeout,jsonp:k.jsonp,checkString:a.checkString,ioArgs:k,frameDoc:a.frameDoc,canAttach:function(a){k.requestId=a.id;k.scriptId=a.scriptId;k.canDelete=a.canDelete;return b._canAttach(k)}},!0);c.around(e,"isValid",function(a){return function(c){b._validCheck(h);return a.call(this,c)}});e.then(function(){h.resolve(h)}).otherwise(function(b){h.ioArgs.error=b;h.reject(b)});return h},attach:d._attach,remove:d._remove,_makeScriptDeferred:function(a,c){var e=g._ioSetArgs(a,c||this._deferredCancel,
this._deferredOk,this._deferredError),h=e.ioArgs;h.id=l._scopeName+"IoScript"+(a.callbackSuffix||this._counter++);h.canDelete=!1;h.jsonp=a.callbackParamName||a.jsonp;h.jsonp&&(h.query=h.query||"",0<h.query.length&&(h.query+="\x26"),h.query+=h.jsonp+"\x3d"+(a.frameDoc?"parent.":"")+l._scopeName+".io.script.jsonp_"+h.id+"._jsonpCallback",h.frameDoc=a.frameDoc,h.canDelete=!0,e._jsonpCallback=this._jsonpCallback,this["jsonp_"+h.id]=e);e.addBoth(function(a){h.canDelete&&(a instanceof Error?b["jsonp_"+
h.id]._jsonpCallback=function(){delete b["jsonp_"+h.id];if(h.requestId)l.global[d._callbacksProperty][h.requestId]()}:b._addDeadScript(h))});return e},_deferredCancel:function(b){b.canceled=!0},_deferredOk:function(b){b=b.ioArgs;return b.json||b.scriptLoaded||b},_deferredError:function(b,a){console.log("dojo.io.script error",b);return b},_deadScripts:[],_counter:1,_addDeadScript:function(a){b._deadScripts.push({id:a.id,frameDoc:a.frameDoc});a.frameDoc=null},_validCheck:function(a){if((a=b._deadScripts)&&
0<a.length){for(var c=0;c<a.length;c++)b.remove(a[c].id,a[c].frameDoc),delete b["jsonp_"+a[c].id],a[c].frameDoc=null;b._deadScripts=[]}return!0},_ioCheck:function(b){b=b.ioArgs;return b.json||b.scriptLoaded&&!b.args.checkString?!0:(b=b.args.checkString)&&eval("typeof("+b+") !\x3d 'undefined'")},_resHandle:function(a){b._ioCheck(a)?a.callback(a):a.errback(Error("inconceivable dojo.io.script._resHandle error"))},_canAttach:function(){return!0},_jsonpCallback:function(b){this.ioArgs.json=b;if(this.ioArgs.requestId)l.global[d._callbacksProperty][this.ioArgs.requestId](b)}};
n.setObject("dojo.io.script",b);return b})},"dojo/_base/connect":function(){define("./kernel ../on ../topic ../aspect ./event ../mouse ./sniff ./lang ../keys".split(" "),function(a,l,n,m,k,g,h,e){function d(b,c,d,q,f){q=e.hitch(d,q);if(!b||!b.addEventListener&&!b.attachEvent)return m.after(b||a.global,c,q,!0);"string"==typeof c&&"on"==c.substring(0,2)&&(c=c.substring(2));b||(b=a.global);if(!f)switch(c){case "keypress":c=v;break;case "mouseenter":c=g.enter;break;case "mouseleave":c=g.leave}return l(b,
c,q,f)}function c(b){b.keyChar=b.charCode?String.fromCharCode(b.charCode):"";b.charOrCode=b.keyChar||b.keyCode}h.add("events-keypress-typed",function(){var b={charCode:0};try{b=document.createEvent("KeyboardEvent"),(b.initKeyboardEvent||b.initKeyEvent).call(b,"keypress",!0,!0,null,!1,!1,!1,!1,9,3)}catch(a){}return 0==b.charCode&&!h("opera")});var b={106:42,111:47,186:59,187:43,188:44,189:45,190:46,191:47,192:96,219:91,220:92,221:93,222:39,229:113},s=h("mac")?"metaKey":"ctrlKey",q=function(b,a){var d=
e.mixin({},b,a);c(d);d.preventDefault=function(){b.preventDefault()};d.stopPropagation=function(){b.stopPropagation()};return d},v;v=h("events-keypress-typed")?function(a,c){var d=l(a,"keydown",function(f){var a=f.keyCode,d=13!=a&&32!=a&&(27!=a||!h("ie"))&&(48>a||90<a)&&(96>a||111<a)&&(186>a||192<a)&&(219>a||222<a)&&229!=a;if(d||f.ctrlKey){d=d?0:a;if(f.ctrlKey){if(3==a||13==a)return c.call(f.currentTarget,f);d=95<d&&106>d?d-48:!f.shiftKey&&65<=d&&90>=d?d+32:b[d]||d}a=q(f,{type:"keypress",faux:!0,
charCode:d});c.call(f.currentTarget,a);if(h("ie"))try{f.keyCode=a.keyCode}catch(e){}}}),e=l(a,"keypress",function(f){var b=f.charCode;f=q(f,{charCode:32<=b?b:0,faux:!0});return c.call(this,f)});return{remove:function(){d.remove();e.remove()}}}:h("opera")?function(b,a){return l(b,"keypress",function(b){var c=b.which;3==c&&(c=99);c=32>c&&!b.shiftKey?0:c;b.ctrlKey&&(!b.shiftKey&&65<=c&&90>=c)&&(c+=32);return a.call(this,q(b,{charCode:c}))})}:function(b,a){return l(b,"keypress",function(b){c(b);return a.call(this,
b)})};var t={_keypress:v,connect:function(b,a,c,e,f){var p=arguments,x=[],g=0;x.push("string"==typeof p[0]?null:p[g++],p[g++]);var q=p[g+1];x.push("string"==typeof q||"function"==typeof q?p[g++]:null,p[g++]);for(q=p.length;g<q;g++)x.push(p[g]);return d.apply(this,x)},disconnect:function(b){b&&b.remove()},subscribe:function(b,a,c){return n.subscribe(b,e.hitch(a,c))},publish:function(b,a){return n.publish.apply(n,[b].concat(a))},connectPublisher:function(b,a,c){var d=function(){t.publish(b,arguments)};
return c?t.connect(a,c,d):t.connect(a,d)},isCopyKey:function(b){return b[s]}};t.unsubscribe=t.disconnect;e.mixin(a,t);return t})},"dojo/topic":function(){define(["./Evented"],function(a){var l=new a;return{publish:function(a,m){return l.emit.apply(l,arguments)},subscribe:function(a,m){return l.on.apply(l,arguments)}}})},"dojo/_base/event":function(){define(["./kernel","../on","../has","../dom-geometry"],function(a,l,n,m){if(l._fixEvent){var k=l._fixEvent;l._fixEvent=function(a,e){(a=k(a,e))&&m.normalizeEvent(a);
return a}}var g={fix:function(a,e){return l._fixEvent?l._fixEvent(a,e):a},stop:function(a){n("dom-addeventlistener")||a&&a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a=a||window.event,a.cancelBubble=!0,l._preventDefault.call(a))}};a.fixEvent=g.fix;a.stopEvent=g.stop;return g})},"dojo/dom-geometry":function(){define(["./sniff","./_base/window","./dom","./dom-style"],function(a,l,n,m){function k(a,b,d,e,g,h){h=h||"px";a=a.style;isNaN(b)||(a.left=b+h);isNaN(d)||(a.top=d+h);0<=e&&(a.width=
e+h);0<=g&&(a.height=g+h)}function g(a){return"button"==a.tagName.toLowerCase()||"input"==a.tagName.toLowerCase()&&"button"==(a.getAttribute("type")||"").toLowerCase()}function h(a){return"border-box"==e.boxModel||"table"==a.tagName.toLowerCase()||g(a)}var e={boxModel:"content-box"};a("ie")&&(e.boxModel="BackCompat"==document.compatMode?"border-box":"content-box");e.getPadExtents=function(a,b){a=n.byId(a);var d=b||m.getComputedStyle(a),e=m.toPixelValue,g=e(a,d.paddingLeft),h=e(a,d.paddingTop),k=e(a,
d.paddingRight),d=e(a,d.paddingBottom);return{l:g,t:h,r:k,b:d,w:g+k,h:h+d}};e.getBorderExtents=function(a,b){a=n.byId(a);var d=m.toPixelValue,e=b||m.getComputedStyle(a),g="none"!=e.borderLeftStyle?d(a,e.borderLeftWidth):0,h="none"!=e.borderTopStyle?d(a,e.borderTopWidth):0,k="none"!=e.borderRightStyle?d(a,e.borderRightWidth):0,d="none"!=e.borderBottomStyle?d(a,e.borderBottomWidth):0;return{l:g,t:h,r:k,b:d,w:g+k,h:h+d}};e.getPadBorderExtents=function(a,b){a=n.byId(a);var d=b||m.getComputedStyle(a),
g=e.getPadExtents(a,d),d=e.getBorderExtents(a,d);return{l:g.l+d.l,t:g.t+d.t,r:g.r+d.r,b:g.b+d.b,w:g.w+d.w,h:g.h+d.h}};e.getMarginExtents=function(a,b){a=n.byId(a);var d=b||m.getComputedStyle(a),e=m.toPixelValue,g=e(a,d.marginLeft),h=e(a,d.marginTop),k=e(a,d.marginRight),d=e(a,d.marginBottom);return{l:g,t:h,r:k,b:d,w:g+k,h:h+d}};e.getMarginBox=function(c,b){c=n.byId(c);var d=b||m.getComputedStyle(c),g=e.getMarginExtents(c,d),h=c.offsetLeft-g.l,k=c.offsetTop-g.t,l=c.parentNode,r=m.toPixelValue;if(a("mozilla")){var w=
parseFloat(d.left),d=parseFloat(d.top);!isNaN(w)&&!isNaN(d)?(h=w,k=d):l&&l.style&&(l=m.getComputedStyle(l),"visible"!=l.overflow&&(h+="none"!=l.borderLeftStyle?r(c,l.borderLeftWidth):0,k+="none"!=l.borderTopStyle?r(c,l.borderTopWidth):0))}else if((a("opera")||8==a("ie")&&!a("quirks"))&&l)l=m.getComputedStyle(l),h-="none"!=l.borderLeftStyle?r(c,l.borderLeftWidth):0,k-="none"!=l.borderTopStyle?r(c,l.borderTopWidth):0;return{l:h,t:k,w:c.offsetWidth+g.w,h:c.offsetHeight+g.h}};e.getContentBox=function(c,
b){c=n.byId(c);var d=b||m.getComputedStyle(c),g=c.clientWidth,h=e.getPadExtents(c,d),k=e.getBorderExtents(c,d);g?(d=c.clientHeight,k.w=k.h=0):(g=c.offsetWidth,d=c.offsetHeight);a("opera")&&(h.l+=k.l,h.t+=k.t);return{l:h.l,t:h.t,w:g-h.w-k.w,h:d-h.h-k.h}};e.setContentSize=function(a,b,d){a=n.byId(a);var g=b.w;b=b.h;h(a)&&(d=e.getPadBorderExtents(a,d),0<=g&&(g+=d.w),0<=b&&(b+=d.h));k(a,NaN,NaN,g,b)};var d={l:0,t:0,w:0,h:0};e.setMarginBox=function(c,b,s){c=n.byId(c);var q=s||m.getComputedStyle(c);s=b.w;
var l=b.h,t=h(c)?d:e.getPadBorderExtents(c,q),q=e.getMarginExtents(c,q);if(a("webkit")&&g(c)){var u=c.style;0<=s&&!u.width&&(u.width="4px");0<=l&&!u.height&&(u.height="4px")}0<=s&&(s=Math.max(s-t.w-q.w,0));0<=l&&(l=Math.max(l-t.h-q.h,0));k(c,b.l,b.t,s,l)};e.isBodyLtr=function(a){a=a||l.doc;return"ltr"==(l.body(a).dir||a.documentElement.dir||"ltr").toLowerCase()};e.docScroll=function(c){c=c||l.doc;var b=l.doc.parentWindow||l.doc.defaultView;return"pageXOffset"in b?{x:b.pageXOffset,y:b.pageYOffset}:
(b=a("quirks")?l.body(c):c.documentElement)&&{x:e.fixIeBiDiScrollLeft(b.scrollLeft||0,c),y:b.scrollTop||0}};e.getIeDocumentElementOffset=function(a){return{x:0,y:0}};e.fixIeBiDiScrollLeft=function(c,b){b=b||l.doc;var d=a("ie");if(d&&!e.isBodyLtr(b)){var g=a("quirks"),h=g?l.body(b):b.documentElement,k=l.global;6==d&&(!g&&k.frameElement&&h.scrollHeight>h.clientHeight)&&(c+=h.clientLeft);return 8>d||g?c+h.clientWidth-h.scrollWidth:-c}return c};e.position=function(c,b){c=n.byId(c);var d=l.body(c.ownerDocument),
g=c.getBoundingClientRect(),g={x:g.left,y:g.top,w:g.right-g.left,h:g.bottom-g.top};9>a("ie")&&(g.x-=a("quirks")?d.clientLeft+d.offsetLeft:0,g.y-=a("quirks")?d.clientTop+d.offsetTop:0);b&&(d=e.docScroll(c.ownerDocument),g.x+=d.x,g.y+=d.y);return g};e.getMarginSize=function(a,b){a=n.byId(a);var d=e.getMarginExtents(a,b||m.getComputedStyle(a)),g=a.getBoundingClientRect();return{w:g.right-g.left+d.w,h:g.bottom-g.top+d.h}};e.normalizeEvent=function(c){"layerX"in c||(c.layerX=c.offsetX,c.layerY=c.offsetY);
if(!("pageX"in c)){var b=c.target,b=b&&b.ownerDocument||document,d=a("quirks")?b.body:b.documentElement;c.pageX=c.clientX+e.fixIeBiDiScrollLeft(d.scrollLeft||0,b);c.pageY=c.clientY+(d.scrollTop||0)}};return e})},"dojo/dom-style":function(){define(["./sniff","./dom"],function(a,l){function n(a,d,e){d=d.toLowerCase();if("auto"==e){if("height"==d)return a.offsetHeight;if("width"==d)return a.offsetWidth}if("fontweight"==d)switch(e){case 700:return"bold";default:return"normal"}d in c||(c[d]=b.test(d));
return c[d]?g(a,e):e}var m,k={};m=a("webkit")?function(a){var b;if(1==a.nodeType){var c=a.ownerDocument.defaultView;b=c.getComputedStyle(a,null);!b&&a.style&&(a.style.display="",b=c.getComputedStyle(a,null))}return b||{}}:a("ie")&&(9>a("ie")||a("quirks"))?function(a){return 1==a.nodeType&&a.currentStyle?a.currentStyle:{}}:function(a){return 1==a.nodeType?a.ownerDocument.defaultView.getComputedStyle(a,null):{}};k.getComputedStyle=m;var g;g=a("ie")?function(a,b){if(!b)return 0;if("medium"==b)return 4;
if(b.slice&&"px"==b.slice(-2))return parseFloat(b);var c=a.style,d=a.runtimeStyle,e=c.left,g=d.left;d.left=a.currentStyle.left;try{c.left=b,b=c.pixelLeft}catch(h){b=0}c.left=e;d.left=g;return b}:function(a,b){return parseFloat(b)||0};k.toPixelValue=g;var h=function(a,b){try{return a.filters.item("DXImageTransform.Microsoft.Alpha")}catch(c){return b?{}:null}},e=9>a("ie")||10>a("ie")&&a("quirks")?function(a){try{return h(a).Opacity/100}catch(b){return 1}}:function(a){return m(a).opacity},d=9>a("ie")||
10>a("ie")&&a("quirks")?function(a,b){""===b&&(b=1);var c=100*b;1===b?(a.style.zoom="",h(a)&&(a.style.filter=a.style.filter.replace(/\s*progid:DXImageTransform.Microsoft.Alpha\([^\)]+?\)/i,""))):(a.style.zoom=1,h(a)?h(a,1).Opacity=c:a.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(Opacity\x3d"+c+")",h(a,1).Enabled=!0);if("tr"==a.tagName.toLowerCase())for(c=a.firstChild;c;c=c.nextSibling)"td"==c.tagName.toLowerCase()&&d(c,b);return b}:function(a,b){return a.style.opacity=b},c={left:!0,top:!0},
b=/margin|padding|width|height|max|min|offset/,s={cssFloat:1,styleFloat:1,"float":1};k.get=function(a,b){var c=l.byId(a),d=arguments.length;if(2==d&&"opacity"==b)return e(c);b=s[b]?"cssFloat"in c.style?"cssFloat":"styleFloat":b;var g=k.getComputedStyle(c);return 1==d?g:n(c,b,g[b]||c.style[b])};k.set=function(a,b,c){var e=l.byId(a),g=arguments.length,h="opacity"==b;b=s[b]?"cssFloat"in e.style?"cssFloat":"styleFloat":b;if(3==g)return h?d(e,c):e.style[b]=c;for(var m in b)k.set(a,m,b[m]);return k.getComputedStyle(e)};
return k})},"dojo/mouse":function(){define(["./_base/kernel","./on","./has","./dom","./_base/window"],function(a,l,n,m,k){function g(a,e){var d=function(c,b){return l(c,a,function(a){if(e)return e(a,b);if(!m.isDescendant(a.relatedTarget,c))return b.call(this,a)})};d.bubble=function(c){return g(a,function(a,d){var e=c(a.target),g=a.relatedTarget;if(e&&e!=(g&&1==g.nodeType&&c(g)))return d.call(e,a)})};return d}n.add("dom-quirks",k.doc&&"BackCompat"==k.doc.compatMode);n.add("events-mouseenter",k.doc&&
"onmouseenter"in k.doc.createElement("div"));n.add("events-mousewheel",k.doc&&"onmousewheel"in k.doc);k=n("dom-quirks")&&n("ie")||!n("dom-addeventlistener")?{LEFT:1,MIDDLE:4,RIGHT:2,isButton:function(a,e){return a.button&e},isLeft:function(a){return a.button&1},isMiddle:function(a){return a.button&4},isRight:function(a){return a.button&2}}:{LEFT:0,MIDDLE:1,RIGHT:2,isButton:function(a,e){return a.button==e},isLeft:function(a){return 0==a.button},isMiddle:function(a){return 1==a.button},isRight:function(a){return 2==
a.button}};a.mouseButtons=k;a=n("events-mousewheel")?"mousewheel":function(a,e){return l(a,"DOMMouseScroll",function(a){a.wheelDelta=-a.detail;e.call(this,a)})};return{_eventHandler:g,enter:g("mouseover"),leave:g("mouseout"),wheel:a,isLeft:k.isLeft,isMiddle:k.isMiddle,isRight:k.isRight}})},"dojo/keys":function(){define(["./_base/kernel","./sniff"],function(a,l){return a.keys={BACKSPACE:8,TAB:9,CLEAR:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,META:l("webkit")?91:224,PAUSE:19,CAPS_LOCK:20,ESCAPE:27,SPACE:32,
PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,HELP:47,LEFT_WINDOW:91,RIGHT_WINDOW:92,SELECT:93,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,NUMPAD_MULTIPLY:106,NUMPAD_PLUS:107,NUMPAD_ENTER:108,NUMPAD_MINUS:109,NUMPAD_PERIOD:110,NUMPAD_DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,
NUM_LOCK:144,SCROLL_LOCK:145,UP_DPAD:175,DOWN_DPAD:176,LEFT_DPAD:177,RIGHT_DPAD:178,copyKey:l("mac")&&!l("air")?l("safari")?91:224:17}})},"dojo/dom-construct":function(){define("exports ./_base/kernel ./sniff ./_base/window ./dom ./dom-attr".split(" "),function(a,l,n,m,k,g){function h(a,b){var f=b.parentNode;f&&f.insertBefore(a,b)}function e(a){if("innerHTML"in a)try{a.innerHTML="";return}catch(b){}for(var f;f=a.lastChild;)a.removeChild(f)}var d={option:["select"],tbody:["table"],thead:["table"],
tfoot:["table"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","thead","tr"],legend:["fieldset"],caption:["table"],colgroup:["table"],col:["table","colgroup"],li:["ul"]},c=/<\s*([\w\:]+)/,b={},s=0,q="__"+l._scopeName+"ToDomId",v;for(v in d)d.hasOwnProperty(v)&&(l=d[v],l.pre="option"==v?'\x3cselect multiple\x3d"multiple"\x3e':"\x3c"+l.join("\x3e\x3c")+"\x3e",l.post="\x3c/"+l.reverse().join("\x3e\x3c/")+"\x3e");var t;8>=n("ie")&&(t=function(a){a.__dojo_html5_tested="yes";var b=u("div",{innerHTML:"\x3cnav\x3ea\x3c/nav\x3e",
style:{visibility:"hidden"}},a.body);1!==b.childNodes.length&&"abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\b\w+\b/g,function(f){a.createElement(f)});r(b)});a.toDom=function(a,e){e=e||m.doc;var f=e[q];f||(e[q]=f=++s+"",b[f]=e.createElement("div"));8>=n("ie")&&!e.__dojo_html5_tested&&e.body&&t(e);a+="";var p=a.match(c),x=p?p[1].toLowerCase():"",f=b[f];if(p&&d[x]){p=d[x];f.innerHTML=p.pre+a+p.post;
for(p=p.length;p;--p)f=f.firstChild}else f.innerHTML=a;if(1==f.childNodes.length)return f.removeChild(f.firstChild);for(x=e.createDocumentFragment();p=f.firstChild;)x.appendChild(p);return x};a.place=function(b,c,f){c=k.byId(c);"string"==typeof b&&(b=/^\s*</.test(b)?a.toDom(b,c.ownerDocument):k.byId(b));if("number"==typeof f){var p=c.childNodes;!p.length||p.length<=f?c.appendChild(b):h(b,p[0>f?0:f])}else switch(f){case "before":h(b,c);break;case "after":f=b;(p=c.parentNode)&&(p.lastChild==c?p.appendChild(f):
p.insertBefore(f,c.nextSibling));break;case "replace":c.parentNode.replaceChild(b,c);break;case "only":a.empty(c);c.appendChild(b);break;case "first":if(c.firstChild){h(b,c.firstChild);break}default:c.appendChild(b)}return b};var u=a.create=function(b,c,f,p){var d=m.doc;f&&(f=k.byId(f),d=f.ownerDocument);"string"==typeof b&&(b=d.createElement(b));c&&g.set(b,c);f&&a.place(b,f,p);return b};a.empty=function(a){e(k.byId(a))};var r=a.destroy=function(a){if(a=k.byId(a)){var b=a;a=a.parentNode;b.firstChild&&
e(b);a&&(n("ie")&&a.canHaveChildren&&"removeNode"in b?b.removeNode(!1):a.removeChild(b))}}})},"dojo/dom-attr":function(){define("exports ./sniff ./_base/lang ./dom ./dom-style ./dom-prop".split(" "),function(a,l,n,m,k,g){function h(a,b){var d=a.getAttributeNode&&a.getAttributeNode(b);return!!d&&d.specified}var e={innerHTML:1,textContent:1,className:1,htmlFor:l("ie"),value:1},d={classname:"class",htmlfor:"for",tabindex:"tabIndex",readonly:"readOnly"};a.has=function(a,b){var k=b.toLowerCase();return e[g.names[k]||
b]||h(m.byId(a),d[k]||b)};a.get=function(a,b){a=m.byId(a);var k=b.toLowerCase(),q=g.names[k]||b,l=a[q];if(e[q]&&"undefined"!=typeof l)return l;if("textContent"==q)return g.get(a,q);if("href"!=q&&("boolean"==typeof l||n.isFunction(l)))return l;k=d[k]||b;return h(a,k)?a.getAttribute(k):null};a.set=function(c,b,h){c=m.byId(c);if(2==arguments.length){for(var q in b)a.set(c,q,b[q]);return c}q=b.toLowerCase();var l=g.names[q]||b,t=e[l];if("style"==l&&"string"!=typeof h)return k.set(c,h),c;if(t||"boolean"==
typeof h||n.isFunction(h))return g.set(c,b,h);c.setAttribute(d[q]||b,h);return c};a.remove=function(a,b){m.byId(a).removeAttribute(d[b.toLowerCase()]||b)};a.getNodeProp=function(a,b){a=m.byId(a);var e=b.toLowerCase(),q=g.names[e]||b;if(q in a&&"href"!=q)return a[q];e=d[e]||b;return h(a,e)?a.getAttribute(e):null}})},"dojo/dom-prop":function(){define("exports ./_base/kernel ./sniff ./_base/lang ./dom ./dom-style ./dom-construct ./_base/connect".split(" "),function(a,l,n,m,k,g,h,e){function d(a){var b=
"";a=a.childNodes;for(var c=0,e;e=a[c];c++)8!=e.nodeType&&(b=1==e.nodeType?b+d(e):b+e.nodeValue);return b}var c={},b=1,s=l._scopeName+"attrid";n.add("dom-textContent",function(a,b,c){return"textContent"in c});a.names={"class":"className","for":"htmlFor",tabindex:"tabIndex",readonly:"readOnly",colspan:"colSpan",frameborder:"frameBorder",rowspan:"rowSpan",textcontent:"textContent",valuetype:"valueType"};a.get=function(b,c){b=k.byId(b);var e=c.toLowerCase(),e=a.names[e]||c;return"textContent"==e&&!n("dom-textContent")?
d(b):b[e]};a.set=function(d,l,t){d=k.byId(d);if(2==arguments.length&&"string"!=typeof l){for(var u in l)a.set(d,u,l[u]);return d}u=l.toLowerCase();u=a.names[u]||l;if("style"==u&&"string"!=typeof t)return g.set(d,t),d;if("innerHTML"==u)return n("ie")&&d.tagName.toLowerCase()in{col:1,colgroup:1,table:1,tbody:1,tfoot:1,thead:1,tr:1,title:1}?(h.empty(d),d.appendChild(h.toDom(t,d.ownerDocument))):d[u]=t,d;if("textContent"==u&&!n("dom-textContent"))return h.empty(d),d.appendChild(d.ownerDocument.createTextNode(t)),
d;if(m.isFunction(t)){var r=d[s];r||(r=b++,d[s]=r);c[r]||(c[r]={});var w=c[r][u];if(w)e.disconnect(w);else try{delete d[u]}catch(y){}t?c[r][u]=e.connect(d,u,t):d[u]=null;return d}d[u]=t;return d}})},"dojo/request/script":function(){define("module ./watch ./util ../_base/kernel ../_base/array ../_base/lang ../on ../dom ../dom-construct ../has ../_base/window".split(" "),function(a,l,n,m,k,g,h,e,d,c,b){function s(f,a){f.canDelete&&r._remove(f.id,a.options.frameDoc,!0)}function q(f){z&&z.length&&(k.forEach(z,
function(f){r._remove(f.id,f.frameDoc);f.frameDoc=null}),z=[]);return f.options.jsonp?!f.data:!0}function v(f){return!!this.scriptLoaded}function t(f){return(f=f.options.checkString)&&eval("typeof("+f+') !\x3d\x3d "undefined"')}function u(f,a){if(this.canDelete){var b=this.response.options;z.push({id:this.id,frameDoc:b.ioArgs?b.ioArgs.frameDoc:b.frameDoc});b.ioArgs&&(b.ioArgs.frameDoc=null);b.frameDoc=null}a?this.reject(a):this.resolve(f)}function r(a,b,c){var d=n.parseArgs(a,n.deepCopy({},b));a=
d.url;b=d.options;var e=n.deferred(d,s,q,b.jsonp?null:b.checkString?t:v,u);g.mixin(e,{id:w+y++,canDelete:!1});b.jsonp&&(RegExp("[?\x26]"+b.jsonp+"\x3d").test(a)||(a+=(~a.indexOf("?")?"\x26":"?")+b.jsonp+"\x3d"+(b.frameDoc?"parent.":"")+w+"_callbacks."+e.id),e.canDelete=!0,x[e.id]=function(f){d.data=f;e.handleResponse(d)});n.notify&&n.notify.emit("send",d,e.promise.cancel);if(!b.canAttach||b.canAttach(e)){var k=r._attach(e.id,a,b.frameDoc);if(!b.jsonp&&!b.checkString)var m=h(k,f,function(f){if("load"===
f.type||p.test(k.readyState))m.remove(),e.scriptLoaded=f})}h.once(k,"error",function(f){e.reject(f);r._remove(e.id,b.frameDoc,!0)});l(e);return c?e:e.promise}c.add("script-readystatechange",function(f,a){return"undefined"!==typeof a.createElement("script").onreadystatechange&&("undefined"===typeof f.opera||"[object Opera]"!==f.opera.toString())});var w=a.id.replace(/[\/\.\-]/g,"_"),y=0,f=c("script-readystatechange")?"readystatechange":"load",p=/complete|loaded/,x=m.global[w+"_callbacks"]={},z=[];
r.get=r;r._attach=function(f,a,c){c=c||b.doc;var p=c.createElement("script");p.type="text/javascript";p.src=a;p.id=f;p.async=!0;p.charset="utf-8";return c.getElementsByTagName("head")[0].appendChild(p)};r._remove=function(f,a,b){d.destroy(e.byId(f,a));x[f]&&(b?x[f]=function(){delete x[f]}:delete x[f])};r._callbacksProperty=w+"_callbacks";return r})},"dojo/io/iframe":function(){define("../_base/config ../_base/json ../_base/kernel ../_base/lang ../_base/xhr ../sniff ../_base/window ../dom ../dom-construct ../query require ../aspect ../request/iframe".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q){n.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");g=q._iframeName;g=g.substring(0,g.lastIndexOf("_"));var v=m.delegate(q,{create:function(){return v._frame=q.create.apply(q,arguments)},get:null,post:null,send:function(b){var c,d=k._ioSetArgs(b,function(f){c&&c.cancel()},function(f){var a=null;f=f.ioArgs;try{var b=f.handleAs;"xml"===b||"html"===b?a=c.response.data:(a=c.response.text,"json"===b?a=l.fromJson(a):"javascript"===b&&(a=n.eval(a)))}catch(p){a=
p}return a},function(f,a){a.ioArgs._hasError=!0;return f}),g=d.ioArgs,h="GET",f=e.byId(b.form);b.method&&("POST"===b.method.toUpperCase()&&f)&&(h="POST");b={method:h,handleAs:"json"===b.handleAs||"javascript"===b.handleAs?"text":b.handleAs,form:b.form,query:f?null:b.content,data:f?b.content:null,timeout:b.timeout,ioArgs:g};b.method&&(b.method=b.method.toUpperCase());if(a.ioPublish&&n.publish&&!1!==g.args.ioPublish)var p=s.after(q,"_notifyStart",function(f){f.options.ioArgs===g&&(p.remove(),k._ioNotifyStart(d))},
!0);c=q(g.url,b,!0);g._callNext=c._callNext;c.then(function(){d.resolve(d)}).otherwise(function(f){d.ioArgs.error=f;d.reject(f)});return d},_iframeOnload:h.global[g+"_onload"]});m.setObject("dojo.io.iframe",v);return v})},"dojo/query":function(){define("./_base/kernel ./has ./dom ./on ./_base/array ./_base/lang ./selector/_loader ./selector/_loader!default".split(" "),function(a,l,n,m,k,g,h,e){function d(a,f){var b=function(b,c){if("string"==typeof c&&(c=n.byId(c),!c))return new f([]);var p="string"==
typeof b?a(b,c):b?b.end&&b.on?b:[b]:[];return p.end&&p.on?p:new f(p)};b.matches=a.match||function(f,a,c){return 0<b.filter([f],a,c).length};b.filter=a.filter||function(f,a,c){return b(a,c).filter(function(a){return-1<k.indexOf(f,a)})};if("function"!=typeof a){var c=a.search;a=function(f,a){return c(a||document,f)}}return b}l.add("array-extensible",function(){return 1==g.delegate([],{length:1}).length&&!l("bug-for-in-skips-shadowed")});var c=Array.prototype,b=c.slice,s=c.concat,q=k.forEach,v=function(c,
f,p){f=[0].concat(b.call(f,0));p=p||a.global;return function(a){f[0]=a;return c.apply(p,f)}},t=function(a){var f=this instanceof u&&l("array-extensible");"number"==typeof a&&(a=Array(a));var b=a&&"length"in a?a:arguments;if(f||!b.sort){for(var c=f?this:[],d=c.length=b.length,e=0;e<d;e++)c[e]=b[e];if(f)return c;b=c}g._mixin(b,r);b._NodeListCtor=function(f){return u(f)};return b},u=t,r=u.prototype=l("array-extensible")?[]:{};u._wrap=r._wrap=function(a,f,b){a=new (b||this._NodeListCtor||u)(a);return f?
a._stash(f):a};u._adaptAsMap=function(a,f){return function(){return this.map(v(a,arguments,f))}};u._adaptAsForEach=function(a,f){return function(){this.forEach(v(a,arguments,f));return this}};u._adaptAsFilter=function(a,f){return function(){return this.filter(v(a,arguments,f))}};u._adaptWithCondition=function(b,f,c){return function(){var d=arguments,e=v(b,d,c);if(f.call(c||a.global,d))return this.map(e);this.forEach(e);return this}};q(["slice","splice"],function(a){var f=c[a];r[a]=function(){return this._wrap(f.apply(this,
arguments),"slice"==a?this:null)}});q(["indexOf","lastIndexOf","every","some"],function(c){var f=k[c];r[c]=function(){return f.apply(a,[this].concat(b.call(arguments,0)))}});g.extend(t,{constructor:u,_NodeListCtor:u,toString:function(){return this.join(",")},_stash:function(a){this._parent=a;return this},on:function(a,f){var b=this.map(function(b){return m(b,a,f)});b.remove=function(){for(var f=0;f<b.length;f++)b[f].remove()};return b},end:function(){return this._parent?this._parent:new this._NodeListCtor(0)},
concat:function(a){var f=b.call(this,0),c=k.map(arguments,function(f){return b.call(f,0)});return this._wrap(s.apply(f,c),this)},map:function(a,f){return this._wrap(k.map(this,a,f),this)},forEach:function(a,f){q(this,a,f);return this},filter:function(a){var f=arguments,b=this,c=0;if("string"==typeof a){b=w._filterResult(this,f[0]);if(1==f.length)return b._stash(this);c=1}return this._wrap(k.filter(b,f[c],f[c+1]),this)},instantiate:function(a,f){var b=g.isFunction(a)?a:g.getObject(a);f=f||{};return this.forEach(function(a){new b(f,
a)})},at:function(){var a=new this._NodeListCtor(0);q(arguments,function(f){0>f&&(f=this.length+f);this[f]&&a.push(this[f])},this);return a._stash(this)}});var w=d(e,t);a.query=d(e,function(a){return t(a)});w.load=function(a,f,b){h.load(a,f,function(f){b(d(f,t))})};a._filterQueryResult=w._filterResult=function(a,f,b){return new t(w.filter(a,f,b))};a.NodeList=w.NodeList=t;return w})},"dojo/selector/acme":function(){define(["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(a,
l,n,m,k){var g=m.trim,h=n.forEach,e="BackCompat"==k.doc.compatMode,d=!1,c=function(){return!0},b=function(f){f=0<="\x3e~+".indexOf(f.slice(-1))?f+" * ":f+" ";for(var a=function(a,b){return g(f.slice(a,b))},b=[],c=-1,p=-1,e=-1,x=-1,h=-1,k=-1,q=-1,r,s="",m="",l,n=0,t=f.length,v=null,E=null,z=function(){0<=k&&(v.id=a(k,n).replace(/\\/g,""),k=-1);if(0<=q){var f=q==n?null:a(q,n);v[0>"\x3e~+".indexOf(f)?"tag":"oper"]=f;q=-1}0<=h&&(v.classes.push(a(h+1,n).replace(/\\/g,"")),h=-1)};s=m,m=f.charAt(n),n<t;n++)if("\\"!=
s)if(v||(l=n,v={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return d?this.otag:this.tag}},q=n),r)m==r&&(r=null);else if("'"==m||'"'==m)r=m;else if(0<=c)if("]"==m){E.attr?E.matchFor=a(e||c+1,n):E.attr=a(c+1,n);if((c=E.matchFor)&&('"'==c.charAt(0)||"'"==c.charAt(0)))E.matchFor=c.slice(1,-1);E.matchFor&&(E.matchFor=E.matchFor.replace(/\\/g,""));v.attrs.push(E);E=null;c=e=-1}else"\x3d"==m&&(e=0<="|~^$*".indexOf(s)?s:"",E.type=e+m,E.attr=a(c+1,n-e.length),e=n+
1);else 0<=p?")"==m&&(0<=x&&(E.value=a(p+1,n)),x=p=-1):"#"==m?(z(),k=n+1):"."==m?(z(),h=n):":"==m?(z(),x=n):"["==m?(z(),c=n,E={}):"("==m?(0<=x&&(E={name:a(x+1,n),value:null},v.pseudos.push(E)),p=n):" "==m&&s!=m&&(z(),0<=x&&v.pseudos.push({name:a(x+1,n)}),v.loops=v.pseudos.length||v.attrs.length||v.classes.length,v.oquery=v.query=a(l,n),v.otag=v.tag=v.oper?null:v.tag||"*",v.tag&&(v.tag=v.tag.toUpperCase()),b.length&&b[b.length-1].oper&&(v.infixOper=b.pop(),v.query=v.infixOper.query+" "+v.query),b.push(v),
v=null);return b},s=function(f,a){return!f?a:!a?f:function(){return f.apply(window,arguments)&&a.apply(window,arguments)}},q=function(f,a){var b=a||[];f&&b.push(f);return b},v=function(f){return 1==f.nodeType},t=function(f,a){return!f?"":"class"==a?f.className||"":"for"==a?f.htmlFor||"":"style"==a?f.style.cssText||"":(d?f.getAttribute(a):f.getAttribute(a,2))||""},u={"*\x3d":function(f,a){return function(b){return 0<=t(b,f).indexOf(a)}},"^\x3d":function(f,a){return function(b){return 0==t(b,f).indexOf(a)}},
"$\x3d":function(f,a){return function(b){b=" "+t(b,f);var c=b.lastIndexOf(a);return-1<c&&c==b.length-a.length}},"~\x3d":function(f,a){var b=" "+a+" ";return function(a){return 0<=(" "+t(a,f)+" ").indexOf(b)}},"|\x3d":function(f,a){var b=a+"-";return function(c){c=t(c,f);return c==a||0==c.indexOf(b)}},"\x3d":function(f,a){return function(b){return t(b,f)==a}}};m=k.doc.documentElement;var r=!(m.nextElementSibling||"nextElementSibling"in m),w=!r?"nextElementSibling":"nextSibling",y=!r?"previousElementSibling":
"previousSibling",f=r?v:c,p=function(a){for(;a=a[y];)if(f(a))return!1;return!0},x=function(a){for(;a=a[w];)if(f(a))return!1;return!0},z=function(a){var b=a.parentNode,b=7!=b.nodeType?b:b.nextSibling,c=0,p=b.children||b.childNodes,d=a._i||a.getAttribute("_i")||-1,e=b._l||("undefined"!==typeof b.getAttribute?b.getAttribute("_l"):-1);if(!p)return-1;p=p.length;if(e==p&&0<=d&&0<=e)return d;l("ie")&&"undefined"!==typeof b.setAttribute?b.setAttribute("_l",p):b._l=p;d=-1;for(b=b.firstElementChild||b.firstChild;b;b=
b[w])f(b)&&(l("ie")?b.setAttribute("_i",++c):b._i=++c,a===b&&(d=c));return d},K=function(f){return!(z(f)%2)},A=function(f){return z(f)%2},E={checked:function(f,a){return function(f){return!!("checked"in f?f.checked:f.selected)}},disabled:function(f,a){return function(f){return f.disabled}},enabled:function(f,a){return function(f){return!f.disabled}},"first-child":function(){return p},"last-child":function(){return x},"only-child":function(f,a){return function(f){return p(f)&&x(f)}},empty:function(f,
a){return function(f){var a=f.childNodes;for(f=f.childNodes.length-1;0<=f;f--){var b=a[f].nodeType;if(1===b||3==b)return!1}return!0}},contains:function(f,a){var b=a.charAt(0);if('"'==b||"'"==b)a=a.slice(1,-1);return function(f){return 0<=f.innerHTML.indexOf(a)}},not:function(f,a){var c=b(a)[0],p={el:1};"*"!=c.tag&&(p.tag=1);c.classes.length||(p.classes=1);var d=B(c,p);return function(f){return!d(f)}},"nth-child":function(f,a){var b=parseInt;if("odd"==a)return A;if("even"==a)return K;if(-1!=a.indexOf("n")){var c=
a.split("n",2),p=c[0]?"-"==c[0]?-1:b(c[0]):1,d=c[1]?b(c[1]):0,e=0,g=-1;0<p?0>d?d=d%p&&p+d%p:0<d&&(d>=p&&(e=d-d%p),d%=p):0>p&&(p*=-1,0<d&&(g=d,d%=p));if(0<p)return function(f){f=z(f);return f>=e&&(0>g||f<=g)&&f%p==d};a=d}var x=b(a);return function(f){return z(f)==x}}},L=9>l("ie")||9==l("ie")&&l("quirks")?function(f){var a=f.toLowerCase();"class"==a&&(f="className");return function(b){return d?b.getAttribute(f):b[f]||b[a]}}:function(f){return function(a){return a&&a.getAttribute&&a.hasAttribute(f)}},
B=function(f,a){if(!f)return c;a=a||{};var b=null;"el"in a||(b=s(b,v));"tag"in a||"*"!=f.tag&&(b=s(b,function(a){return a&&(d?a.tagName:a.tagName.toUpperCase())==f.getTag()}));"classes"in a||h(f.classes,function(f,a,c){var p=RegExp("(?:^|\\s)"+f+"(?:\\s|$)");b=s(b,function(f){return p.test(f.className)});b.count=a});"pseudos"in a||h(f.pseudos,function(f){var a=f.name;E[a]&&(b=s(b,E[a](a,f.value)))});"attrs"in a||h(f.attrs,function(f){var a,c=f.attr;f.type&&u[f.type]?a=u[f.type](c,f.matchFor):c.length&&
(a=L(c));a&&(b=s(b,a))});"id"in a||f.id&&(b=s(b,function(a){return!!a&&a.id==f.id}));b||"default"in a||(b=c);return b},I=function(f){return function(a,b,c){for(;a=a[w];)if(!r||v(a)){(!c||ga(a,c))&&f(a)&&b.push(a);break}return b}},U=function(a){return function(b,c,p){for(b=b[w];b;){if(f(b)){if(p&&!ga(b,p))break;a(b)&&c.push(b)}b=b[w]}return c}},S=function(a,b){var p=function(f){var a=[];try{a=Array.prototype.slice.call(f)}catch(b){for(var c=0,p=f.length;c<p;c++)a.push(f[c])}return a};a=a||c;return function(c,
d,e){var g=0,x=[],x=p(c.children||c.childNodes);for(b&&n.forEach(x,function(f){1===f.nodeType&&(x=x.concat(p(f.getElementsByTagName("*"))))});c=x[g++];)f(c)&&((!e||ga(c,e))&&a(c,g))&&d.push(c);return d}},D=function(f,a){for(var b=f.parentNode;b&&b!=a;)b=b.parentNode;return!!b},J={},G=function(f){var b=J[f.query];if(b)return b;var p=f.infixOper,p=p?p.oper:"",d=B(f,{el:1}),g="*"==f.tag,x=k.doc.getElementsByClassName;if(p)x={el:1},g&&(x.tag=1),d=B(f,x),"+"==p?b=I(d):"~"==p?b=U(d):"\x3e"==p&&(b=S(d));
else if(f.id)d=!f.loops&&g?c:B(f,{el:1,id:1}),b=function(b,c){var p=a.byId(f.id,b.ownerDocument||b);b.ownerDocument&&!D(b,b.ownerDocument)&&n.some(11===b.nodeType?b.childNodes:[b],function(a){a=S(function(a){return a.id===f.id},!0)(a,[]);if(a.length)return p=a[0],!1});if(p&&d(p)&&(9==b.nodeType||D(p,b)))return q(p,c)};else if(x&&/\{\s*\[native code\]\s*\}/.test(String(x))&&f.classes.length&&!e)var d=B(f,{el:1,classes:1,id:1}),h=f.classes.join(" "),b=function(f,a,b){a=q(0,a);for(var c,p=0,e=f.getElementsByClassName(h);c=
e[p++];)d(c,f)&&ga(c,b)&&a.push(c);return a};else!g&&!f.loops?b=function(a,b,c){b=q(0,b);for(var p=0,d=f.getTag(),d=d?a.getElementsByTagName(d):[];a=d[p++];)ga(a,c)&&b.push(a);return b}:(d=B(f,{el:1,tag:1,id:1}),b=function(a,b,c){b=q(0,b);for(var p,e=0,g=(p=f.getTag())?a.getElementsByTagName(p):[];p=g[e++];)d(p,a)&&ga(p,c)&&b.push(p);return b});return J[f.query]=b},F={},M={},P=function(f){var a=b(g(f));if(1==a.length){var c=G(a[0]);return function(f){if(f=c(f,[]))f.nozip=!0;return f}}return function(f){f=
q(f);for(var b,c,p=a.length,d,e,g=0;g<p;g++){e=[];b=a[g];c=f.length-1;0<c&&(d={},e.nozip=!0);c=G(b);for(var x=0;b=f[x];x++)c(b,e,d);if(!e.length)break;f=e}return e}},X=l("ie")?"commentStrip":"nozip",N=!!k.doc.querySelectorAll,H=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,O=function(f,a,b,c){return b?(a?a+" ":"")+b+(c?" "+c:""):f},Y=/([^[]*)([^\]]*])?/g,V=function(f,a,b){return a.replace(H,O)+(b||"")},Z=function(f,a){f=f.replace(Y,V);if(N){var b=M[f];if(b&&!a)return b}if(b=F[f])return b;var b=f.charAt(0),
c=-1==f.indexOf(" ");0<=f.indexOf("#")&&c&&(a=!0);if(N&&!a&&-1=="\x3e~+".indexOf(b)&&(!l("ie")||-1==f.indexOf(":"))&&!(e&&0<=f.indexOf("."))&&-1==f.indexOf(":contains")&&-1==f.indexOf(":checked")&&-1==f.indexOf("|\x3d")){var p=0<="\x3e~+".indexOf(f.charAt(f.length-1))?f+" *":f;return M[f]=function(a){if(9==a.nodeType||c)try{var b=a.querySelectorAll(p);b[X]=!0;return b}catch(d){}return Z(f,!0)(a)}}var d=f.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return F[f]=2>d.length?P(f):function(f){for(var a=
0,b=[],c;c=d[a++];)b=b.concat(P(c)(f));return b}},aa=0,ba=l("ie")?function(f){return d?f.getAttribute("_uid")||f.setAttribute("_uid",++aa)||aa:f.uniqueID}:function(f){return f._uid||(f._uid=++aa)},ga=function(f,a){if(!a)return 1;var b=ba(f);return!a[b]?a[b]=1:0},ja=function(f){if(f&&f.nozip)return f;if(!f||!f.length)return[];if(2>f.length)return[f[0]];var a=[];aa++;var b,c;if(l("ie")&&d){var p=aa+"";for(b=0;b<f.length;b++)if((c=f[b])&&c.getAttribute("_zipIdx")!=p)a.push(c),c.setAttribute("_zipIdx",
p)}else if(l("ie")&&f.commentStrip)try{for(b=0;b<f.length;b++)(c=f[b])&&v(c)&&a.push(c)}catch(e){}else for(b=0;b<f.length;b++)if((c=f[b])&&c._zipIdx!=aa)a.push(c),c._zipIdx=aa;return a},la=function(f,a){a=a||k.doc;d="div"===(a.ownerDocument||a).createElement("div").tagName;var b=Z(f)(a);return b&&b.nozip?b:ja(b)};la.filter=function(f,c,p){for(var d=[],e=b(c),e=1==e.length&&!/[^\w#\.]/.test(c)?B(e[0]):function(f){return-1!=n.indexOf(la(c,a.byId(p)),f)},g=0,x;x=f[g];g++)e(x)&&d.push(x);return d};return la})},
"dojo/request/iframe":function(){define("module require ./watch ./util ./handlers ../_base/lang ../io-query ../query ../has ../dom ../dom-construct ../_base/window ../NodeList-dom".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s){function q(f){return!this.isFulfilled()}function v(f){return!!this._finished}function t(f,a){if(!a)try{var b=f.options,c=r.doc(r._frame),d=b.handleAs;if("html"!==d){if("xml"===d)if("html"===c.documentElement.tagName.toLowerCase()){e("a",c.documentElement).orphan();var h=c.documentElement.innerText||
c.documentElement.textContent,h=h.replace(/>\s+</g,"\x3e\x3c");f.text=g.trim(h)}else f.data=c;else f.text=c.getElementsByTagName("textarea")[0].value;k(f)}else f.data=c}catch(q){a=q}a?this.reject(a):this._finished?this.resolve(f):this.reject(Error("Invalid dojo/request/iframe request state"))}function u(f){this._callNext()}function r(a,b,c){var d=m.parseArgs(a,m.deepCreate(f,b),!0);a=d.url;b=d.options;if("GET"!==b.method&&"POST"!==b.method)throw Error(b.method+" not supported by dojo/request/iframe");
r._frame||(r._frame=r.create(r._iframeName,y+"();"));a=m.deferred(d,null,q,v,t,u);a._callNext=function(){this._calledNext||(this._calledNext=!0,r._currentDfd=null,r._fireNextRequest())};a._legacy=c;r._dfdQueue.push(a);r._fireNextRequest();n(a);return c?a:a.promise}var w=a.id.replace(/[\/\.\-]/g,"_"),y=w+"_onload";s.global[y]||(s.global[y]=function(){var f=r._currentDfd;if(f){var a=c.byId(f.response.options.form)||f._tmpForm;if(a){for(var d=f._contentToClean,e=0;e<d.length;e++)for(var g=d[e],h=0;h<
a.childNodes.length;h++){var k=a.childNodes[h];if(k.name===g){b.destroy(k);break}}f._originalAction&&a.setAttribute("action",f._originalAction);f._originalMethod&&(a.setAttribute("method",f._originalMethod),a.method=f._originalMethod);f._originalTarget&&(a.setAttribute("target",f._originalTarget),a.target=f._originalTarget)}f._tmpForm&&(b.destroy(f._tmpForm),delete f._tmpForm);f._finished=!0}else r._fireNextRequest()});var f={method:"POST"};r.create=function(f,a,c){if(s.global[f])return s.global[f];
if(s.global.frames[f])return s.global.frames[f];c||(d("config-useXDomain")&&!d("config-dojoBlankHtmlUrl")&&console.warn("dojo/request/iframe: When using cross-domain Dojo builds, please save dojo/resources/blank.html to your domain and set dojoConfig.dojoBlankHtmlUrl to the path on your domain to blank.html"),c=d("config-dojoBlankHtmlUrl")||l.toUrl("dojo/resources/blank.html"));a=b.place('\x3ciframe id\x3d"'+f+'" name\x3d"'+f+'" src\x3d"'+c+'" onload\x3d"'+a+'" style\x3d"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden"\x3e',
s.body());return s.global[f]=a};r.doc=function(f){if(f.contentDocument)return f.contentDocument;var a=f.name;if(a){var b=s.doc.getElementsByTagName("iframe");if(f.document&&b[a].contentWindow&&b[a].contentWindow.document)return b[a].contentWindow.document;if(s.doc.frames[a]&&s.doc.frames[a].document)return s.doc.frames[a].document}return null};r.setSrc=function(f,a,b){f=s.global.frames[f.name];f.contentWindow&&(f=f.contentWindow);try{b?f.location.replace(a):f.location=a}catch(c){console.log("dojo/request/iframe.setSrc: ",
c)}};r._iframeName=w+"_IoIframe";r._notifyStart=function(){};r._dfdQueue=[];r._currentDfd=null;r._fireNextRequest=function(){var f;try{if(!r._currentDfd&&r._dfdQueue.length){do f=r._currentDfd=r._dfdQueue.shift();while(f&&(f.canceled||f.isCanceled&&f.isCanceled())&&r._dfdQueue.length);if(!f||f.canceled||f.isCanceled&&f.isCanceled())r._currentDfd=null;else{var a=f.response,d=a.options,e=f._contentToClean=[],k=c.byId(d.form),q=m.notify,l=d.data||null,n;!f._legacy&&"POST"===d.method&&!k?k=f._tmpForm=
b.create("form",{name:w+"_form",style:{position:"absolute",top:"-1000px",left:"-1000px"}},s.body()):"GET"===d.method&&(k&&-1<a.url.indexOf("?"))&&(n=a.url.slice(a.url.indexOf("?")+1),l=g.mixin(h.queryToObject(n),l));if(k){if(!f._legacy){var v=k;do v=v.parentNode;while(v&&v!==s.doc.documentElement);v||(k.style.position="absolute",k.style.left="-1000px",k.style.top="-1000px",s.body().appendChild(k));k.name||(k.name=w+"_form")}if(l){var v=function(f,a){b.create("input",{type:"hidden",name:f,value:a},
k);e.push(f)},t;for(t in l){var y=l[t];if(g.isArray(y)&&1<y.length)for(n=0;n<y.length;n++)v(t,y[n]);else k[t]?k[t].value=y:v(t,y)}}var u=k.getAttributeNode("action"),J=k.getAttributeNode("method"),G=k.getAttributeNode("target");a.url&&(f._originalAction=u?u.value:null,u?u.value=a.url:k.setAttribute("action",a.url));if(f._legacy){if(!J||!J.value)J?J.value=d.method:k.setAttribute("method",d.method)}else f._originalMethod=J?J.value:null,J?J.value=d.method:k.setAttribute("method",d.method);f._originalTarget=
G?G.value:null;G?G.value=r._iframeName:k.setAttribute("target",r._iframeName);k.target=r._iframeName;q&&q.emit("send",a,f.promise.cancel);r._notifyStart(a);k.submit()}else d="",a.options.data&&(d=a.options.data,"string"!==typeof d&&(d=h.objectToQuery(d))),v=a.url+(-1<a.url.indexOf("?")?"\x26":"?")+d,q&&q.emit("send",a,f.promise.cancel),r._notifyStart(a),r.setSrc(r._frame,v,!0)}}}catch(F){f.reject(F)}};m.addCommonMethods(r,["GET","POST"]);return r})},"dojo/NodeList-dom":function(){define("./_base/kernel ./query ./_base/array ./_base/lang ./dom-class ./dom-construct ./dom-geometry ./dom-attr ./dom-style".split(" "),
function(a,l,n,m,k,g,h,e,d){function c(a){return function(b,c,f){return 2==arguments.length?a["string"==typeof c?"get":"set"](b,c):a.set(b,c,f)}}var b=function(a){return 1==a.length&&"string"==typeof a[0]},s=function(a){var b=a.parentNode;b&&b.removeChild(a)},q=l.NodeList,v=q._adaptWithCondition,t=q._adaptAsForEach,u=q._adaptAsMap;m.extend(q,{_normalize:function(b,c){var d=!0===b.parse;if("string"==typeof b.template){var f=b.templateFunc||a.string&&a.string.substitute;b=f?f(b.template,b):b}f=typeof b;
"string"==f||"number"==f?(b=g.toDom(b,c&&c.ownerDocument),b=11==b.nodeType?m._toArray(b.childNodes):[b]):m.isArrayLike(b)?m.isArray(b)||(b=m._toArray(b)):b=[b];d&&(b._runParse=!0);return b},_cloneNode:function(a){return a.cloneNode(!0)},_place:function(b,c,d,f){if(!(1!=c.nodeType&&"only"==d))for(var p,e=b.length,h=e-1;0<=h;h--){var k=f?this._cloneNode(b[h]):b[h];if(b._runParse&&a.parser&&a.parser.parse){p||(p=c.ownerDocument.createElement("div"));p.appendChild(k);a.parser.parse(p);for(k=p.firstChild;p.firstChild;)p.removeChild(p.firstChild)}h==
e-1?g.place(k,c,d):c.parentNode.insertBefore(k,c);c=k}},position:u(h.position),attr:v(c(e),b),style:v(c(d),b),addClass:t(k.add),removeClass:t(k.remove),toggleClass:t(k.toggle),replaceClass:t(k.replace),empty:t(g.empty),removeAttr:t(e.remove),marginBox:u(h.getMarginBox),place:function(a,b){var c=l(a)[0];return this.forEach(function(f){g.place(f,c,b)})},orphan:function(a){return(a?l._filterResult(this,a):this).forEach(s)},adopt:function(a,b){return l(a).place(this[0],b)._stash(this)},query:function(a){if(!a)return this;
var b=new q;this.map(function(c){l(a,c).forEach(function(f){void 0!==f&&b.push(f)})});return b._stash(this)},filter:function(a){var b=arguments,c=this,f=0;if("string"==typeof a){c=l._filterResult(this,b[0]);if(1==b.length)return c._stash(this);f=1}return this._wrap(n.filter(c,b[f],b[f+1]),this)},addContent:function(a,b){a=this._normalize(a,this[0]);for(var c=0,f;f=this[c];c++)a.length?this._place(a,f,b,0<c):g.empty(f);return this}});return q})},"dojo/dom-class":function(){define(["./_base/lang","./_base/array",
"./dom"],function(a,l,n){function m(a){if("string"==typeof a||a instanceof String){if(a&&!g.test(a))return h[0]=a,h;a=a.split(g);a.length&&!a[0]&&a.shift();a.length&&!a[a.length-1]&&a.pop();return a}return!a?[]:l.filter(a,function(a){return a})}var k,g=/\s+/,h=[""],e={};return k={contains:function(a,c){return 0<=(" "+n.byId(a).className+" ").indexOf(" "+c+" ")},add:function(a,c){a=n.byId(a);c=m(c);var b=a.className,e,b=b?" "+b+" ":" ";e=b.length;for(var g=0,h=c.length,k;g<h;++g)(k=c[g])&&0>b.indexOf(" "+
k+" ")&&(b+=k+" ");e<b.length&&(a.className=b.substr(1,b.length-2))},remove:function(d,c){d=n.byId(d);var b;if(void 0!==c){c=m(c);b=" "+d.className+" ";for(var e=0,g=c.length;e<g;++e)b=b.replace(" "+c[e]+" "," ");b=a.trim(b)}else b="";d.className!=b&&(d.className=b)},replace:function(a,c,b){a=n.byId(a);e.className=a.className;k.remove(e,b);k.add(e,c);a.className!==e.className&&(a.className=e.className)},toggle:function(a,c,b){a=n.byId(a);if(void 0===b){c=m(c);for(var e=0,g=c.length,h;e<g;++e)h=c[e],
k[k.contains(a,h)?"remove":"add"](a,h)}else k[b?"add":"remove"](a,c);return b}}})},"esri/geometry/SpatialReference":function(){define(["dojo/_base/lang","../core/JSONSupport"],function(a,l){var n=[-2.0037508342788905E7,2.0037508342788905E7],m=[-2.0037508342787E7,2.0037508342787E7],k=[102113,102100,3857,3785],g=[102113,102100,3857,3785,4326],h=l.createSubclass({declaredClass:"esri.SpatialReference",_info:{102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:n,origin:m,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:n,origin:m,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:n,origin:m,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:n,origin:m,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}},normalizeCtorArgs:function(e){var d={};if(e&&"object"===typeof e)return a.mixin(d,e);d["string"===typeof e?"wkt":"wkid"]=e;return d},properties:{isWGS84:{dependsOn:["wkid"],readOnly:!0,get:function(){return 4326===this.wkid}},isWebMercator:{dependsOn:["wkid"],readOnly:!0,get:function(){return-1!==k.indexOf(this.wkid)}},isWrappable:{dependsOn:["wkid"],readOnly:!0,get:function(){return-1!==g.indexOf(this.wkid)}},latestWkid:null,wkid:null,wkt:null},clone:function(){if(this===
h.WGS84)return h.WGS84;if(this===h.WebMercator)return h.WebMercator;var a=new h;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a},equals:function(a){var d=!1;a&&(this===a&&(d=!0),this.wkid||a.wkid?d=this.wkid===a.wkid||this.isWebMercator&&a.isWebMercator||null!=a.latestWkid&&this.wkid===a.latestWkid||null!=this.latestWkid&&
a.wkid===this.latestWkid:this.wkt&&a.wkt&&(d=this.wkt.toUpperCase()===a.wkt.toUpperCase()));return d},toJSON:function(){var a=null;null!=this.wkid?(a={wkid:this.wkid},null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a={wkt:this.wkt});return a},_getInfo:function(){return this.wkid?this._info[this.wkid]:null}});h.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===
a.wkid)return h.WebMercator;if(4326===a.wkid)return h.WGS84}var d=new h;d.read(a);return d};h.WGS84=new h(4326);h.WebMercator=new h({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(h.WGS84),Object.freeze(h.WebMercator));return h})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/read ./accessorSupport/write ./accessorSupport/decorators".split(" "),function(a,l,n,m,k,g,h,e,d){function c(a,
b){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var c=new this;c.read(a,b);return c}var b=function(a){function b(){a.apply(this,arguments)}n(b,a);b.prototype.read=function(a,b){h.default(this,a,b);return this};b.prototype.write=function(a,b){return e.default(this,a||{},b)};b.prototype.toJSON=function(a){return this.write(null,a)};return b=m([d.subclass("esri.core.JSONSupport")],b)}(d.declared(k));b.prototype.toJSON.isDefaultToJSON=!0;g.after(function(a){g.hasMixin(a,
b)&&(a.fromJSON=c.bind(a))});return b})},"esri/core/accessorSupport/read":function(){define("require exports ./utils ./extensions/serializableProperty ./get dojo/_base/lang".split(" "),function(a,l,n,m,k,g){function h(a,c,b){void 0===b&&(b=e);for(var g=n.getProperties(a),h=g.metadatas,l={},t=0,u=Object.getOwnPropertyNames(c);t<u.length;t++){var r=l,w=h,y=u[t],f=c,p=b,x=w[y],z=m.originSpecificPropertyDefinition(x,p);x&&((!z||void 0===z.readable||z.readable)&&!(z&&null!=z.readFrom))&&(r[y]=!0);x=0;
for(z=Object.getOwnPropertyNames(w);x<z.length;x++){var K=z[x],A=m.originSpecificPropertyDefinition(w[K],p),E;a:{E=y;var L=f;if(A=A&&A.readFrom)if("string"===typeof A){if(A===E||-1<A.indexOf(".")&&0===A.indexOf(E)&&k.exists(A,L)){E=!0;break a}}else for(var B=0;B<A.length;B++){var I=A[B];if(I===E||-1<I.indexOf(".")&&0===I.indexOf(E)&&k.exists(I,L)){E=!0;break a}}E=!1}E&&(r[K]=!0)}}g.setDefaultOrigin(b.origin);t=0;for(l=Object.getOwnPropertyNames(l);t<l.length;t++)u=l[t],w=(r=m.originSpecificPropertyDefinition(h[u],
b))&&r.read,y=r&&r.readFrom,f=c[u],y&&"string"===typeof y&&(f=k.valueOf(c,r.readFrom)),w&&(f=w.call(a,f,c,b)),void 0!==f&&g.set(u,f);g.setDefaultOrigin("user")}var e={origin:"service"};l.read=h;l.readLoadable=function(a,c,b,h){var k=this;void 0===h&&(h=e);c=g.mixin({},h,{messages:[]});b(c);c.messages.forEach(function(b){"warning"===b.type&&!k.loaded?a.loadWarnings.push(b):h&&h.messages.push(b)})};Object.defineProperty(l,"__esModule",{value:!0});l.default=h})},"esri/core/accessorSupport/write":function(){define(["require",
"exports","./PropertyOrigin","./utils","./extensions/serializableProperty"],function(a,l,n,m,k){function g(a,c,d,e){var g={};void 0!==d&&(null!==d||c.writeNull)&&c.write.call(a,d,g,e);return g}function h(a,c,d,e){a=a.store.originOf(c);return d.writeAlways||void 0===e||void 0===e.origin||a>=n.nameToId(e.origin)}function e(a,c,d){void 0===d&&(d=[]);if(-1!==d.indexOf(a))return d;d.push(a);a=c[a];if(!a||!a.writeWith)return d;a.writeWith.forEach(function(a){e(a,c,d)});return d}function d(a,c,d){return e(a,
c).some(function(a){return d[a]})}function c(a,c,e){var l=m.getProperties(a),t=l.metadatas,u={},r=[],w={},y;for(y in t){var f=k.originSpecificPropertyDefinition(t[y],e);if((w[y]=f)&&f.writable&&f.write)h(l,y,f,e)?(f=g(a,f,a.get(y),e),0<Object.keys(f).length&&(c=m.merge(c,f),u[y]=!0)):f.writeWith&&r.push(y)}r.filter(function(f){return d(f,w,u)}).forEach(function(f){var d=a.get(f),d=g(a,w[f],d,e);0<Object.keys(d).length&&(c=m.merge(c,d),u[f]=!0)});if(e&&e.writtenProperties)for(var p in u)e.writtenProperties.push({target:a,
propName:p,oldOrigin:n.idToReadableName(l.store.originOf(p)),newOrigin:e.origin});return c}l.write=c;Object.defineProperty(l,"__esModule",{value:!0});l.default=c})},"esri/geometry/Extent":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./support/webMercatorUtils ./support/mathUtils".split(" "),function(a,l,n,m,k,g,h){var e=m.createSubclass({declaredClass:"esri.geometry.Extent",type:"extent",normalizeCtorArgs:function(d,c,b,e,g){return this.isSR(d)?{spatialReference:d,
xmin:0,ymin:0,xmax:0,ymax:0}:a.isObject(d)?(d.spatialReference=d.spatialReference||n.WGS84,d):{xmin:d,ymin:c,xmax:b,ymax:e,spatialReference:g||n.WGS84}},properties:{cache:{dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax".split(" ")},center:{readOnly:!0,dependsOn:["cache"],get:function(a){a||(a=new k({spatialReference:this.spatialReference}));a.x=0.5*(this.xmin+this.xmax);a.y=0.5*(this.ymin+this.ymax);this.hasZ&&(a.z=0.5*(this.zmin+this.zmax));this.hasM&&(a.m=0.5*(this.mmin+this.mmax));return a}},
extent:{readOnly:!0,dependsOn:["cache"],get:function(){return this.clone()}},hasM:{readOnly:!0,dependsOn:["mmin","mmax"],get:function(){return null!=this.mmin&&null!=this.mmax}},hasZ:{readOnly:!0,dependsOn:["zmin","zmax"],get:function(){return null!=this.zmin&&null!=this.zmax}},height:{readOnly:!0,dependsOn:["ymin","ymax"],get:function(){return Math.abs(this.ymax-this.ymin)}},width:{readOnly:!0,dependsOn:["xmin","xmax"],get:function(){return Math.abs(this.xmax-this.xmin)}},xmin:0,ymin:0,mmin:void 0,
zmin:void 0,xmax:0,ymax:0,mmax:void 0,zmax:void 0},centerAt:function(a){var c=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-c.x,a.y-c.y,a.z-c.z):this.offset(a.x-c.x,a.y-c.y)},clone:function(){var a=new e;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a},contains:function(a){if(!a)return!1;var c=a.type;if("point"===
c){var b=this.spatialReference,e=a.spatialReference,c=a.x,h=a.y;a=a.z;b&&(e&&!b.equals(e)&&g.canProject(b,e))&&(b=b.isWebMercator?k.lngLatToXY(c,h):k.xyToLngLat(c,h,!0),c=b[0],h=b[1]);if(c>=this.xmin&&c<=this.xmax&&h>=this.ymin&&h<=this.ymax)return null!=a&&this.hasZ?a>=this.zmin&&a<=this.zmax:!0}else if("extent"===c)return this._containsExtent(a);return!1},equals:function(a){if(!a)return!1;var c=this.spatialReference;if(!c.equals(a.spatialReference))if(g.canProject(a.spatialReference,c))a=g.project(a,
c);else return!1;return this.xmin===a.xmin&&this.ymin===a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax},expand:function(a){a=0.5*(1-a);var c=this.width*a,b=this.height*a;this.xmin+=c;this.ymin+=b;this.xmax-=c;this.ymax-=b;this.hasZ&&(c=(this.zmax-this.zmin)*a,this.zmin+=c,this.zmax-=c);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this},intersects:function(a){if(!a)return!1;var c=a.type,b=this.spatialReference,
e=a.spatialReference;b&&(e&&!b.equals(e)&&g.canProject(b,e))&&(a=b.isWebMercator?g.geographicToWebMercator(a):g.webMercatorToGeographic(a,!0));switch(c){case "point":return this.contains(a);case "multipoint":return this._intersectsMultipoint(a);case "extent":return this._intersectsExtent(a);case "polygon":return this._intersectsPolygon(a);case "polyline":return this._intersectsPolyline(a)}},normalize:function(){var a=this._normalize(!1,!0);Array.isArray(a)||(a=[a]);return a},offset:function(a,c,b){this.xmin+=
a;this.ymin+=c;this.xmax+=a;this.ymax+=c;null!=b&&(this.zmin+=b,this.zmax+=b);return this},shiftCentralMeridian:function(){return this._normalize(!0)},toJSON:function(){var a=this.spatialReference,a={xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:a&&a.toJSON()};this.hasZ&&(a.zmin=this.zmin,a.zmax=this.zmax);this.hasM&&(a.mmax=this.mmax,a.mmin=this.mmin);return a},union:function(a){function c(a,c,d){return null==c?d:null==d?c:a(c,d)}this.xmin=Math.min(this.xmin,a.xmin);
this.ymin=Math.min(this.ymin,a.ymin);this.xmax=Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=c(Math.min,this.zmin,a.zmin),this.zmax=c(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=c(Math.min,this.mmin,a.mmin),this.mmax=c(Math.max,this.mmax,a.mmax);return this},intersection:function(a){function c(a,c,d){return null==c?d:null==d?c:a(c,d)}if(!this._intersectsExtent(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,
a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=c(Math.max,this.zmin,a.zmin),this.zmax=c(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=c(Math.max,this.mmin,a.mmin),this.mmax=c(Math.min,this.mmax,a.mmax);return this},_containsExtent:function(a){var c=a.xmin,b=a.ymin,e=a.zmin,g=a.xmax,h=a.ymax,m=a.zmax;a=a.spatialReference;return null!=e&&this.hasZ?this.contains(new k(c,b,e,a))&&this.contains(new k(c,h,e,a))&&this.contains(new k(g,
h,e,a))&&this.contains(new k(g,b,e,a))&&this.contains(new k(c,b,m,a))&&this.contains(new k(c,h,m,a))&&this.contains(new k(g,h,m,a))&&this.contains(new k(g,b,m,a)):this.contains(new k(c,b,a))&&this.contains(new k(c,h,a))&&this.contains(new k(g,h,a))&&this.contains(new k(g,b,a))},_intersectsMultipoint:function(a){var c=a.points.length,b;for(b=0;b<c;b++)if(this.contains(a.getPoint(b)))return!0;return!1},_intersectsExtent:function(a){var c,b;b=this.hasZ&&a.hasZ;if(this.xmin<=a.xmin){if(c=a.xmin,this.xmax<
c)return!1}else if(c=this.xmin,a.xmax<c)return!1;if(this.ymin<=a.ymin){if(c=a.ymin,this.ymax<c)return!1}else if(c=this.ymin,a.ymax<c)return!1;if(b&&a.hasZ)if(this.zmin<=a.zmin){if(b=a.zmin,this.zmax<b)return!1}else if(b=this.zmin,a.zmax<b)return!1;return!0},_intersectsPolygon:function(a){var c=[this.xmin,this.ymax],b=[this.xmax,this.ymax],e=[this.xmin,this.ymin],g=[this.xmax,this.ymin],h=[c,b,e,g],c=[[e,c],[c,b],[b,g],[g,e]],e=a.rings,g=e.length,m,l=new k(0,0,this.spatialReference);m=h.length;for(b=
0;b<m;b++)if(l.x=h[b][0],l.y=h[b][1],a.contains(l))return!0;for(var l={x:0,y:0,spatialReference:a.spatialReference,type:"point"},r,n,b=0;b<g;b++)if(h=e[b],m=h.length){r=h[0];l.x=r[0];l.y=r[1];if(this.contains(l))return!0;for(a=1;a<m;a++){n=h[a];l.x=n[0];l.y=n[1];if(this.contains(l)||this._intersectsLine([r,n],c))return!0;r=n}}return!1},_intersectsPolyline:function(a){var c=[[[this.xmin,this.ymin],[this.xmin,this.ymax]],[[this.xmin,this.ymax],[this.xmax,this.ymax]],[[this.xmax,this.ymax],[this.xmax,
this.ymin]],[[this.xmax,this.ymin],[this.xmin,this.ymin]]],b,e=a.paths,g=e.length,h,k,m,r,l={x:0,y:0,spatialReference:a.spatialReference,type:"point"};for(a=0;a<g;a++)if(h=e[a],k=h.length){m=h[0];l.x=m[0];l.y=m[1];if(this.contains(l))return!0;for(b=1;b<k;b++){r=h[b];l.x=r[0];l.y=r[1];if(this.contains(l)||this._intersectsLine([m,r],c))return!0;m=r}}return!1},_intersectsLine:function(a,c){var b=h._getLineIntersection2,e,g=c.length;for(e=0;e<g;e++)if(b(a,c[e]))return!0;return!1},_shiftCM:function(a){var c=
this.spatialReference;if(a=a||c._getInfo()){var b=this._getCM(a);if(b){var e=c.isWebMercator?g.webMercatorToGeographic(b):b;this.xmin-=b.x;this.xmax-=b.x;c.isWebMercator||(e.x=this._normalizeX(e.x,a).x);this.spatialReference=new n(l.substitute({Central_Meridian:e.x},4326===c.wkid?a.altTemplate:a.wkTemplate))}}return this},_getCM:function(a){var c,b=a.valid[0];a=a.valid[1];var e=this.xmin,g=this.xmax;if(!(e>=b&&e<=a)||!(g>=b&&g<=a))c=this.center;return c},_normalize:function(a,c,b){var e=this.spatialReference;
if(e&&(b=b||e._getInfo())){var g=this._getParts(b).map(function(a){return a.extent});if(2<g.length)return a?this._shiftCM(b):this.set({xmin:b.valid[0],xmax:b.valid[1]});if(2===g.length){if(a)return this._shiftCM(b);if(c)return g;var h=!0,k=!0;g.map(function(a){a.hasZ||(h=!1);a.hasM||(k=!1)});return{rings:g.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(h)for(var c=(a.zmax-a.zmin)/2,d=0;d<b.length;d++)b[d].push(c);if(k){a=(a.mmax-a.mmin)/
2;for(d=0;d<b.length;d++)b[d].push(a)}return b}),hasZ:h,hasM:k,spatialReference:e}}return g[0]||this}return this},_getParts:function(a){var c=this.cache._parts;if(!c){var c=[],b=this.xmin,g=this.xmax,h=this.ymin,k=this.ymax,m=this.spatialReference,l=this.width,r=b,n=g,y=0,f=0,p,x;a=a||m._getInfo();p=a.valid[0];x=a.valid[1];f=this._normalizeX(b,a);b=f.x;y=f.frameId;f=this._normalizeX(g,a);g=f.x;f=f.frameId;a=b===g&&0<l;if(l>2*x){l=new e(r<n?b:g,h,x,k,m);b=new e(p,h,r<n?g:b,k,m);x=new e(0,h,x,k,m);
h=new e(p,h,0,k,m);m=[];p=[];l.contains(x)&&m.push(y);l.contains(h)&&p.push(y);b.contains(x)&&m.push(f);b.contains(h)&&p.push(f);for(k=y+1;k<f;k++)m.push(k),p.push(k);c.push({extent:l,frameIds:[y]},{extent:b,frameIds:[f]},{extent:x,frameIds:m},{extent:h,frameIds:p})}else b>g||a?c.push({extent:new e(b,h,x,k,m),frameIds:[y]},{extent:new e(p,h,g,k,m),frameIds:[f]}):c.push({extent:new e(b,h,g,k,m),frameIds:[y]});this.cache._parts=c}f=this.hasZ;h=this.hasM;if(f||h){y={};f&&(y.zmin=this.zmin,y.zmax=this.zmax);
h&&(y.mmin=this.mmin,y.mmax=this.mmax);for(f=0;f<c.length;f++)c[f].extent.set(y)}return c},_normalizeX:function(a,c){var b=0,e=c.valid[0],g=c.valid[1],h=2*g;a>g?(b=Math.ceil(Math.abs(a-g)/h),a-=b*h):a<e&&(b=Math.ceil(Math.abs(a-e)/h),a+=b*h,b=-b);return{x:a,frameId:b}}});return e})},"esri/geometry/Geometry":function(){define(["../core/JSONSupport","./SpatialReference"],function(a,l){return a.createSubclass({declaredClass:"esri.geometry.Geometry",type:null,properties:{cache:{value:null,readOnly:!0,
dependsOn:["spatialReference"],get:function(){return{}}},extent:{value:null,readOnly:!0,dependsOn:["spatialReference"]},hasM:!1,hasZ:!1,spatialReference:l.WGS84},isSR:function(a){return a&&("esri.SpatialReference"===a.declaredClass||null!=a.wkid)},clone:function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null},toJSON:function(){console.warn(".toJSON() is not implemented for "+this.declaredClass);return null},clearCache:function(){this.notifyChange("cache")},getCacheValue:function(a){return this.cache[a]},
setCacheValue:function(a,m){this.cache[a]=m}})})},"esri/geometry/Point":function(){define(["./SpatialReference","./Geometry","./support/webMercatorUtils"],function(a,l,n){var m=[0,0],k=n.lngLatToXY,g=n.xyToLngLat,h=l.createSubclass({declaredClass:"esri.geometry.Point",normalizeCtorArgs:function(e,d,c,b,g){var h;Array.isArray(e)?(h=e,g=d,e=h[0],d=h[1],c=h[2],b=h[3]):e&&"object"===typeof e?(h=e,e=null!=h.x?h.x:h.longitude,d=null!=h.y?h.y:h.latitude,c=null!=h.z?h.z:h.altitude,b=h.m,(g=h.spatialReference)&&
"esri.SpatialReference"!==g.declaredClass&&(g=new a(g)),!h.declaredClass&&(g&&g.isWebMercator&&null!=h.longitude&&null!=h.latitude)&&(d=k(h.longitude,h.latitude,!1,m),e=d[0],d=d[1])):this.isSR(c)?(g=c,c=null):this.isSR(b)&&(g=b,b=null);e={x:e,y:d};null!=g&&(e.spatialReference=g);null!=c&&(e.z=c);null!=b&&(e.m=b);return e},properties:{cache:{dependsOn:["x","y","z","m"]},hasM:{dependsOn:["m"],get:function(){return void 0!==this.m},set:function(a){var d=this._get("hasM");a!==d&&(this._set("m",a?0:void 0),
this._set("hasM",a))}},hasZ:{dependsOn:["z"],get:function(){return void 0!==this.z},set:function(a){var d=this._get("hasZ");a!==d&&(this._set("z",a?0:void 0),this._set("hasZ",a))}},latitude:{dependsOn:["y"],get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return g(this.x,this.y,!1,m)[1];if(4326===a.wkid)return this._get("y")}return null},set:function(a){var d=this._get("spatialReference");d&&(d.isWebMercator?this._set("y",k(this.x,a,!1,m)[1]):4326===d.wkid&&this._set("y",
a),this._set("latitude",a))}},longitude:{dependsOn:["x"],get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return g(this._get("x"),this._get("y"),!1,m)[0];if(4326===a.wkid)return this._get("x")}return null},set:function(a){var d=this._get("spatialReference");d&&(d.isWebMercator?this._set("x",k(a,this._get("y"),!1,m)[0]):4326===d.wkid&&this._set("x",a),this._set("longitude",a))}},x:0,y:0,z:void 0,m:void 0,type:"point"},clone:function(){var a=new h;a.x=this.x;a.y=this.y;a.z=
this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a},copy:function(a){h.copy(a,this);return this},equals:function(a){if(!a)return!1;var d=this.x,c=this.y,b=this.z,h=this.m,q=this.spatialReference,m=a.x,l=a.y,n=a.z,r=a.m;a=a.spatialReference;if(!q.equals(a))if(q.isWebMercator&&4326===a.wkid)l=k(m,l),m=l[0],l=l[1],a=q;else if(4326===q.wkid&&a.isWebMercator)l=g(m,l),m=l[0],l=l[1],a=q;else return!1;return d===m&&c===l&&b===n&&h===r&&q.wkid===a.wkid},offset:function(a,d,c){this.x+=a;this.y+=
d;null!=c&&this.hasZ&&(this.z+=c);return this},normalize:function(){var a=this.x,d=this.spatialReference;if(d){var c=d._getInfo();if(c){var d=c.valid[0],b=c.valid[1],c=2*b;a>b?(d=Math.ceil(Math.abs(a-b)/c),a-=d*c):a<d&&(d=Math.ceil(Math.abs(a-d)/c),a+=d*c)}}this._set("x",a);return this},distance:function(a){return h.distance(this,a)},toArray:function(){var a=this.hasZ,d=this.hasM;return a&&d?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:d?[this.x,this.y,this.m]:[this.x,this.y]},toJSON:function(){var a=
this.spatialReference,d={x:this.x,y:this.y};this.hasZ&&(d.z=this.z);this.hasM&&(d.m=this.m);d.spatialReference=a&&a.toJSON();return d}});h.lngLatToXY=k;h.xyToLngLat=g;h.copy=function(a,d){d.x=a.x;d.y=a.y;d.z=a.z;d.m=a.m;d.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};h.distance=function(a,d){var c=a.x-d.x,b=a.y-d.y,g=a.hasZ&&d.hasZ?a.z-d.z:0;return Math.sqrt(c*c+b*b+g*g)};return h})},"esri/geometry/support/webMercatorUtils":function(){define(["require",
"exports","../SpatialReference"],function(a,l,n){function m(a,b,c,d,e){if("point"===a.type)b=b(a.x,a.y,d,s),e.x=b[0],e.y=b[1];else if("extent"===a.type)l=b(a.xmin,a.ymin,d,s),e.xmin=l[0],e.ymin=l[1],b=b(a.xmax,a.ymax,d,s),e.xmax=b[0],e.ymax=b[1];else if("polyline"===a.type||"polygon"===a.type){var g="polyline"===a.type,h=g?a.paths:a.rings,f=[],p=void 0;a=0;for(l=h.length;a<l;a++){var x=h[a],p=[];f.push(p);for(var k=0,m=x.length;k<m;k++)p.push(b(x[k][0],x[k][1],d))}g?e.paths=f:e.rings=f}else if("multipoint"===
a.type){g=a.points;h=[];a=0;for(l=g.length;a<l;a++)h[a]=b(g[a][0],g[a][1],d);e.points=h}e.spatialReference=c;return e;var l}function k(a,b){var c=a&&(null!=a.wkid?a:a.spatialReference),d=b&&(null!=b.wkid?b:b.spatialReference);return!c||!d?!1:d.equals(c)?!0:d.isWebMercator&&4326===c.wkid||c.isWebMercator&&4326===d.wkid}function g(a,c,d,g){void 0===g&&(g=[0,0]);89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999);c*=b;g[0]=a*b*e;g[1]=0.5*e*Math.log((1+Math.sin(c))/(1-Math.sin(c)));return g}function h(a,
b,g,h){void 0===g&&(g=!1);void 0===h&&(h=[0,0]);a=a/e*c;h[0]=g?a:a-360*Math.floor((a+180)/360);g=h;b=d/2-2*Math.atan(Math.exp(-1*b/e));g[1]=b*c;return h}var e=6378137,d=3.141592653589793,c=57.29577951308232,b=0.017453292519943,s=[0,0];l.canProject=k;l.project=function(a,b){var c=a&&a.spatialReference,d=b&&(null!=b.wkid?b:b.spatialReference);return!k(c,d)?null:c.equals(d)?a.clone():d.isWebMercator?m(a,g,n.WebMercator,!1,a.clone()):4326===d.wkid?m(a,h,n.WGS84,!1,a.clone()):null};l.lngLatToXY=g;l.xyToLngLat=
h;l.geographicToWebMercator=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=a.clone());return m(a,g,n.WebMercator,b,c)};l.webMercatorToGeographic=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=a.clone());return m(a,h,n.WGS84,b,c)}})},"esri/geometry/support/mathUtils":function(){define(["../Point"],function(a){function l(g,h){var e,d,c;g instanceof a?(e=h.x-g.x,d=h.y-g.y,c=0,null!=g.z&&null!=h.z&&(c=g.z-h.z)):(e=h[0]-g[0],d=h[1]-g[1],c=0,null!=g[2]&&null!=h[2]&&(c=g[2]-h[2]));return Math.sqrt(e*
e+d*d+c*c)}function n(g,h,e){var d,c,b;if(g instanceof a)return d=g.x+e*(h.x-g.x),c=g.y+e*(h.y-g.y),null!=g.z&&null!=h.z&&(b=g.z+e*(h.z-g.z)),new a(d,c,b);d=g[0]+e*(h[0]-g[0]);c=g[1]+e*(h[1]-g[1]);return 2<g.length&&2<h.length?[d,c,g[2]+e*(h[2]-g[2])]:[d,c]}function m(a,h){return 1E-8>Math.abs(a-h)}function k(a,h,e,d){var c,b=m(a[0],h[0])?1E10:(a[1]-h[1])/(a[0]-h[0]),k=m(e[0],d[0])?1E10:(e[1]-d[1])/(e[0]-d[0]),l=a[1]-b*a[0],n=e[1]-k*e[0];if(m(b,k)){if(m(l,n)){if(m(a[0],h[0]))if(Math.min(a[1],h[1])<
Math.max(e[1],d[1])||Math.max(a[1],h[1])>Math.min(e[1],d[1]))a=(a[1]+h[1]+e[1]+d[1]-Math.min(a[1],h[1],e[1],d[1])-Math.max(a[1],h[1],e[1],d[1]))/2,c=(a-l)/b;else return null;else if(Math.min(a[0],h[0])<Math.max(e[0],d[0])||Math.max(a[0],h[0])>Math.min(e[0],d[0]))c=(a[0]+h[0]+e[0]+d[0]-Math.min(a[0],h[0],e[0],d[0])-Math.max(a[0],h[0],e[0],d[0]))/2,a=b*c+l;else return null;return[c,a]}return null}m(b,1E10)?(c=a[0],a=k*c+n):m(k,1E10)?(c=e[0],a=b*c+l):(c=-(l-n)/(b-k),a=a[1]===h[1]?a[1]:e[1]===d[1]?e[1]:
b*c+l);return[c,a]}return{getLength:l,_getLength:function(a,h){var e=h[0]-a[0],d=h[1]-a[1];return Math.sqrt(e*e+d*d)},getPointOnLine:n,getMidpoint:function(a,h){return n(a,h,0.5)},_equals:m,_getLineIntersection:k,getLineIntersection:function(g,h,e,d,c){(g=k([g.x,g.y],[h.x,h.y],[e.x,e.y],[d.x,d.y]))&&(g=new a(g[0],g[1],c));return g},_getLineIntersection2:function(a,h){var e=a[0],d=a[1],c=h[0],b=h[1],k=e[0],e=e[1],m=d[0],d=d[1],l=c[0],n=c[1],c=b[0]-l,l=k-l,u=m-k,b=b[1]-n,n=e-n,r=d-e,w=b*u-c*r;if(0===
w)return!1;c=(c*n-b*l)/w;l=(u*n-r*l)/w;return 0<=c&&1>=c&&0<=l&&1>=l?[k+c*(m-k),e+c*(d-e)]:!1},_pointLineDistance:function(a,h){var e=h[0],d=h[1],c=e[0],b=e[1],e=a[0],k=a[1],m=d[0]-c,l=d[1]-b,n=e-c,u=k-b,d=Math.sqrt,r=Math.pow,w=d(r(m,2)+r(l,2)),n=(n*m+u*l)/(w*w),b=b+n*l;return d(r(e-(c+n*m),2)+r(k-b,2))},getPathLength:function(a){for(var h=0,e=a.length,d=0;d<e-1;++d)h+=l(a[d],a[d+1]);return h},getPointOnPath:function(a,h){if(0>=h)return a[0];for(var e=0,d=a.length,c=0;c<d-1;++c){var b=l(a[c],a[c+
1]);if(h-e<b)return n(a[c],a[c+1],(h-e)/b);e+=b}return a[d-1]}}})},"esri/support/basemapUtils":function(){define("require exports ./basemapDefinitions ../core/accessorSupport/ensureType ../core/urlUtils ../layers/TiledLayer ../Basemap".split(" "),function(a,l,n,m,k,g,h){function e(a,b){var c;if("string"===typeof a){if(!(a in n))return c=Object.keys(n).map(function(a){return'"'+a+'"'}).join(", "),console.warn("Unable to find basemap definition for: "+a+". Try one of these: "+c),null;b&&(c=b[a]);c||
(c=h.fromId(a),b&&(b[a]=c))}else c=m.default(h,a);return c}function d(a,b){return!a.some(function(a,d){return!c(a,b.getItemAt(d))})}function c(a,b){if(a.constructor!==b.constructor)return!1;if(a.isInstanceOf(g)){if(null!=a.url!==(null!=b.url))return!1;if(null!=a.url)return k.normalize(a.url).toLowerCase()===k.normalize(b.url).toLowerCase();if(null!=a.urlTemplate&&null!=b.urlTemplate)return k.normalize(a.urlTemplate).toLowerCase()===k.normalize(b.urlTemplate).toLowerCase()}return!1}function b(a,b){return a.map(function(a){return b.find(function(b){return c(a,
b)})||a})}l.createCache=function(){return{}};l.ensureType=e;l.clonePreservingTiledLayers=function(a,c){void 0===c&&(c=null);var d=e(a);if(!d)return null;d=new h({id:d.id,title:d.title,baseLayers:d.baseLayers.slice(),referenceLayers:d.referenceLayers.slice()});c&&(d.baseLayers=b(d.baseLayers,c.baseLayers),d.referenceLayers=b(d.referenceLayers,c.referenceLayers));return d};l.contentEquals=function(a,b){return null!=a!==(null!=b)?!1:a===b?!0:a.baseLayers.length!==b.baseLayers.length||a.referenceLayers.length!==
b.referenceLayers.length?!1:d(a.baseLayers,b.baseLayers)&&d(a.referenceLayers,b.referenceLayers)}})},"esri/support/basemapDefinitions":function(){define(["require","exports","dojo/i18n!../nls/basemaps"],function(a,l,n){return{streets:{id:"streets",title:n.streets,thumbnailUrl:a.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",showLegend:!1}]},satellite:{id:"satellite",title:n.satellite,thumbnailUrl:a.toUrl("../images/basemap/satellite.jpg"),
baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",showLegend:!1}]},hybrid:{id:"hybrid",title:n.hybrid,thumbnailUrl:a.toUrl("../images/basemap/hybrid.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",showLegend:!1},{url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",isReference:!0,showLegend:!1}]},terrain:{id:"terrain",title:n.terrain,thumbnailUrl:a.toUrl("../images/basemap/terrain.jpg"),
baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",showLegend:!1},{url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",isReference:!0,showLegend:!1}]},topo:{id:"topo",title:n.topo,thumbnailUrl:a.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",showLegend:!1}]},gray:{id:"gray",title:n.gray,thumbnailUrl:a.toUrl("../images/basemap/gray.jpg"),
baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",showLegend:!1},{url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",isReference:!0,showLegend:!1}]},"dark-gray":{id:"dark-gray",title:n["dark-gray"],thumbnailUrl:a.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",showLegend:!1},{url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",
isReference:!0,showLegend:!1}]},oceans:{id:"oceans",title:n.oceans,thumbnailUrl:a.toUrl("../images/basemap/oceans.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",showLegend:!1},{url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",isReference:!0,showLegend:!1}]},"national-geographic":{id:"national-geographic",title:n["national-geographic"],thumbnailUrl:a.toUrl("../images/basemap/national-geographic.jpg"),
baseMapLayers:[{url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",showLegend:!1}]},osm:{id:"osm",title:n.osm,thumbnailUrl:a.toUrl("../images/basemap/osm.jpg"),baseMapLayers:[{layerType:"OpenStreetMap",showLegend:!1}]},"dark-gray-vector":{id:"dark-gray-vector",title:n["dark-gray"],thumbnailUrl:a.toUrl("../images/basemap/dark-gray.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/850db44b9eb845d3bd42b19e8aa7a024/resources/styles/root.json",layerType:"VectorTileLayer"}]},
"gray-vector":{id:"gray-vector",title:n.gray,thumbnailUrl:a.toUrl("../images/basemap/gray.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/0e02e6f86d02455091796eaae811d9b5/resources/styles/root.json",layerType:"VectorTileLayer"}]},"streets-vector":{id:"streets-vector",title:n.streets,thumbnailUrl:a.toUrl("../images/basemap/streets.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/4e1133c28ac04cca97693cf336cd49ad/resources/styles/root.json",layerType:"VectorTileLayer"}]},
"topo-vector":{id:"topo-vector",title:n.topo,thumbnailUrl:a.toUrl("../images/basemap/topo.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/6f65bc1351b7411588a8cb43fe23dad7/resources/styles/root.json",layerType:"VectorTileLayer"}]},"streets-night-vector":{id:"streets-night-vector",title:n["streets-night-vector"],thumbnailUrl:a.toUrl("../images/basemap/streets-night.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/bf79e422e9454565ae0cbe9553cf6471/resources/styles/root.json",
layerType:"VectorTileLayer"}]},"streets-relief-vector":{id:"streets-relief-vector",title:n["streets-relief-vector"],thumbnailUrl:a.toUrl("../images/basemap/streets-relief.jpg"),baseMapLayers:[{url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",showLegend:!1},{url:"//www.arcgis.com/sharing/rest/content/items/2e063e709e3446459f8538ed6743f879/resources/styles/root.json",layerType:"VectorTileLayer",showLegend:!1}]},"streets-navigation-vector":{id:"streets-navigation-vector",
title:n["streets-navigation-vector"],thumbnailUrl:a.toUrl("../images/basemap/streets-navigation.jpg"),baseMapLayers:[{url:"//www.arcgis.com/sharing/rest/content/items/dcbbba0edf094eaa81af19298b9c6247/resources/styles/root.json",layerType:"VectorTileLayer"}]}}})},"esri/layers/TiledLayer":function(){define(["./Layer","./support/TileInfo"],function(a,l){return a.createSubclass({properties:{attributionDataUrl:null,tileInfo:l},viewModulePaths:{"2d":"../views/2d/layers/TiledLayerView2D","3d":"../views/3d/layers/TiledLayerView3D"},
getTileUrl:function(a,m,k){}})})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper dojo/_base/lang ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../geometry/SpatialReference ../../geometry/Point ./LOD".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s){var q=e({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",
EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(a){function e(b){a.call(this);this.dpi=96;this.origin=this.format=null;this.maxScale=this.minScale=0;this.spatialReference=this.size=null}n(e,a);Object.defineProperty(e.prototype,"lods",{set:function(a){var b=0,c=0,d=[];a&&(b=-Infinity,c=Infinity,a.forEach(function(f){d.push(f.scale);b=f.scale>b?f.scale:b;c=f.scale<c?f.scale:c},this));this._set("scales",d);this._set("minScale",b);
this._set("maxScale",c);this._set("lods",a)},enumerable:!0,configurable:!0});e.prototype.zoomToScale=function(a){var b=this.scales;if(0>=a)return b[0];if(a>=b.length)return b[b.length-1];var c=Math.round(a-0.5),d=Math.round(a);return b[d]+(d-a)*(b[c]-b[d])};e.prototype.scaleToZoom=function(a){for(var b=this.scales,c=b.length-1,d=0;d<c;d++){var f=b[d],p=b[d+1];if(f<=a)break;if(p===a)return d+1;if(f>a&&p<a)return d+1-(a-p)/(f-p)}return d};e.prototype.snapScale=function(a,b){void 0===b&&(b=0.95);var c=
this.scaleToZoom(a);return c%Math.floor(c)>=b?this.zoomToScale(Math.ceil(c)):this.zoomToScale(Math.floor(c))};e.prototype.clone=function(){return e.fromJSON(this.toJSON())};e.prototype.toJSON=function(){return d.fixJson({rows:this.size[0],cols:this.size[1],dpi:this.dpi,format:q.toJSON(this.format),compressionQuality:this.compressionQuality,origin:this.origin&&this.origin.toJSON(),spatialReference:this.spatialReference&&this.spatialReference.toJSON(),lods:this.lods&&this.lods.map(function(a){return a.toJSON()})})};
m([g.property()],e.prototype,"compressionQuality",void 0);m([g.property()],e.prototype,"dpi",void 0);m([g.property({json:{read:q.fromJSON}})],e.prototype,"format",void 0);m([g.property({type:b,json:{read:function(a,c){return b.fromJSON(k.mixin({spatialReference:c.spatialReference},a))}}})],e.prototype,"origin",void 0);m([g.property({type:[s],value:null})],e.prototype,"lods",null);m([g.property({readOnly:!0})],e.prototype,"minScale",void 0);m([g.property({readOnly:!0})],e.prototype,"maxScale",void 0);
m([g.property({readOnly:!0})],e.prototype,"scales",void 0);m([g.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]},json:{readFrom:["rows","cols"],read:function(a,b){return[b.cols,b.rows]}}})],e.prototype,"size",void 0);m([g.property({type:c})],e.prototype,"spatialReference",void 0);return e=m([g.subclass("esri.layers.support.TileInfo")],e)}(g.declared(h))})},"esri/core/kebabDictionary":function(){define(["require","exports"],function(a,l){return function(a){var m=
{},k;for(k in a)m[a[k]]=k;return{toJSON:function(a){return m.hasOwnProperty(a)?m[a]:a},fromJSON:function(g){return a.hasOwnProperty(g)?a[g]:g}}}})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/JSONSupport ../../core/lang".split(" "),function(a,l,n,m,k,g,h){return function(a){function d(c){a.call(this,c);this.level=0;this.levelValue=null;this.scale=this.resolution=
0}n(d,a);d.prototype.clone=function(){return new d({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};d.prototype.toJSON=function(){return h.fixJson({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};m([k.property()],d.prototype,"level",void 0);m([k.property()],d.prototype,"levelValue",void 0);m([k.property()],d.prototype,"resolution",void 0);m([k.property()],d.prototype,"scale",void 0);return d=m([k.subclass("esri.layers.support.LOD")],
d)}(k.declared(g))})},"esri/Basemap":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators dojo/_base/lang ./support/basemapDefinitions ./core/Collection ./core/collectionUtils ./core/Evented ./core/JSONSupport ./core/Loadable ./core/promiseUtils ./core/requireUtils ./core/urlUtils ./core/Logger ./portal/Portal ./portal/PortalItem ./layers/Layer".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w,y){var f=0,
p=e.ofType(y),x=u.getLogger("esri.Basemap");return function(b){function c(a){b.call(this);this.thumbnailUrl=this.resourceInfo=this.portalItem=this.id=null;this.title="";this.id=Date.now().toString(16)+"-basemap-"+f++;this.baseLayers=new e;this.referenceLayers=new e;var p=function(a){"esri.layers.ElevationLayer"===a.declaredClass&&x.error("Layer '"+a.title+", id:"+a.id+"' of type '"+a.declaredClass+"' cannot be added as a basemap layer.")};this.baseLayers.on("after-add",function(a){return p(a.item)});
this.referenceLayers.on("after-add",function(a){return p(a.item)})}n(c,b);c.prototype.initialize=function(){this.resourceInfo&&this.read(this.resourceInfo)};Object.defineProperty(c.prototype,"baseLayers",{set:function(a){this._set("baseLayers",d.referenceSetter(a,this._get("baseLayers"),p))},enumerable:!0,configurable:!0});c.prototype.writeBaseLayers=function(a,f,b){var c=[];if(!a)return c;b=g.mixin({},b,{layerContainerType:"basemap"});this.baseLayers.forEach(function(a){if(a.write){var f={};a.write(f,
b)&&c.push(f)}});this.referenceLayers.forEach(function(a){if(a.write){var f={isReference:!0};a.write(f,b)&&c.push(f)}});f.baseMapLayers=c};Object.defineProperty(c.prototype,"referenceLayers",{set:function(a){this._set("referenceLayers",d.referenceSetter(a,this._get("referenceLayers"),p))},enumerable:!0,configurable:!0});c.prototype.writeTitle=function(a,f){a&&(f.title=a)};c.prototype.load=function(){this.addResolvingPromise(this._loadFromSource());return this};c.prototype.clone=function(){var a={id:this.id,
title:this.title};this.resourceInfo||this.portalItem?(a.portalItem=this.portalItem,a.resourceInfo=this.resourceInfo):(a.baseLayers=this.baseLayers.slice(),a.referenceLayers=this.referenceLayers.slice());return new c(a)};c.prototype.read=function(a,f){f&&f.origin&&(this._layerOrigin=f.origin);return this.inherited(arguments)};c.prototype.write=function(a,f){a=a||{};!this.loaded&&this.resourceInfo?g.mixin(a,this.resourceInfo):this.inherited(arguments,[a,f]);return a};c.prototype.toJSON=function(){return this.write(null,
{origin:"web-map"})};c.prototype._loadFromSource=function(){var a=this.resourceInfo,f=this.portalItem;return a?this._loadFromJSON(a):f?this._loadFromItem(f):q.resolve(null)};c.prototype._loadFromJSON=function(f,b){var c=this,p=this.portalItem&&this.portalItem.portal;return v.when(a,"./portal/support/layersCreator").then(function(a){var d=[];if(f.baseMapLayers&&Array.isArray(f.baseMapLayers)){var e={context:{origin:c._layerOrigin||"web-map",layerContainerType:"basemap",url:b,portal:p},defaultLayerType:"DefaultTileLayer"},
g=a.populateOperationalLayers(c.baseLayers,f.baseMapLayers.filter(function(a){return!a.isReference}),e);d.push.apply(d,g);a=a.populateOperationalLayers(c.referenceLayers,f.baseMapLayers.filter(function(a){return a.isReference}),e);d.push.apply(d,a)}return q.eachAlways(d)}).then(function(){})};c.prototype._loadFromItem=function(a){var f=this;return a.load().then(function(a){f.read({title:a.title,thumbnailUrl:a.thumbnailUrl},{origin:"portal-item",portal:a.portal||r.getDefault()});return a}).then(function(a){return a.fetchData()}).then(function(b){f.resourceInfo=
b.baseMap;b=t.urlToObject(a.itemUrl);f.read(f.resourceInfo,{origin:"portal-item",portal:a.portal||r.getDefault(),url:b});return f._loadFromJSON(f.resourceInfo,b)})};c.fromJSON=function(a){return!a?null:new c({resourceInfo:a})};c.fromId=function(a){return(a=h[a])?c.fromJSON(a):null};m([k.property({type:p,json:{writeAlways:!0}}),k.cast(d.castForReferenceSetter)],c.prototype,"baseLayers",null);m([k.write("baseLayers")],c.prototype,"writeBaseLayers",null);m([k.property({json:{origins:{webScene:{writable:!0}}}})],
c.prototype,"id",void 0);m([k.property({type:w})],c.prototype,"portalItem",void 0);m([k.property({type:p}),k.cast(d.castForReferenceSetter)],c.prototype,"referenceLayers",null);m([k.property()],c.prototype,"resourceInfo",void 0);m([k.property()],c.prototype,"thumbnailUrl",void 0);m([k.property()],c.prototype,"title",void 0);m([k.write("title")],c.prototype,"writeTitle",null);return c=m([k.subclass("esri.Basemap")],c)}(k.declared(b,c,s))})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/accessorSupport/decorators ../core/Error ../config ../identity/IdentityManager ../request ../geometry/Extent ../core/JSONSupport ../core/Loadable ./PortalQueryParams ./PortalQueryResult ./PortalUser ../core/promiseUtils ../core/requireUtils dojo/promise/all dojo/_base/kernel dojo/_base/lang".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w,y,f,p){var x;return function(l){function q(a){l.call(this);this.access=null;this.allSSL=!1;this.authMode=q.AUTH_MODE_AUTO;this.bingKey=this.authorizedCrossOriginDomains=null;this.canSignInIDP=this.canSignInArcGIS=this.canSharePublic=this.canShareBingPublic=this.canSearchPublic=this.canProvisionDirectPurchase=this.canListPreProvisionedItems=this.canListData=this.canListApps=!1;this.colorSetsGroupQuery=null;this.commentsEnabled=!1;this.ipCntryCode=this.id=
this.httpsPort=this.httpPort=this.homePageFeaturedContentCount=this.homePageFeaturedContent=this.livingAtlasGroupQuery=this.galleryTemplatesGroupQuery=this.featuredItemsGroupQuery=this.featuredGroups=this.description=this.defaultExtent=this.defaultBasemap=this.customBaseUrl=this.culture=this.created=null;this.isPortal=!1;this.rotatorPanels=this.region=this.portalProperties=this.portalMode=this.portalHostname=this.name=this.modified=this.maxTokenExpirationMinutes=this.layerTemplatesGroupQuery=null;
this.supportsHostedServices=this.showHomePageDescription=!1;this.units=this.templatesGroupQuery=this.symbolSetsGroupQuery=null;this.url=e.portalUrl;this.user=this.urlKey=null;this.useStandardizedQuery=!1}n(q,l);q.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};q.prototype.initialize=function(){var a=this;this._esriId_credentialCreateHandle=d.on("credential-create",function(){a.loaded&&(!a.credential&&a.authMode===q.AUTH_MODE_AUTO)&&(a.credential=d.findCredential(a.restUrl),
a.credential&&a._fetchSelf().then(function(f){a.read(f)}))})};q.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};q.prototype.readDefaultBasemap=function(a){return a?x.fromJSON(a):null};Object.defineProperty(q.prototype,"extraQuery",{get:function(){return this.id&&!this.canSearchPublic?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"isOrganization",
{get:function(){return!!this.access},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"restUrl",{get:function(){var a=this.url;if(a)var f=a.indexOf("/sharing"),a=0<f?a.substring(0,f):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0});Object.defineProperty(q.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,f=this.thumbnail;return a&&f?this._normalizeSSL(a+"/portals/self/resources/"+f):null},enumerable:!0,configurable:!0});q.prototype.readUser=
function(a){var f=null;a&&(f=u.fromJSON(a),f.portal=this);return f};q.prototype.load=function(){var f=this,b=r.resolve().then(function(){return f.authMode===q.AUTH_MODE_IMMEDIATE?d.getCredential(f.restUrl):f.authMode===q.AUTH_MODE_AUTO?d.checkSignInStatus(f.restUrl).otherwise(function(){return null}):null}).then(function(b){f.credential=b;return w.when(a,"../Basemap")}).then(function(a){x=a}).then(function(){return f._fetchSelf()}).then(function(a){f.read(a)});this.addResolvingPromise(b);return this};
q.prototype.fetchBasemaps=function(){var a=new v;a.query=this.basemapGalleryGroupQuery;a.disableExtraQuery=!0;return this.queryGroups(a).then(function(f){a.num=100;a.query='type:"Web Map" -type:"Web Application"';return f.total?(f=f.results[0],a.sortField=f.sortField||"name",a.sortOrder=f.sortOrder||"desc",f.queryItems(a)):null}).then(function(a){return a&&a.total?a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new x({portalItem:a})}):[]})};q.prototype.fetchFeaturedGroups=
function(){var a=this.featuredGroups,f=new v;f.num=100;f.sortField="title";if(a&&a.length){for(var b=[],c=0;c<a.length;c++){var p=a[c];b.push('(title:"'+p.title+'" AND owner:'+p.owner+")")}f.query=b.join(" OR ");return this.queryGroups(f).then(function(a){return a.results})}return r.resolve([])};q.getDefault=function(){q._default||(q._default=new q);return q._default};q.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",a,"PortalGroup")};q.prototype.queryItems=function(a){return this._queryPortal("/search",
a,"PortalItem")};q.prototype.queryUsers=function(a){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",a,"PortalUser")};q.prototype.toJSON=function(){throw new h("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};q.prototype._fetchSelf=function(){return this._request(this.restUrl+"/portals/self",{query:{culture:f.locale}})};q.prototype._queryPortal=function(f,b,c){var p=this,d=function(a){return p._request(p.restUrl+f,b.toRequestOptions(p)).then(function(f){var c=
b.clone();c.start=f.nextStart;return new t({nextQueryParams:c,queryParams:b,total:f.total,results:q._resultsToTypedArray(a,{portal:p},f)})}).then(function(a){return y(a.results).always(function(){return a})})};return c?w.when(a,"./"+c).then(function(a){return d(a)}):d()};q.prototype._normalizeSSL=function(a){var f=this.allSSL||window&&"https:"===window.location.protocol;if(this.isPortal){var b=q._getLocation(a);if(-1<this.portalHostname.toLowerCase().indexOf(b.hostname.toLowerCase())&&b.port&&"80"!==
b.port&&"443"!==b.port)return a=b.pathname,0!==a.indexOf("/")&&(a="/"+a),f?"https://"+b.hostname+(this.httpsPort&&443!==this.httpsPort?":"+this.httpsPort:"")+a+b.search:"http://"+b.hostname+(this.httpPort&&80!==this.httpPort?":"+this.httpPort:"")+a+b.search}return f?a.replace("http:","https:"):a};q.prototype._normalizeUrl=function(a){var f=this.credential&&this.credential.token;return this._normalizeSSL(f?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+f:a)};q.prototype._requestToTypedArray=function(f,
b,c){var p=this,d=function(a){return p._request(f,b).then(function(f){var b=q._resultsToTypedArray(a,{portal:p},f);return y(b).always(function(){return b})})};return c?w.when(a,"./"+c).then(function(a){return d(a)}):d()};q.prototype._request=function(a,f){var b={f:"json"},d={disableIdentityLookup:this.authMode===q.AUTH_MODE_ANONYMOUS},e;f&&(p.mixin(b,f.query),e=f.responseType,d.method=f.method);return c(this._normalizeSSL(a),p.mixin({callbackParamName:"callback",query:b,responseType:e,timeout:0},
d)).then(function(a){return a.data})};q._getLocation=function(a){var f=document.createElement("a");f.href=a;return{protocol:f.protocol,hostname:f.hostname,port:f.port,pathname:f.pathname,search:f.search,hash:f.hash,host:f.host}};q._resultsToTypedArray=function(a,f,b){if(b){if(b=b.listings||b.notifications||b.userInvitations||b.tags||b.items||b.groups||b.comments||b.provisions||b.results||b.relatedItems||b,a||f)b=b.map(function(b){b=p.mixin(a?a.fromJSON(b):b,f);"function"===typeof b.load&&b.load();
return b})}else b=[];return b};q.AUTH_MODE_ANONYMOUS="anonymous";q.AUTH_MODE_AUTO="auto";q.AUTH_MODE_IMMEDIATE="immediate";m([g.property()],q.prototype,"access",void 0);m([g.property()],q.prototype,"allSSL",void 0);m([g.property()],q.prototype,"authMode",void 0);m([g.property()],q.prototype,"authorizedCrossOriginDomains",void 0);m([g.property()],q.prototype,"basemapGalleryGroupQuery",void 0);m([g.property()],q.prototype,"bingKey",void 0);m([g.property()],q.prototype,"canListApps",void 0);m([g.property()],
q.prototype,"canListData",void 0);m([g.property()],q.prototype,"canListPreProvisionedItems",void 0);m([g.property()],q.prototype,"canProvisionDirectPurchase",void 0);m([g.property()],q.prototype,"canSearchPublic",void 0);m([g.property()],q.prototype,"canShareBingPublic",void 0);m([g.property()],q.prototype,"canSharePublic",void 0);m([g.property()],q.prototype,"canSignInArcGIS",void 0);m([g.property()],q.prototype,"canSignInIDP",void 0);m([g.property()],q.prototype,"colorSetsGroupQuery",void 0);m([g.property()],
q.prototype,"commentsEnabled",void 0);m([g.property({type:Date})],q.prototype,"created",void 0);m([g.property()],q.prototype,"credential",void 0);m([g.property()],q.prototype,"culture",void 0);m([g.property()],q.prototype,"customBaseUrl",void 0);m([g.property()],q.prototype,"defaultBasemap",void 0);m([g.read("defaultBasemap")],q.prototype,"readDefaultBasemap",null);m([g.property({type:b})],q.prototype,"defaultExtent",void 0);m([g.property()],q.prototype,"description",void 0);m([g.property({dependsOn:["id",
"canSearchPublic"],readOnly:!0})],q.prototype,"extraQuery",null);m([g.property()],q.prototype,"featuredGroups",void 0);m([g.property()],q.prototype,"featuredItemsGroupQuery",void 0);m([g.property()],q.prototype,"galleryTemplatesGroupQuery",void 0);m([g.property()],q.prototype,"livingAtlasGroupQuery",void 0);m([g.property()],q.prototype,"helpBase",void 0);m([g.property()],q.prototype,"helperServices",void 0);m([g.property()],q.prototype,"helpMap",void 0);m([g.property()],q.prototype,"homePageFeaturedContent",
void 0);m([g.property()],q.prototype,"homePageFeaturedContentCount",void 0);m([g.property()],q.prototype,"httpPort",void 0);m([g.property()],q.prototype,"httpsPort",void 0);m([g.property()],q.prototype,"id",void 0);m([g.property()],q.prototype,"ipCntryCode",void 0);m([g.property({dependsOn:["access"],readOnly:!0})],q.prototype,"isOrganization",null);m([g.property()],q.prototype,"isPortal",void 0);m([g.property()],q.prototype,"layerTemplatesGroupQuery",void 0);m([g.property()],q.prototype,"maxTokenExpirationMinutes",
void 0);m([g.property({type:Date})],q.prototype,"modified",void 0);m([g.property()],q.prototype,"name",void 0);m([g.property()],q.prototype,"portalHostname",void 0);m([g.property()],q.prototype,"portalMode",void 0);m([g.property()],q.prototype,"portalProperties",void 0);m([g.property()],q.prototype,"region",void 0);m([g.property({dependsOn:["url"],readOnly:!0})],q.prototype,"restUrl",null);m([g.property()],q.prototype,"rotatorPanels",void 0);m([g.property()],q.prototype,"showHomePageDescription",
void 0);m([g.property()],q.prototype,"staticImagesUrl",void 0);m([g.property()],q.prototype,"stylesGroupQuery",void 0);m([g.property()],q.prototype,"supportsHostedServices",void 0);m([g.property()],q.prototype,"symbolSetsGroupQuery",void 0);m([g.property()],q.prototype,"templatesGroupQuery",void 0);m([g.property()],q.prototype,"thumbnail",void 0);m([g.property({dependsOn:["restUrl","thumbnail"],readOnly:!0})],q.prototype,"thumbnailUrl",null);m([g.property()],q.prototype,"units",void 0);m([g.property()],
q.prototype,"url",void 0);m([g.property()],q.prototype,"urlKey",void 0);m([g.property()],q.prototype,"user",void 0);m([g.read("user")],q.prototype,"readUser",null);m([g.property()],q.prototype,"useStandardizedQuery",void 0);m([k(1,g.cast(v))],q.prototype,"_queryPortal",null);return q=m([g.subclass("esri.portal.Portal")],q)}(g.declared(s,q))})},"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(a,l){return function(n,m){l(n,m,a)}}})},"esri/identity/IdentityManager":function(){define(["./IdentityManagerDialog",
"../kernel","./OAuthSignInHandler","../core/declare"],function(a,l,n,m){a=new a;l.id=m.safeMixin(a,n);return l.id})},"esri/identity/IdentityManagerDialog":function(){define("dojo/_base/kernel ../core/declare dojo/_base/config dojo/Deferred dojo/_base/lang dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ../kernel ../core/lang ../core/domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/identity dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(a,
l,n,m,k,g,h,e,d,c,b,s,q,v,t){return l([v],{declaredClass:"esri.IdentityManager",constructor:function(a){k.mixin(this,a)},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblUser}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblPwd}\x3c/label\x3e\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
signIn:function(a,b,c){this._nls||(this._nls=t);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.emit("dialog-create"));var d=this._loginDialog,f=c&&c.error,p=c&&c.token,e=new m(function(){d.onCancel()});if(d.open)return a=Error("BUSY"),a.code="IdentityManager.1",a.log=n.isDebug,e.reject(a),e.promise;s.hide(d.errMsg_);f&&(403==f.code&&p)&&(g.set(d.errMsg_,"innerHTML",this._nls.forbidden),s.show(d.errMsg_));d.dfd_=e;d.serverInfo_=b;d.resUrl_=a;d.admin_=c&&c.isAdmin;
g.set(d.resLink_,{title:a,innerHTML:"("+(this.getResourceName(a)||this._nls.lblItem)+")"});g.set(d.serverLink_,{title:b.server,innerHTML:(-1!==b.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":b.server)+" "});d.txtPwd_.set("value","");d.show();return e.promise},_createLoginDialog:function(){var k=this._nls,r=b.substitute(k,this._dialogContent),r=b.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
r),m=new d({title:k.title,content:r,"class":" esri-widget esriSignInDialog esriIdentityDialog",style:"width: 18em;",esriIdMgr_:this,keypressed_:function(a){a.charOrCode===h.ENTER&&this.execute_()},execute_:function(){var a=this.txtUser_.get("value"),f=this.txtPwd_.get("value"),p=this.dfd_,e=this;if(this.form_.validate()&&a&&f){this.btnSubmit_.set("label",k.lblSigning);var h=c.id.findCredential(e.resUrl_,a),m=function(f){e.btnSubmit_.set("label",k.lblOk);e.btnSubmit_.set("disabled",!1);s.hide(e.errMsg_);
e.hide();d._DialogLevelManager.hide(e);var c=e.serverInfo_;e.dfd_=e.serverInfo_=e.generateDfd_=e.resUrl_=null;var g,m,r=h,l;f&&(g=f.token,m=b.isDefined(f.expires)?Number(f.expires):null,l=!!f.ssl,r?(r.userId=a,r.token=g,r.expires=m,r.validity=f.validity,r.ssl=l,r.creationTime=(new Date).getTime()):r=new q({userId:a,server:c.server,token:g,expires:m,ssl:l,isAdmin:e.admin_,validity:f.validity}));p.resolve(r)};h&&!h._enqueued?m():(e.btnSubmit_.set("disabled",!0),e.generateDfd_=c.id.generateToken(this.serverInfo_,
{username:a,password:f},{isAdmin:this.admin_}).then(m).then(null,function(a){e.btnSubmit_.set("disabled",!1);e.generateDfd_=null;e.btnSubmit_.set("label",k.lblOk);g.set(e.errMsg_,"innerHTML",a&&a.code?k.invalidUser:k.noAuthService);s.show(e.errMsg_)}))}},cancel_:function(){m.generateDfd_&&m.generateDfd_.cancel();var a=m.dfd_,f=m.resUrl_,b=m.serverInfo_;m.btnSubmit_.set("disabled",!1);m.dfd_=m.serverInfo_=m.generateDfd_=m.resUrl_=null;s.hide(m.errMsg_);d._DialogLevelManager.hide(m);m.esriIdMgr_.emit("dialog-cancel",
{resourceUrl:f,serverInfo:b});f=Error("ABORTED");f.code="IdentityManager.2";f.log=n.isDebug;a.reject(f)}}),r=m.domNode;m.form_=e.byNode(a.query(".esriIdForm",r)[0]);m.txtUser_=e.byNode(a.query(".esriIdUser",r)[0]);m.txtPwd_=e.byNode(a.query(".esriIdPwd",r)[0]);m.btnSubmit_=e.byNode(a.query(".esriIdSubmit",r)[0]);m.btnCancel_=e.byNode(a.query(".esriIdCancel",r)[0]);m.resLink_=a.query(".resLink",r)[0];m.serverLink_=a.query(".serverLink",r)[0];m.errMsg_=a.query(".esriErrorMsg",r)[0];m.connect(m.txtUser_,
"onKeyPress",m.keypressed_);m.connect(m.txtPwd_,"onKeyPress",m.keypressed_);m.connect(m.btnSubmit_,"onClick",m.execute_);m.connect(m.btnCancel_,"onClick",m.onCancel);m.connect(m,"onCancel",m.cancel_);return m}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(a,l,n){var m={},k={},g={length:0,add:function(a){if(k[a.id])throw Error("Tried to register widget with id\x3d\x3d"+a.id+" but that id is already registered");k[a.id]=a;this.length++},remove:function(a){k[a]&&
(delete k[a],this.length--)},byId:function(a){return"string"==typeof a?k[a]:a},byNode:function(a){return k[a.getAttribute("widgetId")]},toArray:function(){var a=[],e;for(e in k)a.push(k[e]);return a},getUniqueId:function(a){var e;do e=a+"_"+(a in m?++m[a]:m[a]=0);while(k[e]);return"dijit"==n._scopeName?e:n._scopeName+"_"+e},findWidgets:function(a,e){function d(a){for(a=a.firstChild;a;a=a.nextSibling)if(1==a.nodeType){var g=a.getAttribute("widgetId");g?(g=k[g])&&c.push(g):a!==e&&d(a)}}var c=[];d(a);
return c},_destroyAll:function(){n._curFocus=null;n._prevFocus=null;n._activeStack=[];a.forEach(g.findWidgets(l.body()),function(a){a._destroyed||(a.destroyRecursive?a.destroyRecursive():a.destroy&&a.destroy())})},getEnclosingWidget:function(a){for(;a;){var e=1==a.nodeType&&a.getAttribute("widgetId");if(e)return k[e];a=a.parentNode}return null},_hash:k};return n.registry=g})},"dijit/main":function(){define(["dojo/_base/kernel"],function(a){return a.dijit})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w,y,f,p,x,z,K,A,E,L,B,I,U){function S(){}var D=new k;D.resolve(!0);p=m("dijit._DialogBase"+(u("dojo-bidi")?"_NoBidi":""),[z,A,E,K],{templateString:U,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:p.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(a){this._set("draggable",a)},maxRatio:0.9,
closable:!0,_setClosableAttr:function(a){this.closeButtonNode.style.display=a?"":"none";this._set("closable",a)},postMixInProperties:function(){var a=b.getLocalization("dijit","common");q.mixin(this,a);this.inherited(arguments)},postCreate:function(){d.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);n.after(this,"onExecute",q.hitch(this,"hide"),!0);n.after(this,"onCancel",q.hitch(this,"hide"),!0);this._modalconnects=
[]},onLoad:function(){this.resize();this._position();this.autofocus&&G.isTop(this)&&(this._getFocusItems(),f.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();f.focus(this._firstFocusItem)},_endDrag:function(){var a=e.position(this.domNode),f=r.getBox(this.ownerDocument);a.y=Math.min(Math.max(a.y,0),f.h-a.h);a.x=Math.min(Math.max(a.x,0),f.w-a.w);this._relativePosition=a;this._position()},_setup:function(){var a=this.domNode;this.titleBar&&this.draggable?
(this._moveable=new (6==u("ie")?y:w)(a,{handle:this.titleBar}),n.after(this._moveable,"onMoveStop",q.hitch(this,"_endDrag"),!0)):h.add(a,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":l.map(this["class"].split(/\s/),function(a){return a+"_underlay"}).join(" "),_onKeyDown:q.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!h.contains(this.ownerDocumentBody,"dojoMove")){var a=this.domNode,f=r.getBox(this.ownerDocument),
b=this._relativePosition,c=e.position(a),p=Math.floor(f.l+(b?Math.min(b.x,f.w-c.w):(f.w-c.w)/2)),f=Math.floor(f.t+(b?Math.min(b.y,f.h-c.h):(f.h-c.h)/2));d.set(a,{left:p+"px",top:f+"px"})}},_onKey:function(a){if(a.keyCode==s.TAB){this._getFocusItems();var b=a.target;this._firstFocusItem==this._lastFocusItem?(a.stopPropagation(),a.preventDefault()):b==this._firstFocusItem&&a.shiftKey?(f.focus(this._lastFocusItem),a.stopPropagation(),a.preventDefault()):b==this._lastFocusItem&&!a.shiftKey&&(f.focus(this._firstFocusItem),
a.stopPropagation(),a.preventDefault())}else this.closable&&a.keyCode==s.ESCAPE&&(this.onCancel(),a.stopPropagation(),a.preventDefault())},show:function(){if(this.open)return D.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),G.hide(this));var a=r.get(this.ownerDocument);this._modalconnects.push(v(a,"scroll",q.hitch(this,"resize",null)));this._modalconnects.push(v(this.domNode,"keydown",
q.hitch(this,"_onKey")));d.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var b;this._fadeInDeferred=new k(q.hitch(this,function(){b.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,S);a=this._fadeInDeferred.promise;b=c.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:q.hitch(this,function(){G.show(this,this.underlayAttrs)}),onEnd:q.hitch(this,function(){this.autofocus&&G.isTop(this)&&(this._getFocusItems(),
f.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return a},hide:function(){if(!this._alreadyInitialized||!this.open)return D.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var a;this._fadeOutDeferred=new k(q.hitch(this,function(){a.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,S);this._fadeOutDeferred.then(q.hitch(this,"onHide"));var f=this._fadeOutDeferred.promise;a=c.fadeOut({node:this.domNode,duration:this.duration,
onEnd:q.hitch(this,function(){this.domNode.style.display="none";G.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var b;b=this._modalconnects.pop();)b.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return f},resize:function(a){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!a){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),l.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(a){a&&d.set(a,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var f=r.getBox(this.ownerDocument);f.w*=this.maxRatio;f.h*=this.maxRatio;var b=e.position(this.domNode);b.w>=f.w||b.h>=f.h?(a={w:Math.min(b.w,f.w),h:Math.min(b.h,f.h)},this._shrunk=!0):this._shrunk=!1}if(a){e.setMarginBox(this.domNode,
a);f=[];this.titleBar&&f.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&f.push({domNode:this.actionBarNode,region:"bottom"});b={domNode:this.containerNode,region:"center"};f.push(b);var c=I.marginBox2contentBox(this.domNode,a);I.layoutChildren(this.domNode,c,f);this._singleChild?(f=I.marginBox2contentBox(this.containerNode,b),this._singleChild.resize({w:f.w,h:f.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();!u("touch")&&!a&&this._position()}},
_layoutChildren:function(){l.forEach(this.getChildren(),function(a){a.resize&&a.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var a;a=this._modalconnects.pop();)a.remove();G.hide(this);this.inherited(arguments)}});u("dojo-bidi")&&(p=m("dijit._DialogBase",p,{_setTitleAttr:function(a){this._set("title",a);this.titleNode.innerHTML=a;this.applyTextDir(this.titleNode)},
_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this.set("title",this.title))}}));var J=m("dijit.Dialog",[B,p],{});J._DialogBase=p;var G=J._DialogLevelManager={_beginZIndex:950,show:function(a,b){F[F.length-1].focus=f.curNode;var c=F[F.length-1].dialog?F[F.length-1].zIndex+2:J._DialogLevelManager._beginZIndex;d.set(a.domNode,"zIndex",c);L.show(b,c-1);F.push({dialog:a,underlayAttrs:b,zIndex:c})},hide:function(a){if(F[F.length-1].dialog==a){F.pop();var f=F[F.length-
1];1==F.length?L.hide():L.show(f.underlayAttrs,f.zIndex-1);if(a.refocus){a=f.focus;if(f.dialog&&(!a||!g.isDescendant(a,f.dialog.domNode)))f.dialog._getFocusItems(),a=f.dialog._firstFocusItem;if(a)try{a.focus()}catch(b){}}}else f=l.indexOf(l.map(F,function(a){return a.dialog}),a),-1!=f&&F.splice(f,1)},isTop:function(a){return F[F.length-1].dialog==a}},F=J._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];f.watch("curNode",function(a,f,b){a=F[F.length-1].dialog;if(b&&a&&!a._fadeOutDeferred&&
b.ownerDocument==a.ownerDocument){do if(b==a.domNode||h.contains(b,"dijitPopup"))return;while(b=b.parentNode);a.focus()}});u("dijit-legacy-requires")&&t(0,function(){a(["dijit/TooltipDialog"])});return J})},"dojo/_base/fx":function(){define("./kernel ./config ./lang ../Evented ./Color ../aspect ../sniff ../dom ../dom-style".split(" "),function(a,l,n,m,k,g,h,e,d){var c=n.mixin,b={},s=b._Line=function(a,f){this.start=a;this.end=f};s.prototype.getValue=function(a){return(this.end-this.start)*a+this.start};
var q=b.Animation=function(a){c(this,a);n.isArray(this.curve)&&(this.curve=new s(this.curve[0],this.curve[1]))};q.prototype=new m;n.extend(q,{duration:350,repeat:0,rate:20,_percent:0,_startRepeatCount:0,_getStep:function(){var a=this._percent,f=this.easing;return f?f(a):a},_fire:function(a,f){var b=f||[];if(this[a])if(l.debugAtAllCosts)this[a].apply(this,b);else try{this[a].apply(this,b)}catch(c){console.error("exception in animation handler for:",a),console.error(c)}return this},play:function(a,
f){this._delayTimer&&this._clearTimer();if(f)this._stopTimer(),this._active=this._paused=!1,this._percent=0;else if(this._active&&!this._paused)return this;this._fire("beforeBegin",[this.node]);var b=a||this.delay,c=n.hitch(this,"_play",f);if(0<b)return this._delayTimer=setTimeout(c,b),this;c();return this},_play:function(a){this._delayTimer&&this._clearTimer();this._startTime=(new Date).valueOf();this._paused&&(this._startTime-=this.duration*this._percent);this._active=!0;this._paused=!1;a=this.curve.getValue(this._getStep());
this._percent||(this._startRepeatCount||(this._startRepeatCount=this.repeat),this._fire("onBegin",[a]));this._fire("onPlay",[a]);this._cycle();return this},pause:function(){this._delayTimer&&this._clearTimer();this._stopTimer();if(!this._active)return this;this._paused=!0;this._fire("onPause",[this.curve.getValue(this._getStep())]);return this},gotoPercent:function(a,f){this._stopTimer();this._active=this._paused=!0;this._percent=a;f&&this.play();return this},stop:function(a){this._delayTimer&&this._clearTimer();
if(!this._timer)return this;this._stopTimer();a&&(this._percent=1);this._fire("onStop",[this.curve.getValue(this._getStep())]);this._active=this._paused=!1;return this},destroy:function(){this.stop()},status:function(){return this._active?this._paused?"paused":"playing":"stopped"},_cycle:function(){if(this._active){var a=(new Date).valueOf(),a=0===this.duration?1:(a-this._startTime)/this.duration;1<=a&&(a=1);this._percent=a;this.easing&&(a=this.easing(a));this._fire("onAnimate",[this.curve.getValue(a)]);
1>this._percent?this._startTimer():(this._active=!1,0<this.repeat?(this.repeat--,this.play(null,!0)):-1==this.repeat?this.play(null,!0):this._startRepeatCount&&(this.repeat=this._startRepeatCount,this._startRepeatCount=0),this._percent=0,this._fire("onEnd",[this.node]),!this.repeat&&this._stopTimer())}return this},_clearTimer:function(){clearTimeout(this._delayTimer);delete this._delayTimer}});var v=0,t=null,u={run:function(){}};n.extend(q,{_startTimer:function(){this._timer||(this._timer=g.after(u,
"run",n.hitch(this,"_cycle"),!0),v++);t||(t=setInterval(n.hitch(u,"run"),this.rate))},_stopTimer:function(){this._timer&&(this._timer.remove(),this._timer=null,v--);0>=v&&(clearInterval(t),t=null,v=0)}});var r=h("ie")?function(a){var f=a.style;!f.width.length&&"auto"==d.get(a,"width")&&(f.width="auto")}:function(){};b._fade=function(a){a.node=e.byId(a.node);var f=c({properties:{}},a);a=f.properties.opacity={};a.start=!("start"in f)?function(){return+d.get(f.node,"opacity")||0}:f.start;a.end=f.end;
a=b.animateProperty(f);g.after(a,"beforeBegin",n.partial(r,f.node),!0);return a};b.fadeIn=function(a){return b._fade(c({end:1},a))};b.fadeOut=function(a){return b._fade(c({end:0},a))};b._defaultEasing=function(a){return 0.5+Math.sin((a+1.5)*Math.PI)/2};var w=function(a){this._properties=a;for(var f in a){var b=a[f];b.start instanceof k&&(b.tempColor=new k)}};w.prototype.getValue=function(a){var f={},b;for(b in this._properties){var c=this._properties[b],d=c.start;d instanceof k?f[b]=k.blendColors(d,
c.end,a,c.tempColor).toCss():n.isArray(d)||(f[b]=(c.end-d)*a+d+("opacity"!=b?c.units||"px":0))}return f};b.animateProperty=function(b){var f=b.node=e.byId(b.node);b.easing||(b.easing=a._defaultEasing);b=new q(b);g.after(b,"beforeBegin",n.hitch(b,function(){var a={},b;for(b in this.properties){if("width"==b||"height"==b)this.node.display="block";var e=this.properties[b];n.isFunction(e)&&(e=e(f));e=a[b]=c({},n.isObject(e)?e:{end:e});n.isFunction(e.start)&&(e.start=e.start(f));n.isFunction(e.end)&&(e.end=
e.end(f));var g=0<=b.toLowerCase().indexOf("color"),h=function(a,f){var b={height:a.offsetHeight,width:a.offsetWidth}[f];if(void 0!==b)return b;b=d.get(a,f);return"opacity"==f?+b:g?b:parseFloat(b)};"end"in e?"start"in e||(e.start=h(f,b)):e.end=h(f,b);g?(e.start=new k(e.start),e.end=new k(e.end)):e.start="opacity"==b?+e.start:parseFloat(e.start)}this.curve=new w(a)}),!0);g.after(b,"onAnimate",n.hitch(d,"set",b.node),!0);return b};b.anim=function(a,f,c,d,e,g){return b.animateProperty({node:a,duration:c||
q.prototype.duration,properties:f,easing:d,onEnd:e}).play(g||0)};c(a,b);a._Animation=q;return b})},"dojo/_base/Color":function(){define(["./kernel","./lang","./array","./config"],function(a,l,n,m){var k=a.Color=function(a){a&&this.setColor(a)};k.named={black:[0,0,0],silver:[192,192,192],gray:[128,128,128],white:[255,255,255],maroon:[128,0,0],red:[255,0,0],purple:[128,0,128],fuchsia:[255,0,255],green:[0,128,0],lime:[0,255,0],olive:[128,128,0],yellow:[255,255,0],navy:[0,0,128],blue:[0,0,255],teal:[0,
128,128],aqua:[0,255,255],transparent:m.transparentColor||[0,0,0,0]};l.extend(k,{r:255,g:255,b:255,a:1,_set:function(a,h,e,d){this.r=a;this.g=h;this.b=e;this.a=d},setColor:function(a){l.isString(a)?k.fromString(a,this):l.isArray(a)?k.fromArray(a,this):(this._set(a.r,a.g,a.b,a.a),a instanceof k||this.sanitize());return this},sanitize:function(){return this},toRgb:function(){return[this.r,this.g,this.b]},toRgba:function(){return[this.r,this.g,this.b,this.a]},toHex:function(){return"#"+n.map(["r","g",
"b"],function(a){a=this[a].toString(16);return 2>a.length?"0"+a:a},this).join("")},toCss:function(a){var h=this.r+", "+this.g+", "+this.b;return(a?"rgba("+h+", "+this.a:"rgb("+h)+")"},toString:function(){return this.toCss(!0)}});k.blendColors=a.blendColors=function(a,h,e,d){var c=d||new k;n.forEach(["r","g","b","a"],function(b){c[b]=a[b]+(h[b]-a[b])*e;"a"!=b&&(c[b]=Math.round(c[b]))});return c.sanitize()};k.fromRgb=a.colorFromRgb=function(a,h){var e=a.toLowerCase().match(/^rgba?\(([\s\.,0-9]+)\)/);
return e&&k.fromArray(e[1].split(/\s*,\s*/),h)};k.fromHex=a.colorFromHex=function(a,h){var e=h||new k,d=4==a.length?4:8,c=(1<<d)-1;a=Number("0x"+a.substr(1));if(isNaN(a))return null;n.forEach(["b","g","r"],function(b){var h=a&c;a>>=d;e[b]=4==d?17*h:h});e.a=1;return e};k.fromArray=a.colorFromArray=function(a,h){var e=h||new k;e._set(Number(a[0]),Number(a[1]),Number(a[2]),Number(a[3]));isNaN(e.a)&&(e.a=1);return e.sanitize()};k.fromString=a.colorFromString=function(a,h){var e=k.named[a];return e&&k.fromArray(e,
h)||k.fromRgb(a,h)||k.fromHex(a,h)};return k})},"dojo/ready":function(){define(["./_base/kernel","./has","require","./domReady","./_base/lang"],function(a,l,n,m,k){var g=0,h=[],e=0;l=function(){g=1;a._postLoad=a.config.afterOnLoad=!0;d()};var d=function(){if(!e){for(e=1;g&&(!m||0==m._Q.length)&&(n.idle?n.idle():1)&&h.length;){var a=h.shift();try{a()}catch(b){if(b.info=b.message,n.signal)n.signal("error",b);else throw b;}}e=0}};n.on&&n.on("idle",d);m&&(m._onQEmpty=d);var c=a.ready=a.addOnLoad=function(b,
c,e){var g=k._toArray(arguments);"number"!=typeof b?(e=c,c=b,b=1E3):g.shift();e=e?k.hitch.apply(a,g):function(){c()};e.priority=b;for(g=0;g<h.length&&b>=h[g].priority;g++);h.splice(g,0,e);d()},b=a.config.addOnLoad;if(b)c[k.isArray(b)?"apply":"call"](a,b);m?m(l):l();return c})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(a,l,n,m,k,g,h){l.add("rtl-adjust-position-for-verticalScrollBar",function(a,c){var b=
n.body(c),e=h.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},b,"last"),g=h.create("div",{style:{overflow:"hidden",direction:"ltr"}},e,"last"),m=0!=k.position(g).x;e.removeChild(g);b.removeChild(e);return m});l.add("position-fixed-support",function(a,c){var b=n.body(c),e=h.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},b,"last"),g=h.create("span",{style:{position:"fixed",
left:"0",top:"0"}},e,"last"),m=k.position(g).x!=k.position(e).x;e.removeChild(g);b.removeChild(e);return m});var e={getBox:function(a){a=a||n.doc;var c="BackCompat"==a.compatMode?n.body(a):a.documentElement,b=k.docScroll(a);if(l("touch")){var g=e.get(a);a=g.innerWidth||c.clientWidth;c=g.innerHeight||c.clientHeight}else a=c.clientWidth,c=c.clientHeight;return{l:b.x,t:b.y,w:a,h:c}},get:function(a){if(l("ie")&&e!==document.parentWindow){a.parentWindow.execScript("document._parentWindow \x3d window;",
"Javascript");var c=a._parentWindow;a._parentWindow=null;return c}return a.parentWindow||a.defaultView},scrollIntoView:function(a,c){try{a=m.byId(a);var b=a.ownerDocument||n.doc,e=n.body(b),h=b.documentElement||e.parentNode,v=l("ie")||l("trident"),t=l("webkit");if(!(a==e||a==h))if(!l("mozilla")&&(!v&&!t&&!l("opera")&&!l("trident")&&!l("edge"))&&"scrollIntoView"in a)a.scrollIntoView(!1);else{var u="BackCompat"==b.compatMode,r=Math.min(e.clientWidth||h.clientWidth,h.clientWidth||e.clientWidth),w=Math.min(e.clientHeight||
h.clientHeight,h.clientHeight||e.clientHeight),b=t||u?e:h,y=c||k.position(a),f=a.parentNode,t=function(a){return 6>=v||7==v&&u?!1:l("position-fixed-support")&&"fixed"==g.get(a,"position").toLowerCase()},p=this,x=function(a,f,b){"BODY"==a.tagName||"HTML"==a.tagName?p.get(a.ownerDocument).scrollBy(f,b):(f&&(a.scrollLeft+=f),b&&(a.scrollTop+=b))};if(!t(a))for(;f;){f==e&&(f=b);var z=k.position(f),K=t(f),A="rtl"==g.getComputedStyle(f).direction.toLowerCase();if(f==b){z.w=r;z.h=w;if(b==h&&(v||l("trident"))&&
A)z.x+=b.offsetWidth-z.w;z.x=0;z.y=0}else{var E=k.getPadBorderExtents(f);z.w-=E.w;z.h-=E.h;z.x+=E.l;z.y+=E.t;var L=f.clientWidth,B=z.w-L;0<L&&0<B&&(A&&l("rtl-adjust-position-for-verticalScrollBar")&&(z.x+=B),z.w=L);L=f.clientHeight;B=z.h-L;0<L&&0<B&&(z.h=L)}K&&(0>z.y&&(z.h+=z.y,z.y=0),0>z.x&&(z.w+=z.x,z.x=0),z.y+z.h>w&&(z.h=w-z.y),z.x+z.w>r&&(z.w=r-z.x));var I=y.x-z.x,U=y.y-z.y,S=I+y.w-z.w,D=U+y.h-z.h,J,G;if(0<S*I&&(f.scrollLeft||f==b||f.scrollWidth>f.offsetHeight)){J=Math[0>I?"max":"min"](I,S);if(A&&
(8==v&&!u||5<=l("trident")))J=-J;G=f.scrollLeft;x(f,J,0);J=f.scrollLeft-G;y.x-=J}if(0<D*U&&(f.scrollTop||f==b||f.scrollHeight>f.offsetHeight))J=Math.ceil(Math[0>U?"max":"min"](U,D)),G=f.scrollTop,x(f,0,J),J=f.scrollTop-G,y.y-=J;f=f!=b&&!K&&f.parentNode}}}catch(F){console.error("scrollIntoView: "+F),a.scrollIntoView(!1)}}};a.setObject("dojo.window",e);return e})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s){return l("dojo.dnd.Moveable",[g],{handle:"",delay:0,skip:!1,constructor:function(a,c){this.node=m.byId(a);c||(c={});this.handle=c.handle?m.byId(c.handle):null;this.handle||(this.handle=this.node);this.delay=0<c.delay?c.delay:0;this.skip=c.skip;this.mover=c.mover?c.mover:b;this.events=[h(this.handle,d.press,n.hitch(this,"onMouseDown")),h(this.handle,"dragstart",n.hitch(this,"onSelectStart")),h(this.handle,"selectstart",n.hitch(this,"onSelectStart"))]},markupFactory:function(a,
b,c){return new c(b,a)},destroy:function(){a.forEach(this.events,function(a){a.remove()});this.events=this.node=this.handle=null},onMouseDown:function(a){if(!this.skip||!c.isFormElement(a)){if(this.delay)this.events.push(h(this.handle,d.move,n.hitch(this,"onMouseMove")),h(this.handle.ownerDocument,d.release,n.hitch(this,"onMouseUp"))),this._lastX=a.pageX,this._lastY=a.pageY;else this.onDragDetected(a);a.stopPropagation();a.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-this._lastX)>
this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){if(!this.skip||!c.isFormElement(a))a.stopPropagation(),a.preventDefault()},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){e.publish("/dnd/move/start",a);k.add(s.body(),"dojoMove");k.add(this.node,
"dojoMoveItem")},onMoveStop:function(a){e.publish("/dnd/move/stop",a);k.remove(s.body(),"dojoMove");k.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var c=a.node.style;c.left=b.l+"px";c.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(a,l,n,m,k,g,h,e,d,c){function b(a,
f,b){return t&&b?function(a,f){return g(a,b,f)}:r?function(b,c){var p=g(b,f,function(a){c.call(this,a);L=(new Date).getTime()}),d=g(b,a,function(a){(!L||(new Date).getTime()>L+1E3)&&c.call(this,a)});return{remove:function(){p.remove();d.remove()}}}:function(f,b){return g(f,a,b)}}function s(a){do if(void 0!==a.dojoClick)return a;while(a=a.parentNode)}function q(a,b,d){if(!e.isRight(a)){var h=s(a.target);if(y=!a.target.disabled&&h&&h.dojoClick)if(p=(f="useTarget"==y)?h:a.target,f&&a.preventDefault(),
x=a.changedTouches?a.changedTouches[0].pageX-c.global.pageXOffset:a.clientX,z=a.changedTouches?a.changedTouches[0].pageY-c.global.pageYOffset:a.clientY,K=("object"==typeof y?y.x:"number"==typeof y?y:0)||4,A=("object"==typeof y?y.y:"number"==typeof y?y:0)||4,!w){w=!0;var k=function(a){y=f?n.isDescendant(c.doc.elementFromPoint(a.changedTouches?a.changedTouches[0].pageX-c.global.pageXOffset:a.clientX,a.changedTouches?a.changedTouches[0].pageY-c.global.pageYOffset:a.clientY),p):y&&(a.changedTouches?a.changedTouches[0].target:
a.target)==p&&Math.abs((a.changedTouches?a.changedTouches[0].pageX-c.global.pageXOffset:a.clientX)-x)<=K&&Math.abs((a.changedTouches?a.changedTouches[0].pageY-c.global.pageYOffset:a.clientY)-z)<=A};c.doc.addEventListener(b,function(a){e.isRight(a)||(k(a),f&&a.preventDefault())},!0);c.doc.addEventListener(d,function(a){if(!e.isRight(a)&&(k(a),y)){E=(new Date).getTime();var b=f?p:a.target;"LABEL"===b.tagName&&(b=n.byId(b.getAttribute("for"))||b);var c=a.changedTouches?a.changedTouches[0]:a,d=function(f){var b=
document.createEvent("MouseEvents");b._dojo_click=!0;b.initMouseEvent(f,!0,!0,a.view,a.detail,c.screenX,c.screenY,c.clientX,c.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,null);return b},h=d("mousedown"),x=d("mouseup"),m=d("click");setTimeout(function(){g.emit(b,"mousedown",h);g.emit(b,"mouseup",x);g.emit(b,"click",m);E=(new Date).getTime()},0)}},!0);a=function(a){c.doc.addEventListener(a,function(f){var b=f.target;y&&(!f._dojo_click&&(new Date).getTime()<=E+1E3&&!("INPUT"==b.tagName&&m.contains(b,
"dijitOffScreen")))&&(f.stopPropagation(),f.stopImmediatePropagation&&f.stopImmediatePropagation(),"click"==a&&(("INPUT"!=b.tagName||"radio"==b.type&&(m.contains(b,"dijitCheckBoxInput")||m.contains(b,"mblRadioButton"))||"checkbox"==b.type&&(m.contains(b,"dijitCheckBoxInput")||m.contains(b,"mblCheckBox")))&&"TEXTAREA"!=b.tagName&&"AUDIO"!=b.tagName&&"VIDEO"!=b.tagName)&&f.preventDefault())},!0)};a("click");a("mousedown");a("mouseup")}}}var v=5>h("ios"),t=h("pointer-events")||h("MSPointer"),u=function(){var a=
{},f;for(f in{down:1,move:1,up:1,cancel:1,over:1,out:1})a[f]=h("MSPointer")?"MSPointer"+f.charAt(0).toUpperCase()+f.slice(1):"pointer"+f;return a}(),r=h("touch-events"),w,y,f=!1,p,x,z,K,A,E,L,B;h("touch")&&(t?d(function(){c.doc.addEventListener(u.down,function(a){q(a,u.move,u.up)},!0)}):d(function(){function a(f){var b=k.delegate(f,{bubbles:!0});6<=h("ios")&&(b.touches=f.touches,b.altKey=f.altKey,b.changedTouches=f.changedTouches,b.ctrlKey=f.ctrlKey,b.metaKey=f.metaKey,b.shiftKey=f.shiftKey,b.targetTouches=
f.targetTouches);return b}B=c.body();c.doc.addEventListener("touchstart",function(a){L=(new Date).getTime();var f=B;B=a.target;g.emit(f,"dojotouchout",{relatedTarget:B,bubbles:!0});g.emit(B,"dojotouchover",{relatedTarget:f,bubbles:!0});q(a,"touchmove","touchend")},!0);g(c.doc,"touchmove",function(f){L=(new Date).getTime();var b=c.doc.elementFromPoint(f.pageX-(v?0:c.global.pageXOffset),f.pageY-(v?0:c.global.pageYOffset));b&&(B!==b&&(g.emit(B,"dojotouchout",{relatedTarget:b,bubbles:!0}),g.emit(b,"dojotouchover",
{relatedTarget:B,bubbles:!0}),B=b),g.emit(b,"dojotouchmove",a(f))||f.preventDefault())});g(c.doc,"touchend",function(f){L=(new Date).getTime();var b=c.doc.elementFromPoint(f.pageX-(v?0:c.global.pageXOffset),f.pageY-(v?0:c.global.pageYOffset))||c.body();g.emit(b,"dojotouchend",a(f))})}));l={press:b("mousedown","touchstart",u.down),move:b("mousemove","dojotouchmove",u.move),release:b("mouseup","dojotouchend",u.up),cancel:b(e.leave,"touchcancel",t?u.cancel:null),over:b("mouseover","dojotouchover",u.over),
out:b("mouseout","dojotouchout",u.out),enter:e._eventHandler(b("mouseover","dojotouchover",u.over)),leave:e._eventHandler(b("mouseout","dojotouchout",u.out))};return a.touch=l})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(a,l,n,m){var k=n.getObject("dojo.dnd",!0);k.getCopyKeyState=function(g){return g[a("mac")?"metaKey":"ctrlKey"]};k._uniqueId=0;k.getUniqueId=function(){var a;do a=l._scopeName+"Unique"+ ++k._uniqueId;while(m.byId(a));return a};
k._empty={};k.isFormElement=function(a){a=a.target;3==a.nodeType&&(a=a.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+a.tagName.toLowerCase()+" ")};return k})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s,q){return l("dojo.dnd.Mover",[d],{constructor:function(a,d,e){function h(a){a.preventDefault();
a.stopPropagation()}this.node=g.byId(a);this.marginBox={l:d.pageX,t:d.pageY};this.mouseButton=d.button;d=this.host=e;a=a.ownerDocument;this.events=[c(a,b.move,n.hitch(this,"onFirstMove")),c(a,b.move,n.hitch(this,"onMouseMove")),c(a,b.release,n.hitch(this,"onMouseUp")),c(a,"dragstart",h),c(a.body,"selectstart",h)];q.autoScrollStart(a);if(d&&d.onMoveStart)d.onMoveStart(this)},onMouseMove:function(a){q.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();
a.stopPropagation()},onMouseUp:function(a){(m("webkit")&&m("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,c,d=this.host;switch(b.position){case "relative":case "absolute":c=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;default:b.position="absolute";b=h.getMarginBox(this.node);c=k.doc.body;var g=e.getComputedStyle(c),m=h.getMarginBox(c,g),g=h.getContentBox(c,
g);c=b.l-(g.l-m.l);b=b.t-(g.t-m.t)}this.marginBox.l=c-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(d&&d.onFirstMove)d.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){a.forEach(this.events,function(a){a.remove()});var b=this.host;if(b&&b.onMoveStop)b.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),function(a,l,n,m,k,g){var h=
{};a.setObject("dojo.dnd.autoscroll",h);h.getViewport=g.getBox;h.V_TRIGGER_AUTOSCROLL=32;h.H_TRIGGER_AUTOSCROLL=32;h.V_AUTOSCROLL_VALUE=16;h.H_AUTOSCROLL_VALUE=16;var e,d=n.doc,c=Infinity,b=Infinity;h.autoScrollStart=function(a){d=a;e=g.getBox(d);a=n.body(d).parentNode;c=Math.max(a.scrollHeight-e.h,0);b=Math.max(a.scrollWidth-e.w,0)};h.autoScroll=function(a){var k=e||g.getBox(d),m=n.body(d).parentNode,l=0,u=0;a.clientX<h.H_TRIGGER_AUTOSCROLL?l=-h.H_AUTOSCROLL_VALUE:a.clientX>k.w-h.H_TRIGGER_AUTOSCROLL&&
(l=Math.min(h.H_AUTOSCROLL_VALUE,b-m.scrollLeft));a.clientY<h.V_TRIGGER_AUTOSCROLL?u=-h.V_AUTOSCROLL_VALUE:a.clientY>k.h-h.V_TRIGGER_AUTOSCROLL&&(u=Math.min(h.V_AUTOSCROLL_VALUE,c-m.scrollTop));window.scrollBy(l,u)};h._validNodes={div:1,p:1,td:1};h._validOverflow={auto:1,scroll:1};h.autoScrollNodes=function(a){for(var b,c,d,e,g,w,y=0,f=0,p=a.target;p;){if(1==p.nodeType&&p.tagName.toLowerCase()in h._validNodes){d=k.getComputedStyle(p);e=d.overflow.toLowerCase()in h._validOverflow;g=d.overflowX.toLowerCase()in
h._validOverflow;w=d.overflowY.toLowerCase()in h._validOverflow;if(e||g||w)b=m.getContentBox(p,d),c=m.position(p,!0);if(e||g){d=Math.min(h.H_TRIGGER_AUTOSCROLL,b.w/2);g=a.pageX-c.x;if(l("webkit")||l("opera"))g+=n.body().scrollLeft;y=0;0<g&&g<b.w&&(g<d?y=-d:g>b.w-d&&(y=d),p.scrollLeft+=y)}if(e||w){e=Math.min(h.V_TRIGGER_AUTOSCROLL,b.h/2);w=a.pageY-c.y;if(l("webkit")||l("opera"))w+=n.body().scrollTop;f=0;0<w&&w<b.h&&(w<e?f=-e:w>b.h-e&&(f=e),p.scrollTop+=f)}if(y||f)return}try{p=p.parentNode}catch(x){p=
null}}h.autoScroll(a)};return h})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(a,l){var n=l.prototype.onMove;return a("dojo.dnd.TimedMoveable",l,{timeout:40,constructor:function(a,k){k||(k={});k.timeout&&("number"==typeof k.timeout&&0<=k.timeout)&&(this.timeout=k.timeout)},onMoveStop:function(a){a._timer&&(clearTimeout(a._timer),n.call(this,a,a._leftTop));l.prototype.onMoveStop.apply(this,arguments)},onMove:function(a,k){a._leftTop=k;if(!a._timer){var g=this;
a._timer=setTimeout(function(){a._timer=null;n.call(g,a,a._leftTop)},this.timeout)}}})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r){var w,y,f=new (l([s,h],{curNode:null,activeStack:[],constructor:function(){var f=e.hitch(this,function(a){n.isDescendant(this.curNode,
a)&&this.set("curNode",null);n.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});a.before(g,"empty",f);a.before(g,"destroy",f)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,f){var c=this,p=a.document&&a.document.body;if(p){var e=b("pointer-events")?"pointerdown":b("MSPointer")?"MSPointerDown":b("touch-events")?"mousedown, touchstart":"mousedown",g=d(a.document,e,function(a){if(!a||!(a.target&&null==a.target.parentNode))c._onTouchNode(f||a.target,
"mouse")}),h=d(p,"focusin",function(a){if(a.target.tagName){var b=a.target.tagName.toLowerCase();"#document"==b||"body"==b||(t.isFocusable(a.target)?c._onFocusNode(f||a.target):c._onTouchNode(f||a.target))}}),k=d(p,"focusout",function(a){c._onBlurNode(f||a.target)});return{remove:function(){g.remove();h.remove();k.remove();p=g=h=k=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<w+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(e.hitch(this,
function(){this.set("prevNode",this.curNode);this.set("curNode",null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<y+100||(this._clearActiveWidgetsTimer=setTimeout(e.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,f){y=(new Date).getTime();this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);k.contains(a,"dijitPopup")&&(a=a.firstChild);var b=
[];try{for(;a;){var c=m.get(a,"dijitPopupParent");if(c)a=u.byId(c).domNode;else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===q.body())break;a=v.get(a.ownerDocument).frameElement}else{var p=a.getAttribute&&a.getAttribute("widgetId"),d=p&&u.byId(p);d&&!("mouse"==f&&d.get("disabled"))&&b.unshift(p);a=a.parentNode}}}catch(e){}this._setStack(b,f)},_onFocusNode:function(a){a&&9!=a.nodeType&&(w=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),
this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),this.set("curNode",a)))},_setStack:function(a,f){var b=this.activeStack,c=b.length-1,p=a.length-1;if(a[p]!=b[c]){this.set("activeStack",a);var d;for(d=c;0<=d&&b[d]!=a[d];d--)if(c=u.byId(b[d]))c._hasBeenBlurred=!0,c.set("focused",!1),c._focusManager==this&&c._onBlur(f),this.emit("widget-blur",c,f);for(d++;d<=p;d++)if(c=u.byId(a[d]))c.set("focused",!0),c._focusManager==this&&c._onFocus(f),this.emit("widget-focus",c,f)}},focus:function(a){if(a)try{a.focus()}catch(f){}}}));
c(function(){var a=f.registerWin(v.get(document));b("ie")&&d(window,"unload",function(){a&&(a.remove(),a=null)})});r.focus=function(a){f.focus(a)};for(var p in f)/^_/.test(p)||(r.focus[p]="function"==typeof f[p]?e.hitch(f,p):f[p]);f.watch(function(a,f,b){r.focus[a]=b});return f})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(a,l,n,m){return a("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var g=this._attrPairNames;return g[a]?
g[a]:g[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,g){return"function"===typeof this[g.g]?this[g.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,g){if("object"===typeof a){for(var h in a)a.hasOwnProperty(h)&&"_watchCallbacks"!=h&&this.set(h,a[h]);return this}h=this._getAttrNames(a);var e=this._get(a,h);h=this[h.s];var d;"function"===typeof h?d=h.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=g;
if(this._watchCallbacks){var c=this;m(d,function(){c._watchCallbacks(a,e,g)})}return this},_changeAttrValue:function(a,g){var h=this.get(a);this[a]=g;this._watchCallbacks&&this._watchCallbacks(a,h,g);return this},watch:function(a,g){var h=this._watchCallbacks;if(!h)var e=this,h=this._watchCallbacks=function(a,c,d,g){var k=function(g){if(g){g=g.slice();for(var h=0,k=g.length;h<k;h++)g[h].call(e,a,c,d)}};k(h["_"+a]);g||k(h["*"])};!g&&"function"===typeof a?(g=a,a="*"):a="_"+a;var d=h[a];"object"!==typeof d&&
(d=h[a]=[]);d.push(g);var c={};c.unwatch=c.remove=function(){var a=n.indexOf(d,g);-1<a&&d.splice(a,1)};return c}})})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(a,l,n,m,k,g,h){var e={_isElementShown:function(a){var c=m.get(a);return"hidden"!=c.visibility&&"collapsed"!=c.visibility&&"none"!=c.display&&"hidden"!=n.get(a,"type")},hasDefaultTabStop:function(a){switch(a.nodeName.toLowerCase()){case "a":return n.has(a,
"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;case "iframe":var c;try{var b=a.contentDocument;if("designMode"in b&&"on"==b.designMode)return!0;c=b.body}catch(e){try{c=a.contentWindow.document.body}catch(g){return!1}}return c&&("true"==c.contentEditable||c.firstChild&&"true"==c.firstChild.contentEditable);default:return"true"==a.contentEditable}},effectiveTabIndex:function(a){return n.get(a,"disabled")?void 0:n.has(a,"tabIndex")?+n.get(a,"tabIndex"):
e.hasDefaultTabStop(a)?0:void 0},isTabNavigable:function(a){return 0<=e.effectiveTabIndex(a)},isFocusable:function(a){return-1<=e.effectiveTabIndex(a)},_getTabNavigable:function(a){function c(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}var b,h,k,m,l,u,r={},w=e._isElementShown,y=e.effectiveTabIndex,f=function(a){for(a=a.firstChild;a;a=a.nextSibling)if(!(1!=a.nodeType||9>=g("ie")&&"HTML"!==a.scopeName||!w(a))){var d=y(a);if(0<=d){if(0==
d)b||(b=a),h=a;else if(0<d){if(!k||d<m)m=d,k=a;if(!l||d>=u)u=d,l=a}d=c(a);n.get(a,"checked")&&d&&(r[d]=a)}"SELECT"!=a.nodeName.toUpperCase()&&f(a)}};w(a)&&f(a);return{first:r[c(b)]||b,last:r[c(h)]||h,lowest:r[c(k)]||k,highest:r[c(l)]||l}},getFirstInTabbingOrder:function(a,c){var b=e._getTabNavigable(l.byId(a,c));return b.lowest?b.lowest:b.first},getLastInTabbingOrder:function(a,c){var b=e._getTabNavigable(l.byId(a,c));return b.last?b.last:b.highest}};k.mixin(h,e);return e})},"dijit/_base/manager":function(){define(["dojo/_base/array",
"dojo/_base/config","dojo/_base/lang","../registry","../main"],function(a,l,n,m,k){var g={};a.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(a){g[a]=m[a]});n.mixin(g,{defaultDuration:l.defaultDuration||200});n.mixin(k,g);return k})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q){function v(){}function t(a){return function(b,c,d,f){return b&&"string"==typeof c&&b[c]==v?b.on(c.substring(2).toLowerCase(),h.hitch(d,f)):a.apply(n,arguments)}}a.around(n,"connect",t);g.connect&&a.around(g,"connect",t);a=m("dijit._Widget",[b,s,q],{onClick:v,onDblClick:v,onKeyDown:v,onKeyPress:v,onKeyUp:v,onMouseDown:v,onMouseMove:v,onMouseOut:v,onMouseOver:v,onMouseLeave:v,onMouseEnter:v,onMouseUp:v,constructor:function(a){this._toConnect={};for(var b in a)this[b]===
v&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===v?n.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){g.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.",
"","2.0");this.set(a,b)},attr:function(a,b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){g.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?e("[widgetId]",this.containerNode).map(c.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});k("dijit-legacy-requires")&&d(0,function(){require(["dijit/_base"])});
return a})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w,y,f,p,x,z){function K(a){return function(f){e[f?
"set":"remove"](this.domNode,a,f);this._set(a,f)}}q.add("dijit-legacy-requires",!v.isAsync);q.add("dojo-bidi",!1);q("dijit-legacy-requires")&&r(0,function(){a(["dijit/_base/manager"])});var A={};m=g("dijit._WidgetBase",[w,p],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:K("lang"),dir:"",_setDirAttr:K("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",
a)},attributeMap:{},_blankGif:m.blankGif||a.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var f=a.prototype,b=a._setterAttrs=[],a=a._onMap={},c;for(c in f.attributeMap)b.push(c);for(c in f)/^on/.test(c)&&(a[c.substring(2).toLowerCase()]=c),/^_set[A-Z](.*)Attr$/.test(c)&&(c=c.charAt(4).toLowerCase()+c.substr(5,c.length-9),(!f.attributeMap||!(c in f.attributeMap))&&b.push(c))}},postscript:function(a,f){this.create(a,f)},create:function(a,
b){this._introspect();this.srcNodeRef=h.byId(b);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&(this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id)&&(this.id=this.srcNodeRef.id);a&&(this.params=a,t.mixin(this,a));this.postMixInProperties();this.id||(this.id=z.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=f.body(this.ownerDocument);
z.add(this);this.buildRendering();var c;if(this.domNode){this._applyAttributes();var p=this.srcNodeRef;p&&(p.parentNode&&this.domNode!==p)&&(p.parentNode.replaceChild(this.domNode,p),c=!0);this.domNode.setAttribute("widgetId",this.id)}this.postCreate();c&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},f;for(f in this.params||{})a[f]=this._get(f);l.forEach(this.constructor._setterAttrs,function(f){if(!(f in a)){var b=this._get(f);b&&this.set(f,b)}},this);for(f in a)this.set(f,
a[f])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(l.map(a,function(a){return a+"Rtl"})));d.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,l.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&t.isFunction(a.startup))&&(a.startup(),a._started=!0)}))},
destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function f(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a)}this._beingDestroyed=!0;this.uninitialize();l.forEach(this._connects,t.hitch(this,"disconnect"));l.forEach(this._supportingWidgets,f);this.domNode&&l.forEach(z.findWidgets(this.domNode,this.containerNode),f);this.destroyRendering(a);z.remove(this.id);this._destroyed=!0},destroyRendering:function(a){this.bgIframe&&
(this.bgIframe.destroy(a),delete this.bgIframe);this.domNode&&(a?e.remove(this.domNode,"widgetId"):c.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(a||c.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){l.forEach(this.getChildren(),function(f){f.destroyRecursive&&f.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var f=this.domNode;t.isObject(a)?s.set(f,a):f.style.cssText=f.style.cssText?f.style.cssText+("; "+a):a;this._set("style",
a)},_attrToDom:function(a,f,b){b=3<=arguments.length?b:this.attributeMap[a];l.forEach(t.isArray(b)?b:[b],function(b){var c=this[b.node||b||"domNode"];switch(b.type||"attribute"){case "attribute":t.isFunction(f)&&(f=t.hitch(this,f));b=b.attribute?b.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;c.tagName?e.set(c,b,f):c.set(b,f);break;case "innerText":c.innerHTML="";c.appendChild(this.ownerDocument.createTextNode(f));break;case "innerHTML":c.innerHTML=f;break;case "class":d.replace(c,f,this[a]);
break;case "toggleClass":d.toggle(c,b.className||a,f)}},this)},get:function(a){var f=this._getAttrNames(a);return this[f.g]?this[f.g]():this._get(a)},set:function(a,f){if("object"===typeof a){for(var b in a)this.set(b,a[b]);return this}b=this._getAttrNames(a);var c=this[b.s];if(t.isFunction(c))var p=c.apply(this,Array.prototype.slice.call(arguments,1));else{var c=this.focusNode&&!t.isFunction(this.focusNode)?"focusNode":"domNode",d=this[c]&&this[c].tagName,e;if(e=d)if(!(e=A[d])){e=this[c];var g={},
h;for(h in e)g[h.toLowerCase()]=!0;e=A[d]=g}h=e;b=a in this.attributeMap?this.attributeMap[a]:b.s in this?this[b.s]:h&&b.l in h&&"function"!=typeof f||/^aria-|^data-|^role$/.test(a)?c:null;null!=b&&this._attrToDom(a,f,b);this._set(a,f)}return p||this},_attrPairNames:{},_getAttrNames:function(a){var f=this._attrPairNames;if(f[a])return f[a];var b=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-1).toUpperCase()});return f[a]={n:a+"Node",s:"_set"+b+"Attr",g:"_get"+b+"Attr",l:b.toLowerCase()}},
_set:function(a,f){var b=this[a];this[a]=f;if(this._created&&!(b===f||b!==b&&f!==f))this._watchCallbacks&&this._watchCallbacks(a,b,f),this.emit("attrmodified-"+a,{detail:{prevValue:b,newValue:f}})},_get:function(a){return this[a]},emit:function(a,f,b){f=f||{};void 0===f.bubbles&&(f.bubbles=!0);void 0===f.cancelable&&(f.cancelable=!0);f.detail||(f.detail={});f.detail.widget=this;var c,p=this["on"+a];p&&(c=p.apply(this,b?b:[f]));this._started&&!this._beingDestroyed&&u.emit(this.domNode,a.toLowerCase(),
f);return c},on:function(a,f){var b=this._onMap(a);return b?n.after(this,b,f,!0):this.own(u(this.domNode,a,f))[0]},_onMap:function(a){var f=this.constructor,b=f._onMap;if(!b){var b=f._onMap={},c;for(c in f.prototype)/^on/.test(c)&&(b[c.replace(/^on/,"").toLowerCase()]=c)}return b["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},getChildren:function(){return this.containerNode?z.findWidgets(this.containerNode):[]},getParent:function(){return z.getEnclosingWidget(this.domNode.parentNode)},
connect:function(a,f,b){return this.own(k.connect(a,f,this,b))[0]},disconnect:function(a){a.remove()},subscribe:function(a,f){return this.own(y.subscribe(a,t.hitch(this,f)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():b.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&"none"!=s.get(this.domNode,"display")},placeAt:function(a,f){var b=!a.tagName&&z.byId(a);b&&b.addChild&&(!f||"number"===typeof f)?b.addChild(this,
f):(b=b&&"domNode"in b?b.containerNode&&!/after|before|replace/.test(f||"")?b.containerNode:b.domNode:h.byId(a,this.ownerDocument),c.place(this.domNode,b,f),!this._started&&(this.getParent()||{})._started&&this.startup());return this},defer:function(a,f){var b=setTimeout(t.hitch(this,function(){b&&(b=null,this._destroyed||t.hitch(this,a)())}),f||0);return{remove:function(){b&&(clearTimeout(b),b=null);return null}}}});q("dojo-bidi")&&m.extend(x);return m})},"dijit/Destroyable":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare"],function(a,l,n){return n("dijit.Destroyable",null,{destroy:function(a){this._destroyed=!0},own:function(){var m=["destroyRecursive","destroy","remove"];a.forEach(arguments,function(k){function g(){e.remove();a.forEach(d,function(a){a.remove()})}var h,e=l.before(this,"destroy",function(a){k[h](a)}),d=[];k.then?(h="cancel",k.then(g,g)):a.forEach(m,function(a){"function"===typeof k[a]&&(h||(h=a),d.push(l.after(k,a,g,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),
function(a,l,n,m,k,g){a=m("dijit._OnDijitClickMixin",null,{connect:function(a,e,d){return this.inherited(arguments,[a,"ondijitclick"==e?g:e,d])}});a.a11yclick=g;return a})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on","dojo/touch"],function(a,l,n,m){function k(e){if((e.keyCode===a.ENTER||e.keyCode===a.SPACE)&&!/input|button|textarea/i.test(e.target.nodeName))for(e=e.target;e;e=e.parentNode)if(e.dojoClick)return!0}var g;n(document,"keydown",function(a){k(a)?(g=a.target,a.preventDefault()):
g=null});n(document,"keyup",function(a){k(a)&&a.target==g&&(g=null,n.emit(a.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:a.ctrlKey,shiftKey:a.shiftKey,metaKey:a.metaKey,altKey:a.altKey,_origType:a.type}))});var h=function(a,d){a.dojoClick=!0;return n(a,"click",d)};h.click=h;h.press=function(e,d){var c=n(e,m.press,function(a){("mousedown"!=a.type||l.isLeft(a))&&d(a)}),b=n(e,"keydown",function(b){(b.keyCode===a.ENTER||b.keyCode===a.SPACE)&&d(b)});return{remove:function(){c.remove();b.remove()}}};
h.release=function(e,d){var c=n(e,m.release,function(a){("mouseup"!=a.type||l.isLeft(a))&&d(a)}),b=n(e,"keyup",function(b){(b.keyCode===a.ENTER||b.keyCode===a.SPACE)&&d(b)});return{remove:function(){c.remove();b.remove()}}};h.move=m.move;return h})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(a,l,n,m){m.extend(l,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});
return n("dijit._FocusMixin",null,{_focusManager:a})})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(a,l,n,m,k){var g=k.doc.documentElement;k=m("ie");var h=m("trident"),e=m("opera"),d=Math.floor,c=m("ff"),b=a.boxModel.replace(/-/,""),e={dj_quirks:m("quirks"),dj_opera:e,dj_khtml:m("khtml"),dj_webkit:m("webkit"),dj_safari:m("safari"),dj_chrome:m("chrome"),dj_edge:m("edge"),dj_gecko:m("mozilla"),dj_ios:m("ios"),dj_android:m("android")};
k&&(e.dj_ie=!0,e["dj_ie"+d(k)]=!0,e.dj_iequirks=m("quirks"));h&&(e.dj_trident=!0,e["dj_trident"+d(h)]=!0);c&&(e["dj_ff"+d(c)]=!0);e["dj_"+b]=!0;var s="",q;for(q in e)e[q]&&(s+=q+" ");g.className=l.trim(g.className+" "+s);n(function(){if(!a.isBodyLtr()){var b="dj_rtl dijitRtl "+s.replace(/ /g,"-rtl ");g.className=l.trim(g.className+" "+b+"dj_rtl dijitRtl "+s.replace(/ /g,"-rtl "))}});return m})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(a,
l,n,m){n(function(){l("highcontrast")&&a.add(m.body(),"dijit_a11y")});return l})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(a,l,n,m,k,g,h){k.add("highcontrast",function(){var e=h.doc.createElement("div");try{e.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(l.blankGif||a.toUrl("./resources/blank.gif"))+'");';h.body().appendChild(e);
var d=m.getComputedStyle(e),c=d.backgroundImage;return d.borderTopColor==d.borderRightColor||c&&("none"==c||"url(invalid-url:)"==c)}catch(b){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+b.toString()),!1}finally{8>=k("ie")?e.outerHTML="":h.body().removeChild(e)}});g(function(){k("highcontrast")&&n.add(h.body(),"dj_a11y")});return k})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),
function(a,l,n,m,k,g,h,e){var d=l("dijit._TemplatedMixin",e,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,d=this;return h.substitute(a,this,function(a,c){"!"==c.charAt(0)&&(a=m.getObject(c.substr(1),!1,d));if("undefined"==typeof a)throw Error(b+" template:"+c);return null==a?"":"!"==c.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;",
"\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=a(this.templatePath,{sanitize:!0}));var c=d.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),b;if(m.isString(c)){if(b=n.toDom(this._stringRepl(c),this.ownerDocument),1!=b.nodeType)throw Error("Invalid template: "+c);}else b=c.cloneNode(!0);this.domNode=b}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);
this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});d._templateCache={};d.getCachedTemplate=function(a,b,e){var g=d._templateCache,k=a,m=g[k];if(m){try{if(!m.ownerDocument||m.ownerDocument==(e||document))return m}catch(l){}n.destroy(m)}a=h.trim(a);if(b||a.match(/\$\{([^\}]+)\}/g))return g[k]=a;b=n.toDom(a,e);if(1!=b.nodeType)throw Error("Invalid template: "+a);return g[k]=b};g("ie")&&k(window,"unload",function(){var a=
d._templateCache,b;for(b in a){var e=a[b];"object"==typeof e&&n.destroy(e);delete a[b]}});return d})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(a){return a.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./request"],function(a,l,n,m){var k;k=function(a,b,d){m(a,{sync:!!b,headers:{"X-Requested-With":null}}).then(d)};var g={},h=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
b&&(a=b[1])}else a="";return a},e={},d={};a.cache=function(a,b,d){var e;"string"==typeof a?/\//.test(a)?(e=a,d=b):e=l.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")):(e=a+"",d=b);a=void 0!=d&&"string"!=typeof d?d.value:d;d=d&&d.sanitize;if("string"==typeof a)return g[e]=a,d?h(a):a;if(null===a)return delete g[e],null;e in g||k(e,!0,function(a){g[e]=a});return d?h(g[e]):g[e]};return{dynamic:!0,normalize:function(a,b){var d=a.split("!"),e=d[0];return(/^\./.test(e)?b(e):e)+(d[1]?"!"+d[1]:"")},load:function(a,
b,m){a=a.split("!");var l=1<a.length,n=a[0],t=b.toUrl(a[0]);a="url:"+t;var u=e,r=function(a){m(l?h(a):a)};n in g?u=g[n]:b.cache&&a in b.cache?u=b.cache[a]:t in g&&(u=g[t]);if(u===e)if(d[t])d[t].push(r);else{var w=d[t]=[r];k(t,!b.async,function(a){g[n]=g[t]=a;for(var f=0;f<w.length;)w[f++](a);delete d[t]})}else r(u)}}})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(a,
l,n,m,k,g,h,e,d){var c=k.delegate(e,{mouseenter:g.enter,mouseleave:g.leave,keypress:n._keypress}),b;n=m("dijit._AttachMixin",null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&
b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=b.nextSibling}},_processTemplateNode:function(a,b,c){var d=!0,e=this.attachScope||this,g=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(g)for(var h=g.split(/\s*,\s*/);g=h.shift();)k.isArray(e[g])?e[g].push(a):e[g]=a,d="containerNode"!=g,this._attachPoints.push(g);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event")){g=b.split(/\s*,\s*/);for(h=k.trim;b=g.shift();)if(b){var m=null;-1!=
b.indexOf(":")?(m=b.split(":"),b=h(m[0]),m=h(m[1])):b=h(b);m||(m=b);this._attachEvents.push(c(a,b,k.hitch(e,m)))}}return d},_attach:function(d,e,g){e=e.replace(/^on/,"").toLowerCase();e="dijitclick"==e?b||(b=a("./a11yclick")):c[e]||e;return h(d,e,g)},_detachTemplateNodes:function(){var a=this.attachScope||this;l.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];l.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();
this.inherited(arguments)}});k.extend(d,{dojoAttachEvent:"",dojoAttachPoint:""});return n})},"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s){l=l("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);a.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),
function(a){this.watch(a,g.hitch(this,"_setStateClass"))},this);for(var b in this.cssStateNodes||{})this._trackMouseState(this[b],this.cssStateNodes[b]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",
!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function b(d){c=c.concat(a.map(c,function(a){return a+d}),"dijit"+d)}var c=this.baseClass.split(" ");this.isLeftToRight()||b("Rtl");var d="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&b(d);this.state&&b(this.state);
this.selected&&b("Selected");this._opened&&b("Opened");this.disabled?b("Disabled"):this.readOnly?b("ReadOnly"):this.active?b("Active"):this.hovering&&b("Hover");this.focused&&b("Focused");var d=this.stateNode||this.domNode,e={};a.forEach(d.className.split(" "),function(a){e[a]=!0});"_stateClasses"in this&&a.forEach(this._stateClasses,function(a){delete e[a]});a.forEach(c,function(a){e[a]=!0});var g=[],h;for(h in e)g.push(h);d.className=g.join(" ");this._stateClasses=c},_subnodeCssMouseEvent:function(a,
b,c){function d(c){m.toggle(a,b+"Active",c)}if(!this.disabled&&!this.readOnly)switch(c.type){case "mouseover":case "MSPointerOver":case "pointerover":m.toggle(a,b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":m.toggle(a,b+"Hover",!1);d(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":d(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":d(!1);break;case "focus":case "focusin":m.toggle(a,
b+"Focused",!0);break;case "blur":case "focusout":m.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});e(function(){function a(b,c,d){if(!d||!n.isDescendant(d,c))for(;c&&c!=d;c=c.parentNode)if(c._cssState){var e=s.getEnclosingWidget(c);e&&(c==e.domNode?e._cssMouseEvent(b):e._subnodeCssMouseEvent(c,c._cssState,b))}}var e=c.body(),g;h(e,d.over,function(b){a(b,b.target,b.relatedTarget)});h(e,d.out,function(b){a(b,b.target,b.relatedTarget)});h(e,b.press,function(b){g=b.target;
a(b,g)});h(e,b.release,function(b){a(b,g);g=null});h(e,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var c=s.getEnclosingWidget(b);c&&c._subnodeCssMouseEvent(b,b._cssState,a)}})});return l})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(a,l,n,m,k,g){return l("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(g){var e=[];a.forEach(g||
this.getChildren(),function(a){"value"in a?e.push(a):e=e.concat(this._getDescendantFormWidgets(a.getChildren()))},this);return e},reset:function(){a.forEach(this._getDescendantFormWidgets(),function(a){a.reset&&a.reset()})},validate:function(){var h=!1;return a.every(a.map(this._getDescendantFormWidgets(),function(a){a._hasBeenBlurred=!0;var d=a.disabled||!a.validate||a.validate();!d&&!h&&(g.scrollIntoView(a.containerNode||a.domNode),a.focus(),h=!0);return d}),function(a){return a})},setValues:function(a){n.deprecated(this.declaredClass+
"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",a)},_setValueAttr:function(g){var e={};a.forEach(this._getDescendantFormWidgets(),function(a){a.name&&(e[a.name]||(e[a.name]=[])).push(a)});for(var d in e)if(e.hasOwnProperty(d)){var c=e[d],b=m.getObject(d,!1,g);void 0!==b&&(b=[].concat(b),"boolean"==typeof c[0].checked?a.forEach(c,function(c){c.set("value",-1!=a.indexOf(b,c._get("value")))}):c[0].multiple?c[0].set("value",b):a.forEach(c,function(a,c){a.set("value",
b[c])}))}},getValues:function(){n.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var g={};a.forEach(this._getDescendantFormWidgets(),function(a){var d=a.name;if(d&&!a.disabled){var c=a.get("value");"boolean"==typeof a.checked?/Radio/.test(a.declaredClass)?!1!==c?m.setObject(d,c,g):(c=m.getObject(d,!1,g),void 0===c&&m.setObject(d,null,g)):(a=m.getObject(d,!1,g),a||(a=[],m.setObject(d,a,g)),!1!==c&&
a.push(c)):(a=m.getObject(d,!1,g),"undefined"!=typeof a?m.isArray(a)?a.push(c):m.setObject(d,[a,c],g):m.setObject(d,c,g))}});return g},isValid:function(){return""==this.state},onValidStateChange:function(){},_getState:function(){var g=a.map(this._descendants,function(a){return a.get("state")||""});return 0<=a.indexOf(g,"Error")?"Error":0<=a.indexOf(g,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(g){this._descendants=this._getDescendantFormWidgets();a.forEach(this._descendants,
function(a){a._started||a.startup()});g||this._onChildChange()},_onChildChange:function(a){(!a||"state"==a||"disabled"==a)&&this._set("state",this._getState());if(!a||"value"==a||"disabled"==a||"checked"==a)this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10)},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");
this.state=this._getState();var a=this;this.own(k(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(e){e.target!=a.domNode&&a._onChildChange(e.type.replace("attrmodified-",""))}));this.watch("state",function(a,d,c){this.onValidStateChange(""==c)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(a,l){return a("dijit._DialogMixin",null,{actionBarTemplate:"",
execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var a=l._getTabNavigable(this.domNode);this._firstFocusItem=a.lowest||a.first||this.closeButtonNode||this.domNode;this._lastFocusItem=a.last||a.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s){var q=a("dijit.DialogUnderlay",[e,d],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){m.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);
this.own(g(this.domNode,"keydown",l.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var c=h.getBox(this.ownerDocument);b.top=c.t+"px";b.left=c.l+"px";a.width=c.w+"px";a.height=c.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new c(this.domNode);var a=h.get(this.ownerDocument);this._modalConnects=[b.on("resize",l.hitch(this,"layout")),g(a,"scroll",
l.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();this.inherited(arguments)},_onKeyDown:function(){}});q.show=function(a,b){var c=q._singleton;!c||c._destroyed?c=s._underlay=q._singleton=new q(a):a&&c.set(a);k.set(c.domNode,"zIndex",b);c.open||c.show()};q.hide=function(){var a=
q._singleton;a&&!a._destroyed&&a.hide()};return q})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(a,l,n,m,k,g,h,e){e.add("config-bgIframe",e("ie")&&!/IEMobile\/10\.0/.test(navigator.userAgent)||e("trident")&&/Windows NT 6.[01]/.test(navigator.userAgent));var d=new function(){var c=[];this.pop=function(){var b;c.length?(b=c.pop(),b.style.display=""):(9>e("ie")?(b="\x3ciframe src\x3d'"+
(n.dojoBlankHtmlUrl||a.toUrl("dojo/resources/blank.html")||'javascript:""')+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e",b=document.createElement(b)):(b=m.create("iframe"),b.src='javascript:""',b.className="dijitBackgroundIframe",b.setAttribute("role","presentation"),k.set(b,"opacity",0.1)),b.tabIndex=-1);return b};this.push=function(a){a.style.display="none";c.push(a)}};l.BackgroundIframe=function(a){if(!a.id)throw Error("no id");
if(e("config-bgIframe")){var b=this.iframe=d.pop();a.appendChild(b);7>e("ie")||e("quirks")?(this.resize(a),this._conn=h(a,"resize",g.hitch(this,"resize",a))):k.set(b,{width:"100%",height:"100%"})}};g.extend(l.BackgroundIframe,{resize:function(a){this.iframe&&k.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),d.push(this.iframe),delete this.iframe)}});
return l.BackgroundIframe})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(a,l,n,m,k){var g=new a,h;n(function(){var a=k.getBox();g._rlh=l(window,"resize",function(){var c=k.getBox();a.h==c.h&&a.w==c.w||(a=c,g.emit("resize"))});if(8==m("ie")){var d=screen.deviceXDPI;setInterval(function(){screen.deviceXDPI!=d&&(d=screen.deviceXDPI,g.emit("resize"))},500)}m("ios")&&(l(document,"focusin",function(a){h=a.target}),l(document,"focusout",
function(a){h=null}))});g.getEffectiveBox=function(a){a=k.getBox(a);var d=h&&h.tagName&&h.tagName.toLowerCase();if(m("ios")&&h&&!h.readOnly&&("textarea"==d||"input"==d&&/^(color|email|number|password|search|tel|text|url)$/.test(h.type)))a.h*=0==orientation||180==orientation?0.66:0.4,d=h.getBoundingClientRect(),a.h=Math.max(a.h,d.top+d.height);return a};return g})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u){return d("dijit.layout.ContentPane",[n,m,k],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:a._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",
isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,c){var f=new c(a,b);return!f.href&&f._contentSetter&&f._contentSetter.parseDeferred&&!f._contentSetter.parseDeferred.isFulfilled()?f._contentSetter.parseDeferred.then(function(){return f}):f},create:function(a,c){if((!a||!a.template)&&c&&!("href"in a)&&!("content"in a)){c=b.byId(c);for(var d=c.ownerDocument.createDocumentFragment();c.firstChild;)d.appendChild(c.firstChild);
a=l.delegate(a,{content:d})}this.inherited(arguments,[a,c])},postMixInProperties:function(){this.inherited(arguments);var a=t.getLocalization("dijit","loading",this.lang);this.loadingMessage=g.substitute(this.loadingMessage,a);this.errorMessage=g.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&e.forEach(this._contentSetter.parseResults,
function(a){!a._started&&(!a._destroyed&&l.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},_startChildren:function(){e.forEach(this.getChildren(),function(a){!a._started&&(!a._destroyed&&l.isFunction(a.startup))&&(a.startup(),a._started=!0)});this._contentSetter&&e.forEach(this._contentSetter.parseResults,function(a){!a._started&&(!a._destroyed&&l.isFunction(a.startup))&&(a.startup(),a._started=!0)},this)},setHref:function(b){a.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.",
"","2.0");return this.set("href",b)},_setHrefAttr:function(a){this.cancel();this.onLoadDeferred=new c(l.hitch(this,"cancel"));this.onLoadDeferred.then(l.hitch(this,"onLoad"));this._set("href",a);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(b){a.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",b)},_setContentAttr:function(a){this._set("href",
"");this.cancel();this.onLoadDeferred=new c(l.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(l.hitch(this,"onLoad"));this._setContent(a||"");this._isDownloaded=!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||
this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},refresh:function(){this.cancel();this.onLoadDeferred=new c(l.hitch(this,"cancel"));this.onLoadDeferred.then(l.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};
l.isObject(this.ioArgs)&&l.mixin(b,this.ioArgs);var c=this._xhrDfd=(this.ioMethod||v.get)(b),f;c.then(function(b){f=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(c){a._onError("Content",c)}},function(f){c.canceled||a._onError("Download",f);delete a._xhrDfd;return f}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return f});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(b){console.error("Error "+this.widgetId+
" running custom onLoad code: "+b.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(a){console.error("Error "+this.widgetId+" running custom onUnload code: "+a.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;e.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(e.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?
b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||q.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){a=this.preprocessContent(a);this.destroyDescendants();var c=this._contentSetter;c&&c instanceof h._ContentSetter||(c=this._contentSetter=new h._ContentSetter({node:this.containerNode,_onError:l.hitch(this,this._onError),onContentError:l.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(f){console.error("Fatal "+
this.id+" could not change content due to "+f.message,f)}})}));var f=l.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),f=c.set(l.isObject(a)&&a.domNode?a.domNode:a,f),d=this;return u(f&&f.then?f:c.parseDeferred,function(){delete d._contentSetterParams;b||(d._started&&(d._startChildren(),d._scheduleLayout()),d._onLoadHandler(a))})},
preprocessContent:function(a){return a},_onError:function(a,b,c){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);c?console.error(c,b):a&&this._setContent(a,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],
function(a,l,n,m){return l("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(a,g){var h=this.containerNode;if(0<g){for(h=h.firstChild;0<g;)1==h.nodeType&&g--,h=h.nextSibling;h?g="before":(h=this.containerNode,g="last")}n.place(a.domNode,h,g);this._started&&!a._started&&a.startup()},removeChild:function(a){"number"==typeof a&&(a=this.getChildren()[a]);a&&(a=a.domNode)&&a.parentNode&&a.parentNode.removeChild(a)},
hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(k,g){var h=this.getChildren(),e=a.indexOf(h,k);return h[e+g]},getIndexOfChild:function(k){return a.indexOf(this.getChildren(),k)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(a,l,n,m,k,g,h,e,d,c){return l("dijit.layout._ContentPaneResizeMixin",
null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(d.on("resize",g.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],c=!1;h("\x3e *",this.containerNode).some(function(d){var g=e.byNode(d);g&&g.resize?a.push(g):!/script|link|style/i.test(d.nodeName)&&
d.offsetHeight&&(c=!0)});this._singleChild=1==a.length&&!c?a[0]:null;n.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,c){this._resizeCalled=!0;this._scheduleLayout(a,c)},_scheduleLayout:function(a,c){this._isShown()?this._layout(a,c):(this._needLayout=!0,this._changeSize=a,this._resultSize=c)},_layout:function(a,d){delete this._needLayout;!this._wasShown&&!1!==this.open&&this._onShow();a&&m.setMarginBox(this.domNode,a);var e=this.containerNode;if(e===
this.domNode){var h=d||{};g.mixin(h,a||{});if(!("h"in h)||!("w"in h))h=g.mixin(m.getMarginBox(e),h);this._contentBox=c.marginBox2contentBox(e,h)}else this._contentBox=m.getContentBox(e);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||m.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),c,d=0;c=a[d++];)c.resize&&c.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&
"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,c=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!n.contains(a,"dijitHidden")&&c&&c.style&&"none"!=c.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],
function(a,l,n,m,k){function g(a,d){var c=a.resize?a.resize(d):n.setMarginBox(a.domNode,d);c?k.mixin(a,c):(k.mixin(a,n.getMarginBox(a.domNode)),k.mixin(a,d))}var h={marginBox2contentBox:function(a,d){var c=m.getComputedStyle(a),b=n.getMarginExtents(a,c),g=n.getPadBorderExtents(a,c);return{l:m.toPixelValue(a,c.paddingLeft),t:m.toPixelValue(a,c.paddingTop),w:d.w-(b.w+g.w),h:d.h-(b.h+g.h)}},layoutChildren:function(e,d,c,b,h){d=k.mixin({},d);l.add(e,"dijitLayoutContainer");c=a.filter(c,function(a){return"center"!=
a.region&&"client"!=a.layoutAlign}).concat(a.filter(c,function(a){return"center"==a.region||"client"==a.layoutAlign}));a.forEach(c,function(a){var c=a.domNode,e=a.region||a.layoutAlign;if(!e)throw Error("No region setting for "+a.id);var k=c.style;k.left=d.l+"px";k.top=d.t+"px";k.position="absolute";l.add(c,"dijitAlign"+(e.substring(0,1).toUpperCase()+e.substring(1)));c={};b&&b==a.id&&(c["top"==a.region||"bottom"==a.region?"h":"w"]=h);"leading"==e&&(e=a.isLeftToRight()?"left":"right");"trailing"==
e&&(e=a.isLeftToRight()?"right":"left");"top"==e||"bottom"==e?(c.w=d.w,g(a,c),d.h-=a.h,"top"==e?d.t+=a.h:k.top=d.t+d.h+"px"):"left"==e||"right"==e?(c.h=d.h,g(a,c),d.w-=a.w,"left"==e?d.l+=a.w:k.left=d.l+d.w+"px"):("client"==e||"center"==e)&&g(a,d)})}};k.setObject("dijit.layout.utils",h);return h})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(a,l,n,m,k,g,h){var e=0,d={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,
"")},_emptyNode:g.empty,_setNodeContent:function(a,b){g.empty(a);if(b)if("number"==typeof b&&(b=b.toString()),"string"==typeof b&&(b=g.toDom(b,a.ownerDocument)),!b.nodeType&&l.isArrayLike(b))for(var d=b.length,e=0;e<b.length;e=d==b.length?e+1:0)g.place(b[e],a,"last");else g.place(b,a,"last");return a},_ContentSetter:m("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:a._scopeName,startup:!0,constructor:function(a,b){l.mixin(this,
a||{});b=this.node=k.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",e++].join("_"))},set:function(a,b){void 0!==a&&(this.content=a);b&&this._mixin(b);this.onBegin();this.setContent();var d=this.onEnd();return d&&d.then?d:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=d._setNodeContent(a,this.content)}catch(b){var e=this.onContentError(b);try{a.innerHTML=e}catch(g){console.error("Fatal "+this.declaredClass+
".setContent could not change content due to "+g.message,g)}}this.node=a},empty:function(){this.parseDeferred&&(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(n.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);g.empty(this.node)},onBegin:function(){var a=this.content;if(l.isString(a)&&(this.cleanContent&&(a=d._secureForInnerHtml(a)),this.extractContent)){var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);
b&&(a=b[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},d;for(d in a)d in b||(this[d]=a[d])},_parse:function(){var a=this.node;try{var b={};n.forEach(["dir",
"lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);var d=this;this.parseDeferred=h.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return d.parseResults=a},function(a){d._onError("Content",a,"Error parsing in _ContentSetter#"+this.id)})}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,b,e){a=this["on"+a+"Error"].call(this,b);e?console.error(e,b):a&&d._setNodeContent(this.node,a,!0)}}),set:function(a,
b,e){void 0==b&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),b="");"number"==typeof b&&(b=b.toString());return e?(new d._ContentSetter(l.mixin(e,{content:b,node:a}))).set():d._setNodeContent(a,b,!0)}};l.setObject("dojo.html",d);return d})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(a,
l,n,m,k,g,h,e,d,c,b,s,q,v,t,u){function r(a){return eval("("+a+")")}function w(a){var b=a._nameCaseMap,c=a.prototype;if(!b||b._extendCnt<f){var b=a._nameCaseMap={},d;for(d in c)"_"!==d.charAt(0)&&(b[d.toLowerCase()]=d);b._extendCnt=f}return b}function y(f,b){b||(b=a);var c=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),d=f.join();if(!c[d]){for(var p=[],e=0,g=f.length;e<g;e++){var h=f[e];p[p.length]=c[h]=c[h]||n.getObject(h)||~h.indexOf("/")&&b(h)}e=p.shift();c[d]=p.length?e.createSubclass?e.createSubclass(p):
e.extend.apply(e,p):e}return c[d]}new Date("X");var f=0;d.after(n,"extend",function(){f++},!0);var p={_clearCache:function(){f++;_ctorMap={}},_functionFromScript:function(a,f){var b="",c="",d=a.getAttribute(f+"args")||a.getAttribute("args"),p=a.getAttribute("with"),d=(d||"").split(/\s*,\s*/);p&&p.length&&m.forEach(p.split(/\s*,\s*/),function(a){b+="with("+a+"){";c+="}"});return new Function(d,b+a.innerHTML+c)},instantiate:function(a,f,b){f=f||{};b=b||{};var c=(b.scope||l._scopeName)+"Type",d="data-"+
(b.scope||l._scopeName)+"-",p=d+"type",e=d+"mixins",g=[];m.forEach(a,function(a){var b=c in f?f[c]:a.getAttribute(p)||a.getAttribute(c);if(b){var d=a.getAttribute(e),b=d?[b].concat(d.split(/\s*,\s*/)):[b];g.push({node:a,types:b})}});return this._instantiate(g,f,b)},_instantiate:function(a,f,b,d){function p(a){!f._started&&!b.noStart&&m.forEach(a,function(a){"function"===typeof a.startup&&!a._started&&a.startup()});return a}a=m.map(a,function(a){var c=a.ctor||y(a.types,b.contextRequire);if(!c)throw Error("Unable to resolve constructor for: '"+
a.types.join()+"'");return this.construct(c,a.node,f,b,a.scripts,a.inherited)},this);return d?c(a).then(p):p(a)},construct:function(a,f,c,p,g,h){function k(a){M&&n.setObject(M,a);for(G=0;G<O.length;G++)d[O[G].advice||"after"](a,O[G].method,n.hitch(a,O[G].func),!0);for(G=0;G<Y.length;G++)Y[G].call(a);for(G=0;G<V.length;G++)a.watch(V[G].prop,V[G].func);for(G=0;G<Z.length;G++)t(a,Z[G].event,Z[G].func);return a}var s=a&&a.prototype;p=p||{};var y={};p.defaults&&n.mixin(y,p.defaults);h&&n.mixin(y,h);var u;
q("dom-attributes-explicit")?u=f.attributes:q("dom-attributes-specified-flag")?u=m.filter(f.attributes,function(a){return a.specified}):(h=(/^input$|^img$/i.test(f.nodeName)?f:f.cloneNode(!1)).outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,""),u=m.map(h.split(/\s+/),function(a){var b=a.toLowerCase();return{name:a,value:"LI"==f.nodeName&&"value"==a||"enctype"==b?f.getAttribute(b):f.getAttributeNode(b).value}}));var D=p.scope||l._scopeName;
h="data-"+D+"-";var J={};"dojo"!==D&&(J[h+"props"]="data-dojo-props",J[h+"type"]="data-dojo-type",J[h+"mixins"]="data-dojo-mixins",J[D+"type"]="dojotype",J[h+"id"]="data-dojo-id");for(var G=0,F,D=[],M,P;F=u[G++];){var X=F.name,N=X.toLowerCase();F=F.value;switch(J[N]||N){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":P=F;break;case "data-dojo-id":case "jsid":M=F;break;case "data-dojo-attach-point":case "dojoattachpoint":y.dojoAttachPoint=F;break;case "data-dojo-attach-event":case "dojoattachevent":y.dojoAttachEvent=
F;break;case "class":y["class"]=f.className;break;case "style":y.style=f.style&&f.style.cssText;break;default:if(X in s||(X=w(a)[N]||X),X in s)switch(typeof s[X]){case "string":y[X]=F;break;case "number":y[X]=F.length?Number(F):NaN;break;case "boolean":y[X]="false"!=F.toLowerCase();break;case "function":""===F||-1!=F.search(/[^\w\.]+/i)?y[X]=new Function(F):y[X]=n.getObject(F,!1)||new Function(F);D.push(X);break;default:N=s[X],y[X]=N&&"length"in N?F?F.split(/\s*,\s*/):[]:N instanceof Date?""==F?new Date(""):
"now"==F?new Date:b.fromISOString(F):N instanceof e?l.baseUrl+F:r(F)}else y[X]=F}}for(u=0;u<D.length;u++)J=D[u].toLowerCase(),f.removeAttribute(J),f[J]=null;if(P)try{P=r.call(p.propsThis,"{"+P+"}"),n.mixin(y,P)}catch(H){throw Error(H.toString()+" in data-dojo-props\x3d'"+P+"'");}n.mixin(y,c);g||(g=a&&(a._noScript||s._noScript)?[]:v("\x3e script[type^\x3d'dojo/']",f));var O=[],Y=[],V=[],Z=[];if(g)for(G=0;G<g.length;G++)J=g[G],f.removeChild(J),c=J.getAttribute(h+"event")||J.getAttribute("event"),p=
J.getAttribute(h+"prop"),P=J.getAttribute(h+"method"),D=J.getAttribute(h+"advice"),u=J.getAttribute("type"),J=this._functionFromScript(J,h),c?"dojo/connect"==u?O.push({method:c,func:J}):"dojo/on"==u?Z.push({event:c,func:J}):y[c]=J:"dojo/aspect"==u?O.push({method:P,advice:D,func:J}):"dojo/watch"==u?V.push({prop:p,func:J}):Y.push(J);a=(g=a.markupFactory||s.markupFactory)?g(y,f,a):new a(y,f);return a.then?a.then(k):k(a)},scan:function(f,b){function c(a){if(!a.inherited){a.inherited={};var f=a.node,b=
c(a.parent),f={dir:f.getAttribute("dir")||b.dir,lang:f.getAttribute("lang")||b.lang,textDir:f.getAttribute(r)||b.textDir},d;for(d in f)f[d]&&(a.inherited[d]=f[d])}return a.inherited}var d=[],p=[],e={},g=(b.scope||l._scopeName)+"Type",h="data-"+(b.scope||l._scopeName)+"-",k=h+"type",r=h+"textdir",h=h+"mixins",n=f.firstChild,q=b.inherited;if(!q){var t=function(a,f){return a.getAttribute&&a.getAttribute(f)||a.parentNode&&t(a.parentNode,f)},q={dir:t(f,"dir"),lang:t(f,"lang"),textDir:t(f,r)},v;for(v in q)q[v]||
delete q[v]}for(var q={inherited:q},w,u;;)if(n)if(1!=n.nodeType)n=n.nextSibling;else if(w&&"script"==n.nodeName.toLowerCase())(X=n.getAttribute("type"))&&/^dojo\/\w/i.test(X)&&w.push(n),n=n.nextSibling;else if(u)n=n.nextSibling;else{var X=n.getAttribute(k)||n.getAttribute(g);v=n.firstChild;if(!X&&(!v||3==v.nodeType&&!v.nextSibling))n=n.nextSibling;else{u=null;if(X){var N=n.getAttribute(h);w=N?[X].concat(N.split(/\s*,\s*/)):[X];try{u=y(w,b.contextRequire)}catch(H){}u||m.forEach(w,function(a){~a.indexOf("/")&&
!e[a]&&(e[a]=!0,p[p.length]=a)});N=u&&!u.prototype._noScript?[]:null;q={types:w,ctor:u,parent:q,node:n,scripts:N};q.inherited=c(q);d.push(q)}else q={node:n,scripts:w,parent:q};w=N;u=n.stopParser||u&&u.prototype.stopParser&&!b.template;n=v}}else{if(!q||!q.node)break;n=q.node.nextSibling;u=!1;q=q.parent;w=q.scripts}var O=new s;p.length?(b.contextRequire||a)(p,function(){O.resolve(m.filter(d,function(a){if(!a.ctor)try{a.ctor=y(a.types,b.contextRequire)}catch(f){}for(var c=a.parent;c&&!c.types;)c=c.parent;
var d=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(d&&d.stopParser&&!b.template);a.instantiate=!c||c.instantiate&&c.instantiateChildren;return a.instantiate}))}):O.resolve(d);return O.promise},_require:function(f,b){var c=r("{"+f.innerHTML+"}"),d=[],p=[],e=new s,g=b&&b.contextRequire||a,h;for(h in c)d.push(h),p.push(c[h]);g(p,function(){for(var a=0;a<d.length;a++)n.setObject(d[a],arguments[a]);e.resolve(arguments)});return e.promise},_scanAmd:function(a,f){var b=new s,c=b.promise;b.resolve(!0);
var d=this;v("script[type\x3d'dojo/require']",a).forEach(function(a){c=c.then(function(){return d._require(a,f)});a.parentNode.removeChild(a)});return c},parse:function(a,f){a&&("string"!=typeof a&&!("nodeType"in a))&&(f=a,a=f.rootNode);var b=a?g.byId(a):h.body();f=f||{};var c=f.template?{template:!0}:{},d=[],p=this,e=this._scanAmd(b,f).then(function(){return p.scan(b,f)}).then(function(a){return p._instantiate(a,c,f,!0)}).then(function(a){return d=d.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});n.mixin(d,e);return d}};l.parser=p;k.parseOnLoad&&u(100,p,"parse");return p})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(a,l){var n={};a.setObject("dojo.date.stamp",n);n.fromISOString=function(a,k){n._isoRegExp||(n._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var g=n._isoRegExp.exec(a),h=null;if(g){g.shift();g[1]&&g[1]--;g[6]&&(g[6]*=1E3);k&&(k=new Date(k),l.forEach(l.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(a){return k["get"+a]()}),function(a,b){g[b]=g[b]||a}));h=new Date(g[0]||1970,g[1]||0,g[2]||1,g[3]||0,g[4]||0,g[5]||0,g[6]||0);100>g[0]&&h.setFullYear(g[0]||1970);var e=0,d=g[7]&&g[7].charAt(0);"Z"!=d&&(e=60*(g[8]||0)+(Number(g[9])||0),"-"!=d&&(e*=-1));d&&(e-=h.getTimezoneOffset());e&&h.setTime(h.getTime()+6E4*e)}return h};n.toISOString=function(a,k){var g=function(a){return 10>a?"0"+a:a};k=k||{};var h=[],e=k.zulu?"getUTC":"get",d="";"time"!=k.selector&&(d=a[e+"FullYear"](),d=["0000".substr((d+
"").length)+d,g(a[e+"Month"]()+1),g(a[e+"Date"]())].join("-"));h.push(d);if("date"!=k.selector){d=[g(a[e+"Hours"]()),g(a[e+"Minutes"]()),g(a[e+"Seconds"]())].join(":");e=a[e+"Milliseconds"]();k.milliseconds&&(d+="."+(100>e?"0":"")+g(e));if(k.zulu)d+="Z";else if("time"!=k.selector)var e=a.getTimezoneOffset(),c=Math.abs(e),d=d+((0<e?"-":"+")+g(Math.floor(c/60))+":"+g(c%60));h.push(d)}return h.join("T")};return n})},"esri/core/domUtils":function(){define(["dojo/on","dojo/dom-style","dojo/has"],function(a,
l,n){var m={show:function(a){if(a=m.getNode(a))a.style.display="block"},getNode:function(a){return a&&a.domNode||a},hide:function(a){if(a=m.getNode(a))a.style.display="none"},toggle:function(a){if(a=m.getNode(a))a.style.display="none"===a.style.display?"block":"none"},documentBox:8>=n("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(k){if(k=this.getNode(k)){var g=0,h=0,e=0,d=0,c=0,b=0;return[a(k,
"touchstart",function(a){g=a.touches[0].screenX;h=a.touches[0].screenY;e=k.scrollWidth;d=k.scrollHeight;c=k.clientWidth;b=k.clientHeight}),a(k,"touchmove",function(a){a.preventDefault();var m=k.firstChild;m instanceof Text&&(m=k.childNodes[1]);var n=m._currentX||0,t=m._currentY||0,n=n+(a.touches[0].screenX-g);0<n?n=0:0>n&&Math.abs(n)+c>e&&(n=-1*(e-c));m._currentX=n;t+=a.touches[0].screenY-h;0<t?t=0:0>t&&Math.abs(t)+b>d&&(t=-1*(d-b));m._currentY=t;l.set(m,{"-webkit-transition-property":"-webkit-transform",
"-webkit-transform":"translate("+n+"px, "+t+"px)"});g=a.touches[0].screenX;h=a.touches[0].screenY})]}}};return m})},"esri/identity/Credential":function(){define(["./IdentityManagerBase"],function(a){return a.Credential})},"esri/identity/IdentityManagerBase":function(){define("../core/declare dojo/_base/config dojo/_base/lang dojo/_base/array dojo/Deferred dojo/_base/url dojo/sniff dojo/cookie dojo/io-query dojo/regexp ../kernel ../config ../core/lang ./ServerInfo ../core/urlUtils ../core/deferredUtils ../core/Accessoire ../request ../core/Evented ./OAuthCredential ./OAuthInfo".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w,y,f,p){var x={},z=function(a){var f=(new g(a.owningSystemUrl)).host;a=(new g(a.server)).host;var b=/.+\.arcgis\.com$/i;return b.test(f)&&b.test(a)},K=function(a,f){return!(!z(a)||!f||!m.some(f,function(f){return f.test(a.server)}))},A;k=a(y,{declaredClass:"esri.IdentityManagerBase",constructor:function(){this._portalConfig=n.getObject("esriGeowConfig");this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=
[];this._getOAuthHash()},defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/dev\.arcgis\.com/i,
tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer)).*/ig,
_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],registerServers:function(a){var f=this.serverInfos;f?(a=m.filter(a,function(a){return!this.findServerInfo(a.server)},this),this.serverInfos=f.concat(a)):this.serverInfos=a;m.forEach(a,function(a){a.owningSystemUrl&&
this._portals.push(a.owningSystemUrl);if(a.hasPortal){this._portals.push(a.server);var f=s.request.corsEnabledServers,b=this._getOrigin(a.tokenServiceUrl);t.canUseXhr(a.server)||f.push(a.server.replace(/^https?:\/\//i,""));t.canUseXhr(b)||f.push(b.replace(/^https?:\/\//i,""))}},this)},registerOAuthInfos:function(a){var f=this.oAuthInfos;f?(a=m.filter(a,function(a){return!this.findOAuthInfo(a.portalUrl)},this),this.oAuthInfos=f.concat(a)):this.oAuthInfos=a},registerToken:function(a){var f=this._sanitizeUrl(a.server),
b=this.findServerInfo(f),c=!0,d;b||(b=new v,b.server=this._getServerInstanceRoot(f),b.tokenServiceUrl=this._getTokenSvcUrl(f),b.hasPortal=!0,this.registerServers([b]));(d=this.findCredential(f,a.userId))?(n.mixin(d,a),c=!1):(d=new A({userId:a.userId,server:b.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:this._isServerRsrc(f)?"server":"portal"}),d.resources=[f],this.credentials.push(d));d.emitTokenChange(!1);c||d.refreshServerTokens()},toJSON:function(){return q.fixJson({serverInfos:m.map(this.serverInfos,
function(a){return a.toJSON()}),oAuthInfos:m.map(this.oAuthInfos,function(a){return a.toJSON()}),credentials:m.map(this.credentials,function(a){return a.toJSON()})})},initialize:function(a){if(a){n.isString(a)&&(a=JSON.parse(a));var f=a.serverInfos,b=a.oAuthInfos;a=a.credentials;if(f){var c=[];m.forEach(f,function(a){a.server&&a.tokenServiceUrl&&c.push(a.declaredClass?a:new v(a))});c.length&&this.registerServers(c)}if(b){var d=[];m.forEach(b,function(a){a.appId&&d.push(a.declaredClass?a:new p(a))});
d.length&&this.registerOAuthInfos(d)}a&&m.forEach(a,function(a){a.userId&&(a.server&&a.token&&a.expires&&a.expires>(new Date).getTime())&&(a=a.declaredClass?a:new A(a),a.emitTokenChange(),this.credentials.push(a))},this)}},findServerInfo:function(a){var f;a=this._sanitizeUrl(a);m.some(this.serverInfos,function(b){this._hasSameServerInstance(b.server,a)&&(f=b);return!!f},this);return f},findOAuthInfo:function(a){var f;a=this._sanitizeUrl(a);m.some(this.oAuthInfos,function(b){this._hasSameServerInstance(b.portalUrl,
a)&&(f=b);return!!f},this);return f},findCredential:function(a,f){var b,c;a=this._sanitizeUrl(a);c=this._isServerRsrc(a)?"server":"portal";f?m.some(this.credentials,function(d){this._hasSameServerInstance(d.server,a)&&(f===d.userId&&d.scope===c)&&(b=d);return!!b},this):m.some(this.credentials,function(f){this._hasSameServerInstance(f.server,a)&&(-1!==this._getIdenticalSvcIdx(a,f)&&f.scope===c)&&(b=f);return!!b},this);return b},getCredential:function(a,f){var b,c,d=!0;q.isDefined(f)&&(n.isObject(f)?
(b=!!f.token,c=f.error,d=!1!==f.prompt):b=f);a=this._sanitizeUrl(a);var p=u.makeDeferredCancellingPending(),e=this._isAdminResource(a),g=b&&this._doPortalSignIn(a)?this._getEsriAuthCookie():null;b=b?this.findCredential(a):null;if(g||b)return d=Error("You are currently signed in as: '"+(g&&g.email||b&&b.userId)+"'. You do not have access to this resource: "+a),d.code="IdentityManagerBase.1",d.httpCode=c&&c.httpCode,d.messageCode=c?c.messageCode:null,d.subcode=c?c.subcode:null,d.details=c?c.details:
null,d.log=l.isDebug,p.reject(d),p.promise;if(c=this._findCredential(a,f))return p.resolve(c),p.promise;if(c=this.findServerInfo(a))!c.hasServer&&this._isServerRsrc(a)&&(c._restInfoDfd=this._getTokenSvcUrl(a,!0),c.hasServer=!0);else{g=this._getTokenSvcUrl(a);if(!g)return d=Error("Unknown resource - could not find token service endpoint."),d.code="IdentityManagerBase.2",d.log=l.isDebug,p.reject(d),p.promise;c=new v;c.server=this._getServerInstanceRoot(a);n.isString(g)?(c.tokenServiceUrl=g,d&&!this._findOAuthInfo(a)&&
(c._selfDfd=this._getPortalSelf(g.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),a)),c.hasPortal=!0):(c._restInfoDfd=g,c.hasServer=!0);this.registerServers([c])}return this._enqueue(a,c,f,p,e)},getResourceName:function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(a,
f,c){var d,p,e,h,k,m,r=new g(window.location.href.toLowerCase()),q=this._getEsriAuthCookie(),s,v=!f;h=a.shortLivedTokenValidity;var z;f&&(z=b.id.tokenValidity||h||b.id.defaultTokenValidity,z>h&&(z=h));c&&(d=c.isAdmin,p=c.serverUrl,e=c.token,m=c.ssl,a.customParameters=c.customParameters);if(d)h=a.adminTokenServiceUrl;else{h=a.tokenServiceUrl;k=new g(h.toLowerCase());q&&(s=(s=q.auth_tier)&&s.toLowerCase());if(("web"===s||a.webTierAuth)&&c&&c.serverUrl&&!m&&"http"===r.scheme&&(t.hasSameOrigin(r.uri,
h,!0)||"https"===k.scheme&&r.host===k.host&&"7080"===r.port&&"7443"===k.port))h=h.replace(/^https:/i,"http:").replace(/:7443/i,":7080");v&&this._rePortalTokenSvc.test(a.tokenServiceUrl)&&(h=h.replace(/\/rest/i,""))}return w(h,n.mixin({query:n.mixin({request:"getToken",username:f&&f.username,password:f&&f.password,serverUrl:p,token:e,expiration:z,referer:d||this._rePortalTokenSvc.test(a.tokenServiceUrl)?window.location.host:null,client:d?"referer":null,f:"json"},a.customParameters),method:!v?"post":
"auto",disableIdentityLookup:!0,useProxy:this._useProxy(a,c),responseType:"json",callbackParamName:v?"callback":void 0},c&&c.ioArgs)).then(function(b){b=b.data;if(!b||!b.token)return b=Error("Unable to generate token"),b.code="IdentityManagerBase.3",b.log=l.isDebug,b;var c=a.server;x[c]||(x[c]={});f&&(x[c][f.username]=f.password);b.validity=z;return b})},isBusy:function(){return!!this._busy},checkSignInStatus:function(a){return this.getCredential(a,{prompt:!1})},setRedirectionHandler:function(a){this._redirectFunc=
a},setProtocolErrorHandler:function(a){this._protocolFunc=a},signIn:function(){},oAuthSignIn:function(){},destroyCredentials:function(){if(this.credentials){var a=this.credentials.slice();m.forEach(a,function(a){a.destroy()})}this.emit("credentials-destroy")},_getOAuthHash:function(){var a=window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=d.queryToObject(a),f=!1;a.access_token&&a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=JSON.parse(a.state),this._oAuthHash=a,
f=!0):a.error&&a.error_description&&(console.log("IdentityManager OAuth Error: ",a.error," - ",a.error_description),"access_denied"===a.error&&(f=!0));if(f&&(!h("ie")||8<h("ie")))window.location.hash=""}},_findCredential:function(a,f){var b=-1,c,d,p,e,g=f&&f.token;c=f&&f.resource;var h=this._isServerRsrc(a)?"server":"portal",k=m.filter(this.credentials,function(f){return this._hasSameServerInstance(f.server,a)&&f.scope===h},this);a=c||a;if(k.length)if(1===k.length)if(c=k[0],p=(d=(e=this.findServerInfo(c.server))&&
e.owningSystemUrl)&&this.findCredential(d,c.userId),b=this._getIdenticalSvcIdx(a,c),g)-1!==b&&(c.resources.splice(b,1),this._removeResource(a,p));else return-1===b&&c.resources.push(a),this._addResource(a,p),c;else{var x,l;m.some(k,function(f){l=this._getIdenticalSvcIdx(a,f);return-1!==l?(x=f,p=(d=(e=this.findServerInfo(x.server))&&e.owningSystemUrl)&&this.findCredential(d,x.userId),b=l,!0):!1},this);if(g)x&&(x.resources.splice(b,1),this._removeResource(a,p));else if(x)return this._addResource(a,
p),x}},_findOAuthInfo:function(a){var f=this.findOAuthInfo(a);f||m.some(this.oAuthInfos,function(b){this._isIdProvider(b.portalUrl,a)&&(f=b);return!!f},this);return f},_addResource:function(a,f){f&&-1===this._getIdenticalSvcIdx(a,f)&&f.resources.push(a)},_removeResource:function(a,f){var b=-1;f&&(b=this._getIdenticalSvcIdx(a,f),-1<b&&f.resources.splice(b,1))},_useProxy:function(a,f){return f&&f.isAdmin&&!t.hasSameOrigin(a.adminTokenServiceUrl,window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&
10.1==a.currentVersion&&!t.hasSameOrigin(a.tokenServiceUrl,window.location.href)},_getOrigin:function(a){a=new g(a);return a.scheme+"://"+a.host+(q.isDefined(a.port)?":"+a.port:"")},_getServerInstanceRoot:function(a){var f=a.toLowerCase(),b=f.indexOf(this._agsRest);-1===b&&this._isAdminResource(a)&&(b=f.indexOf("/admin"));-1===b&&(b=f.indexOf("/sharing"));-1===b&&"/"===f.substr(-1)&&(b=f.length-1);return-1<b?a.substring(0,b):a},_hasSameServerInstance:function(a,f){a=a.toLowerCase();f=this._getServerInstanceRoot(f).toLowerCase();
a=a.substr(a.indexOf(":"));f=f.substr(f.indexOf(":"));return a===f},_sanitizeUrl:function(a){a=t.normalize(n.trim(a));var f=(s.request.proxyUrl||"").toLowerCase(),b=f?a.toLowerCase().indexOf(f+"?"):-1;-1!==b&&(a=a.substring(b+f.length+1));return t.urlToObject(a).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},_isAdminResource:function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||this._isAdminResource(a)},_isIdenticalService:function(a,
f){var b;if(this._isRESTService(a)&&this._isRESTService(f)){var c=this._getSuffix(a).toLowerCase(),d=this._getSuffix(f).toLowerCase();b=c===d;b||(b=/(.*)\/(MapServer|FeatureServer).*/ig,b=c.replace(b,"$1")===d.replace(b,"$1"))}else this._isAdminResource(a)&&this._isAdminResource(f)?b=!0:!this._isServerRsrc(a)&&(!this._isServerRsrc(f)&&this._isPortalDomain(a))&&(b=!0);return b},_isPortalDomain:function(a){a=a.toLowerCase();var f=(new g(a)).authority,b=this._portalConfig,c=-1!==f.indexOf(this._agolSuffix);
!c&&b&&(c=this._hasSameServerInstance(this._getServerInstanceRoot(b.restBaseUrl),a));if(!c){if(!this._arcgisUrl&&(b=n.getObject("esri.arcgis.utils.arcgisUrl")))this._arcgisUrl=(new g(b)).authority;this._arcgisUrl&&(c=this._arcgisUrl.toLowerCase()===f)}c||(c=m.some(this._portals,function(f){return this._hasSameServerInstance(f,a)},this));return c=c||this._agsPortal.test(a)},_isIdProvider:function(a,f){var b=-1,c=-1;m.forEach(this._gwDomains,function(d,p){-1===b&&d.regex.test(a)&&(b=p);-1===c&&d.regex.test(f)&&
(c=p)});var d=!1;if(-1<b&&-1<c)if(0===b||4===b){if(0===c||4===c)d=!0}else if(1===b){if(1===c||2===c)d=!0}else 2===b?2===c&&(d=!0):3===b&&3===c&&(d=!0);if(!d){var p=this.findServerInfo(f),e=p&&p.owningSystemUrl;e&&(z(p)&&this._isPortalDomain(e)&&this._isIdProvider(a,e))&&(d=!0)}return d},_isPublic:function(a){a=this._sanitizeUrl(a);return m.some(this._publicUrls,function(f){return f.test(a)})},_getIdenticalSvcIdx:function(a,f){var b=-1;m.some(f.resources,function(f,c){return this._isIdenticalService(a,
f)?(b=c,!0):!1},this);return b},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(a){var f,b;if((f=this._isRESTService(a))||this._isAdminResource(a))return b=a.toLowerCase().indexOf(f?this._agsRest:"/admin/"),f=a.substring(0,b)+"/admin/generateToken",a=a.substring(0,b)+"/rest/info",b=w(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){return a.data}),b.adminUrl_=f,b;if(this._isPortalDomain(a)){var c=
"";m.some(this._gwDomains,function(f){f.regex.test(a)&&(c=f.tokenServiceUrl);return!!c});c||m.some(this._portals,function(f){this._hasSameServerInstance(f,a)&&(c=f+this._gwTokenUrl);return!!c},this);c||(b=a.toLowerCase().indexOf("/sharing"),-1!==b&&(c=a.substring(0,b)+this._gwTokenUrl));c||(c=this._getOrigin(a)+this._gwTokenUrl);c&&(f=(new g(a)).port,/^http:\/\//i.test(a)&&"7080"===f&&(c=c.replace(/:7080/i,":7443")),c=c.replace(/http:/i,"https:"));return c}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},
_getPortalSelf:function(a,f){"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(f)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return w(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback",crossOrigin:!1,disableIdentityLookup:!0}).then(function(a){return a.data})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var a;if(e.isSupported()){var f=this._getAllCookies("esri_auth"),
b;for(b=0;b<f.length;b++){var c=JSON.parse(f[b]);if(c.portalApp){a=c;break}}}return a},_getAllCookies:function(a){var f=[],b=document.cookie.match(RegExp("(?:^|; )"+c.escapeString(a)+"\x3d([^;]*)","g"));if(b)for(a=0;a<b.length;a++){var d=b[a],p=d.indexOf("\x3d");-1<p&&(d=d.substring(p+1),f.push(decodeURIComponent(d)))}return f},_doPortalSignIn:function(a){if(e.isSupported()){var f=this._getEsriAuthCookie(),b=this._portalConfig,c=window.location.href,d=this.findServerInfo(a);if(this.useSignInPage&&
(b||this._isPortalDomain(c)||f)&&(d?d.hasPortal||d.owningSystemUrl&&this._isPortalDomain(d.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(c,a)||b&&(this._hasSameServerInstance(this._getServerInstanceRoot(b.restBaseUrl),a)||this._isIdProvider(b.restBaseUrl,a))||t.hasSameOrigin(c,a,!0)))return!0}return!1},_checkProtocol:function(a,f,b,c){var d=!0;c=c?f.adminTokenServiceUrl:f.tokenServiceUrl;if(0===n.trim(c).toLowerCase().indexOf("https:")&&0!==window.location.href.toLowerCase().indexOf("https:")&&
(!s.request.useCors||!t.canUseXhr(c)&&!t.canUseXhr(t.getProxyUrl(!0).path)))d=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:f}):!1,d||(a=Error("Aborted the Sign-In process to avoid sending password over insecure connection."),a.code="IdentityManagerBase.4",a.log=l.isDebug,console.log(a.message),b(a));return d},_enqueue:function(a,f,b,c,d,p){c||(c=u.makeDeferredCancellingPending());c.resUrl_=a;c.sinfo_=f;c.options_=b;c.admin_=d;c.refresh_=p;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),
this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(c)):this._xoReqs.push(c):this._doSignIn(c);return c.promise},_doSignIn:function(a){this._busy=a;var b=this,c=function(f){var c=a.options_&&a.options_.resource,d=a.resUrl_,p=a.refresh_,e=!1;-1===m.indexOf(b.credentials,f)&&(p&&-1!==m.indexOf(b.credentials,p)?(p.userId=f.userId,p.token=f.token,p.expires=f.expires,p.validity=f.validity,p.ssl=f.ssl,p.creationTime=f.creationTime,e=!0,f=p):
b.credentials.push(f));f.resources||(f.resources=[]);f.resources.push(c||d);f.scope=b._isServerRsrc(d)?"server":"portal";f.emitTokenChange();var c=b._soReqs,g={};b._soReqs=[];m.forEach(c,function(a){if(!this._isIdenticalService(d,a.resUrl_)){var b=this._getSuffix(a.resUrl_);g[b]||(g[b]=!0,f.resources.push(a.resUrl_))}},b);a.resolve(f);m.forEach(c,function(a){a.resolve(f)});b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;e||b.emit("credential-create",{credential:f});b._soReqs.length&&b._doSignIn(b._soReqs.shift());
b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},d=function(f){a.reject(f);b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;b._soReqs.length&&b._doSignIn(b._soReqs.shift());b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},p=function(p,e,g,h){var k=a.sinfo_,m=!a.options_||!1!==a.options_.prompt;b._doPortalSignIn(a.resUrl_)?(e=b._getEsriAuthCookie(),p=b._portalConfig,e?c(new A({userId:e.email,server:k.server,token:e.token,expires:null})):m?(m="",e=window.location.href,m=b.signInPage?b.signInPage:p?p.baseUrl+
p.signin:b._isIdProvider(e,a.resUrl_)?b._getOrigin(e)+"/home/signin.html":k.tokenServiceUrl.replace(b._rePortalTokenSvc,"")+"/home/signin.html",m=m.replace(/http:/i,"https:"),p&&!1===p.useSSL&&(m=m.replace(/https:/i,"http:")),0===e.toLowerCase().replace("https","http").indexOf(m.toLowerCase().replace("https","http"))?(k=Error("Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+a.resUrl_),k.code="IdentityManagerBase.5",k.log=l.isDebug,d(k)):
b._redirectFunc?b._redirectFunc({signInPage:m,returnUrlParamName:"returnUrl",returnUrl:e,resourceUrl:a.resUrl_,serverInfo:k}):window.location=m+"?returnUrl\x3d"+window.escape(e)):(k=Error("User is not signed in."),k.code="IdentityManagerBase.6",k.log=l.isDebug,d(k))):p?c(new A({userId:p,server:k.server,token:g,expires:q.isDefined(h)?Number(h):null,ssl:!!e})):x?(p=x._oAuthCred,p||(e=new f(x,window.localStorage),g=new f(x,window.sessionStorage),e.isValid()&&g.isValid()?e.expires>g.expires?(p=e,g.destroy()):
(p=g,e.destroy()):p=e.isValid()?e:g,x._oAuthCred=p),p.isValid()?c(new A({userId:p.userId,server:k.server,token:p.token,expires:p.expires,ssl:p.ssl,_oAuthCred:p})):b._oAuthHash&&b._oAuthHash.state.portalUrl===x.portalUrl?(m=b._oAuthHash,k=new A({userId:m.username,server:k.server,token:m.access_token,expires:(new Date).getTime()+1E3*Number(m.expires_in),ssl:"true"===m.ssl,oAuthState:m.state,_oAuthCred:p}),p.storage=m.persist?window.localStorage:window.sessionStorage,p.token=k.token,p.expires=k.expires,
p.userId=k.userId,p.ssl=k.ssl,p.save(),b._oAuthHash=null,c(k)):m?a._pendingDfd=b.oAuthSignIn(a.resUrl_,k,x,a.options_).then(c,d):(k=Error("User is not signed in."),k.code="IdentityManagerBase.6",k.log=l.isDebug,d(k))):m?b._checkProtocol(a.resUrl_,k,d,a.admin_)&&(m=a.options_,a.admin_&&(m=m||{},m.isAdmin=!0),a._pendingDfd=b.signIn(a.resUrl_,k,m).then(c,d)):(k=Error("User is not signed in."),k.code="IdentityManagerBase.6",k.log=l.isDebug,d(k))},e=function(){var f=a.sinfo_,p=f.owningSystemUrl,e=a.options_,
g,h,k;e&&(g=e.token,h=e.error);k=b._findCredential(p,{token:g,resource:a.resUrl_});!k&&z(f)&&m.some(b.credentials,function(a){this._isIdProvider(p,a.server)&&(k=a);return!!k},b);k?(e=b.findCredential(a.resUrl_,k.userId))?c(e):K(f,b._legacyFed)?(e=k.toJSON(),e.server=f.server,e.resources=null,c(new A(e))):(a._pendingDfd=b.generateToken(b.findServerInfo(k.server),null,{serverUrl:a.resUrl_,token:k.token,ssl:k.ssl})).then(function(b){c(new A({userId:k.userId,server:f.server,token:b.token,expires:q.isDefined(b.expires)?
Number(b.expires):null,ssl:!!b.ssl,isAdmin:a.admin_,validity:b.validity}))},d):(b._busy=null,g&&(a.options_.token=null),(a._pendingDfd=b.getCredential(p.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,token:g,error:h})).then(function(f){b._enqueue(a.resUrl_,a.sinfo_,a.options_,a,a.admin_)},function(a){d(a)}))},g=a.sinfo_.owningSystemUrl,h=this._isServerRsrc(a.resUrl_),k=a.sinfo_._restInfoDfd,x=this._findOAuthInfo(a.resUrl_);k?k.then(function(f){var c=a.sinfo_;c.adminTokenServiceUrl=c._restInfoDfd.adminUrl_;
c._restInfoDfd=null;c.tokenServiceUrl=n.getObject("authInfo.tokenServicesUrl",!1,f)||n.getObject("authInfo.tokenServiceUrl",!1,f)||n.getObject("tokenServiceUrl",!1,f);c.shortLivedTokenValidity=n.getObject("authInfo.shortLivedTokenValidity",!1,f);c.currentVersion=f.currentVersion;c.owningTenant=f.owningTenant;(f=c.owningSystemUrl=f.owningSystemUrl)&&b._portals.push(f);h&&f?e():p()},function(){a.sinfo_._restInfoDfd=null;var f=Error("Unknown resource - could not find token service endpoint.");f.code=
"IdentityManagerBase.2";f.log=l.isDebug;d(f)}):h&&g?e():a.sinfo_._selfDfd?(g=function(f){a.sinfo_._selfDfd=null;var c=f&&f.user&&f.user.username,d=f&&f.allSSL;a.sinfo_.webTierAuth=!!c;c&&b.normalizeWebTierAuth?(a.sinfo_._tokenDfd=b.generateToken(a.sinfo_,null,{ssl:d}),f=function(f){a.sinfo_._tokenDfd=null;p(c,d,f&&f.token,f&&f.expires)},a.sinfo_._tokenDfd.then(f,f)):p(c,d)},a.sinfo_._selfDfd.then(g,g)):p()}});A=a([r,y],{declaredClass:"esri.Credential",tokenRefreshBuffer:2,constructor:function(a){n.mixin(this,
a);this.resources=this.resources||[];q.isDefined(this.creationTime)||(this.creationTime=(new Date).getTime())},_oAuthCred:null,refreshToken:function(){var a=this,f=this.resources&&this.resources[0],c=b.id.findServerInfo(this.server),d=c&&c.owningSystemUrl,p=!!d&&"server"===this.scope,e=p&&K(c,b.id._legacyFed),g=p&&b.id.findServerInfo(d),h,k=(h=c.webTierAuth)&&b.id.normalizeWebTierAuth,l=x[this.server],l=l&&l[this.userId],r={username:this.userId,password:l},n;if(!h||k)if(p&&!g&&m.some(b.id.serverInfos,
function(a){b.id._isIdProvider(d,a.server)&&(g=a);return!!g}),h=g&&b.id.findCredential(g.server,this.userId),!p||h)if(e)h.refreshToken();else{if(p)n={serverUrl:f,token:h&&h.token,ssl:h&&h.ssl};else if(k)r=null,n={ssl:this.ssl};else if(l)this.isAdmin&&(n={isAdmin:!0});else{var s;f&&(f=b.id._sanitizeUrl(f),this._enqueued=1,s=b.id._enqueue(f,c,null,null,this.isAdmin,this),s.then(function(){a._enqueued=0;a.refreshServerTokens()}).then(null,function(){a._enqueued=0}));return s}return b.id.generateToken(p?
g:c,p?null:r,n).then(function(f){a.token=f.token;a.expires=q.isDefined(f.expires)?Number(f.expires):null;a.creationTime=(new Date).getTime();a.validity=f.validity;a.emitTokenChange();a.refreshServerTokens()}).then(null,function(){})}},refreshServerTokens:function(){"portal"===this.scope&&m.forEach(b.id.credentials,function(a){var f=b.id.findServerInfo(a.server),c=f&&f.owningSystemUrl;if(a!==this&&a.userId===this.userId&&c&&"server"===a.scope&&(b.id._hasSameServerInstance(this.server,c)||b.id._isIdProvider(c,
this.server)))K(f,b.id._legacyFed)?(a.token=this.token,a.expires=this.expires,a.creationTime=this.creationTime,a.validity=this.validity,a.emitTokenChange()):a.refreshToken()},this)},emitTokenChange:function(a){clearTimeout(this._refreshTimer);var f=this.server&&b.id.findServerInfo(this.server),c=(f=f&&f.owningSystemUrl)&&b.id.findServerInfo(f);!1!==a&&((!f||"portal"===this.scope||c&&c.webTierAuth&&!b.id.normalizeWebTierAuth)&&(q.isDefined(this.expires)||q.isDefined(this.validity)))&&this._startRefreshTimer();
this.emit("token-change")},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=m.indexOf(b.id.credentials,this);-1<a&&b.id.credentials.splice(a,1);this.emitTokenChange();this.emit("destroy")},toJSON:function(){var a=q.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,
scope:this.scope}),f=this.resources;f&&0<f.length&&(a.resources=f);return a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,f=(this.validity?this.creationTime+6E4*this.validity:this.expires)-(new Date).getTime();0>f&&(f=0);this._refreshTimer=setTimeout(n.hitch(this,this.refreshToken),f>a?f-a:f)}});k.Credential=A;return k})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(a,l){a.cookie=function(a,m,k){var g=document.cookie,h;
if(1==arguments.length)h=(h=g.match(RegExp("(?:^|; )"+l.escapeString(a)+"\x3d([^;]*)")))?decodeURIComponent(h[1]):void 0;else{k=k||{};g=k.expires;if("number"==typeof g){var e=new Date;e.setTime(e.getTime()+864E5*g);g=k.expires=e}g&&g.toUTCString&&(k.expires=g.toUTCString());m=encodeURIComponent(m);var g=a+"\x3d"+m,d;for(d in k)g+="; "+d,e=k[d],!0!==e&&(g+="\x3d"+e);document.cookie=g}return h};a.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled=
"CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return a.cookie})},"esri/identity/ServerInfo":function(){define(["../core/declare","dojo/_base/lang","../core/lang"],function(a,l,n){return a(null,{declaredClass:"esri.ServerInfo",constructor:function(a){l.mixin(this,a)},toJSON:function(){return n.fixJson({server:this.server,tokenServiceUrl:this.tokenServiceUrl,adminTokenServiceUrl:this.adminTokenServiceUrl,
shortLivedTokenValidity:this.shortLivedTokenValidity,owningSystemUrl:this.owningSystemUrl,owningTenant:this.owningTenant,currentVersion:this.currentVersion,hasPortal:this.hasPortal,hasServer:this.hasServer,webTierAuth:this.webTierAuth})}})})},"esri/core/Accessoire":function(){define(["./declare","./accessoireSupport/introspect","./accessoireSupport/Properties"],function(a,l,n){a.after(function(k){a.hasMixin(k,"esri.core.Accessoire")&&l(k)});var m=function(a,g,h){if(null==a)return a;a=a.get?a.get(g[h]):
a[g[h]];return!a||h===g.length-1?a:m(a,g,++h)};return a(null,{declaredClass:"esri.core.Accessoire","-chains-":{postIntrospection:"after",initialize:"after",destroy:"before"},constructor:function(a){Object.defineProperty(this,"_accessorProps",{value:new n(this),enumerable:!1,configurable:!1,writable:!0});0<arguments.length&&this.normalizeCtorArgs&&(this._accessorProps.ctorArgs=this.normalizeCtorArgs.apply(this,Array.prototype.slice.call(arguments)))},_accessorProps:null,postscript:function(a){var g=
this._accessorProps;a=g.ctorArgs||a;var h;(h=this.getDefaults?a?this.getDefaults(a):this.getDefaults({}):null)&&Object.getOwnPropertyNames(h).forEach(function(a){g.setDefault(a,h[a])},this);a&&(this.set(a),g.ctorArgs=null);g.initialize();this.initialize()},postIntrospection:function(){},initialize:function(){},destroy:function(){if(this._accessorProps)this._accessorProps.dispatch(),this._accessorProps.destroy(),this._accessorProps=null;else try{throw Error("instance is already destroyed");}catch(a){console.warn(a.stack)}},
get:function(a){return 0<a.indexOf(".")?m(this,a.split("."),0):this[a]},set:function(a,g){if(a&&"object"===typeof a)return a._accessorProps?a.keys().forEach(function(g){this.set(g,a[g])},this):Object.getOwnPropertyNames(a).forEach(function(g){this.set(g,a[g])},this),this;"_"!==a[0]&&(this[a]=g);return this},watch:function(a,g){return this._accessorProps.watch(a,g)},hasOwnProperty:function(a){var g=this._accessorProps;return g&&g.properties[a]?g.cache.has(a)||null!==g.defaults&&g.defaults.has(a):Object.prototype.hasOwnProperty.call(this,
a)},keys:function(){return this._accessorProps.cache.keys()},notifyChange:function(a){this._accessorProps.propertyWillChange(a);this._accessorProps.propertyInvalidated(a)}})})},"esri/core/accessoireSupport/introspect":function(){define(["dojo/_base/lang","./Property","./PropertyNotifier","./merge"],function(a,l,n,m){var k=function(a){return Object.create(void 0===a?null:a)},g=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader)$/,h=/^_(set|get)([a-zA-Z0-9]+)Attr$/,e=function(a){return a._meta?a:a.constructor},
d=Object.prototype.hasOwnProperty,c=function(a){if(!(a&&null!=e(a)._meta))return null;var c=s(a),f=c.mixin;if(f)return f;var p=a.prototype,f=d.call(p,"classMetadata")?p.classMetadata:k(),f=c.mixin={declaredClass:p.declaredClass,properties:f.properties?m(k(),f.properties):k(),reader:f.reader?m(k(),f.reader):k(),notifiers:[]},x=f.properties;Object.getOwnPropertyNames(p).forEach(function(a){var f=p[a],b,c,d;if(b=g.exec(a))c=b[1],d=b[2];else if(b=h.exec(a))c=b[2][0].toLowerCase()+b[2].substr(1),d=b[1]+
"ter";c&&d&&(a=c.split(".")[0],x[a]||(x[a]={}),a=x[a],a[d.toLowerCase()]=f)});b(a);Object.getOwnPropertyNames(x).forEach(function(a){t(p,a)&&(x[a].value=p[a])});f.properties=Object.getOwnPropertyNames(x).reduce(function(a,f){a[f]=new l(f,x[f]);return a},{});return f},b=function(a){var b=s(a).mixin,f=b.properties,c=k(),d,e,g,h,m;if(f){for(e in f)if(d=f[e].dependsOn)for(h=0;g=d[h];h++)c[g]?-1===c[g].indexOf(e)&&c[g].push(e):c[g]=[e];h=[];for(e in c){d=[];m=k();for(h.push(e);h.length;)g=h.shift(),m[g]||
(m[g]=!0,d.push(g),(g=c[g])&&Array.prototype.push.apply(h,g));d.shift();-1<e.indexOf(".")&&(b.notifiers||(b.notifiers=[]),b.notifiers.push(new n(e,d)),e=e.split(".")[0]);f[e]?f[e].chain=d:(g=u(a,e))?s(g).mixin.properties[e]||(s(g).mixin.properties[e]=new l(e,{value:v(a,e),chain:d})):b.properties[e]=new l(e,{chain:d})}}},s=function(a){if(!(a&&null!=e(a)._meta))return null;var b=e(a),f=b._esriMeta;if(f)return f;var f=b._esriMeta={},d=e(a)._meta.bases;a=f.mixins=[];for(var g,h=d.length-1;0<=h;h--)(g=
c(d[h]))&&a.unshift(g);var d=f.classMetadata={declaredClass:b.prototype.declaredClass,notifiers:[],properties:{},reader:{}},k=d.properties,n,h;for(h=a.length-1;0<=h;h--){g=a[h];for(n in g.properties)r(b,n),k[n]?k[n].mixIn(g.properties[n]):(k[n]=new l(n,g.properties[n]),!k[n].hasOwnProperty("value")&&u(b,n)&&(k[n].value=v(b,n)),Object.defineProperty(b.prototype,n,k[n].getDescriptor()));d.notifiers=d.notifiers.concat(f.mixins[h].notifiers);d.reader=m(d.reader,f.mixins[h].reader)}return f},q=function(a,
b){if(a){var f=Object.getOwnPropertyDescriptor(a.prototype,b);return f?f.value:a.prototype[b]}},v=function(a,b){if(d.call(a,b))return a[b];var f=u(a,b);return q(f,b)},t=function(a,b){var f;return d.call(a,b)&&(!(f=Object.getOwnPropertyDescriptor(a,b))||d.call(f,"value"))},u=function(a,b){for(var f=e(a)._meta.bases,c,g,h=0,k=f.length;h<k;h++)if(c=f[h],g=(g=s(c))&&g.mixin.properties[b],t(c.prototype,b)||g&&d.call(g,"value"))return c;return null},r=function(a,b){var f=e(a),c=s(f).classMetadata.properties,
d=u(f,b)||f,g=d?s(d).mixin.properties:{},h=g[b];d&&!h&&(h=g[b]=new l(b,{value:q(d,b)}),s(d).mixin.properties[b]=new l(b,h),g=s(d).classMetadata.properties,g[b]?g[b].value=h.value:(g[b]=h,Object.defineProperty(d.prototype,b,h.getDescriptor())));f!==d&&(c[b]?c[b].value=h.value:(c[b]=new l(b,h),Object.defineProperty(f.prototype,b,h.getDescriptor())));return h};return a.mixin(function(a){return s(a)},{getProperties:function(a){return s(a).classMetadata.properties},isIntrospected:function(a){return null!=
e(a)._esriMeta},getPropertyOwnerValue:v,getPropertyOwner:u,installPropertyNotifiers:function(a){var b=s(a).classMetadata.notifiers;return b?b.map(function(a){return a.install(this)},a):[]},defineProperty:r})})},"esri/core/accessoireSupport/Property":function(){define(["dojo/has"],function(a){a=function(a,n){this.name=a;n&&this.mixIn(n)};a.prototype={name:null,getter:null,setter:null,reader:null,getterArity:0,setterArity:0,dependsOn:null,chain:null,value:void 0,readOnly:!1,copy:null,type:null,mixIn:function(a){a.hasOwnProperty("getter")&&
(this.getter=a.getter,this.getterArity=a.getter.length);a.hasOwnProperty("setter")&&(this.setter=a.setter,this.setterArity=a.setter.length);a.hasOwnProperty("reader")&&(this.reader=a.reader);a.hasOwnProperty("value")&&(this.value=a.value);a.hasOwnProperty("readOnly")&&(this.readOnly=a.readOnly);a.hasOwnProperty("copy")&&(this.copy=a.copy);a.hasOwnProperty("type")&&(this.type=a.type);a.hasOwnProperty("dependsOn")&&(this.dependsOn=this.dependsOn?this.dependsOn.concat(a.dependsOn):a.dependsOn.concat());
if(a.hasOwnProperty("json")){var n=this.json;n||(this.json=n={});a.json.hasOwnProperty("ignore")&&(n.ignore=a.json.ignore);a.json.readFrom&&(n.readFrom=n.readFrom?n.readFrom.concat(a.json.readFrom):a.json.readFrom.slice())}a.hasOwnProperty("chain")&&(this.chain=this.chain?this.chain.concat(a.chain.filter(function(a){return-1===this.chain.indexOf(a)},this)):a.chain.concat())},getDescriptor:function(){var a=this;return{enumerable:!0,configurable:!0,get:function(){return this._accessorProps?this._accessorProps.get(a.name):
void 0},set:function(n){var m=this._accessorProps,k=a.name;if(m){if(!Object.isFrozen(this)){if(a.readOnly)throw new TypeError("Cannot assign to read only property '"+k+"' of "+this.declaredClass);if(!a.setter&&m.get(k)===n)return n;m.access[k]=!0;m.set(k,n);m.access[k]=!1}}else Object.defineProperty(this,k,{enumerable:!0,configurable:!0,writable:!0,value:n})}}}};return a})},"esri/core/accessoireSupport/PropertyNotifier":function(){define(["dojo/has","../accessorSupport/watch"],function(a,l){l=l.default;
var n=function(a,h){this.dependencyPath=a;this.chain=a.split(".");this.dependents=h};n.prototype={install:function(a){return new m(this,a)}};var m=function(a,h){this.binding=a;this.obj=h;this._installs=[];this._props=h._accessorProps;this._install(h,0);this._notify()},k=function(a,h,e){return a.dirties?l(a,h,e,!0):a.bind(h,e)};m.prototype={remove:function(){this._installs.forEach(function(a){a.remove()});this._installs=this._props=this.binding=this.obj=null},_install:function(a,h){var e=this.binding.chain,
d=this._installs,c;h<d.length&&(d.splice(h).forEach(function(a){a.remove()}),this._notify());if(h!==e.length&&a&&(c=a&&(a.__accessor__||a._accessorProps))){for(var b,m=h;(b=e[m])&&a&&(c=a&&(a.__accessor__||a._accessorProps));)d[m]=k(c,b,this._callback.bind(this,m)),a=a[e[m++]];this._notify()}},_callback:function(a,h){1!==arguments.length&&this._install(h,a+1);this._notify()},_notify:function(){for(var a=this.binding.dependencyPath,h=this.binding.dependents,e=this._props,d=0,c=h.length;d<c;d++)e.propertyDependencyMayChange(h[d],
a)}};return n})},"esri/core/accessoireSupport/merge":function(){define(["dojo/_base/lang"],function(a){var l=function(n,m){return!m?n:Object.keys(m).reduce(function(k,g){var h,e;if("value"===g)k[g]=m[g];else if(void 0===k[g])k[g]=a.clone(m[g]);else if(h=k[g],e=m[g],h!==e)if(Array.isArray(e)||Array.isArray(k))h=h?Array.isArray(h)?k[g]=h.concat():k[g]=[h]:k[g]=[],e&&(Array.isArray(e)||(e=[e]),k[g]=h.concat(e));else if(e&&"object"==typeof e)k[g]=l(h,e);else if(!h||e)k[g]=e;return k},n||{})};return l})},
"esri/core/accessoireSupport/Properties":function(){define("dojo/has ../ObjectPool ../ArrayPool ../Scheduler ../lang ./Cache ./OldValues ./Property ./once ./ensureType ./introspect ./chainWatch".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s){var q=Object.prototype.hasOwnProperty,v=0,t=new l(function(){this.fn=null;this.removed=this.isExecuting=!1},function(){this.fn=null}),u=new l(function(){this.callbacks=this.oldValue=null},function(){this.oldValue=null;this.callbacks=n.release(this.callbacks);this.callbacks=
null});a=function(a){this.uid="propertoire_"+v++;this.obj=a;this.properties=Object.create(b.getProperties(a));this.cache=new g;this.watchers=Object.create(null);this.bindings=Object.create(null);this.defaults=null;this.access=Object.create(null);this._notificationsPool=new l(function(){},function(){});this.notifications=this._notificationsPool.acquire();this.cursors={}};a.prototype={obj:null,properties:null,notifyHdls:null,cache:null,watchers:null,bindings:null,initialized:!1,notifications:null,ctorArgs:null,
timer:null,_boundDispatch:null,initialize:function(){this.initialized=!0;this.notifyHdls=b.installPropertyNotifiers(this.obj);this.dispatch()},destroy:function(){this.notifyHdls&&this.notifyHdls.forEach(function(a){return a.remove()},this);this.timer&&this.timer.remove();var a=this.watchers;Object.getOwnPropertyNames(a).forEach(function(b){a[b].callbacks.forEach(function(a){a.removed=!0})});var b=this.cursors;Object.getOwnPropertyNames(b).forEach(function(a){var f=b[a];if(f){for(;0<f.length;)f.pop().moveBackward(this,
a);b[a]=null}},this);this.cache.destroy();this.defaults&&this.defaults.destroy();this.access=this.defaults=this.notifications=this.bindings=this.watchers=this.cache=this.properties=this.notifyHdls=this.timer=this.obj=null},getFromCache:function(a){var b=this.cache,c=this.defaults,f=this.properties[a];return b.has(a)?b.get(a):c&&c.has(a)?c.get(a):f.value},get:function(a,b){var c=this.cache,f=this.defaults;if(c){if(c.has(a)&&!c.isDirty(a))return c.get(a);var d=this.obj,e=this._defineProperty(a),g=e.getter,
h=e.getterArity;if(c.has(a))!b&&this.propertyWillChange(a),f=c.get(a),g&&(f=h?g.call(d,f):g.call(d)),c.set(a,f),this.propertyHasChanged(a,f);else if(g)!b&&this.propertyWillChange(a),f=h?g.call(d,e.value):g.call(d),c.set(a,f),this.propertyHasChanged(a,f);else return f&&f.has(a)?f.get(a):e.value;return f}},set:function(a,b){var d=this._defineProperty(a),f=d.getter,p=d.setter,e=d.setterArity,g=this.obj,h=this.cache;this.propertyWillChange(a);this.propertyInvalidated(a);b=c(b,d.type);if(p){if(b=2===e?
p.call(g,b,this.getFromCache(a)):p.call(g,b),void 0!==b||!f)h.set(a,b),this.propertyHasChanged(a,b)}else h.set(a,b),this.propertyHasChanged(a,b)},setDefault:function(a,b){var d=this.defaults;d||(this.defaults=d=new g);var f=this._defineProperty(a,!0),p=f.getter,e=f.setter,h=f.getterArity,k=f.setterArity,m=this.obj,l=this.cache.has(a);b=c(b,f.type);l&&d.set(a,b);l||(e&&(b=2===k?e.call(m,b,d.get(a)):e.call(m,b),p&&(b=h?p.call(m,void 0):p.call(m))),this.initialized||d.set(a,b),this.propertyWillChange(a),
d.set(a,b),this.propertyHasChanged(a,b))},hasBindings:function(a){a=this.bindings[a];return null!=a&&0<a.length},hasWatchers:function(a){a=this.watchers[a];return null!=a&&0<a.callbacks.length},bind:function(a,b){var c=this.bindings[a];c?c.push(b):(this._defineProperty(a,!0),this.bindings[a]=c=[b]);return{remove:d(function(){c.splice(c.indexOf(b),1)})}},propertyInvalidated:function(a){var b=this.cursors[a];b&&b.forEach(function(b){b.propertyInvalidated(this,a)},this)},propertyCommitted:function(a){var b=
this.cursors[a];b&&b.forEach(function(b){b.propertyCommitted(this,a)},this)},addCursor:function(a,b){var c=this.cursors[a];c||(this.cursors[a]=c=[]);c.push(b)},removeCursor:function(a,b){var c=this.cursors[a];this.cursors[a]&&(c.splice(c.indexOf(b),1),0===c.length&&(this.cursors[a]=null))},propertyDependencyMayChange:function(a,b){this._propertyWillChange(a);this.propertyInvalidated(a)},propertyWillChange:function(a){var b=this.properties[a].chain,c,f;if(b){c=0;for(f=b.length;c<f;c++)this._propertyWillChange(b[c])}this._propertyWillChange(a)},
_propertyWillChange:function(a){var b=this.cache,c=this.bindings[a],f=this.watchers[a],d=f&&f.callbacks,e=f&&f.oldValues,g=this.notifications[a],h=d&&0<d.length,k=this.initialized&&!this.timer,l=null;if(c)for(var l=0,q=c.length;l<q;l++)c[l]();h&&(g||(g=this.notifications[a]=n.acquire(),f.isDirty=!0),f.isDirty&&(f.isDirty=!1,l=u.acquire(),l.oldValue=this.get(a,!0),l.callbacks=n.copy(d),g.push(l),e&&(b.set(a,e.add(this.obj[a])),b.setDirty(a))),k&&(this._boundDispatch||(this._boundDispatch=this.dispatch.bind(this)),
this.timer=m.schedule(this._boundDispatch)));b.setDirty(a)},propertyHasChanged:function(a,b){if(this.hasBindings(a))for(var c=this.bindings[a],f=0,d=c.length;f<d;f++)c[f](b);this.propertyCommitted(a,b)},internalGet:function(a){return this.get(a,!0)},watch:function(a,b){var c=this.obj,f=this.properties,p=this.watchers[a],e;Array.isArray(a)?e=a:-1<a.indexOf(",")&&(e=a.split(/\s*,\s*/));if(e){for(var g=n.acquire(),c=0;a=e[c++];)g.push(this.watch(a,b));return{handles:g,remove:d(function(){for(var a=0,
f=g.length;a<f;a++)g[a].remove();n.release(g)})}}if(-1<a.indexOf("."))return s(c,a,b);var k=t.acquire();k.fn=b;p?(p.isDirty=!0,p.callbacks.push(k)):(this._defineProperty(a),this.get(a,!0),this.watchers[a]=p={isDirty:!0,callbacks:[k]},f[a].copy&&(p.oldValues=new h(f[a].copy)));return{remove:d(function(){k.removed=!0;p.callbacks.splice(p.callbacks.indexOf(k),1)})}},dispatch:function(){this.timer=null;var a=this.obj,b=this.notifications,c=this.watchers,f,d,e,g,h,m,l,q;this.notifications=this._notificationsPool.acquire();
var s=n.acquire();for(d in b)if(g=b[d]){b[d]=null;s.length=0;l=this.get(d);q=c[d].oldValues;for(h=0;e=g[h];h++){if(!k.equals(e.oldValue,l))for(m=0;f=e.callbacks[m];m++)!f.isExecuting&&(!f.removed&&-1===s.indexOf(f))&&(s.push(f),f.isExecuting=!0,f.fn.call(a,l,e.oldValue,d,a),f.isExecuting=!1);u.release(e)}q&&q.reset();n.release(g)}this._notificationsPool.release(b);n.release(s)},_defineProperty:function(a,c){var d=this.obj,f=this.properties,p=f[a],g,h=!1;if(p)return p;var k=b.getPropertyOwner(d,a);
k&&(p=b(k).mixin.properties[a]);p||(q.call(this.obj,a)&&(g=this.obj[a],delete this.obj[a],h=!0),c?p=b.defineProperty(this.obj,a):(p=new e(a,{value:b.getPropertyOwnerValue(d,a)}),Object.defineProperty(d,a,p.getDescriptor())),h&&this.cache.set(a,g));return f[a]=p}};return a})},"esri/core/accessoireSupport/Cache":function(){define(["./dictionary"],function(a){var l=Object.prototype.hasOwnProperty,n=function(){this.dirty=a();this.values=a()};n.prototype={destroy:function(){this.values=this.dirty=null},
has:function(a){return l.call(this.values,a)},get:function(a){return this.values[a]},remove:function(a){delete this.values[a];delete this.dirty[a]},keys:function(){return Object.keys(this.values)},set:function(a,k){this.dirty[a]=!1;this.values[a]=k},setDirty:function(a){this.dirty[a]=!0},isDirty:function(a){return!0===this.dirty[a]}};return n})},"esri/core/accessoireSupport/dictionary":function(){define([],function(){return function(){var a=Object.create(null);a.temp={};delete a.temp;return a}})},
"esri/core/accessoireSupport/OldValues":function(){define([],function(){var a=function(a){this._slots=[];this._copyFn=a};a.prototype={current:null,_slots:null,_copyFn:null,_size:0,_used:0,add:function(a){if(!a)return a;var n=this._slots;this._used===this._size?(n[this._used++]=a,this._size++,this.current=void 0):(this.current=n.splice(this._used++,1,a)[0],this._copyFn(this.current,a));return this.current},reset:function(){this._used=0},destroy:function(){this._used=this._size=0;this.current=this._slots=
null}};return a})},"esri/core/accessoireSupport/once":function(){define([],function(){return function(a){var l=!1;return function(){l||(l=!0,a())}}})},"esri/core/accessoireSupport/ensureType":function(){define(["dojo/has"],function(a){return function(a,n){a&&(n&&!(a instanceof n))&&!(a.constructor&&void 0!==a.constructor._meta)&&(a=new n(a));return a}})},"esri/core/accessoireSupport/chainWatch":function(){define(["dojo/has","../lang","./once"],function(a,l,n){var m=function(a,e,d){this._hdl=this._obj=
null;this.name=a;this.callback=e;this.next=d;this.handler=this.handler.bind(this)};m.prototype={handler:function(a,e,d,c){this.next&&(this.next.obj=a);this.name===d&&this.callback(a,e,d,c)},remove:function(){this.obj=null}};Object.defineProperty(m.prototype,"obj",{get:function(){return this._obj},set:function(a){this._hdl&&(this._hdl.remove(),this._hdl=null);if(this._obj=a)a._accessorProps||a.__accessor__?this._hdl=a.watch(this.name,this.handler):a.watch&&(this._hdl=a.watch(this.name,function(a,d,
c){this.handler(c,d,this.name,this.obj)}.bind(this)));this.next&&(this.next.obj=null==a?a:a[this.name])}});var k=function(a,e,d){Array.isArray(e)||(e=[e]);return 0<e.length?(e=new m(e[0],d,k(null,e.slice(1),d)),e.obj=a,e):null},g=function(a,e,d){if(a)return a=a.get?a.get(e[d]):a[e[d]],d===e.length-1?a:g(a,e,++d)};return function(a,e,d){var c=e.split("."),b=g(a,c,0),m=k(a,c,function(){var k=g(a,c,0);l.equals(b,k)||(d.call(a,k,b,e,a),b=k)});return{remove:n(function(){m.remove();m=null})}}})},"esri/identity/OAuthCredential":function(){define(["../core/declare"],
function(a){return a(null,{declaredClass:"esri.OAuthCredential",oAuthInfo:null,storage:null,expires:null,ssl:null,token:null,userId:null,constructor:function(a,n){this.oAuthInfo=a;this.storage=n;this._init()},isValid:function(){var a=!1;if(this.oAuthInfo&&this.token&&this.userId){var n=(new Date).getTime();this.expires>n&&(this.expires-n)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&(a=!0)}return a},save:function(){if(this.storage){var a=this._load(),n=this.oAuthInfo;if(n&&n.authNamespace&&n.portalUrl){var m=
a[n.authNamespace];m||(m=a[n.authNamespace]={});m[n.portalUrl]={expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(a))}catch(k){console.log(k)}}}},destroy:function(){var a=this._load(),n=this.oAuthInfo;if(n&&n.authNamespace&&n.portalUrl&&this.storage){var m=a[n.authNamespace];if(m){delete m[n.portalUrl];try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(a))}catch(k){console.log(k)}}}n&&(this.oAuthInfo=n._oAuthCred=
null)},_init:function(){var a=this._load(),n=this.oAuthInfo;if(n&&(n.authNamespace&&n.portalUrl)&&(a=a[n.authNamespace]))if(a=a[n.portalUrl])this.expires=a.expires,this.ssl=a.ssl,this.token=a.token,this.userId=a.userId},_load:function(){var a={};if(this.storage){var n=this.storage.getItem("esriJSAPIOAuth");if(n)try{a=JSON.parse(n)}catch(m){console.log(m)}}return a}})})},"esri/identity/OAuthInfo":function(){define(["../core/lang","../core/declare","dojo/_base/lang"],function(a,l,n){return l(null,{declaredClass:"esri.arcgis.OAuthInfo",
constructor:function(a){n.mixin(this,{expiration:20160,minTimeUntilExpiration:30,portalUrl:"https://www.arcgis.com",authNamespace:"/",forceLogin:!1,showSocialLogins:!1,popup:!1,popupCallbackUrl:"oauth-callback.html",popupWindowFeatures:"height\x3d480,width\x3d800,location,resizable,scrollbars,status"},a)},_oAuthCred:null,toJSON:function(){return a.fixJson({appId:this.appId,expiration:this.expiration,locale:this.locale,minTimeUntilExpiration:this.minTimeUntilExpiration,portalUrl:this.portalUrl,authNamespace:this.authNamespace,
forceLogin:this.forceLogin,showSocialLogins:this.showSocialLogins,popup:this.popup,popupCallbackUrl:this.popupCallbackUrl,popupWindowFeatures:this.popupWindowFeatures})}})})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),function(a,l,n,m,k,g,h,e,d,c){m("dijit-legacy-requires")&&h(0,function(){a(["dijit/form/DropDownButton",
"dijit/form/ComboButton","dijit/form/ToggleButton"])});h=l("dijit.form.Button"+(m("dojo-bidi")?"_NoBidi":""),[e,d],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:c,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=
g.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&n.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){k.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);!this.showLabel&&!("title"in this.params)&&(this.titleNode.title=g.trim(this.containerNode.innerText||this.containerNode.textContent||
""))}});m("dojo-bidi")&&(h=l("dijit.form.Button",h,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return h})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(a,
l,n,m,k,g,h,e){l("dijit-legacy-requires")&&m(0,function(){require(["dijit/form/_FormValueWidget"])});return a("dijit.form._FormWidget",[k,h,g,e],{setDisabled:function(a){n.deprecated("setDisabled("+a+") is deprecated. Use set('disabled',"+a+") instead.","","2.0");this.set("disabled",a)},setValue:function(a){n.deprecated("dijit.form._FormWidget:setValue("+a+") is deprecated.  Use set('value',"+a+") instead.","","2.0");this.set("value",a)},getValue:function(){n.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.",
"","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name&&!l("msapp")?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(a,l,n,m,k,g,h,e,d,c){return l("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text",
"aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?n.set(this.focusNode,"disabled",b):this.focusNode.setAttribute("aria-disabled",b?"true":"false");this.valueNode&&n.set(this.valueNode,"disabled",b);b?(this._set("hovering",!1),this._set("active",!1),b="tabIndex"in this.attributeMap?
this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",a.forEach(k.isArray(b)?b:[b],function(a){a=this[a];e("webkit")||c.hasDefaultTabStop(a)?a.setAttribute("tabIndex","-1"):a.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var c=this.own(h(this.focusNode,"focus",function(){m.remove();c.remove()}))[0],g=e("pointer-events")?"pointerup":e("MSPointer")?"MSPointerUp":e("touch-events")?
"touchend, mouseup":"mouseup",m=this.own(h(this.ownerDocumentBody,g,k.hitch(this,function(a){m.remove();c.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){d.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=m.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(a){}},compare:function(a,
c){return"number"==typeof a&&"number"==typeof c?isNaN(a)&&isNaN(c)?0:a-c:a>c?1:a<c?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,c){if(void 0==this._lastValueReported&&(null===c||!this._onChangeActive))this._resetValue=this._lastValueReported=a;this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);if((this.intermediateChanges||c||void 0===c)&&this._pendingOnChange)this._lastValueReported=a,this._pendingOnChange=
!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)}))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(a,l,n,m){var k=
a("dijit.form._ButtonMixin"+(n("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(a){a.stopPropagation();a.preventDefault();this.disabled||this.valueNode.click(a);return!1},_onClick:function(a){if(this.disabled)return a.stopPropagation(),a.preventDefault(),!1;!1===this.onClick(a)&&a.preventDefault();var h=a.defaultPrevented;if(!h&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var e=this.domNode;e.parentNode;e=e.parentNode){var d=m.byNode(e);if(d&&"function"==
typeof d._onSubmit){d._onSubmit(a);a.preventDefault();h=!0;break}}return!h},postCreate:function(){this.inherited(arguments);l.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(a){this._set("label",a);(this.containerNode||this.focusNode).innerHTML=a;this.onLabelSet()},onLabelSet:function(){}});n("dojo-bidi")&&(k=a("dijit.form._ButtonMixin",k,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));return k})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),
function(a,l,n,m,k,g,h,e){return a("dijit.form.Form",[k,g,h,e],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(a){l.set(this.domNode,
"encType",a);m("ie")&&(this.domNode.encoding=a);this._set("encType",a)},reset:function(a){var c={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:a?a.target:this.domNode,target:a?a.target:this.domNode};!1!==this.onReset(c)&&c.returnValue&&this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(a){this.reset(a);a.stopPropagation();a.preventDefault();return!1},_onSubmit:function(a){var c=this.constructor.prototype;if(this.execute!=
c.execute||this.onExecute!=c.onExecute)n.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(a)&&(a.stopPropagation(),a.preventDefault())},onSubmit:function(){return this.isValid()},submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),
function(a,l,n,m,k,g,h){var e=a("dijit.form.ValidationTextBox",k,{templateString:h,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(a,c){c!=e.prototype[a]&&(l.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+a+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",c))},_setRegExpGenAttr:function(a){this._deprecateRegExp("regExpGen",
a);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(a){this._deprecateRegExp("regExp",a)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},validator:function(a,c){return RegExp("^(?:"+this._computeRegexp(c)+")"+(this.required?"":"?")+"$").test(a)&&(!this.required||!this._isEmpty(a))&&(this._isEmpty(a)||void 0!==this.parse(a,c))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,
this.get("constraints"))},_isEmpty:function(a){return(this.trim?/^\s*$/:/^$/).test(a)},getErrorMessage:function(){var a="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage,c="$_unset_$"==this.missingMessage?this.messages.missingMessage:!this.missingMessage?a:this.missingMessage;return this.required&&this._isEmpty(this.textbox.value)?c:a},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(a){var c=
"",b=this.disabled||this.isValid(a);b&&(this._maskValidSubsetError=!0);var e=this._isEmpty(this.textbox.value),g=!b&&a&&this._isValidSubset();this._set("state",b?"":((!this._hasBeenBlurred||a)&&e||g)&&(this._maskValidSubsetError||g&&!this._hasBeenBlurred&&a)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=a&&g,c=this.getErrorMessage(a)):"Incomplete"==this.state?(c=this.getPromptMessage(a),this._maskValidSubsetError=
!this._hasBeenBlurred||a):e&&(c=this.getPromptMessage(a));this.set("message",c);return b},displayMessage:function(a){a&&this.focused?g.show(a,this.domNode,this.tooltipPosition,!this.isLeftToRight()):g.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(a){this.constraints=n.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(a){!a.locale&&
this.lang&&(a.locale=this.lang);this._set("constraints",a);this._refreshState()},_setPatternAttr:function(a){this._set("pattern",a);this._refreshState()},_computeRegexp:function(a){var c=this.pattern;"function"==typeof c&&(c=c.call(this,a));if(c!=this._lastRegExp){var b="";this._lastRegExp=c;".*"!=c&&c.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":b+=a;break;case ")":b+="|$)";break;default:b+=
"(?:"+a+"|$)"}});try{"".search(b)}catch(e){b=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+b+")$"}return c},postMixInProperties:function(){this.inherited(arguments);this.messages=m.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(a){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(a){this._set("required",a);this.focusNode.setAttribute("aria-required",
a);this._refreshState()},_setMessageAttr:function(a){this._set("message",a);this.displayMessage(a)},reset:function(){this._maskValidSubsetError=!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){g.hide(this.domNode);this.inherited(arguments)}});return e})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b){e=a("dijit.form.TextBox"+(h("dojo-bidi")?"_NoBidi":""),[e,d],{templateString:c,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:h("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||
("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>h("ie")&&this.defer(function(){try{var a=n.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(d){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||
(this._attachPoints.push("_phspan"),this._phspan=l.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after"),this.own(g(this._phspan,"mousedown",function(a){a.preventDefault()}),g(this._phspan,"touchend, pointerup, MSPointerUp",k.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&
(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){m.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){m.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",
a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),this._updatePlaceHolder(),h("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.inherited(arguments),this._updatePlaceHolder())}});9>h("ie")&&(e.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},b._setSelectionRange=d._setSelectionRange=function(a,
b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});h("dojo-bidi")&&(e=a("dijit.form.TextBox",e,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return e})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(a,l,n,m){return a("dijit.form._FormValueWidget",[n,m],{_layoutHackIE7:function(){if(7==
l("ie"))for(var a=this.domNode,g=a.parentNode,h=a.firstChild||a,e=h.style.filter,d=this;g&&0==g.clientHeight;)(function(){var a=d.connect(g,"onscroll",function(){d.disconnect(a);h.style.filter=(new Date).getMilliseconds();d.defer(function(){h.style.filter=e})})})(),g=g.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on ./_FormWidgetMixin".split(" "),function(a,l,n,m,k,g){return a("dijit.form._FormValueMixin",g,{readOnly:!1,
_setReadOnlyAttr:function(a){l.set(this.focusNode,"readOnly",a);this._set("readOnly",a)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(a,e){this._handleOnChange(a,e)},_handleOnChange:function(a,e){this._set("value",a);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,!0)}})})},
"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(a,l,n,m,k,g,h,e){var d=l("dijit.form._TextBoxMixin"+(m("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,d){var e;void 0!==a&&(e=this.filter(a),
"string"!=typeof d&&(d=null!==e&&("number"!=typeof e||!isNaN(e))?this.filter(this.format(e,this.constraints)):"",0!=this.compare(e,this.filter(this.parse(d,this.constraints)))&&(d=null)));if(null!=d&&("number"!=typeof d||!isNaN(d))&&this.textbox.value!=d)this.textbox.value=d,this._set("displayedValue",this.get("displayedValue"));this.inherited(arguments,[e,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a=
"":"string"!=typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),
!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(h(this.textbox,"keydown, keypress, paste, cut, compositionend",g.hitch(this,function(a){var b;if("keydown"==a.type&&229!=a.keyCode){b=a.keyCode;switch(b){case k.SHIFT:case k.ALT:case k.CTRL:case k.META:case k.CAPS_LOCK:case k.NUM_LOCK:case k.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&
!a.altKey){switch(b){case k.NUMPAD_0:case k.NUMPAD_1:case k.NUMPAD_2:case k.NUMPAD_3:case k.NUMPAD_4:case k.NUMPAD_5:case k.NUMPAD_6:case k.NUMPAD_7:case k.NUMPAD_8:case k.NUMPAD_9:case k.NUMPAD_MULTIPLY:case k.NUMPAD_PLUS:case k.NUMPAD_ENTER:case k.NUMPAD_MINUS:case k.NUMPAD_PERIOD:case k.NUMPAD_DIVIDE:return}if(65<=b&&90>=b||48<=b&&57>=b||b==k.SPACE)return;b=!1;for(var d in k)if(k[d]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&
90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==k.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}var e={faux:!0},l;for(l in a)/^(layer[XY]|returnValue|keyLocation)$/.test(l)||(d=a[l],"function"!=typeof d&&"undefined"!=typeof d&&(e[l]=d));g.mixin(e,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){e._wasConsumed=!0;a.preventDefault()},
stopPropagation:function(){a.stopPropagation()}});this._lastInputProducingEvent=e;!1===this.onInput(e)&&(e.preventDefault(),e.stopPropagation());if(!e._wasConsumed&&9>=m("ie"))switch(a.keyCode){case k.TAB:case k.ESCAPE:case k.DOWN_ARROW:case k.UP_ARROW:case k.LEFT_ARROW:case k.RIGHT_ARROW:break;default:if(a.keyCode==k.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase())break;this.defer(function(){this.textbox.value!==this._lastInputEventValue&&h.emit(this.textbox,"input",{bubbles:!0})})}})),h(this.textbox,
"input",g.hitch(this,"_onInput")),h(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=g.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||
(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){!this.disabled&&!this.readOnly&&(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=h.once(this.domNode,"mouseup, touchend",g.hitch(this,function(a){this._isTextSelected()||d.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=
null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});m("dojo-bidi")&&(d=l("dijit.form._TextBoxMixin",d,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));d._setSelectionRange=e._setSelectionRange=function(a,b,
d){a.setSelectionRange&&a.setSelectionRange(b,d)};d.selectInputText=e.selectInputText=function(a,b,e){a=n.byId(a);isNaN(b)&&(b=0);isNaN(e)&&(e=a.value?a.value.length:0);try{a.focus(),d._setSelectionRange(a,b,e)}catch(g){}};return d})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w){function y(){}var f=l("dijit._MasterTooltip",[v,t],{duration:s.defaultDuration,templateString:r,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new u(this.domNode);this.fadeIn=n.fadeIn({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,"_onShow")});this.fadeOut=n.fadeOut({node:this.domNode,duration:this.duration,onEnd:e.hitch(this,"_onHide")})},show:function(a,f,b,c,d,g,k){if(!this.aroundNode||!(this.aroundNode===
f&&this.containerNode.innerHTML==a))if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;d&&this.set("textDir",d);this.containerNode.align=c?"right":"left";var m=q.around(this.domNode,f,b&&b.length?b:p.defaultPosition,!c,e.hitch(this,"orient")),l=m.aroundNodePos;"M"==m.corner.charAt(0)&&"M"==m.aroundCorner.charAt(0)?(this.connectorNode.style.top=l.y+(l.h-this.connectorNode.offsetHeight>>1)-m.y+"px",this.connectorNode.style.left=""):"M"==m.corner.charAt(1)&&
"M"==m.aroundCorner.charAt(1)?this.connectorNode.style.left=l.x+(l.w-this.connectorNode.offsetWidth>>1)-m.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");h.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=f;this.onMouseEnter=g||y;this.onMouseLeave=k||y}},orient:function(a,f,c,d,p){this.connectorNode.style.top="";var e=d.h;d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[f+"-"+c];this.domNode.style.width="auto";var h=g.position(this.domNode);if(b("ie")||b("trident"))h.w+=2;var k=Math.min(Math.max(d,1),h.w);g.setMarginBox(this.domNode,{w:k});"B"==c.charAt(0)&&"B"==f.charAt(0)?(a=g.position(a),f=
this.connectorNode.offsetHeight,a.h>e?(this.connectorNode.style.top=e-(p.h+f>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(p.h/2-f/2,0),a.h-f)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,h.w-d)},_onShow:function(){b("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=
!1,this.aroundNode=null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=y},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});b("dojo-bidi")&&f.extend({_setAutoTextDir:function(f){this.applyTextDir(f);a.forEach(f.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=
this.textDir}});w.showTooltip=function(b,c,d,e,g,h,k){d&&(d=a.map(d,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));p._masterTT||(w._masterTT=p._masterTT=new f);return p._masterTT.show(b,c,d,e,g,h,k)};w.hideTooltip=function(a){return p._masterTT&&p._masterTT.hide(a)};var p=l("dijit.Tooltip",v,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(f){a.forEach(this._connections||[],function(f){a.forEach(f,function(a){a.remove()})},
this);this._connectIds=a.filter(e.isArrayLike(f)?f:f?[f]:[],function(a){return m.byId(a,this.ownerDocument)},this);this._connections=a.map(this._connectIds,function(a){a=m.byId(a,this.ownerDocument);var f=this.selector,b=f?function(a){return c.selector(f,a)}:function(a){return a},p=this;return[c(a,b(d.enter),function(){p._onHover(this)}),c(a,b("focusin"),function(){p._onHover(this)}),c(a,b(d.leave),e.hitch(p,"_onUnHover")),c(a,b("focusout"),e.hitch(p,"set","state","DORMANT"))]},this);this._set("connectId",
f)},addTarget:function(f){f=f.id||f;-1==a.indexOf(this._connectIds,f)&&this.set("connectId",this._connectIds.concat(f))},removeTarget:function(f){f=a.indexOf(this._connectIds,f.id||f);0<=f&&(this._connectIds.splice(f,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);k.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var f=this.connectId;a.forEach(e.isArrayLike(f)?f:[f],this.addTarget,this)},getContent:function(a){return this.label||
this.domNode.innerHTML},state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(p.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state",
"SHOWING")},this.showDelay));break;case "SHOWING":var f=this.getContent(this._connectNode);if(!f){this.set("state","DORMANT");return}p.show(f,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,e.hitch(this,"set","state","SHOWING"),e.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&
a!=this._connectNode&&this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");a.forEach(this._connections||[],function(f){a.forEach(f,function(a){a.remove()})},this);this.inherited(arguments)}});
p._MasterTooltip=f;p.show=w.showTooltip;p.hide=w.hideTooltip;p.defaultPosition=["after-centered","before-centered"];return p})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(a,l,n,m,k,g,h){function e(c,b,d,e){var h=g.getEffectiveBox(c.ownerDocument);(!c.parentNode||"body"!=String(c.parentNode.tagName).toLowerCase())&&k.body(c.ownerDocument).appendChild(c);var m=null;a.some(b,function(a){var b=
a.corner,f=a.pos,p=0,g={w:{L:h.l+h.w-f.x,R:f.x-h.l,M:h.w}[b.charAt(1)],h:{T:h.t+h.h-f.y,B:f.y-h.t,M:h.h}[b.charAt(0)]},k=c.style;k.left=k.right="auto";d&&(p=d(c,a.aroundCorner,b,g,e),p="undefined"==typeof p?0:p);var n=c.style,r=n.display,u=n.visibility;"none"==n.display&&(n.visibility="hidden",n.display="");k=l.position(c);n.display=r;n.visibility=u;r={L:f.x,R:f.x-k.w,M:Math.max(h.l,Math.min(h.l+h.w,f.x+(k.w>>1))-k.w)}[b.charAt(1)];u={T:f.y,B:f.y-k.h,M:Math.max(h.t,Math.min(h.t+h.h,f.y+(k.h>>1))-
k.h)}[b.charAt(0)];f=Math.max(h.l,r);n=Math.max(h.t,u);r=Math.min(h.l+h.w,r+k.w);u=Math.min(h.t+h.h,u+k.h);r-=f;u-=n;p+=k.w-r+(k.h-u);if(null==m||p<m.overflow)m={corner:b,aroundCorner:a.aroundCorner,x:f,y:n,w:r,h:u,overflow:p,spaceAvailable:g};return!p});m.overflow&&d&&d(c,m.aroundCorner,m.corner,m.spaceAvailable,e);b=m.y;var u=m.x,r=k.body(c.ownerDocument);/relative|absolute/.test(n.get(r,"position"))&&(b-=n.get(r,"marginTop"),u-=n.get(r,"marginLeft"));r=c.style;r.top=b+"px";r.left=u+"px";r.right=
"auto";return m}var d={TL:"BR",TR:"BL",BL:"TR",BR:"TL"};return h.place={at:function(c,b,g,h,k){g=a.map(g,function(a){var c={corner:a,aroundCorner:d[a],pos:{x:b.x,y:b.y}};h&&(c.pos.x+="L"==a.charAt(1)?h.x:-h.x,c.pos.y+="T"==a.charAt(0)?h.y:-h.y);return c});return e(c,g,k)},around:function(c,b,d,g,h){function k(a,f){E.push({aroundCorner:a,corner:f,pos:{x:{L:x,R:x+K,M:x+(K>>1)}[a.charAt(1)],y:{T:z,B:z+A,M:z+(A>>1)}[a.charAt(0)]}})}var u;if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){if(u=
l.position(b,!0),/^(above|below)/.test(d[0])){var r=l.getBorderExtents(b),w=b.firstChild?l.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},y=l.getBorderExtents(c),f=c.firstChild?l.getBorderExtents(c.firstChild):{t:0,l:0,b:0,r:0};u.y+=Math.min(r.t+w.t,y.t+f.t);u.h-=Math.min(r.t+w.t,y.t+f.t)+Math.min(r.b+w.b,y.b+f.b)}}else u=b;if(b.parentNode){r="absolute"==n.getComputedStyle(b).position;for(b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){w=l.position(b,!0);y=n.getComputedStyle(b);/relative|absolute/.test(y.position)&&
(r=!1);if(!r&&/hidden|auto|scroll/.test(y.overflow)){var f=Math.min(u.y+u.h,w.y+w.h),p=Math.min(u.x+u.w,w.x+w.w);u.x=Math.max(u.x,w.x);u.y=Math.max(u.y,w.y);u.h=f-u.y;u.w=p-u.x}"absolute"==y.position&&(r=!0);b=b.parentNode}}var x=u.x,z=u.y,K="w"in u?u.w:u.w=u.width,A="h"in u?u.h:(m.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+z+", height:"+u.height+", width:"+K+" } has been deprecated.  Please use { x:"+x+", y:"+z+", h:"+u.height+", w:"+K+" }","","2.0"),u.h=u.height),E=[];a.forEach(d,
function(a){var f=g;switch(a){case "above-centered":k("TM","BM");break;case "below-centered":k("BM","TM");break;case "after-centered":f=!f;case "before-centered":k(f?"ML":"MR",f?"MR":"ML");break;case "after":f=!f;case "before":k(f?"TL":"TR",f?"TR":"TL");k(f?"BL":"BR",f?"BR":"BL");break;case "below-alt":f=!f;case "below":k(f?"BL":"BR",f?"TL":"TR");k(f?"BR":"BL",f?"TR":"TL");break;case "above-alt":f=!f;case "above":k(f?"TL":"TR",f?"BL":"BR");k(f?"TR":"TL",f?"BR":"BL");break;default:k(a.aroundCorner,
a.corner)}});c=e(c,E,h,{w:K,h:A});c.aroundNodePos=u;return c}}})},"esri/identity/OAuthSignInHandler":function(){define("./Credential ../core/domUtils ../core/lang ../core/urlUtils dijit/Dialog dijit/registry dojo/_base/config dojo/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/identity dojo/io-query dojo/sniff dijit/form/Button dojo/query".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s,q){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(a,d,g,h){var k=this._oAuthDfd=new e;k.resUrl_=a;k.sinfo_=d;k.oinfo_=g;var m=!h||!1!==h.oAuthPopupConfirmation;if(!g.popup||!m)return this._doOAuthSignIn(a,d,g),k.promise;this._nls||(this._nls=b);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());a=this.oAuthDialog;d=h&&h.error;h=h&&h.token;l.hide(a.errMsg_);d&&(403==d.code&&h)&&(c.set(a.errMsg_,"innerHTML",this._nls.forbidden),l.show(a.errMsg_));a.show();
return k.promise},setOAuthResponseHash:function(b){var c=this._oAuthDfd;this._oAuthDfd=null;if(c&&b)if(clearInterval(this._oAuthIntervalId),"#"===b.charAt(0)&&(b=b.substring(1)),b=s.queryToObject(b),b.error)b=Error("access_denied"===b.error?"ABORTED":"OAuth: "+b.error+" - "+b.error_description),b.code="IdentityManagerBase.2",b.log=h.isDebug,c.reject(b);else{var d=c.oinfo_._oAuthCred,e=new a({userId:b.username,server:c.sinfo_.server,token:b.access_token,expires:(new Date).getTime()+1E3*Number(b.expires_in),
ssl:"true"===b.ssl,_oAuthCred:d});d.storage=b.persist?window.localStorage:window.sessionStorage;d.token=e.token;d.expires=e.expires;d.userId=e.userId;d.ssl=e.ssl;d.save();c.resolve(e)}},_createOAuthDialog:function(){var a=this._nls,b=n.substitute(a,this._oAuthDialogContent),c=new k({title:a.title,content:b,"class":"esri-widget esriOAuthSignInDialog esriIdentityDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=c.esriIdMgr_._oAuthDfd;c.hide_();c.esriIdMgr_._doOAuthSignIn(a.resUrl_,
a.sinfo_,a.oinfo_)},cancel_:function(){var a=c.esriIdMgr_._oAuthDfd;c.esriIdMgr_._oAuthDfd=null;c.hide_();var b=Error("ABORTED");b.code="IdentityManager.2";b.log=h.isDebug;a.reject(b)},hide_:function(){l.hide(c.errMsg_);c.hide();k._DialogLevelManager.hide(c)}}),a=c.domNode;c.btnSubmit_=g.byNode(d.query(".esriIdSubmit",a)[0]);c.btnCancel_=g.byNode(d.query(".esriIdCancel",a)[0]);c.errMsg_=d.query(".esriErrorMsg",a)[0];c.connect(c.btnSubmit_,"onClick",c.execute_);c.connect(c.btnCancel_,"onClick",c.onCancel);
c.connect(c,"onCancel",c.cancel_);return c},_doOAuthSignIn:function(a,b,c){var d=this,e={client_id:c.appId,response_type:"token",state:JSON.stringify({portalUrl:c.portalUrl}),expiration:c.expiration,locale:c.locale,redirect_uri:c.popup?m.makeAbsolute(c.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};c.forceLogin&&(e.force_login=!0);c.showSocialLogins&&(e.showSocialLogins=!0);var g=c.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",f=g+"?"+s.objectToQuery(e);if(c.popup){var p;
7===q("ie")?(p=window.open(c.popupCallbackUrl,"esriJSAPIOAuth",c.popupWindowFeatures),p.location=f):p=window.open(f,"esriJSAPIOAuth",c.popupWindowFeatures);p?(p.focus(),this._oAuthDfd.oAuthWin_=p,this._oAuthIntervalId=setInterval(function(){if(p.closed){clearInterval(d._oAuthIntervalId);var a=d._oAuthDfd;if(a){var f=Error("ABORTED");f.code="IdentityManager.2";f.log=h.isDebug;a.reject(f)}}},500)):(a=Error("ABORTED"),a.code="IdentityManager.2",a.log=h.isDebug,this._oAuthDfd.reject(a))}else this._oAuthRedirectFunc?
this._oAuthRedirectFunc({authorizeParams:e,authorizeUrl:g,resourceUrl:a,serverInfo:b,oAuthInfo:c}):window.location=f}}})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/kebabDictionary ../geometry/Extent ../geometry/support/webMercatorUtils ../geometry/SpatialReference dojo/_base/lang".split(" "),function(a,l,n,m,k,g,h,e,d,c,b){var s=h({avgRating:"avg-rating",
numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return function(a){function g(b){a.call(this);this.disableExtraQuery=!1;this.extent=null;this.num=10;this.sortField=this.query=null;this.start=1}n(g,a);Object.defineProperty(g.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){("asc"===a||"desc"===a)&&this._set("sortOrder",a)},enumerable:!0,configurable:!0});g.prototype.clone=function(){return new g({disableExtraQuery:this.disableExtraQuery,
extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};g.prototype.toRequestOptions=function(a,e){var g;if(this.extent){var h=d.project(this.extent,c.WGS84);h&&(g=h.xmin+","+h.ymin+","+h.xmax+","+h.ymax)}h=this.query;!this.disableExtraQuery&&a.extraQuery&&(h="("+h+")"+a.extraQuery);g={bbox:g,q:h,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(g.sortField=s.toJSON(this.sortField),
g.sortOrder=this.sortOrder);return{query:b.mixin(e,g)}};m([k.property()],g.prototype,"disableExtraQuery",void 0);m([k.property({type:e})],g.prototype,"extent",void 0);m([k.property()],g.prototype,"num",void 0);m([k.property()],g.prototype,"query",void 0);m([k.property()],g.prototype,"sortField",void 0);m([k.property()],g.prototype,"sortOrder",null);m([k.property()],g.prototype,"start",void 0);return g=m([k.subclass("esri.portal.PortalQueryParams")],g)}(k.declared(g))})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor".split(" "),
function(a,l,n,m,k,g){return function(a){function e(d){a.call(this);this.total=this.results=this.queryParams=this.nextQueryParams=null}n(e,a);m([k.property()],e.prototype,"nextQueryParams",void 0);m([k.property()],e.prototype,"queryParams",void 0);m([k.property()],e.prototype,"results",void 0);m([k.property()],e.prototype,"total",void 0);return e=m([k.subclass("esri.portal.PortalQueryResult")],e)}(k.declared(g))})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport ./PortalFolder ./PortalGroup ../core/promiseUtils ../core/requireUtils dojo/promise/all".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s){return function(h){function l(){h.call(this);this.username=this.roleId=this.role=this.region=this.privileges=this.preferredView=this.portal=this.orgId=this.modified=this.fullName=this.email=this.description=this.culture=this.created=this.access=null}n(l,h);Object.defineProperty(l.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b):null},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,
"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0});Object.defineProperty(l.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0});l.prototype.addItem=function(a){var b=this,c=a&&a.item,d=a&&a.data;a=a&&a.folder;var e={method:"post"};c&&(e.query=c._getPostQuery(),null!=d&&("string"===typeof d?e.query.text=d:"object"===
typeof d&&(e.query.text=JSON.stringify(d))));d=this.userContentUrl;a&&(d+="/"+a.id);return this.portal._request(d+"/addItem",e).then(function(a){c.id=a.id;c.portal=b.portal;return c.loaded?c._reload():c.load()})};l.prototype.deleteItem=function(a){var b=this.userContentUrl;a.ownerFolder&&(b+="/"+a.ownerFolder);return this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=null;a.portal=null})};l.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,
{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=e.fromJSON(b);b.portal=a.portal;return b}):[]})};l.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(b){return b&&b.groups?b.groups.map(function(b){b=d.fromJSON(b);b.portal=a.portal;return b}):[]})};l.prototype.fetchItems=function(c){var d=this;c||(c={});var e=this.userContentUrl;c.folder&&(e+="/"+c.folder.id);var g;return b.when(a,"./PortalItem").then(function(a){g=a;return d.portal._request(e,
{query:{folders:!1,num:c.num||10,start:c.start||1}})}).then(function(a){var f;return a&&a.items?(f=a.items.map(function(a){a=g.fromJSON(a);a.portal=d.portal;a.load();return a}),s(f).always(function(){return{items:f,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};l.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new d({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(a)):c.reject(new g("internal:unknown","Unknown internal error",
{internalError:"Unknown favGroupId"}))};l.prototype.toJSON=function(){throw new g("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};m([k.property()],l.prototype,"access",void 0);m([k.property({type:Date})],l.prototype,"created",void 0);m([k.property()],l.prototype,"culture",void 0);m([k.property()],l.prototype,"description",void 0);m([k.property()],l.prototype,"email",void 0);m([k.property()],l.prototype,"favGroupId",void 0);m([k.property()],l.prototype,"fullName",void 0);
m([k.property({type:Date})],l.prototype,"modified",void 0);m([k.property()],l.prototype,"orgId",void 0);m([k.property()],l.prototype,"portal",void 0);m([k.property()],l.prototype,"preferredView",void 0);m([k.property()],l.prototype,"privileges",void 0);m([k.property()],l.prototype,"region",void 0);m([k.property()],l.prototype,"role",void 0);m([k.property()],l.prototype,"roleId",void 0);m([k.property()],l.prototype,"thumbnail",void 0);m([k.property({dependsOn:["url","thumbnail","portal.credential.token"],
readOnly:!0})],l.prototype,"thumbnailUrl",null);m([k.property({dependsOn:["portal.restUrl"],readOnly:!0})],l.prototype,"userContentUrl",null);m([k.property({dependsOn:["portal.restUrl"],readOnly:!0})],l.prototype,"url",null);m([k.property()],l.prototype,"username",void 0);return l=m([k.subclass("esri.portal.PortalUser")],l)}(k.declared(h))})},"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport".split(" "),
function(a,l,n,m,k,g,h){return function(a){function d(c){a.call(this);this.username=this.title=this.portal=this.id=this.created=null}n(d,a);Object.defineProperty(d.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+"/"+this.id:null},enumerable:!0,configurable:!0});d.prototype.toJSON=function(){throw new g("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};m([k.property({type:Date})],d.prototype,"created",void 0);
m([k.property()],d.prototype,"id",void 0);m([k.property()],d.prototype,"portal",void 0);m([k.property()],d.prototype,"title",void 0);m([k.property({dependsOn:["portal.restUrl"],readOnly:!0})],d.prototype,"url",null);m([k.property()],d.prototype,"username",void 0);return d=m([k.subclass("esri.portal.PortalFolder")],d)}(k.declared(h))})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/accessorSupport/decorators ../core/Error ../core/JSONSupport ./PortalQueryParams".split(" "),
function(a,l,n,m,k,g,h,e,d){return function(a){function b(b){a.call(this);this.id=this.description=this.created=this.access=null;this.isInvitationOnly=!1;this.title=this.tags=this.sortOrder=this.sortField=this.snippet=this.portal=this.owner=this.modified=null}n(b,a);Object.defineProperty(b.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0});b.prototype.fetchMembers=function(){return this.portal._request(this.url+
"/users")};b.prototype.toJSON=function(){throw new h("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};b.prototype.queryItems=function(a){a=a?a.clone():new d;a.query="group:"+this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a)};m([g.property()],b.prototype,"access",void 0);m([g.property({type:Date})],b.prototype,"created",void 0);m([g.property()],b.prototype,"description",void 0);m([g.property()],b.prototype,"id",void 0);m([g.property()],b.prototype,"isInvitationOnly",
void 0);m([g.property({type:Date})],b.prototype,"modified",void 0);m([g.property()],b.prototype,"owner",void 0);m([g.property()],b.prototype,"portal",void 0);m([g.property()],b.prototype,"snippet",void 0);m([g.property()],b.prototype,"sortField",void 0);m([g.property()],b.prototype,"sortOrder",void 0);m([g.property()],b.prototype,"tags",void 0);m([g.property()],b.prototype,"title",void 0);m([g.property({dependsOn:["portal.restUrl"],readOnly:!0})],b.prototype,"url",null);m([k(0,g.cast(d))],b.prototype,
"queryItems",null);return b=m([g.subclass("esri.portal.PortalGroup")],b)}(g.declared(e))})},"esri/portal/PortalItem":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Error ../core/lang ../geometry/Extent ../core/JSONSupport ../core/Loadable ./Portal ../core/promiseUtils".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s){return function(c){function d(a){c.call(this);this.url=this.typeKeywords=this.type=
this.title=this.tags=this.snippet=this.portal=this.owner=this.name=this.modified=this.itemControl=this.id=this.extent=this.description=this.created=this.access=null}n(d,c);Object.defineProperty(d.prototype,"displayName",{get:function(){var a=this.type,b=this.typeKeywords||[],c=a;"Feature Service"===a||"Feature Collection"===a?c=-1<b.indexOf("Table")?"Table":-1<b.indexOf("Route Layer")?"Route Layer":"Feature Layer":"Image Service"===a?c=-1<b.indexOf("Elevation 3D Layer")?"Elevation Layer":"Imagery Layer":
"Scene Service"===a?c="Scene Layer":"Scene Package"===a?c="Scene Layer Package":"Stream Service"===a?c="Feature Layer":"Microsoft Powerpoint"===a?c="Microsoft PowerPoint":"GeoJson"===a?c="GeoJSON":"Globe Service"===a?c="Globe Layer":"Vector Tile Service"===a?c="Tile Layer":"Map Service"===a?c=-1<b.indexOf("Hosted Service")||-1<b.indexOf("Tiled")?"Tile Layer":"Map Image Layer":a&&-1<a.toLowerCase().indexOf("add in")?c=a.replace(/(add in)/ig,"Add-In"):"datastore catalog service"===a&&(c="Big Data File Share");
return c},enumerable:!0,configurable:!0});d.prototype.readExtent=function(a){return a&&a.length?new e(a[0][0],a[0][1],a[1][0],a[1][1]):null};Object.defineProperty(d.prototype,"iconUrl",{get:function(){var b=this.type&&this.type.toLowerCase()||"",c=this.typeKeywords||[],d=!1,e=!1,g=!1;0<b.indexOf("service")||"feature collection"===b||"kml"===b||"wms"===b||"wmts"===b||"wfs"===b?(d=-1<c.indexOf("Hosted Service"),"feature service"===b||"feature collection"===b||"kml"===b||"wfs"===b?(e=-1<c.indexOf("Table"),
g=-1<c.indexOf("Route Layer"),b=e?"table":g?"routelayer":d?"featureshosted":"features"):b="map service"===b||"wms"===b||"wmts"===b?d||-1<c.indexOf("Tiled")||"wmts"===b?"maptiles":"mapimages":"scene service"===b?-1<c.indexOf("Line")?"sceneweblayerline":-1<c.indexOf("3DObject")?"sceneweblayermultipatch":-1<c.indexOf("Point")?"sceneweblayerpoint":-1<c.indexOf("IntegratedMesh")?"sceneweblayermesh":-1<c.indexOf("PointCloud")?"sceneweblayerpointcloud":-1<c.indexOf("Polygon")?"sceneweblayerpolygon":"sceneweblayer":
"image service"===b?-1<c.indexOf("Elevation 3D Layer")?"elevationlayer":"imagery":"stream service"===b?"streamlayer":"vector tile service"===b?"vectortile":"datastore catalog service"===b?"datastorecollection":"layers"):b="web map"===b||"cityengine web scene"===b?"maps":"web scene"===b?-1<c.indexOf("ViewingMode-Local")?"webscenelocal":"websceneglobal":"web mapping application"===b||"mobile application"===b||"application"===b||"operation view"===b||"desktop application"===b?"apps":"map document"===
b||"map package"===b||"published map"===b||"scene document"===b||"globe document"===b||"basemap package"===b||"mobile basemap package"===b||"mobile map package"===b||"project package"===b||"project template"===b||"pro map"===b||"layout"===b||"layer"===b&&-1<c.indexOf("ArcGIS Pro")||"explorer map"===b&&c.indexOf("Explorer Document")?"mapsgray":"service definition"===b||"csv"===b||"shapefile"===b||"cad drawing"===b||"geojson"===b||"360 vr experience"===b?"datafiles":"explorer add in"===b||"desktop add in"===
b||"windows viewer add in"===b||"windows viewer configuration"===b?"appsgray":"arcgis pro add in"===b?"addindesktop":"rule package"===b||"file geodatabase"===b||"csv collection"===b||"kml collection"===b||"windows mobile package"===b||"map template"===b||"desktop application template"===b||"arcpad package"===b||"code sample"===b||"form"===b||"document link"===b||"vector tile package"===b||"operations dashboard add in"===b||"rules package"===b||"image"===b||"workflow manager package"===b||"desktop style"===
b||"explorer map"===b&&-1<c.indexOf("Explorer Mapping Application")||-1<c.indexOf("Document")?"datafilesgray":"geocoding service"===b||"network analysis service"===b||"geoprocessing service"===b||"geodata service"===b||"geometry service"===b||"geoprocessing package"===b||"locator package"===b||"geoprocessing sample"===b||"workflow manager service"===b||"raster function template"===b?"toolsgray":"layer"===b||"layer package"===b||"explorer layer"===b?"layersgray":"scene package"===b?"scenepackage":
"tile package"===b?"tilepackage":"task file"===b?"taskfile":"report template"===b?"report-template":"statistical data collection"===b?"statisticaldatacollection":"insights workbook"===b?"workbook":"insights model"===b?"insightsmodel":"insights page"===b?"insightspage":"relational database connection"===b?"relationaldatabaseconnection":"big data file share"===b?"datastorecollection":"image collection"===b?"imagecollection":"maps";return b?a.toUrl("../images/portal/"+b+"16.png"):null},enumerable:!0,
configurable:!0});Object.defineProperty(d.prototype,"isLayer",{get:function(){return-1<"Map Service;Feature Service;Feature Collection;Scene Service;Image Service;Stream Service;Vector Tile Service".split(";").indexOf(this.type)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"itemUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/items/"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"userItemUrl",{get:function(){var a=this.get("portal.restUrl");
if(!a)return null;var b=this.owner||this.get("portal.user.username");return!b?null:a+"/content/users/"+(this.ownerFolder?b+"/"+this.ownerFolder:b)+"/items/"+this.id},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"thumbnailUrl",{get:function(){var a=this.itemUrl,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b):null},enumerable:!0,configurable:!0});d.prototype.load=function(){var a=this;this.portal||(this.portal=b.getDefault());var c=this.portal.load().then(function(){return a.resourceInfo?
a.resourceInfo:a.id&&a.itemUrl?a.portal._request(a.itemUrl):{}}).then(function(b){a.resourceInfo=b;a.read(b)});this.addResolvingPromise(c);return this};d.prototype.fetchData=function(a){void 0===a&&(a="json");return this.portal._request(this.itemUrl+"/data",{responseType:a})};d.prototype.fetchRelatedItems=function(a){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:a},"PortalItem")};d.prototype.update=function(a){var b=this;if(!this.id)return s.reject(new g("portal:item-does-not-exist",
"The item does not exist yet and cannot be updated"));var c=a&&a.data;a={method:"post"};a.query=this._getPostQuery();for(var d in a.query)null===a.query[d]&&(a.query[d]="");a.query.clearEmptyFields=!0;null!=c&&("string"===typeof c?a.query.text=c:"object"===typeof c&&(a.query.text=JSON.stringify(c)));return(d=this.userItemUrl)?this.portal._request(d+"/update",a).then(function(){return b.loaded?b._reload():b.load()}):s.reject(new g("portal:not-signed-in","Not signed in"))};d.prototype.toJSON=function(){var a=
this.extent,a={created:this.created&&this.created.getTime(),description:this.description,extent:a&&[[a.xmin,a.ymin],[a.xmax,a.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return h.fixJson(a)};d.fromJSON=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");
return new d({resourceInfo:a})};d.prototype._reload=function(){var a=this;return this.portal._request(this.itemUrl,{query:{_ts:(new Date).getTime()}}).then(function(b){a.resourceInfo=b;a.read(b);return a})};d.prototype._getPostQuery=function(){var a=this.toJSON(),b;for(b in a)"tags"===b&&null!==a[b]&&(a[b]=a[b].join(", ")),"typeKeywords"===b&&null!==a[b]&&(a[b]=a[b].join(", "));return a};m([k.property()],d.prototype,"access",void 0);m([k.property({type:Date})],d.prototype,"created",void 0);m([k.property()],
d.prototype,"description",void 0);m([k.property({dependsOn:["type","typeKeywords"],readOnly:!0})],d.prototype,"displayName",null);m([k.property({type:e})],d.prototype,"extent",void 0);m([k.read("extent")],d.prototype,"readExtent",null);m([k.property({dependsOn:["type","typeKeywords"],readOnly:!0})],d.prototype,"iconUrl",null);m([k.property()],d.prototype,"id",void 0);m([k.property({dependsOn:["type"],readOnly:!0})],d.prototype,"isLayer",null);m([k.property()],d.prototype,"itemControl",void 0);m([k.property({dependsOn:["portal.restUrl",
"id"],readOnly:!0})],d.prototype,"itemUrl",null);m([k.property({type:Date})],d.prototype,"modified",void 0);m([k.property()],d.prototype,"name",void 0);m([k.property()],d.prototype,"owner",void 0);m([k.property()],d.prototype,"ownerFolder",void 0);m([k.property({type:b})],d.prototype,"portal",void 0);m([k.property()],d.prototype,"resourceInfo",void 0);m([k.property({dependsOn:["portal.restUrl","portal.user.username","owner","ownerFolder","id"],readOnly:!0})],d.prototype,"userItemUrl",null);m([k.property()],
d.prototype,"snippet",void 0);m([k.property()],d.prototype,"tags",void 0);m([k.property()],d.prototype,"thumbnail",void 0);m([k.property({dependsOn:["itemUrl","thumbnail","portal.credential.token"],readOnly:!0})],d.prototype,"thumbnailUrl",null);m([k.property()],d.prototype,"title",void 0);m([k.property()],d.prototype,"type",void 0);m([k.property()],d.prototype,"typeKeywords",void 0);m([k.property()],d.prototype,"url",void 0);return d=m([k.subclass("esri.portal.PortalItem")],d)}(k.declared(d,c))})},
"esri/support/groundUtils":function(){define(["require","exports","../core/accessorSupport/ensureType","../Ground","../layers/ElevationLayer"],function(a,l,n,m,k){l.groundElevationLayers={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer"}};l.ensureType=function(a){var h;"string"===typeof a?a in l.groundElevationLayers?(a=l.groundElevationLayers[a],a=new k({id:a.id,url:a.url}),h=new m({layers:[a]})):console.warn("Unable to find ground definition for: "+
a+'. Try "world-elevation"'):h=n.default(m,a);return h}})},"esri/layers/ElevationLayer":function(){define("dojo/_base/lang ./TiledLayer ./mixins/ArcGISMapService ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ../core/Error ../request ../core/promiseUtils".split(" "),function(a,l,n,m,k,g,h,e,d){return l.createSubclass([n,m,k,g],{declaredClass:"esri.layers.ElevationLayer",viewModulePaths:{"3d":"../views/3d/layers/ElevationLayerView3D"},normalizeCtorArgs:function(c,b){return"string"===
typeof c?a.mixin({},{url:c},b):c},load:function(){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:function(a){for(var b=0;b<a.typeKeywords.length;b++)if("elevation 3d layer"===a.typeKeywords[b].toLowerCase())return!0;throw new h("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"});}}).always(this._fetchImageService.bind(this)))},
properties:{operationalLayerType:"ArcGISTiledElevationServiceLayer"},_fetchImageService:function(){return d.resolve().then(function(){return this.resourceInfo||e(this.parsedUrl.path,{query:a.mixin({f:"json"},this.parsedUrl.query),responseType:"json",callbackParamName:"callback"})}.bind(this)).then(function(a){a.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));this.read(a.data,{origin:"service",url:this.parsedUrl})}.bind(this))}})})},"esri/layers/mixins/ArcGISMapService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ArcGISService ./ScaleRangeLayer ../../geometry/Extent ../../geometry/SpatialReference".split(" "),
function(a,l,n,m,k,g,h,e,d){return function(a){function b(){a.apply(this,arguments);this.version=this.spatialReference=this.fullExtent=this.copyright=null}n(b,a);b.prototype.readCapabilities=function(a,b){return a&&a.split(",").map(function(a){return a.trim()})};b.prototype.readCopyright=function(a,b){return b.copyrightText};b.prototype.readLegendEnabled=function(a,b){return b.showLegend};b.prototype.readPopupEnabled=function(a,b){return!b.disablePopup};b.prototype.readVersion=function(a,b){var c=
b.currentVersion;c||(c=b.hasOwnProperty("capabilities")||b.hasOwnProperty("tables")?10:b.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3);return c};m([k.property()],b.prototype,"capabilities",void 0);m([k.read("service","capabilities")],b.prototype,"readCapabilities",null);m([k.property()],b.prototype,"copyright",void 0);m([k.read("copyright",["copyrightText"])],b.prototype,"readCopyright",null);m([k.property({type:e})],b.prototype,"fullExtent",void 0);m([k.property({json:{origins:{service:{readable:!1}}}})],
b.prototype,"id",void 0);m([k.property()],b.prototype,"legendEnabled",void 0);m([k.read("legendEnabled",["showLegend"])],b.prototype,"readLegendEnabled",null);m([k.read("popupEnabled",["disablePopup"])],b.prototype,"readPopupEnabled",null);m([k.property({type:d})],b.prototype,"spatialReference",void 0);m([k.property()],b.prototype,"version",void 0);m([k.read("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],b.prototype,"readVersion",null);return b=m([k.subclass("esri.layers.mixins.ArcGISMapService")],
b)}(k.declared(g,h))})},"esri/layers/mixins/ArcGISService":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/MultiOriginJSONSupport ../support/arcgisLayerUrl".split(" "),function(a,l,n,m,k,g,h){return function(a){function d(){a.apply(this,arguments)}n(d,a);Object.defineProperty(d.prototype,"title",{get:function(){if(this._get("title"))return this._get("title");if(this.url){var a=h.parse(this.url);
if(a&&a.title)return a.title}else return""},enumerable:!0,configurable:!0});m([k.property({dependsOn:["url"]})],d.prototype,"title",null);m([k.property()],d.prototype,"url",void 0);return d=m([k.subclass("esri.layers.mixins.ArcGISService")],d)}(k.declared(g))})},"esri/core/MultiOriginJSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./accessorSupport/decorators ./Accessor ./accessorSupport/read ./accessorSupport/write ./accessorSupport/utils ./accessorSupport/MultiOriginStore ./accessorSupport/PropertyOrigin".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b){function s(a){return d.getProperties(a).store}return function(a){function g(){a.call(this);var e=d.getProperties(this),h=e.store,k=new c.default;e.store=k;h.keys().forEach(function(a){k.set(a,h.get(a),b.OriginId.DEFAULTS)})}n(g,a);g.prototype.read=function(a,b){h.default(this,a,b);return this};g.prototype.write=function(a,b){a=a||{};e.default(this,a,b);return a};g.prototype.getAtOrigin=function(a,c){var d=s(this),e=b.nameToId(c);if("string"===typeof a)return d.get(a,
e);var g={};a.forEach(function(a){g[a]=d.get(a,e)});return g};g.prototype.originOf=function(a){var c=s(this);if("string"===typeof a)return b.idToName(c.originOf(a));a.forEach(function(a){b.idToName(c.originOf(a))})};g.prototype.revert=function(a,c){var e=s(this),g=b.nameToId(c),h=d.getProperties(this);("string"===typeof a?"*"===a?Object.keys(e.getAll(g)):[a]:a).forEach(function(a){h.propertyInvalidated(a);e.revert(a,g);h.propertyCommitted(a)})};g.prototype.removeOrigin=function(a){var c=s(this);a=
b.nameToId(a);var d=c.getAll(a),e;for(e in d)c.originOf(e)===a&&c.set(e,d[e],b.OriginId.USER)};g.prototype.updateOrigin=function(a,c){var d=s(this),e=b.nameToId(c),g=this.get(a);d.clear(a);d.set(a,g,e)};return g=m([k.subclass("esri.core.MultiOriginJSONSupport")],g)}(k.declared(g))})},"esri/core/accessorSupport/MultiOriginStore":function(){define(["require","exports","./PropertyOrigin"],function(a,l,n){a=function(){function a(){this._propertyOriginMap={};this._originStores=Array(n.OriginId.NUM);this._values=
{}}a.prototype.get=function(a,g){var h=void 0===g?this._values:this._originStores[g];return h?h[a]:void 0};a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,g,h){void 0===h&&(h=n.OriginId.USER);var e=this._originStores[h];e||(e={},this._originStores[h]=e);e[a]=g;return!(a in this._values)||this._propertyOriginMap[a]<=h?(e=this._values[a],this._values[a]=g,this._propertyOriginMap[a]=h,e!==g):!1};a.prototype.clear=function(a,g){void 0===g&&(g=n.OriginId.USER);
var h=this._originStores[g];if(h){var e=h[a];delete h[a];if(a in this._values&&this._propertyOriginMap[a]===g){delete this._values[a];for(h=g-1;0<=h;h--){var d=this._originStores[h];if(d&&a in d){this._values[a]=d[a];this._propertyOriginMap[a]=h;break}}}return e}};a.prototype.has=function(a,g){var h=void 0===g?this._values:this._originStores[g];return h?a in h:!1};a.prototype.revert=function(a,g){for(;0<g&&!this.has(a,g);)--g;var h=this._originStores[g],h=h&&h[a],e=this._values[a];this._values[a]=
h;this._propertyOriginMap[a]=g;return e!==h};a.prototype.originOf=function(a,g){return this._propertyOriginMap[a]||n.OriginId.DEFAULTS};a.prototype.getAll=function(a){return this._originStores[a]};return a}();Object.defineProperty(l,"__esModule",{value:!0});l.default=a})},"esri/layers/support/arcgisLayerUrl":function(){define(["require","exports","../../core/urlUtils"],function(a,l,n){function m(a){var h=n.urlToObject(a).path.match(l.match);if(!h)return null;a=h[1];var e=h[2],d=h[3],h=h[4],c=e.indexOf("/");
-1!==c&&(e=e.slice(c+1));return{title:k(e),serverType:d,sublayer:null!=h&&""!==h?parseInt(h,10):null,url:{path:a}}}function k(a){a=a.replace(/\s*[/_]+\s*/g," ");return a[0].toUpperCase()+a.slice(1)}l.serverTypes=["MapServer","ImageServer","FeatureServer","SceneServer","StreamServer"];l.match=RegExp("^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/("+l.serverTypes.join("|")+"))(?:\\/(?:layers\\/)?(\\d+))?","i");l.test=function(a){return!!l.match.test(a)};l.parse=m;l.cleanTitle=k;l.titleFromUrlAndName=
function(a,h){var e=[];if(a){var d=m(a);d&&d.title&&e.push(d.title)}h&&(d=k(h),e.push(d));if(2===e.length){if(-1!==e[0].toLowerCase().indexOf(e[1].toLowerCase()))return e[0];if(-1!==e[1].toLowerCase().indexOf(e[0].toLowerCase()))return e[1]}return e.join(" - ")};l.isHostedAgolService=function(a){if(!a)return!1;a=a.toLowerCase();var h=-1!==a.indexOf(".arcgis.com/");a=-1!==a.indexOf("//services")||-1!==a.indexOf("//tiles")||-1!==a.indexOf("//features");return h&&a}})},"esri/layers/mixins/ScaleRangeLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor".split(" "),
function(a,l,n,m,k,g){return function(a){function e(){a.apply(this,arguments);this.maxScale=this.minScale=0}n(e,a);m([k.property({json:{writeWith:["maxScale"],writable:!0}})],e.prototype,"minScale",void 0);m([k.property({json:{writeWith:["minScale"],writable:!0}})],e.prototype,"maxScale",void 0);return e=m([k.subclass("esri.layers.mixins.ScaleRangeLayer")],e)}(k.declared(g))})},"esri/layers/mixins/ArcGISCachedService":function(){define("dojo/_base/lang dojo/io-query ./ArcGISService ./ScaleRangeLayer ../../core/urlUtils ../support/TileInfo ../support/TileMap".split(" "),
function(a,l,n,m,k,g,h){return n.createSubclass([m],{declaredClass:"esri.layers.mixins.ArcGISCachedService",properties:{minScale:{json:{origins:{service:{readable:!1}}}},maxScale:{json:{origins:{service:{readable:!1}}}},resampling:!0,supportsBlankTile:{value:!1,readOnly:!0,dependsOn:["version"],get:function(){return 10.2<=this.version}},tileInfo:{value:null,type:g,json:{read:function(a,d){var c=d.minScale?d.minScale:Infinity,b=d.maxScale?d.maxScale:-Infinity;return a?(a.lods=a.lods.filter(function(a){return a.scale<=
c&&a.scale>=b}),g.fromJSON(a)):null}}},tileMap:{value:null,json:{readFrom:["capabilities"],read:function(a,d){return d.capabilities&&-1<d.capabilities.indexOf("Tilemap")?new h({layer:this}):null}}},refreshTimestamp:null,version:{}},refresh:function(){this.refreshTimestamp=Date.now();this.inherited(arguments)},getTileUrl:function(e,d,c){var b=a.mixin({},this.parsedUrl.query,{token:this.token,blankTile:!this.tileMap&&this.resampling&&this.supportsBlankTile?!1:null,_ts:this.refreshTimestamp});e=this.parsedUrl.path+
"/tile/"+e+"/"+d+"/"+c;b=l.objectToQuery(b);return k.addProxy(e+(b?"?"+b:""))}})})},"esri/layers/support/TileMap":function(){define("../../core/declare dojo/_base/lang dojo/_base/array dojo/io-query ../../request ../../core/urlUtils ../../core/Accessoire".split(" "),function(a,l,n,m,k,g,h){var e=function(a,b,d){this.id=[a,b,d].join("/");this.level=a;this.row=b;this.col=d},d=function(a,b,d,e,g){this.id=[a,b,d,e,g].join("/");this.level=a;this.row=b;this.col=d;this.width=e;this.height=g;this.promise=
this.location=this.valid=this.dataValue=this.data=null};d.prototype={setData:function(a){var b=a?a.data:null,d=null,e;l.mixin(this,a||{});if(b&&0<b.length)if(e=b.length,1===e)d=b[0];else{d=b[0];for(a=1;a<e;a++)if(b[a]!==d){d=null;break}}null!==d&&(this.data=null,this.dataValue=d);return this},isTileAvailable:function(a,b){var d=this.location,e=this.data,g=this.dataValue,h;this.valid?null!==g?d=g:(g=d.left,h=d.top,d=(a-h)*d.width+(b-g),d=d<e.length?e[d]:0):d=0;return!!d}};a=a(h,{declaredClass:"esri.layers.support.TileMap",
constructor:function(){this._tileMapCache={}},width:8,height:8,getTileMap:function(a,b,e,g,h){var m=null!=a.level?a:new d(a,b,e,g,h);a=k(this._getTileMapUrl(m.level,m.row,m.col,m.width,m.height),{responseType:"json",callbackParamName:"callback",timeout:3E3,failOk:!0}).then(function(a){return m.setData(a.data)});return m.promise=a},getTile:function(a,b,d,g){var h=this._getResamplingBudget(),k=null;a&&null!=a.level?(k=a,g=b):k=new e(a,b,d);0<h?this._process({tile:k,requestedTile:k,callback:g,resamplingBudget:h}):
g.call(this,k,k)},statusOf:function(a,b,d){var g=this._getResamplingBudget();a=new e(a,b,d);if(0===g)return 1;for(;0<=g;){b=this._tileToTileMap(a);if(!this._tileMapCache[b.id])return-1;b=this._tileMapCache[b.id];if(!b.promise.isFulfilled())return-1;if(b.isTileAvailable(a.row,a.col))return 1;a=this._parentTile(a);if(!a)break;g--}return 0},_process:function(a){var b=this._tileToTileMap(a.tile);this._getTileMap(b).then(function(b){var d=a.tile,e=this._parentTile(d);b.isTileAvailable(d.row,d.col)?a.callback.call(this,
d,a.requestedTile):0<a.resamplingBudget&&e?(a.resamplingBudget--,a.tile=e,this._process(a)):a.callback.call(this,a.requestedTile,a.requestedTile)}.bind(this),function(){a.callback.call(this,a.requestedTile,a.requestedTile)}.bind(this))},_getTileMap:function(a){this._tileMapCache[a.id]?(a=this._tileMapCache[a.id],a=a.promise):(this._tileMapCache[a.id]=a,a=this.getTileMap(a));return a},_parentTile:function(a){var b=this.layer.tileInfo.lods,d,g,h=null;n.some(b,function(b,e){return a.level===b.level?
(d=b,g=e,!0):!1});0<g&&(b=b[g-1],h=new e(b.level,Math.floor(a.row*d.resolution/b.resolution+0.01),Math.floor(a.col*d.resolution/b.resolution+0.01)));return h},_tileToTileMap:function(a){return new d(a.level,Math.floor(a.row/this.width)*this.width,Math.floor(a.col/this.height)*this.height,this.width,this.height)},_getTileMapUrl:function(a,b,d,e,h){var k=this.layer,l=k.tileServers,n=k.parsedUrl,k=k.token,w=n.query;a=[l&&l.length?l[b%l.length]:n.path,"tilemap",a,b,d,e,h].join("/");w&&(a+="?"+m.objectToQuery(w));
if(k&&(!w||!w.token))a+=(-1===a.indexOf("?")?"?":"\x26")+"token\x3d"+k;return g.addProxy(a)},_getResamplingBudget:function(){var a=this.layer,b=0;a.resampling&&(b=a.tileInfo.lods.length);return b}});a.TileMapData=d;return a})},"esri/layers/mixins/OperationalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/MultiOriginJSONSupport ../../core/Error ../../core/accessorSupport/read".split(" "),
function(a,l,n,m,k,g,h,e,d){var c={GroupLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,ArcGISFeatureLayer:!0},b={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,WebTiledLayer:!0},"web-scene/basemap":{ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,
OpenStreetMap:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0},"web-map/operational-layers":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,ArcGSFeatureLayer:!0,CSV:!0,GeoRSS:!0,KML:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,
OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,bingLayer:!0}};return function(a){function g(){a.apply(this,arguments)}n(g,a);g.prototype.writeListMode=function(a,b){a&&(b.listMode=a)};g.prototype.writeOperationalLayerType=function(a,b){a&&(b.layerType=a)};g.prototype.readOpacity=function(a,b){if(void 0!==b.opacity)return b.opacity;if(b.drawingInfo&&void 0!==b.drawingInfo.transparency)return 1-b.drawingInfo.transparency/100};g.prototype.readVisible=function(a,b){return!!b.visibility};
g.prototype.read=function(a,b){var c=this,e=arguments;d.readLoadable(this,a,function(b){return c.inherited(e,[a,b])},b);return this};g.prototype.write=function(a,d){if(d&&d.origin){var g=d.origin+"/"+(d.layerContainerType||"operational-layers"),h=b[g];if(h&&!h[this.operationalLayerType])return d.messages&&d.messages.push(new e("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' are not supported in the context of '"+g+"'",{layer:this})),null;if(!this.url&&!c[this.operationalLayerType])return d.messages&&
d.messages.push(new e("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' require a url to a service to be written to a '"+d.origin+"'",{layer:this})),null}return this.inherited(arguments,[a,d])};m([k.property({json:{writable:!0,writeAlways:!0}})],g.prototype,"id",void 0);m([k.property()],g.prototype,"listMode",void 0);m([k.write("listMode")],g.prototype,"writeListMode",null);m([k.property({json:{writable:!0,writeAlways:!0}})],g.prototype,"title",void 0);m([k.property({json:{writable:!0,
writeAlways:!0}})],g.prototype,"url",void 0);m([k.property({json:{writeTo:"layerType",writeAlways:!0}})],g.prototype,"operationalLayerType",void 0);m([k.write("operationalLayerType")],g.prototype,"writeOperationalLayerType",null);m([k.property({json:{writable:!0,writeAlways:!0}})],g.prototype,"opacity",void 0);m([k.read("opacity",["opacity","drawingInfo.transparency"])],g.prototype,"readOpacity",null);m([k.property({json:{writeTo:"visibility",writeAlways:!0}})],g.prototype,"visible",void 0);m([k.read("visible",
["visibility"])],g.prototype,"readVisible",null);return g=m([k.subclass("esri.layers.mixins.OperationalLayer")],g)}(k.declared(g,h))})},"esri/layers/mixins/PortalLayer":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Error ../../core/Logger ../../core/requireUtils ../../core/promiseUtils ../../core/urlUtils ../../portal/PortalItem ../../portal/Portal".split(" "),function(a,
l,n,m,k,g,h,e,d,c,b,s,q){var v=e.getLogger("esri.layers.Layer");return function(e){function g(){e.apply(this,arguments)}n(g,e);Object.defineProperty(g.prototype,"portalItem",{set:function(a){a!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",a))},enumerable:!0,configurable:!0});g.prototype.writePortalItem=function(a,b){a&&a.id&&(b.itemId=a.id)};g.prototype.loadFromPortal=function(b){var e=this;return!this.portalItem||!this.portalItem.id?c.resolve():d.when(a,"../../portal/support/layersLoader").then(function(a){return a.load({instance:e,
supportedTypes:b.supportedTypes,validateItem:b.validateItem,supportsData:b.supportsData}).otherwise(function(a){v.warn("Failed to load layer ("+e.title+", "+e.id+") portal item ("+e.portalItem.id+")\n  "+a);throw a;})})};g.prototype.write=function(a,c){var d=c&&c.portal,f=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||q.getDefault());return d&&f&&!b.hasSamePortal(f.restUrl,d.restUrl)?(c.messages&&c.messages.push(new h("layer:cross-portal","The layer '"+this.title+" ("+this.id+")' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer",
{layer:this})),null):this.inherited(arguments)};m([k.property({type:s})],g.prototype,"portalItem",null);m([k.write("portalItem")],g.prototype,"writePortalItem",null);return g=m([k.subclass("esri.layers.mixins.PortalLayer")],g)}(k.declared(g))})},"esri/Viewpoint":function(){define(["./core/JSONSupporter","./Camera","./core/lang","./geometry/support/jsonUtils"],function(a,l,n,m){var k=a.createSubclass({declaredClass:"esri.Viewpoint",classMetadata:{properties:{camera:{type:l}}},rotation:0,_rotationSetter:function(a){a%=
360;0>a&&(a+=360);return a},scale:0,targetGeometry:null,_targetGeometryReader:function(a){return m.fromJSON(a)},camera:null,_cameraReader:function(a){return l.fromJSON(a)},toJSON:function(){var a={scale:this.scale,rotation:this.rotation,targetGeometry:this.targetGeometry?this.targetGeometry.toJSON():void 0,camera:this.camera?this.camera.toJSON():void 0};a.camera&&delete a.camera.fov;return n.fixJson(a)},clone:function(){return new k({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?
this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})}});return k})},"esri/core/JSONSupporter":function(){define(["dojo/has","dojo/_base/lang","./declare","./Accessoire","./accessoireSupport/introspect"],function(a,l,n,m,k){Function.prototype.bind.call(console.error,console);a=n(m,{declaredClass:"esri.core.JSONSupporter",read:function(a){var e=k(this).classMetadata,d=this._accessorProps,c=e.properties,b=(e=e.reader)&&e.add,g=e&&e.exclude,m,l,e=Object.getOwnPropertyNames(a);
g&&(e=e.filter(function(a){return-1===g.indexOf(a)}));b&&(e=e.concat(b));for(var n=0;b=e[n];n++)m=a[b],l=c[b]&&c[b].reader,d.setDefault(b,l?l.call(this,m,a):m);return this}});var g=function(a){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var e=new this;e.read(a);return e};n.after(function(a){if(n.hasMixin(a,"esri.core.JSONSupporter")){a.fromJSON=g.bind(a);a=l.getObject("_esriMeta.classMetadata",!1,a);var e=a.properties,d=l.getObject("reader.add",!1,a);l.getObject("reader.exclude",
!1,a);d&&e&&d.slice().filter(function(a){return!e[a]||!e[a].reader}).forEach(function(a){d.splice(d.indexOf(a),1)},this)}});return a})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper dojo/_base/lang ./core/JSONSupport ./core/lang ./geometry/Point ./views/3d/support/mathUtils ./core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,g,h,e,d,c){return function(a){function g(c){a.call(this);this.position=null;this.tilt=this.heading=
0;this.fov=55}n(g,a);g.prototype.getDefaults=function(a){if(!a.position)return{position:new e([0,0,0])}};g.prototype.normalizeCtorArgs=function(a,b,c,d){var g={};if(k.isObject(a)&&h.isDefined(a))if(h.isDefined(a.position)||h.isDefined(a.tilt)||h.isDefined(a.heading)||h.isDefined(a.fov))h.isDefined(a.position)&&(g.position=new e(a.position)),h.isDefined(a.heading)&&(g.heading=a.heading),h.isDefined(a.tilt)&&(g.tilt=a.tilt),h.isDefined(a.fov)&&(g.fov=a.fov);else if(h.isDefined(a)&&(h.isDefined(a.x)||
Array.isArray(a)))g.position=new e(a);h.isDefined(b)&&(g.heading=b);h.isDefined(c)&&(g.tilt=c);h.isDefined(d)&&(g.fov=d);return g};g.prototype.equals=function(a){return!a?!1:this.tilt===a.tilt&&this.heading===a.heading&&this.fov===a.fov&&this.position.equals(a.position)};g.prototype.clone=function(){return new g({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};g.prototype.toJSON=function(){var a={position:this.position.toJSON(),heading:this.heading,tilt:this.tilt};
return h.fixJson(a)};m([c.property({type:e})],g.prototype,"position",void 0);m([c.property(),c.cast(d.cyclicalDeg.normalize)],g.prototype,"heading",void 0);m([c.property(),c.cast(function(a){return d.clamp(a,-180,180)})],g.prototype,"tilt",void 0);m([c.property({json:{readable:!1,writable:!1}})],g.prototype,"fov",void 0);return g=m([c.subclass("esri.Camera")],g)}(c.declared(g))})},"esri/views/3d/support/mathUtils":function(){define(["../lib/glMatrix"],function(a){function l(a){for(var d in a){var c=
a[d];"function"===typeof c&&(a[d]=c.bind(a))}return a}var n=a.vec3d,m=a.mat4d,k=n.create(),g=m.create(),h={deg2rad:function(a){return a*Math.PI/180},rad2deg:function(a){return 180*a/Math.PI},asin:function(a){return Math.asin(1<a?1:-1>a?-1:a)},acos:function(a){return Math.acos(1<a?1:-1>a?-1:a)},log2:Math.log2||function(a){return Math.log(a)/Math.LN2},fovx2fovy:function(a,d,c){return 2*Math.atan(c*Math.tan(0.5*a)/d)},fovy2fovx:function(a,d,c){return 2*Math.atan(d*Math.tan(0.5*a)/c)},lerp:function(a,
d,c){return a+(d-a)*c},bilerp:function(a,d,c,b,g,h){a+=(d-a)*g;return a+(c+(b-c)*g-a)*h},slerp:function(a,d,c,b){b||(b=a);var h=n.length(a),l=n.length(d),v=n.dot(a,d)/h/l;0.999999999999>v&&(n.cross(a,d,k),m.identity(g),m.rotate(g,c*Math.acos(v),k),m.multiplyVec3(g,a,b));n.scale(b,((1-c)*h+c*l)/h)},slerpOrLerp:function(a,d,c,b,h){var l=n.length(a),v=n.length(d);n.cross(a,d,k);n.length(k)/l/v>h?(d=Math.acos(n.dot(a,d)/l/v),m.identity(g),m.rotate(g,c*d,k),m.multiplyVec3(g,a,b),n.scale(b,((1-c)*l+c*v)/
l)):n.lerp(a,d,c,b)},clamp:function(a,d,c){return a<d?d:a>c?c:a},isFinite:Number.isFinite||function(a){return"number"===typeof a&&isFinite(a)},isNaN:Number.isNaN||function(a){return a!==a},makePiecewiseLinearFunction:function(a){var d=a.length;return function(c){var b=0;if(c<=a[0][0])return a[0][1];if(c>=a[d-1][0])return a[d-1][1];for(;c>a[b][0];)b++;var g=a[b][0];c=(g-c)/(g-a[b-1][0]);return c*a[b-1][1]+(1-c)*a[b][1]}},vectorEquals:function(a,d){if(null==a||null==d)return a!==d;if(a.length!==d.length)return!1;
for(var c=0;c<a.length;c++)if(a[c]!==d[c])return!1;return!0},floatEqualRelative:function(a,d,c){void 0===c&&(c=1E-6);if(isNaN(a)||isNaN(d))return!1;if(a===d)return!0;var b=Math.abs(a-d),g=Math.abs(a),h=Math.abs(d);if(0===a||0===d||1E-12>g&&1E-12>h){if(b>0.01*c)return!1}else if(b/(g+h)>c)return!1;return!0},floatEqualAbsolute:function(a,d,c){void 0===c&&(c=1E-6);return isNaN(a)||isNaN(d)?!1:(a>d?a-d:d-a)<=c},Cyclical:function(a,d){this.min=a;this.max=d;this.range=d-a;this.ndiff=function(a,b){b=b||0;
return Math.ceil((a-b)/this.range)*this.range+b};this._normalize=function(a,b,d,e){e=e||0;d-=e;d<a?d+=this.ndiff(a-d):d>b&&(d-=this.ndiff(d-b));return d+e};this.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)};this.clamp=function(c,b){b=b||0;return h.clamp(c-b,a,d)+b};this.monotonic=function(a,b,d){return a<b?b:b+this.ndiff(a-b,d)};this.minimalMonotonic=function(a,b,d){return this._normalize(a,a+this.range,b,d)};this.center=function(a,b,d){b=this.monotonic(a,b,d);return this.normalize((a+
b)/2,d)};this.diff=function(a,b,d){return this.monotonic(a,b,d)-a};this.contains=function(a,b,d){b=this.minimalMonotonic(a,b);d=this.minimalMonotonic(a,d);return d>a&&d<b}}};h.cyclical2PI=l(new h.Cyclical(0,2*Math.PI));h.cyclicalPI=l(new h.Cyclical(-Math.PI,Math.PI));h.cyclicalDeg=l(new h.Cyclical(0,360));return h})},"esri/views/3d/lib/glMatrix":function(){define([],function(){var a={};(function(a,n){n(a,!0);n(a,!1)})(a,function(a,n){var m={};(function(){if("undefined"!=typeof Float32Array){var a=
new Float32Array(1),b=new Int32Array(a.buffer);m.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var d=a[0];return d*(1.5-0.5*c*d*d)}}else m.invsqrt=function(a){return 1/Math.sqrt(a)}})();var k=Array;"undefined"!=typeof Float32Array&&(k=n?Float32Array:Array);var g={create:function(a){var b=new k(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var d=new k(3);d[0]=a;d[1]=b;d[2]=c;return d},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,
b,c,d){d[0]=a;d[1]=b;d[2]=c;return d},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],
b[1]);c[2]=Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],g=Math.sqrt(c*c+d*d+e*e);if(g){if(1===g)return b[0]=c,b[1]=d,b[2]=e,b}else return b[0]=0,b[1]=0,b[2]=0,b;g=1/g;
b[0]=c*g;b[1]=d*g;b[2]=e*g;return b},cross:function(a,b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var g=b[0],h=b[1];b=b[2];c[0]=e*b-a*h;c[1]=a*g-d*b;c[2]=d*h-e*g;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(d*d+e*e+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=
1/b;c[0]=d*b;c[1]=e*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},dist2:function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e}},h=null,e=new k(4);g.unproject=function(a,b,c,d,g){g||(g=a);h||(h=t.create());var k=h;e[0]=2*(a[0]-d[0])/d[2]-1;e[1]=2*(a[1]-d[1])/d[3]-1;e[2]=2*a[2]-1;e[3]=1;t.multiply(c,b,k);
if(!t.inverse(k))return null;t.multiplyVec4(k,e);if(0===e[3])return null;g[0]=e[0]/e[3];g[1]=e[1]/e[3];g[2]=e[2]/e[3];return g};var d=g.createFrom(1,0,0),c=g.createFrom(0,1,0),b=g.createFrom(0,0,1);g.rotationTo=function(a,p,e){e||(e=u.create());var h=g.dot(a,p),k=g.create();if(1<=h)u.set(r,e);else if(-0.999999>h)g.cross(d,a,k),1E-6>k.length&&g.cross(c,a,k),1E-6>k.length&&g.cross(b,a,k),g.normalize(k),u.fromAxisAngle(k,Math.PI,e);else{var h=Math.sqrt(2*(1+h)),m=1/h;g.cross(a,p,k);e[0]=k[0]*m;e[1]=
k[1]*m;e[2]=k[2]*m;e[3]=0.5*h;u.normalize(e)}1<e[3]?e[3]=1:-1>e[3]&&(e[3]=-1);return e};var s=g.create(),q=g.create();g.project=function(a,b,c,d){d||(d=a);g.direction(b,c,s);g.subtract(a,b,q);a=g.dot(s,q);g.scale(s,a,d);g.add(d,b,d)};g.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var v={create:function(a){var b=new k(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,
b,c,d,e,g,h,m,l){var n=new k(9);n[0]=a;n[1]=b;n[2]=c;n[3]=d;n[4]=e;n[5]=g;n[6]=h;n[7]=m;n[8]=l;return n},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],g=a[7],h=a[8];return a[0]*(h*c-d*g)+a[1]*(-h*b+d*e)+a[2]*(g*b-c*e)},inverse:function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],h=a[4],k=a[5],m=a[6],l=a[7],n=a[8],r=n*h-k*l,q=-n*g+k*m,s=l*g-h*m,t=c*r+d*q+e*s;if(!t)return null;t=1/t;b||(b=v.create());b[0]=r*t;b[1]=(-n*d+e*l)*t;b[2]=(k*d-e*h)*t;b[3]=q*t;b[4]=(n*c-e*m)*t;b[5]=(-k*c+e*g)*t;b[6]=s*t;
b[7]=(-l*c+d*m)*t;b[8]=(h*c-d*g)*t;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2],h=a[3],k=a[4],m=a[5],l=a[6],n=a[7];a=a[8];var r=b[0],q=b[1],s=b[2],v=b[3],t=b[4],y=b[5],u=b[6],w=b[7];b=b[8];c[0]=r*d+q*h+s*l;c[1]=r*e+q*k+s*n;c[2]=r*g+q*m+s*a;c[3]=v*d+t*h+y*l;c[4]=v*e+t*k+y*n;c[5]=v*g+t*m+y*a;c[6]=u*d+w*h+b*l;c[7]=u*e+w*k+b*n;c[8]=u*g+w*m+b*a;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[3]+a[6];c[1]=d*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,
b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[3]+b*a[6];c[1]=d*a[1]+e*a[4]+b*a[7];c[2]=d*a[2]+e*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=d;a[7]=e;return a}b[0]=a[0];b[1]=a[3];b[2]=
a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=t.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},t={create:function(a){var b=new k(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=
arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,d,e,g,h,m,l,n,r,q,s,v,t,y){var u=new k(16);u[0]=
a;u[1]=b;u[2]=c;u[3]=d;u[4]=e;u[5]=g;u[6]=h;u[7]=m;u[8]=l;u[9]=n;u[10]=r;u[11]=q;u[12]=s;u[13]=v;u[14]=t;u[15]=y;return u},createFromMatrixRowMajor:function(a){var b=new k(16);b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new k(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];
b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||
(a=t.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[3],g=a[6],h=a[7],k=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=d;a[9]=g;a[11]=a[14];a[12]=e;a[13]=h;a[14]=k;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];
b[15]=a[15];return b},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],h=a[5],k=a[6],m=a[7],l=a[8],n=a[9],r=a[10],q=a[11],s=a[12],v=a[13],t=a[14];a=a[15];return s*n*k*e-l*v*k*e-s*h*r*e+g*v*r*e+l*h*t*e-g*n*t*e-s*n*d*m+l*v*d*m+s*c*r*m-b*v*r*m-l*c*t*m+b*n*t*m+s*h*d*q-g*v*d*q-s*c*k*q+b*v*k*q+g*c*t*q-b*h*t*q-l*h*d*a+g*n*d*a+l*c*k*a-b*n*k*a-g*c*r*a+b*h*r*a},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],g=a[3],h=a[4],k=a[5],m=a[6],l=a[7],n=a[8],r=a[9],q=a[10],s=a[11],v=a[12],t=a[13],
y=a[14],u=a[15],w=c*k-d*h,N=c*m-e*h,H=c*l-g*h,O=d*m-e*k,Y=d*l-g*k,V=e*l-g*m,Z=n*t-r*v,aa=n*y-q*v,ba=n*u-s*v,ga=r*y-q*t,ja=r*u-s*t,la=q*u-s*y,ca=w*la-N*ja+H*ga+O*ba-Y*aa+V*Z;if(!ca)return null;ca=1/ca;b[0]=(k*la-m*ja+l*ga)*ca;b[1]=(-d*la+e*ja-g*ga)*ca;b[2]=(t*V-y*Y+u*O)*ca;b[3]=(-r*V+q*Y-s*O)*ca;b[4]=(-h*la+m*ba-l*aa)*ca;b[5]=(c*la-e*ba+g*aa)*ca;b[6]=(-v*V+y*H-u*N)*ca;b[7]=(n*V-q*H+s*N)*ca;b[8]=(h*ja-k*ba+l*Z)*ca;b[9]=(-c*ja+d*ba-g*Z)*ca;b[10]=(v*Y-t*H+u*w)*ca;b[11]=(-n*Y+r*H-s*w)*ca;b[12]=(-h*ga+
k*aa-m*Z)*ca;b[13]=(c*ga-d*aa+e*Z)*ca;b[14]=(-v*O+t*N-y*w)*ca;b[15]=(n*O-r*N+q*w)*ca;return b},toRotationMat:function(a,b){b||(b=t.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=v.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],d=a[1],e=a[2],g=
a[4],h=a[5],k=a[6],m=a[8],l=a[9],n=a[10],r=n*h-k*l,q=-n*g+k*m,s=l*g-h*m,t=c*r+d*q+e*s;if(!t)return null;t=1/t;b||(b=v.create());b[0]=r*t;b[1]=(-n*d+e*l)*t;b[2]=(k*d-e*h)*t;b[3]=q*t;b[4]=(n*c-e*m)*t;b[5]=(-k*c+e*g)*t;b[6]=s*t;b[7]=(-l*c+d*m)*t;b[8]=(h*c-d*g)*t;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2],h=a[3],k=a[4],m=a[5],l=a[6],n=a[7],r=a[8],q=a[9],s=a[10],v=a[11],t=a[12],y=a[13],u=a[14];a=a[15];var w=b[0],N=b[1],H=b[2],O=b[3],Y=b[4],V=b[5],Z=b[6],aa=b[7],ba=b[8],ga=b[9],
ja=b[10],la=b[11],ca=b[12],ma=b[13],qa=b[14];b=b[15];c[0]=w*d+N*k+H*r+O*t;c[1]=w*e+N*m+H*q+O*y;c[2]=w*g+N*l+H*s+O*u;c[3]=w*h+N*n+H*v+O*a;c[4]=Y*d+V*k+Z*r+aa*t;c[5]=Y*e+V*m+Z*q+aa*y;c[6]=Y*g+V*l+Z*s+aa*u;c[7]=Y*h+V*n+Z*v+aa*a;c[8]=ba*d+ga*k+ja*r+la*t;c[9]=ba*e+ga*m+ja*q+la*y;c[10]=ba*g+ga*l+ja*s+la*u;c[11]=ba*h+ga*n+ja*v+la*a;c[12]=ca*d+ma*k+qa*r+b*t;c[13]=ca*e+ma*m+qa*q+b*y;c[14]=ca*g+ma*l+qa*s+b*u;c[15]=ca*h+ma*n+qa*v+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=
a[0]*d+a[4]*e+a[8]*b+a[12];c[1]=a[1]*d+a[5]*e+a[9]*b+a[13];c[2]=a[2]*d+a[6]*e+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],e=b[1],g=b[2];b=b[3];c[0]=a[0]*d+a[4]*e+a[8]*g+a[12]*b;c[1]=a[1]*d+a[5]*e+a[9]*g+a[13]*b;c[2]=a[2]*d+a[6]*e+a[10]*g+a[14]*b;c[3]=a[3]*d+a[7]*e+a[11]*g+a[15]*b;return c},translate:function(a,b,c){var d=b[0],e=b[1];b=b[2];var g,h,k,m,l,n,r,q,s,v,t,y;if(!c||a===c)return a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*
e+a[10]*b+a[14],a[15]=a[3]*d+a[7]*e+a[11]*b+a[15],a;g=a[0];h=a[1];k=a[2];m=a[3];l=a[4];n=a[5];r=a[6];q=a[7];s=a[8];v=a[9];t=a[10];y=a[11];c[0]=g;c[1]=h;c[2]=k;c[3]=m;c[4]=l;c[5]=n;c[6]=r;c[7]=q;c[8]=s;c[9]=v;c[10]=t;c[11]=y;c[12]=g*d+l*e+s*b+a[12];c[13]=h*d+n*e+v*b+a[13];c[14]=k*d+r*e+t*b+a[14];c[15]=m*d+q*e+y*b+a[15];return c},scale:function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||a===c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=
a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){var b=Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),c=Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9]);a=Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]);return Math.max(Math.max(b,c),a)},rotate:function(a,b,c,d){var e=c[0],g=c[1];c=c[2];var h=Math.sqrt(e*e+g*g+c*c),k,m,l,n,r,q,s,v,t,y,u,w,N,H,O,Y,
V,Z,aa,ba;if(!h)return null;1!==h&&(h=1/h,e*=h,g*=h,c*=h);k=Math.sin(b);m=Math.cos(b);l=1-m;b=a[0];h=a[1];n=a[2];r=a[3];q=a[4];s=a[5];v=a[6];t=a[7];y=a[8];u=a[9];w=a[10];N=a[11];H=e*e*l+m;O=g*e*l+c*k;Y=c*e*l-g*k;V=e*g*l-c*k;Z=g*g*l+m;aa=c*g*l+e*k;ba=e*c*l+g*k;e=g*c*l-e*k;g=c*c*l+m;d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*H+q*O+y*Y;d[1]=h*H+s*O+u*Y;d[2]=n*H+v*O+w*Y;d[3]=r*H+t*O+N*Y;d[4]=b*V+q*Z+y*aa;d[5]=h*V+s*Z+u*aa;d[6]=n*V+v*Z+w*aa;d[7]=r*V+t*Z+N*aa;d[8]=b*ba+q*e+y*
g;d[9]=h*ba+s*e+u*g;d[10]=n*ba+v*e+w*g;d[11]=r*ba+t*e+N*g;return d},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],g=a[5],h=a[6],k=a[7],m=a[8],l=a[9],n=a[10],r=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=e*b+m*d;c[5]=g*b+l*d;c[6]=h*b+n*d;c[7]=k*b+r*d;c[8]=e*-d+m*b;c[9]=g*-d+l*b;c[10]=h*-d+n*b;c[11]=k*-d+r*b;return c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],g=a[1],h=a[2],k=a[3],m=a[8],
l=a[9],n=a[10],r=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+m*-d;c[1]=g*b+l*-d;c[2]=h*b+n*-d;c[3]=k*b+r*-d;c[8]=e*d+m*b;c[9]=g*d+l*b;c[10]=h*d+n*b;c[11]=k*d+r*b;return c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],g=a[1],h=a[2],k=a[3],m=a[4],l=a[5],n=a[6],r=a[7];c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+m*d;c[1]=g*b+l*d;c[2]=h*
b+n*d;c[3]=k*b+r*d;c[4]=e*-d+m*b;c[5]=g*-d+l*b;c[6]=h*-d+n*b;c[7]=k*-d+r*b;return c},frustum:function(a,b,c,d,e,g,h){h||(h=t.create());var k=b-a,m=d-c,l=g-e;h[0]=2*e/k;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*e/m;h[6]=0;h[7]=0;h[8]=(b+a)/k;h[9]=(d+c)/m;h[10]=-(g+e)/l;h[11]=-1;h[12]=0;h[13]=0;h[14]=-(2*g*e)/l;h[15]=0;return h},perspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);b*=a;return t.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,g,h){h||(h=t.create());var k=b-a,m=d-c,l=g-e;h[0]=2/k;
h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2/m;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=-2/l;h[11]=0;h[12]=-(a+b)/k;h[13]=-(d+c)/m;h[14]=-(g+e)/l;h[15]=1;return h},lookAt:function(a,b,c,d){d||(d=t.create());var e,g,h,k,m,l,n,r,q=a[0],s=a[1];a=a[2];h=c[0];k=c[1];g=c[2];n=b[0];c=b[1];e=b[2];if(q===n&&s===c&&a===e)return t.identity(d);b=q-n;c=s-c;n=a-e;r=1/Math.sqrt(b*b+c*c+n*n);b*=r;c*=r;n*=r;e=k*n-g*c;g=g*b-h*n;h=h*c-k*b;(r=Math.sqrt(e*e+g*g+h*h))?(r=1/r,e*=r,g*=r,h*=r):h=g=e=0;k=c*h-n*g;m=n*e-b*h;l=b*g-c*e;(r=Math.sqrt(k*
k+m*m+l*l))?(r=1/r,k*=r,m*=r,l*=r):l=m=k=0;d[0]=e;d[1]=k;d[2]=b;d[3]=0;d[4]=g;d[5]=m;d[6]=c;d[7]=0;d[8]=h;d[9]=l;d[10]=n;d[11]=0;d[12]=-(e*q+g*s+h*a);d[13]=-(k*q+m*s+l*a);d[14]=-(b*q+c*s+n*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=t.create());var d=a[0],e=a[1],g=a[2],h=a[3],k=d+d,m=e+e,l=g+g;a=d*k;var n=d*m,d=d*l,r=e*m,e=e*l,g=g*l,k=h*k,m=h*m,h=h*l;c[0]=1-(r+g);c[1]=n+h;c[2]=d-m;c[3]=0;c[4]=n-h;c[5]=1-(a+g);c[6]=e+k;c[7]=0;c[8]=d+m;c[9]=e-k;c[10]=1-(a+r);c[11]=0;c[12]=b[0];
c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},u={create:function(a){var b=new k(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var e=new k(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||
(a=u.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},r=u.identity();u.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return b};u.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};u.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],c=(c=c*c+d*d+e*e+g*g)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*
c;b[3]=a[3]*c;return b};u.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};u.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};u.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],g=a[3],h=Math.sqrt(c*c+d*d+e*e+g*g);if(0===h)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;h=1/h;b[0]=c*h;b[1]=d*h;b[2]=e*h;b[3]=g*h;return b};u.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=
b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};u.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];var h=b[0],k=b[1],m=b[2];b=b[3];c[0]=d*b+a*h+e*m-g*k;c[1]=e*b+a*k+g*h-d*m;c[2]=g*b+a*m+d*k-e*h;c[3]=a*b-d*h-e*k-g*m;return c};u.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],g=b[2];b=a[0];var h=a[1],k=a[2];a=a[3];var m=a*d+h*g-k*e,l=a*e+k*d-b*g,n=a*g+b*e-h*d,d=-b*d-h*e-k*g;c[0]=m*a+d*-b+l*-k-n*-h;c[1]=l*a+d*-h+n*-b-m*-k;c[2]=n*a+d*-k+
m*-h-l*-b;return c};u.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};u.toMat3=function(a,b){b||(b=v.create());var c=a[0],d=a[1],e=a[2],g=a[3],h=c+c,k=d+d,m=e+e,l=c*h,n=c*k,c=c*m,r=d*k,d=d*m,e=e*m,h=g*h,k=g*k,g=g*m;b[0]=1-(r+e);b[1]=n+g;b[2]=c-k;b[3]=n-g;b[4]=1-(l+e);b[5]=d+h;b[6]=c+k;b[7]=d-h;b[8]=1-(l+r);return b};u.toMat4=function(a,b){b||(b=t.create());var c=a[0],d=a[1],e=a[2],g=a[3],h=c+c,k=d+d,m=e+e,l=c*h,
n=c*k,c=c*m,r=d*k,d=d*m,e=e*m,h=g*h,k=g*k,g=g*m;b[0]=1-(r+e);b[1]=n+g;b[2]=c-k;b[3]=0;b[4]=n-g;b[5]=1-(l+e);b[6]=d+h;b[7]=0;b[8]=c+k;b[9]=d-h;b[10]=1-(l+r);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};u.slerp=function(a,b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],g,h;if(1<=Math.abs(e))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;g=Math.acos(e);h=Math.sqrt(1-e*e);if(0.0010>Math.abs(h))return d[0]=0.5*a[0]+0.5*b[0],d[1]=0.5*a[1]+0.5*b[1],d[2]=0.5*a[2]+0.5*b[2],d[3]=
0.5*a[3]+0.5*b[3],d;e=Math.sin((1-c)*g)/h;c=Math.sin(c*g)/h;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};u.fromRotationMatrix=function(a,b){b||(b=u.create());var c=a[0]+a[4]+a[8],d;if(0<c)d=Math.sqrt(c+1),b[3]=0.5*d,d=0.5/d,b[0]=(a[7]-a[5])*d,b[1]=(a[2]-a[6])*d,b[2]=(a[3]-a[1])*d;else{d=u.fromRotationMatrix.s_iNext=u.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var e=d[c],g=d[e];d=Math.sqrt(a[3*c+c]-a[3*e+e]-a[3*g+g]+1);b[c]=
0.5*d;d=0.5/d;b[3]=(a[3*g+e]-a[3*e+g])*d;b[e]=(a[3*e+c]+a[3*c+e])*d;b[g]=(a[3*g+c]+a[3*c+g])*d}return b};v.toQuat4=u.fromRotationMatrix;(function(){var a=v.create();u.fromAxes=function(b,c,d,e){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return u.fromRotationMatrix(a,e)}})();u.identity=function(a){a||(a=u.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};u.fromAngleAxis=function(a,b,c){c||(c=u.create());a*=0.5;var d=Math.sin(a);c[3]=Math.cos(a);c[0]=d*b[0];
c[1]=d*b[1];c[2]=d*b[2];return c};u.toAngleAxis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=m.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};u.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var w={create:function(a){var b=new k(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var e=new k(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},set:function(a,
b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=w.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b){var c=a[1];a[1]=a[2];a[2]=c;return a}b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],g=a[3],h=c*g-e*d;if(!h)return null;h=1/h;b[0]=g*h;b[1]=-d*h;b[2]=-e*h;b[3]=c*h;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],
g=a[2];a=a[3];c[0]=d*b[0]+e*b[2];c[1]=d*b[1]+e*b[3];c[2]=g*b[0]+a*b[2];c[3]=g*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];var h=Math.sin(b);b=Math.cos(b);c[0]=d*b+e*h;c[1]=d*-h+e*b;c[2]=g*b+a*h;c[3]=g*-h+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[1];c[1]=d*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var d=a[1],e=a[2],g=a[3],h=b[0];b=b[1];c[0]=a[0]*h;c[1]=d*b;c[2]=e*h;c[3]=g*b;return c},str:function(a){return"["+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}},y=n?"":"d";a["glMath"+y]=m;a["vec2"+y]={create:function(a){var b=new k(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new k(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/
b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},dist2:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,
b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};a["vec3"+y]=g;a["vec4"+y]={create:function(a){var b=
new k(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,d){var e=new k(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,
c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set4:function(a,b,c,d,e){e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-
a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};a["mat2"+y]=w;a["mat3"+y]=v;a["mat4"+y]=t;a["quat4"+y]=u});return a})},"esri/geometry/support/jsonUtils":function(){define(["../Point","../Polyline","../Polygon","../Multipoint","../Extent"],function(a,l,n,m,k){function g(e){if(!e)return null;if(e){if(void 0!==e.x&&void 0!==e.y)return a.fromJSON(e);if(void 0!==e.paths)return l.fromJSON(e);if(void 0!==
e.rings)return n.fromJSON(e);if(void 0!==e.points)return m.fromJSON(e);if(void 0!==e.xmin&&void 0!==e.ymin&&void 0!==e.xmax&&void 0!==e.ymax)return k.fromJSON(e)}return null}var h={esriGeometryPoint:a,esriGeometryPolyline:l,esriGeometryPolygon:n,esriGeometryEnvelope:k,esriGeometryMultipoint:m};return{fromJSON:g,fromJson:function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(d){console.warn(d.stack)}return g(a)},getJsonType:function(e){return e instanceof a?"esriGeometryPoint":
e instanceof l?"esriGeometryPolyline":e instanceof n?"esriGeometryPolygon":e instanceof k?"esriGeometryEnvelope":e instanceof m?"esriGeometryMultipoint":null},getGeometryType:function(a){return a&&h[a]||null}}})},"esri/geometry/Polyline":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/zmUtils".split(" "),function(a,l,n,m,k,g,h){var e=m.createSubclass({declaredClass:"esri.geometry.Polyline",type:"polyline",getDefaults:function(a){return{paths:[]}},
normalizeCtorArgs:function(a,c){var b=null,e,g,h=null;a&&!Array.isArray(a)?(b=a.paths?a.paths:null,c||(a.spatialReference?c=a.spatialReference:a.paths||(c=a)),e=a.hasZ,g=a.hasM):b=a;b=b||[];c=c||n.WGS84;b.length&&(b[0]&&null!=b[0][0]&&"number"==typeof b[0][0])&&(b=[b]);if(h=b[0]&&b[0][0])void 0===e&&void 0===g?(e=2<h.length,g=!1):void 0===e?e=!g&&3<h.length:void 0===g&&(g=!e&&3<h.length);return{paths:b,spatialReference:c,hasZ:e,hasM:g}},_path:0,properties:{cache:{dependsOn:["hasM","hasZ","paths"]},
extent:{dependsOn:["cache"],readOnly:!0,get:function(){function a(b){return function(a,c){return void 0===a?c:void 0===c?a:b(a,c)}}var c=this.paths,b=c.length;if(!b||!c[0].length)return null;var e,h,k,m,l,n,w,y,f,p,x,z,K=n=c[0][0][0],A=w=c[0][0][1],E,L,B=a(Math.min),I=a(Math.max),U=this.spatialReference,S=[],D,J,G,F,M,P,X,N,H=this.hasZ,O=this.hasM,Y=H?3:2;for(p=0;p<b;p++){e=c[p];D=J=e[0]&&e[0][0];G=F=e[0]&&e[0][1];z=e.length;X=N=M=P=void 0;for(x=0;x<z;x++)h=e[x],k=h[0],m=h[1],K=B(K,k),A=B(A,m),n=
I(n,k),w=I(w,m),D=B(D,k),G=B(G,m),J=I(J,k),F=I(F,m),H&&2<h.length&&(l=h[2],E=B(E,l),y=I(y,l),M=B(M,l),P=I(P,l)),O&&h.length>Y&&(h=h[Y],L=B(L,l),f=I(f,l),X=B(X,h),N=I(N,h));S.push(new g({xmin:D,ymin:G,zmin:M,mmin:X,xmax:J,ymax:F,zmax:P,mmax:N,spatialReference:U?U.clone():null}))}c=new g({xmin:K,ymin:A,xmax:n,ymax:w,spatialReference:U?U.toJSON():null});H&&(c.zmin=E,c.zmax=y);O&&(c.mmin=L,c.mmax=f);c._partwise=1<S.length?S:null;return c}},paths:null},addPath:function(a){this.clearCache();this._path=
this.paths.length;this.paths[this._path]=[];a.forEach(this._addPoint,this);return this},clone:function(){var d=new e;d.spatialReference=this.spatialReference;d.paths=a.clone(this.paths);d.hasZ=this.hasZ;d.hasM=this.hasM;return d},getPoint:function(a,c){if(this._validateInputs(a,c)){var b=this.paths[a][c],e=this.hasZ,g=this.hasM;return e&&g?new k(b[0],b[1],b[2],b[3],this.spatialReference):e?new k(b[0],b[1],b[2],void 0,this.spatialReference):g?new k(b[0],b[1],void 0,b[2],this.spatialReference):new k(b[0],
b[1],this.spatialReference)}},insertPoint:function(a,c,b){if(this._validateInputs(a)&&l.isDefined(c)&&0<=c&&c<=this.paths[a].length)return this.clearCache(),h.updateSupportFromPoint(this,b),Array.isArray(b)||(b=b.toArray()),this.paths[a].splice(c,0,b),this},removePath:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.paths.splice(a,1)[0];var c,b=a.length,e=this.spatialReference;for(c=0;c<b;c++)a[c]=new k(a[c],e);return a}},removePoint:function(a,c){if(this._validateInputs(a,c))return this.clearCache(),
new k(this.paths[a].splice(c,1)[0],this.spatialReference)},setPoint:function(a,c,b){if(this._validateInputs(a,c))return this.clearCache(),h.updateSupportFromPoint(this,b),Array.isArray(b)||(b=b.toArray()),this.paths[a][c]=b,this},toJSON:function(){var a=this.spatialReference,a={paths:this.paths,spatialReference:a&&a.toJSON()};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return a},_initPathPointsToArray:function(a){for(var c=0;c<a.paths.length;c++)a.paths[c]=a.paths[c].map(function(b){h.updateSupportFromPoint(a,
b,!0);Array.isArray(b)||(a.spatialReference||(a.spatialReference=b.spatialReference),b=b.toArray());return b});return a},_addPoint:function(a){Array.isArray(a)?this.paths[this._path].push(a):this.paths[this._path].push(a.toArray());h.updateSupportFromPoint(this,a)},_insertPoints:function(a,c){this.clearCache();this._path=c;this.paths[this._path]||(this.paths[this._path]=[]);a.forEach(this._addPoint,this)},_validateInputs:function(a,c){return null!==a&&void 0!==a&&(0>a||a>=this.paths.length)||null!==
c&&void 0!==a&&(0>c||c>=this.paths[a].length)?!1:!0}});return e})},"esri/geometry/support/zmUtils":function(){define([],function(){return{updateSupportFromPoint:function(a,l,n){var m=a.hasZ,k=a.hasM;Array.isArray(l)?4===l.length&&!k&&!m?m=k=!0:3===l.length&&n&&!k?(m=!0,k=!1):3===l.length&&(k&&m)&&(m=k=!1):(m=!(!m&&l.hasZ&&(!k||l.hasM)),k=!(!k&&l.hasM&&(!m||l.hasZ)));a.hasZ=m;a.hasM=k}}})},"esri/geometry/Polygon":function(){define("dojo/_base/lang ../core/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/coordsUtils ./support/mathUtils ./support/webMercatorUtils".split(" "),
function(a,l,n,m,k,g,h,e,d){var c=function(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}},b=c(Math.min),s=c(Math.max),q=m.createSubclass({declaredClass:"esri.geometry.Polygon",type:"polygon",getDefaults:function(a){return{rings:[]}},normalizeCtorArgs:function(a,b){var c=null,d,e,g=null;a&&!Array.isArray(a)?(c=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),d=a.hasZ,e=a.hasM):c=a;c=c||[];b=b||n.WGS84;c.length&&(c[0]&&null!=c[0][0]&&"number"==typeof c[0][0])&&
(c=[c]);if(g=c[0]&&c[0][0])void 0===d&&void 0===e?(d=2<g.length,e=!1):void 0===d?d=!e&&3<g.length:void 0===e&&(e=!d&&3<g.length);return{rings:c,spatialReference:b,hasZ:d,hasM:e}},_ring:0,properties:{cache:{dependsOn:["hasM","hasZ","rings"]},centroid:{readOnly:!0,dependsOn:["cache"],get:function(a){var b=h.centroid([],this.rings,this.hasZ);if(isNaN(b[0])||isNaN(b[1])||this.hasZ&&isNaN(b[2]))return null;a=a||new k;a.x=b[0];a.y=b[1];a.spatialReference=this.spatialReference;this.hasZ&&(a.z=b[2]);return a}},
extent:{dependsOn:["cache"],readOnly:!0,get:function(){var a=this.rings,c=a.length;if(!c||!a[0].length)return null;var d,e,h,k,f,p,m,l,n,q,E,L=f=a[0][0][0],B=p=a[0][0][1],I,U,S=this.spatialReference,D=[],J,G,F,M,P,X,N,H,O=this.hasZ,Y=this.hasM,V=O?3:2;for(n=0;n<c;n++){d=a[n];J=G=d[0]&&d[0][0];F=M=d[0]&&d[0][1];E=d.length;N=H=P=X=void 0;for(q=0;q<E;q++)e=d[q],h=e[0],k=e[1],L=b(L,h),B=b(B,k),f=s(f,h),p=s(p,k),J=b(J,h),F=b(F,k),G=s(G,h),M=s(M,k),O&&2<e.length&&(h=e[2],I=b(I,h),m=s(m,h),P=b(P,h),X=s(X,
h)),Y&&e.length>V&&(e=e[V],U=b(I,e),l=s(m,e),N=b(P,e),H=s(X,e));D.push(new g({xmin:J,ymin:F,zmin:P,mmin:N,xmax:G,ymax:M,zmax:X,mmax:H,spatialReference:S}))}a=new g;a.xmin=L;a.ymin=B;a.xmax=f;a.ymax=p;a.spatialReference=S;O&&(a.zmin=I,a.zmax=m);Y&&(a.mmin=U,a.mmax=l);a._partwise=1<D.length?D:null;return a}},isSelfIntersecting:{dependsOn:["cache"],readOnly:!0,get:function(){var a=this.rings,b=a.length,c,d,g,h,f,p,k,m,l;for(h=0;h<b;h++){c=a[h];for(d=0;d<c.length-1;d++){p=[[c[d][0],c[d][1]],[c[d+1][0],
c[d+1][1]]];for(g=h+1;g<b;g++)for(f=0;f<a[g].length-1;f++)if(k=[[a[g][f][0],a[g][f][1]],[a[g][f+1][0],a[g][f+1][1]]],(m=e._getLineIntersection2(p,k))&&!(m[0]===p[0][0]&&m[1]===p[0][1]||m[0]===k[0][0]&&m[1]===k[0][1]||m[0]===p[1][0]&&m[1]===p[1][1]||m[0]===k[1][0]&&m[1]===k[1][1]))return!0}f=c.length;if(!(4>=f))for(d=0;d<f-3;d++){l=f-1;0===d&&(l=f-2);p=[[c[d][0],c[d][1]],[c[d+1][0],c[d+1][1]]];for(g=d+2;g<l;g++)if(k=[[c[g][0],c[g][1]],[c[g+1][0],c[g+1][1]]],(m=e._getLineIntersection2(p,k))&&!(m[0]===
p[0][0]&&m[1]===p[0][1]||m[0]===k[0][0]&&m[1]===k[0][1]||m[0]===p[1][0]&&m[1]===p[1][1]||m[0]===k[1][0]&&m[1]===k[1][1]))return!0}}return!1}},rings:null},addRing:function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{var d=[];b[c]=d;b=0;for(c=a.length;b<c;b++)d[b]=a[b].toArray()}return this}},clone:function(){var b=new q;b.spatialReference=this.spatialReference;b.rings=a.clone(this.rings);b.hasZ=this.hasZ;b.hasM=this.hasM;return b},contains:function(a){if(!a)return!1;
d.canProject(a,this.spatialReference)&&(a=d.project(a,this.spatialReference));return h.contains(this.rings,h.fromGeom(a))},isClockwise:function(a){var b=0,c=0,d=0,e,g=a.length,f,h,k,m=this.hasZ,l=this.hasM;for(e=0;e<g;e++)f=a[e],h=a[(e+1)%g],Array.isArray(f)?(b+=f[0]*h[1]-h[0]*f[1],k=2,2<f.length&&(2<h.length&&m)&&(c+=f[0]*h[2]-h[0]*f[2],k=3),f.length>k&&(h.length>k&&l)&&(d+=f[0]*h[k]-h[0]*f[k])):(b+=f.x*h.y-h.x*f.y,f.hasZ&&h.hasZ&&(c+=f.x*h.z-h.x*f.z),f.hasM&&h.hasM&&(d+=f.x*h.m-h.x*f.m));return 0>=
b&&0>=c&&0>=d},getPoint:function(a,b){if(this._validateInputs(a,b)){var c=this.rings[a][b],d=this.hasZ,e=this.hasM;return d&&!e?new k(c[0],c[1],c[2],void 0,this.spatialReference):e&&d?new k(c[0],c[1],void 0,c[2],this.spatialReference):d&&e?new k(c[0],c[1],c[2],c[3],this.spatialReference):new k(c[0],c[1],this.spatialReference)}},insertPoint:function(a,b,c){if(this._validateInputs(a)&&l.isDefined(b)&&0<=b&&b<=this.rings[a].length)return this.clearCache(),this.rings[a].splice(b,0,c),this},removePoint:function(a,
b){if(this._validateInputs(a,b))return this.clearCache(),new k(this.rings[a].splice(b,1)[0],this.spatialReference)},removeRing:function(a){if(this._validateInputs(a,null)){this.clearCache();a=this.rings.splice(a,1)[0];var b,c=a.length,d=this.spatialReference;for(b=0;b<c;b++)a[b]=new k(a[b],d);return a}},setPoint:function(a,b,c){if(this._validateInputs(a,b))return this.clearCache(),Array.isArray(c)||(c=c.toArray()),this.rings[a][b]=c,this},toJSON:function(){var a=this.spatialReference,a={rings:this.rings,
spatialReference:a&&a.toJSON()};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return a},_insertPoints:function(a,b){this.clearCache();this._ring=b;this.rings[this._ring]||(this.rings[this._ring]=[]);a.forEach(this._addPoint,this)},_validateInputs:function(a,b){return null!==a&&void 0!==a&&(0>a||a>=this.rings.length)||null!==b&&void 0!==a&&(0>b||b>=this.rings[a].length)?!1:!0}});q.createEllipse=function(a){var b=a.center.x,c=a.center.y,d=a.center.z,e=a.center.m,g=a.longAxis,f=a.shortAxis,h=a.numberOfPoints;
a=a.map;var k,m,l,n=[],s=2*Math.PI/h;for(m=0;m<h;m++)k=Math.cos(m*s),l=Math.sin(m*s),k=a.toMap({x:g*k+b,y:f*l+c}),null!=d&&!k.hasZ&&(k.z=d),null!=e&&!k.hasM&&(k.m=e),n.push(k);n.push(n[0]);return new q({rings:[n],spatialReference:a.spatialReference})};q.createCircle=function(a){return q.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,map:a.map})};q.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,d=!1;b.map(function(a){a.hasZ&&
(c=!0);a.hasM&&(d=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var f=(a.zmax-a.zmin)/2,e=0;e<b.length;e++)b[e].push(f);if(d&&a.hasM){a=(a.mmax-a.mmin)/2;for(e=0;e<b.length;e++)b[e].push(a)}return b}),spatialReference:a?a.toJSON():null};c&&(b.hasZ=!0);d&&(b.hasM=!0);return new q(b)};return q})},"esri/geometry/support/coordsUtils":function(){define([],function(){var a=function(a,k,g){var h=g[0];g=g[1];for(var e=
0,d,c,b,l,n=0,v=k.length;n<v;n++)if(e++,e===v&&(e=0),d=k[n][0],c=k[e][0],b=k[n][1],l=k[e][1],(b<g&&l>=g||l<g&&b>=g)&&d+(g-b)/(l-b)*(c-d)<h)a=!a;return a},l=function(a,k,g){for(var h=0,e=0,d=0,c,b,l,n,v,t,u,r,w,y=0,f=0,p=0,x=k.length-1;p<x;p++)c=k[p],b=c[0],l=c[1],n=c[2],v=k[p+1],t=v[0],u=v[1],r=v[2],w=b*u-t*l,y+=w,h+=(b+t)*w,e+=(l+u)*w,g&&(2<c.length&&2<v.length)&&(w=b*r-t*n,d+=(n+r)*w,f+=w);0<y&&(y*=-1);0<f&&(f*=-1);y?(a[0]=h,a[1]=e,a[2]=0.5*y,g?(a[3]=d,a[4]=0.5*f):a.length=3):a.length=0;return a},
n=function(a,k){for(var g=0,h=0,e=0,d=0,c=k?[0,0,0]:[0,0],b=k?[0,0,0]:[0,0],l,n,v,t=0,u=a.length;t<u-1;t++)if(l=a[t],n=a[t+1],l&&n){c[0]=l[0];c[0]=l[1];b[0]=n[0];b[0]=n[1];k&&(2<l.length&&2<n.length)&&(c[2]=l[2],b[2]=n[2]);v=b[0]-c[0];var r=b[1]-c[1],w=0;1<c.length&&1<b.length&&(w=c[2]-b[2]);if(v=Math.sqrt(v*v+r*r+w*w))g+=v,r=l[0]+0.5*(n[0]-l[0]),w=l[1]+0.5*(n[1]-l[1]),l=2<l.length&&2<n.length?[r,w,l[2]+0.5*(n[2]-l[2])]:[r,w],h+=v*l[0],e+=v*l[1],k&&2<l.length&&(d+=v*l[2])}return 0<g?k?[h/g,e/g,d/
g]:[h/g,e/g]:a.length?a[0]:null};return{fromGeom:function(a){if(!a)return null;if(Array.isArray(a))return a;var k=a.hasZ,g=a.hasM;if("point"===a.type)return g&&k?[a.x,a.y,a.z,a.m]:k?[a.x,a.y,a.z]:g?[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.path.slice(0);if("multipoint"===a.type)return a.points.slice(0);if("extent"===a.type){a=a.clone().normalize();if(!a)return null;k=g=!1;a.map(function(a){a.hasZ&&(k=!0);a.hasM&&(g=!0)});return a.map(function(a){var e=
[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(k&&a.hasZ)for(var d=0.5*(a.zmax-a.zmin),c=0;c<e.length;c++)e[c].push(d);if(g&&a.hasM){a=0.5*(a.mmax-a.mmin);for(c=0;c<e.length;c++)e[c].push(a)}return e})}return null},contains:function(m,k){if(!m)return!1;if(!Array.isArray(m[0][0]))return a(!1,m,k);for(var g=!1,h=0,e=m.length;h<e;h++)g=a(g,m[h],k);return g},centroid:function(a,k,g){for(var h=[],e,d=0,c=k.length;d<c;d++)e=l([],k[d],g),e.length&&h.push(e);h.sort(function(a,
c){var d=a[2]-c[2];0===d&&g&&(d=a[4]-c[4]);return d});a.length=g?3:2;if(h.length)k=6*h[0][2],a[0]=h[0][0]/k,a[1]=h[0][1]/k,g&&(a[2]=h[0][3]/(6*h[0][4]));else if(h=k[0]&&k[0].length?n(k[0]):null)a[0]=h[0],a[1]=h[1],g&&2<h.length&&(a[2]=h[2]);return a},isClockwise:function(a){for(var k=0,g=0,h=g+1,e=a.length;g<e;g++,h+=1%e)k+=a[g][0]*a[h][1]-a[h][0]*a[g][1];return 0>=0.5*k}}})},"esri/geometry/Multipoint":function(){define("dojo/_base/lang ./SpatialReference ./Geometry ./Point ./Extent ./support/zmUtils".split(" "),
function(a,l,n,m,k,g){var h=n.createSubclass({declaredClass:"esri.geometry.Multipoint",type:"multipoint",getDefaults:function(a){return{points:[]}},normalizeCtorArgs:function(a,d){var c=null,b,g,h=null;a&&!Array.isArray(a)?(c=a.points?a.points:null,d=d||(c?a.spatialReference:a),b=a.hasZ,g=a.hasM):c=a;c=c||[];d=d||l.WGS84;if(h=c[0])void 0===b&&void 0===g?(b=2<h.length,g=!1):void 0===b?b=3<h.length:void 0===g&&(g=3<h.length);return{points:c,spatialReference:d,hasZ:b,hasM:g}},properties:{cache:{dependsOn:["points",
"hasZ","hasM"]},extent:{dependsOn:["cache"],get:function(a){function d(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}if(!this.points.length)return null;a=a||new k;var c=this.points,b=this.hasZ,g=this.hasM,h=c[0],m=d(Math.min),l=d(Math.max),n=f=h[0],r=p=h[1],w,y,f,p,x,z,K,A,E,L,B=b?3:2;E=0;for(L=c.length;E<L;E++)h=c[E],K=h[0],A=h[1],n=m(n,K),r=m(r,A),f=l(f,K),p=l(p,A),b&&2<h.length&&(K=h[2],w=m(w,K),x=l(x,K)),g&&h.length>B&&(h=h[B],y=m(y,h),z=l(z,h));a.xmin=n;a.ymin=r;a.xmax=f;a.ymax=
p;a.spatialReference=this.spatialReference;b?(a.zmin=w,a.zmax=x):(a.zmin=null,a.zmax=null);g?(a.mmin=y,a.mmax=z):(a.mmin=null,a.mmax=null);return a}},points:null},addPoint:function(a){this.clearCache();g.updateSupportFromPoint(this,a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this},clone:function(){var e={points:a.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(e.hasZ=!0);this.hasM&&(e.hasM=!0);return new h(e)},getPoint:function(a){if(this._validateInputs(a)){a=
this.points[a];var d,c,b=2;this.hasZ&&(d=a[2],b=3);this.hasM&&(c=a[b]);return new m({x:a[0],y:a[1],z:d,m:c,spatialReference:this.spatialReference})}},removePoint:function(a){if(this._validateInputs(a))return this.clearCache(),new m(this.points.splice(a,1)[0],this.spatialReference)},setPoint:function(a,d){if(this._validateInputs(a))return this.clearCache(),g.updateSupportFromPoint(d),this.points[a]=d.toArray(),this},toJSON:function(){var e=this.spatialReference,e={points:a.clone(this.points),spatialReference:e&&
e.toJSON()};this.hasZ&&(e.hasZ=!0);this.hasM&&(e.hasM=!0);return e},_pointsToArrays:function(a){for(var d=0;d<a.points.length;d++){var c=a.points[d];g.updateSupportFromPoint(a,c,!0);Array.isArray(c)||(a.spatialReference||(a.spatialReference=c.spatialReference),a.points[d]=c.toArray())}return a},_validateInputs:function(a){return null!=a&&0<=a&&a<this.points.length}});return h})},"esri/layers/graphics/controllers/AutoController":function(){define("require ../../../core/declare dojo/Deferred ../../../request ../../../core/Accessoire ../../../core/AccessoirePromise".split(" "),
function(a,l,n,m,k,g){return l([k,g],{initialize:function(){var a=this,e=this.layer.then(function(){return a._getFeatureCount().then(function(d){d=a._canUseSnapshot(d&&d.count)?0:1;return a._createController(d)})}).then(function(d){a.activeController=d});this.addResolvingPromise(e)},controllerModulePaths:{"0":"./SnapshotController",1:"./OnDemandController"},_getFeatureCount:function(){var a=this.layer,e=a.timeDefinition;return m(a.source.parsedUrl.path+"/query",{query:{f:"json",where:a.definitionExpression||
"1\x3d1",timeExtent:e&&e.toJSON(),returnCountOnly:!0},callbackParamName:"callback"}).then(function(a){return a.data})},_canUseSnapshot:function(a){var e=this.layer,d=e.geometryType;return("polyline"===d||"polygon"===d||"multipoint"===d)&&a<=e.maxRecordCountForAuto||"point"===d&&a<=e.maxPointCountForAuto},_createController:function(g){var e=new n;(g=this.controllerModulePaths[g])?a([g],function(a){var c=new a({layer:this.layer,layerView:this.layerView});c.then(function(){e.resolve(c)},function(a){e.reject(a)})}.bind(this)):
e.reject(Error('Module path not found for controller type: "'+this.mode+'"'));return e.promise}})})},"esri/core/AccessoirePromise":function(){define("./declare dojo/promise/all dojo/aspect dojo/Deferred dojo/errors/create ./Scheduler".split(" "),function(a,l,n,m,k,g){var h=function(a){if(!a.isFulfilled()){var c=a._promiseProps,d=c.resolvingPromises,e,h;c.allPromise&&c.allPromise.cancel();var k=new m;for(e=d.length-1;0<=e;e--)h=d[e],h.isCanceled&&h.isCanceled()?d.splice(e,1):h.then(null,null,c.resolver.progress);
h=null;(c.allPromise=l(d.concat([k.promise]))).then(function(){c.resolver.resolve(a);a=c=k=c.allPromise=c.resolvingPromises=null},function(d){c.allPromise=null;if(!d||"cancel"!==d.dojoType){var e=Array.prototype.slice.call(arguments,0);c.resolver.reject(e[0]);a=c=k=c.allPromise=c.resolvingPromises=null}});k&&g.schedule(function(){k&&k.resolve()})}},e=k("CancelError",null,function(a){this.target=a}),d=function(a){return a||new e(this.instance)},c=function(a){this.instance=a;this.canceler=d.bind(this);
this.resolver=new m;this.initialized=!1;this.resolvingPromises=[]};c.prototype={canceler:null,cancel:function(a){if(!this.resolver.isFulfilled()){this.allPromise.cancel();for(var c=this.resolvingPromises.concat(),d=c.length-1;0<=d;d--)c[d].cancel(a);this.resolver.cancel(a)}}};return a(null,{declaredClass:"esri.core.Promise",constructor:function(){Object.defineProperty(this,"_promiseProps",{value:new c(this),enumerable:!1,configurable:!1,writable:!0});var a=n.after(this,"postscript",function(c,d){a.remove();
a=null;h(this)},!0)},_promiseProps:null,always:function(a){return this.then(a,a)},then:function(a,c,d){var e=new m(this._promiseProps.canceler);a=e.then(a,c,d);this._promiseProps.resolver.then(e.resolve,e.reject,e.progress);return a},isResolved:function(){return this._promiseProps.resolver.isResolved()},isRejected:function(){return this._promiseProps.resolver.isRejected()},isFulfilled:function(){return this._promiseProps.resolver.isFulfilled()},otherwise:function(a){return this.then(null,a)},addResolvingPromise:function(a){a&&
!this.isFulfilled()&&(this._promiseProps.resolvingPromises.push(a),h(this))}})})},"esri/layers/graphics/controllers/SnapshotController":function(){define("dojo/_base/lang dojo/promise/all dojo/Deferred ../../support/GraphicsManager ../../../Graphic ../../../core/Accessoire ../../../core/AccessoirePromise ../../../core/Evented ../../../core/Collection ../../../core/HandleRegistry ../../../geometry/support/scaleUtils".split(" "),function(a,l,n,m,k,g,h,e,d,c,b){return g.createSubclass([h,e],{declaredClass:"esri.layers.graphics.controllers.SnapshotController",
classMetadata:{properties:{isQueryInProgress:{dependsOn:["_queryDfd"]},graphics:{type:d.ofType(k)},extent:{},hasFeatures:{},hasAllFeatures:{}}},constructor:function(){this._queryError=this._queryError.bind(this);this._queryCanceller=this._queryCanceller.bind(this);this._collectionChanged=this._collectionChanged.bind(this);this.refresh=this.refresh.bind(this);this._handles=new c},initialize:function(){this.addResolvingPromise(l([this.layer,this.layerView]));this.then(this._startup.bind(this))},destroy:function(){this.cancelQuery();
this._gManager&&(this._gManager.destroy(),this._gManager=null);this._handles.destroy();this._handles=null},graphics:null,_graphicsSetter:function(a,b){if(b===a)return b;this._handles.remove("graphics");a&&(this._collectionChanged({added:a.toArray()}),this._handles.add(a.on("change",this._collectionChanged),"graphics"));return a},hasAllFeatures:!1,hasFeatures:!1,isQueryInProgress:!1,_isQueryInProgressGetter:function(){return!(!this._queryDfd||this._queryDfd.isFulfilled())},layer:null,layerView:null,
maxPageSize:null,pageSize:null,paginationEnabled:!1,_cancelErrorMsg:"SnapshotController: query cancelled",_currentPageDfd:null,_featureResolution:{value:1,scale:3780},_gManager:null,_handles:null,_maxFeatures:{point:16E3,multipoint:8E3,polyline:4E3,polygon:4E3,multipatch:4E3},_queryDfd:null,_source:null,refresh:function(){this.isResolved()&&this._queryFeatures()},cancelQuery:function(){this.isQueryInProgress&&(this._queryDfd.cancel(Error(this._cancelErrorMsg)),this._queryDfd=null)},_startup:function(){var a=
this.layer,b=a.advancedQueryCapabilities;this.paginationEnabled=!(!b||!b.supportsPagination);this._source=a.source;this.pageSize=null==this.maxPageSize?a.maxRecordCount:Math.min(a.maxRecordCount,this.maxPageSize);this._resolutionParams=this._getResolutionParams();this._gManager=new m({graphics:this.graphics,objectIdField:a.objectIdField});this._setupStateWatchers();this._queryFeatures()},_getResolutionParams:function(){var a=this.layer,c=a.supportsCoordinatesQuantization,d;if(!a.editable&&("polyline"===
a.geometryType||"polygon"===a.geometryType)){var e=b.getUnitValue(this.layerView.view.spatialReference);null!=e&&(d=this._featureResolution.scale,e=this._featureResolution.value/e,d=a.maxScale?a.maxScale:a.minScale?Math.min(d,a.minScale):Math.min(d,b.getScale(this.layerView.view,a.fullExtent)),d*=e/this._featureResolution.scale)}return!d?null:{maxAllowableOffset:c?null:d,quantizationParameters:c?{mode:"view",originPosition:"upperLeft",tolerance:d,extent:a.fullExtent}:null}},_setupStateWatchers:function(){this._handles.add([this.watch("extent",
this.refresh),this.layer.watch("definitionExpression",this.refresh)])},_createQueryParams:function(){var b=this.layerView,c=this.layer.createQuery();c.outSpatialReference=b.view.spatialReference;c.geometry=this.extent;a.mixin(c,this._resolutionParams);this.paginationEnabled&&(c.start=0,c.num=this.pageSize);return c},_queryFeatures:function(){this.cancelQuery();this.hasAllFeatures=this.hasFeatures=!1;this._queryDfd=new n(this._queryCanceller);this._gManager.beginUpdate();this.emit("query-start");this._executeQuery(this._createQueryParams())},
_executeQuery:function(a){this._currentPageDfd=this._source.queryFeatures(a).then(this._processFeatureSet.bind(this,a),this._queryError)},_processFeatureSet:function(a,b){var c=b.exceededTransferLimit,d=b.features,e=this.layer.geometryType.toLowerCase().replace(/^esriGeometry/i,""),g=this._maxFeatures[e]||0,e=d?d.length:0,h=this._gManager.graphics.length+e,k=h>=g;k&&(g=h-g)&&d.splice(e-g,g);e=c&&this.paginationEnabled&&!k?this._queryNextPage(a):!1;d&&this._gManager.add(d);this.hasFeatures=!0;e||(this._gManager.endUpdate(),
this.hasAllFeatures=!c,this._queryDfd.resolve(),this._queryDfd=null,this.emit("query-end",{success:!0}));return b},_queryNextPage:function(a){a.start+=this.pageSize;this._executeQuery(a);return!0},_queryError:function(a){a&&"cancel"===a.dojoType&&!this.hasFeatures?this._gManager.revertUpdate():this._gManager.endUpdate();this._queryDfd.reject(a);this._queryDfd=null;this.emit("query-end",{success:!1})},_queryCanceller:function(a){var b=this._currentPageDfd;b&&!b.isFulfilled()&&b.cancel(a)},_collectionChanged:function(a){var b,
c,d;if(d=a.added)for(b=0;c=d[b];b++)c.layer=this.layer;if(d=a.removed)for(b=0;c=d[b];b++)c.layer=null}})})},"esri/layers/support/GraphicsManager":function(){define(["../../core/Accessoire"],function(a){return a.createSubclass({classMetadata:{properties:{indexById:{dependsOn:["graphics","objectIdField"]}}},destroy:function(){this.removeAll()},graphics:null,objectIdField:null,indexById:null,_indexByIdGetter:function(){return this._createIndexById(this.graphics&&this.graphics.toArray(),this.objectIdField)},
_oldIndex:null,beginUpdate:function(){this._oldIndex=this.indexById;this.indexById=null},add:function(a){a&&a.length&&(this.indexById=this.indexById||{},a=this._updateAndExtractNew(a,this.indexById,this._oldIndex),this.graphics.addMany(a))},revertUpdate:function(){var a=this._extractLeftOnly(this.indexById,this._oldIndex);this.indexById=this._oldIndex;this._oldIndex=null;this.graphics.removeMany(a)},endUpdate:function(){var a=this._extractLeftOnly(this._oldIndex,this.indexById);this._oldIndex=null;
this.graphics.removeMany(a)},find:function(a){return null!=a&&this.indexById&&this.indexById[a]},removeAll:function(){this.indexById=this._oldIndex=null;this.graphics.removeAll()},_createIndexById:function(a,n){var m;if(a&&a.length&&n){var k,g,h;m={};for(k=0;g=a[k];k++)h=g.attributes&&g.attributes[n],null!=h&&(m[h]=g)}return m},_updateAndExtractNew:function(a,n,m){var k,g,h,e,d=[],c=a?a.length:0,b=this.objectIdField;for(k=0;k<c;k++)g=a[k],h=g.attributes&&g.attributes[b],null!=h?(e=m&&m[h])?(n[h]=
e,e.geometry=g.geometry,e.attributes=g.attributes):(n[h]=g,d.push(g)):d.push(g);return d},_extractLeftOnly:function(a,n){var m,k,g=[];for(m in a)(k=a[m])&&(!n||!n[m])&&g.push(k);return g}})})},"esri/Graphic":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/accessorSupport/decorators dojo/_base/lang ./core/lang ./core/JSONSupport ./PopupTemplate ./geometry/support/jsonUtils ./symbols/support/jsonUtils".split(" "),function(a,l,n,m,k,g,h,
e,d,c,b){var s=0;return function(a){function e(b,c,d,g){a.call(this,b,c,d,g);this.popupTemplate=null;Object.defineProperty(this,"uid",{value:s++})}n(e,a);e.prototype.normalizeCtorArgs=function(a,b,c,d){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:d}};Object.defineProperty(e.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,
"geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(e.prototype,"visible",{set:function(a){var b=this._get("visible");b!==a&&(this._set("visible",a),this._notifyLayer("visible",b,a))},enumerable:!0,
configurable:!0});e.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]};e.prototype.setAttribute=function(a,b){if(this.attributes){var c=this.getAttribute(a);this.attributes[a]=b;this._notifyLayer("attributes",c,b,a)}else this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",void 0,b,a)};e.prototype.getEffectivePopupTemplate=function(){return this.popupTemplate||this.layer&&this.layer.popupTemplate};e.prototype.toJSON=function(){return{geometry:this.geometry&&this.geometry.toJSON(),
symbol:this.symbol&&this.symbol.toJSON(),attributes:g.mixin({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};e.prototype.clone=function(){return new e({attributes:h.clone(this.attributes),geometry:this.geometry&&this.geometry.clone()||null,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),symbol:this.symbol&&this.symbol.clone()||null,visible:this.visible})};e.prototype._notifyLayer=function(a,b,c,d){this.layer&&(a={graphic:this,property:a,oldValue:b,newValue:c},
d&&(a.attributeName=d),this.layer.graphicChanged(a))};m([k.property({value:null})],e.prototype,"attributes",null);m([k.property({value:null,json:{read:c.fromJSON}})],e.prototype,"geometry",null);m([k.property()],e.prototype,"layer",void 0);m([k.property({type:d})],e.prototype,"popupTemplate",void 0);m([k.property({value:null,json:{read:b.read}})],e.prototype,"symbol",null);m([k.property({value:!0,set:function(a){}})],e.prototype,"visible",null);return e=m([k.subclass("esri.Graphic")],e)}(k.declared(e))})},
"esri/PopupTemplate":function(){define("./core/Accessor ./core/JSONSupport ./core/kebabDictionary ./core/Collection ./core/lang dojo/_base/lang".split(" "),function(a,l,n,m,k,g){var h=n({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),e=n({shortDate:"short-date",shortDateLE:"short-date-le",longDate:"long-date",dayShortMonthYear:"day-short-month-year",longMonthDayYear:"long-month-day-year",shortDateLongTime:"short-date-long-time",shortDateLELongTime:"short-date-le-long-time",shortDateShortTime:"short-date-short-time",
shortDateLEShortTime:"short-date-le-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLongTime24:"short-date-long-time-24",shortDateLELongTime24:"short-date-le-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year"}),d=n({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});a=a.createSubclass({properties:{className:{},temporary:{},image:{},id:{},title:{},visible:{}},
className:"",temporary:!1,image:"",id:"",title:"",visible:!0,clone:function(){return new this.constructor({className:this.className,image:this.image,id:this.id,title:this.title,visible:this.visible})}});var c=l.createSubclass({properties:{actions:{type:m.ofType(a)},content:{value:null,json:{readFrom:["description","popupElements","mediaInfos","showAttachments"]}},fieldInfos:{value:null},overwriteActions:{value:!1},title:{value:""},relatedRecordsInfo:{value:null}},declaredClass:"esri.PopupTemplate",
actions:null,content:"",fieldInfos:null,_fieldInfosReader:function(a){return this._readFieldInfos(a)},overwriteActions:!1,title:"",relatedRecordsInfo:null,_relatedRecordsInfoReader:function(a){return a?k.clone(a):a},_dateFormatKebabDict:e,clone:function(){var a=this.actions;a&&(a=k.clone(a.toArray()));return new c({actions:a||[],content:Array.isArray(this.content)?k.clone(this.content):this.content,fieldInfos:this.fieldInfos?k.clone(this.fieldInfos):null,overwriteActions:this.overwriteActions,relatedRecordsInfo:this.relatedRecordsInfo?
k.clone(this.relatedRecordsInfo):null,title:this.title})},toJSON:function(){var a={fieldInfos:this.fieldInfos?k.clone(this.fieldInfos):void 0,relatedRecordsInfo:this.relatedRecordsInfo?k.clone(this.relatedRecordsInfo):void 0,showAttachments:!1,title:this.title};a.fieldInfos&&(a.fieldInfos=this._writeFieldInfos(a.fieldInfos));var c=this.content;"string"===typeof c?a.description=c:Array.isArray(c)&&(a.popupElements=k.clone(c),a.popupElements.forEach(function(c){"attachments"===c.type&&!a.showAttachments?
a.showAttachments=!0:"media"===c.type&&!a.mediaInfos?(c.mediaInfos&&(a.mediaInfos=k.clone(c.mediaInfos),a.mediaInfos.forEach(function(a){a.type=d.toJSON(a.type)})),delete c.mediaInfos):"text"===c.type&&!a.description?(c.text&&(a.description=c.text),delete c.text):"fields"===c.type&&!a.fieldInfos&&(c.fieldInfos&&(a.fieldInfos=this._writeFieldInfos(k.clone(c.fieldInfos))),delete c.fieldInfos);return c}.bind(this)));return a},_contentReader:function(a,c){var d=c.description,e=[],g=c.popupElements;g&&
g.length?e=g.map(function(a){if("text"===a.type&&!a.text)a.text=c.description;else if("media"===a.type&&(a.mediaInfos||c.mediaInfos))a.mediaInfos||(a.mediaInfos=c.mediaInfos),a.mediaInfos=this._readMediaInfos(a.mediaInfos);return a}.bind(this)):(c.description?e.push({type:"text",text:c.description}):e.push({type:"fields"}),c.mediaInfos&&c.mediaInfos.length&&e.push({type:"media",mediaInfos:this._readMediaInfos(c.mediaInfos)}),c.showAttachments&&e.push({type:"attachments",displayType:"list"}));e.length&&
(d=e);return d},_readFieldInfos:function(a){a&&a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=e.fromJSON(b));c&&(a.stringFieldOption=h.fromJSON(c))});return a},_writeFieldInfos:function(a){a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=e.toJSON(b));c&&(a.stringFieldOption=h.toJSON(c))});return a},_readMediaInfos:function(a){a.forEach(function(a){a.type=d.fromJSON(a.type)});return a}});
c.Action=a;return c})},"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../Symbol3D ../CartographicLineSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../PictureMarkerSymbol ../PictureFillSymbol ../SimpleFillSymbol ../TextSymbol ../PointSymbol3D ../LineSymbol3D ../PolygonSymbol3D ../MeshSymbol3D ../LabelSymbol3D ../WebStyleSymbol ./symbolConversion".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w,y){function f(a){return!a?null:"esriSLS"===
a.type?void 0!==a.cap?g:h:p[a.type]||null}var p={esriSMS:e,esriPMS:d,esriTS:s,esriCLS:g,esriSFS:b,esriPFS:c,PointSymbol3D:q,LineSymbol3D:v,PolygonSymbol3D:t,MeshSymbol3D:u,LabelSymbol3D:r,styleSymbolReference:w};l.read=function(a,b,c){if(b=f(a))return b=new b,b.read(a,c),b;c&&(c.messages&&a)&&c.messages.push(new m("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:c}));return null};l.write=function(a,b,c){if(!a)return null;if(c&&"web-scene"===
c.origin&&!a.isInstanceOf(k)&&!a.isInstanceOf(w)){var f=y.to3D(a);if(f.symbol)return f.symbol.write(b,c);c.messages&&c.messages.push(new n("symbol:unsupported","Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",{symbol:a,context:c,error:f.error}));return null}return a.write(b,c)};l.fromJSON=function(a,b){var c=f(a);return c?c.fromJSON(a,b):null}})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Logger ../core/collectionUtils ./Symbol ./Symbol3DLayer ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./LineSymbol3DLayer ./PathSymbol3DLayer ./FillSymbol3DLayer ./ExtrudeSymbol3DLayer ./TextSymbol3DLayer ../core/accessorSupport/decorators".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r){var w={Icon:c,Object:b,Line:s,Path:q,Fill:v,Extrude:t,Text:u},y=k.ofType(d),f=g.getLogger("esri.symbols.Symbol3D");return function(a){function b(c){a.call(this);this.type=null;this._set("symbolLayers",this._createSymbolLayersCollection())}n(b,a);Object.defineProperty(b.prototype,"symbolLayers",{set:function(a){var b=this._get("symbolLayers");b?(b.removeAll(),b.addMany(a)):(b=this._createSymbolLayersCollection(a),this._set("symbolLayers",b))},enumerable:!0,
configurable:!0});b.prototype.readSymbolLayers=function(a,b,c){b=this._createSymbolLayersCollection();for(var d=0;d<a.length;d++){var e=a[d].type,g=w[e];g?(e=new g,e.read(a[d],c),b.add(e)):f.warn("Unknown symbol layer type: "+e)}return b};b.prototype.normalizeCtorArgs=function(a){return a instanceof d?{symbolLayers:this._createSymbolLayersCollection([a])}:Array.isArray(a)?{symbolLayers:this._createSymbolLayersCollection(a)}:a};b.prototype._createSymbolLayersCollection=function(a){var b=this;a=new y(a);
a.on("before-add",function(a){return b._onSymbolLayersBeforeAdd(a)});return a};b.prototype._onSymbolLayersBeforeAdd=function(a){0>this._allowedLayerTypes.indexOf(a.item.type)&&(f.error("Symbol layer of type '"+a.item.type+"' is not allowed for symbol of type '"+this.type+"'"),a.preventDefault())};m([r.property({json:{writable:!1}})],b.prototype,"color",void 0);m([r.property({type:y,json:{writable:!0}}),r.cast(h.castForReferenceSetter)],b.prototype,"symbolLayers",null);m([r.read("symbolLayers")],b.prototype,
"readSymbolLayers",null);m([r.property({type:String,readOnly:!0,json:{readable:!1}})],b.prototype,"type",void 0);return b=m([r.subclass("esri.symbols.Symbol3D")],b)}(r.declared(e))})},"esri/symbols/Symbol":function(){define(["../core/lang","../core/kebabDictionary","../core/JSONSupport","../Color"],function(a,l,n,m){var k=l({esriSMS:"simple-marker-symbol",esriPMS:"picture-marker-symbol",esriSLS:"simple-line-symbol",esriCLS:"cartographic-line-symbol",esriSFS:"simple-fill-symbol",esriPFS:"picture-fill-symbol",
esriTS:"text-symbol",esriSHD:"shield-label-symbol",PointSymbol3D:"point-symbol-3d",LineSymbol3D:"line-symbol-3d",PolygonSymbol3D:"polygon-symbol-3d",MeshSymbol3D:"mesh-symbol-3d",LabelSymbol3D:"label-symbol-3d"}),g=0;return n.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+g++},properties:{type:{type:String,value:null,json:{read:k.fromJSON,writeAlways:!0,write:function(a,e){e.type=k.toJSON(this.type)}}},color:{type:m,value:new m([0,0,0,1]),json:{read:function(g){return g&&
a.isDefined(g[0])?[g[0],g[1],g[2],g[3]/255]:g},writable:!0}}}})})},"esri/Color":function(){define(["./core/declare","dojo/colors"],function(a,l){var n=a([l],{declaredClass:"esri.Color",toJSON:function(){return[this.r,this.g,this.b,1<this.a?this.a:Math.round(255*this.a)]},clone:function(){return new n(this.toRgba())}});n.toJSON=function(a){return a&&[a.r,a.g,a.b,1<a.a?a.a:Math.round(255*a.a)]};n.fromJSON=function(a){return a&&new n([a[0],a[1],a[2],a[3]/255])};n.toUnitRGB=function(a){return[a.r/255,
a.g/255,a.b/255]};var m,k="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(m=0;m<k.length;m++)n[k[m]]=l[k[m]];n.named.rebeccapurple=[102,51,153];return n})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(a,l,n,m){var k={};l.setObject("dojo.colors",k);var g=function(a,d,c){0>c&&++c;1<c&&--c;var b=6*c;return 1>b?a+(d-a)*b:1>2*c?d:2>3*c?a+6*(d-a)*(2/3-c):a};a.colorFromRgb=n.fromRgb=function(a,d){var c=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);
if(c){var b=c[2].split(/\s*,\s*/),h=b.length,c=c[1];if("rgb"==c&&3==h||"rgba"==c&&4==h)return c=b[0],"%"==c.charAt(c.length-1)?(c=m.map(b,function(a){return 2.56*parseFloat(a)}),4==h&&(c[3]=b[3]),n.fromArray(c,d)):n.fromArray(b,d);if("hsl"==c&&3==h||"hsla"==c&&4==h){var c=(parseFloat(b[0])%360+360)%360/360,k=parseFloat(b[1])/100,l=parseFloat(b[2])/100,k=0.5>=l?l*(k+1):l+k-l*k,l=2*l-k,c=[256*g(l,k,c+1/3),256*g(l,k,c),256*g(l,k,c-1/3),1];4==h&&(c[3]=b[3]);return n.fromArray(c,d)}}return null};var h=
function(a,d,c){a=Number(a);return isNaN(a)?c:a<d?d:a>c?c:a};n.prototype.sanitize=function(){this.r=Math.round(h(this.r,0,255));this.g=Math.round(h(this.g,0,255));this.b=Math.round(h(this.b,0,255));this.a=h(this.a,0,1);return this};k.makeGrey=n.makeGrey=function(a,d){return n.fromArray([a,a,a,d])};l.mixin(n.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,
226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,
150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],
hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,
136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],
navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,
87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return n})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/JSONSupport ./support/Symbol3DMaterial ../core/accessorSupport/decorators".split(" "),
function(a,l,n,m,k,g,h,e){return function(a){function c(b){a.call(this);this.enabled=!0;this.type=this.material=null}n(c,a);c.prototype.writeEnabled=function(a,c){a||(c.enabled=a)};c.prototype.readElevationInfo=function(a){return k.clone(a)};c.prototype.writeElevationInfo=function(a,c){c.elevationInfo=k.clone(a)};m([e.property()],c.prototype,"enabled",void 0);m([e.write("enabled")],c.prototype,"writeEnabled",null);m([e.property()],c.prototype,"elevationInfo",void 0);m([e.read("elevationInfo")],c.prototype,
"readElevationInfo",null);m([e.write("elevationInfo")],c.prototype,"writeElevationInfo",null);m([e.property({type:h.default,json:{writable:!0}})],c.prototype,"material",void 0);m([e.property({type:String,readOnly:!0,json:{readable:!1,writeAlways:!0}})],c.prototype,"type",void 0);return c=m([e.subclass("esri.symbols.Symbol3DLayer")],c)}(e.declared(g))})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/JSONSupport ../../Color ../../core/accessorSupport/decorators".split(" "),
function(a,l,n,m,k,g,h,e){a=function(a){function c(){a.apply(this,arguments)}n(c,a);c.prototype.readColor=function(a,c){var d=null!=c.transparency?1-0.01*c.transparency:1;if(a&&k.isDefined(a[0]))return[a[0],a[1],a[2],d]};c.prototype.writeColor=function(a,c){c.color=[a.r,a.g,a.b];1!==a.a&&(c.transparency=100*(1-a.a))};c.prototype.clone=function(){return new c({color:this.color.clone()})};m([e.property({type:h})],c.prototype,"color",void 0);m([e.read("color",["color","transparency"])],c.prototype,"readColor",
null);m([e.write("color")],c.prototype,"writeColor",null);return c=m([e.subclass("esri.symbols.support.Symbol3DMaterial")],c)}(e.declared(g));l.Symbol3DMaterial=a;Object.defineProperty(l,"__esModule",{value:!0});l.default=a})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/screenUtils ../core/urlUtils ./Symbol3DLayer ./support/Symbol3DOutline ./support/Symbol3DResource ../core/accessorSupport/decorators".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b){var s=k({topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right"}),q=function(a){function c(){a.apply(this,arguments)}n(c,a);c.prototype.readHref=function(a,b,c){return a?h.read(a,c):b.dataURI};c.prototype.writeHref=function(a,b,c){a&&(h.isDataProtocol(a)?b.dataURI=a:b.href=h.write(a,c))};c.prototype.clone=function(){return new c({href:this.href,primitive:this.primitive})};m([b.property({json:{writable:!0,readFrom:["href","dataURI"]}})],
c.prototype,"href",void 0);m([b.read("href")],c.prototype,"readHref",null);m([b.write("href")],c.prototype,"writeHref",null);return c=m([b.subclass("esri.symbols.support.IconSymbol3DLayerResource")],c)}(b.declared(c.default));return function(a){function c(b){a.call(this);this.resource=this.material=null;this.type="Icon";this.outline=this.anchor=this.size=void 0}n(c,a);c.prototype.readAnchor=function(a){return s.fromJSON(a)};c.prototype.writeAnchor=function(a,b){b.anchor=s.toJSON(a)};c.prototype.clone=
function(){return new c({anchor:this.anchor,enabled:this.enabled,material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),size:this.size})};m([b.property()],c.prototype,"material",void 0);m([b.property({type:q,json:{writable:!0}})],c.prototype,"resource",void 0);m([b.property()],c.prototype,"type",void 0);m([b.property({json:{writable:!0}}),b.cast(g.toPt)],c.prototype,"size",void 0);m([b.property({type:String})],c.prototype,
"anchor",void 0);m([b.read("anchor")],c.prototype,"readAnchor",null);m([b.write("anchor")],c.prototype,"writeAnchor",null);m([b.property({type:d.default,json:{writable:!0}})],c.prototype,"outline",void 0);return c=m([b.subclass("esri.symbols.IconSymbol3DLayer")],c)}(b.declared(e))})},"esri/core/screenUtils":function(){define([],function(){var a=/^(\d+(\.\d+)?)\s*((px)|(pt))?$/i,l={DPI:96,pt2px:function(a){return a/72*l.DPI},px2pt:function(a){return 72*a/l.DPI},toPt:function(n){if("string"===typeof n)if(a.test(n)){n=
n.match(a);var m=Number(n[1]);n="px"===(n[3]&&n[3].toLowerCase())?l.px2pt(m):m}else console.warn("screenUtils.toPt: input not recognized!"),n=null;return n}};return l})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/JSONSupport ../../Color ../../core/screenUtils ../../core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,g,h,e,d){a=function(a){function b(){a.apply(this,
arguments);this.color=new h([0,0,0,1]);this.size=1}n(b,a);b.prototype.readColor=function(a,b){var c=null!=b.transparency?1-0.01*b.transparency:1;if(a&&k.isDefined(a[0]))return[a[0],a[1],a[2],c]};b.prototype.writeColor=function(a,b){b.color=[a.r,a.g,a.b];1!==a.a&&(b.transparency=100*(1-a.a))};b.prototype.clone=function(){return new b({color:k.clone(this.color),size:this.size})};m([d.property({type:h})],b.prototype,"color",void 0);m([d.read("color",["color","transparency"])],b.prototype,"readColor",
null);m([d.write("color")],b.prototype,"writeColor",null);m([d.property({json:{writable:!0}}),d.cast(e.toPt)],b.prototype,"size",void 0);return b=m([d.subclass("esri.symbols.support.Symbol3DOutline")],b)}(d.declared(g));l.Symbol3DOutline=a;Object.defineProperty(l,"__esModule",{value:!0});l.default=a})},"esri/symbols/support/Symbol3DResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/urlUtils ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(a,l,n,m,k,g,h){a=function(a){function d(){a.apply(this,arguments)}n(d,a);d.prototype.readHref=function(a,b,d){return k.read(a,d)};d.prototype.writeHref=function(a,b,d){a&&(b.href=k.write(a,d))};d.prototype.clone=function(){return new d({href:this.href,primitive:this.primitive})};m([h.property({json:{writable:!0}})],d.prototype,"href",void 0);m([h.read("href")],d.prototype,"readHref",null);m([h.write("href")],d.prototype,"writeHref",null);m([h.property({json:{writable:!0}})],d.prototype,"primitive",
void 0);return d=m([h.subclass("esri.symbols.support.Symbol3DResource")],d)}(h.declared(g));l.Symbol3DResource=a;Object.defineProperty(l,"__esModule",{value:!0});l.default=a})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ./support/Symbol3DResource ../core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,g,h){return function(a){function d(c){a.call(this);this.resource=this.material=
null;this.type="Object";this.heading=this.anchor=this.depth=this.height=this.width=void 0}n(d,a);d.prototype.clone=function(){return new d({heading:this.heading,anchor:this.anchor,depth:this.depth,enabled:this.enabled,height:this.height,material:this.material&&this.material.clone(),resource:this.resource&&this.resource.clone(),width:this.width})};m([h.property()],d.prototype,"material",void 0);m([h.property({type:g.default,json:{writable:!0}})],d.prototype,"resource",void 0);m([h.property()],d.prototype,
"type",void 0);m([h.property({json:{writable:!0}})],d.prototype,"width",void 0);m([h.property({json:{writable:!0}})],d.prototype,"height",void 0);m([h.property({json:{writable:!0}})],d.prototype,"depth",void 0);m([h.property({json:{writable:!0}})],d.prototype,"anchor",void 0);m([h.property({json:{writable:!0}})],d.prototype,"heading",void 0);return d=m([h.subclass("esri.symbols.ObjectSymbol3DLayer")],d)}(h.declared(k))})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ./Symbol3DLayer ../core/accessorSupport/decorators".split(" "),
function(a,l,n,m,k,g,h){return function(a){function d(c){a.call(this);this.material=null;this.type="Line";this.size=1}n(d,a);d.prototype.clone=function(){return new d({enabled:this.enabled,material:this.material&&this.material.clone(),size:this.size})};m([h.property()],d.prototype,"material",void 0);m([h.property()],d.prototype,"type",void 0);m([h.property({json:{writable:!0}}),h.cast(k.toPt)],d.prototype,"size",void 0);return d=m([h.subclass("esri.symbols.LineSymbol3DLayer")],d)}(h.declared(g))})},
"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ../core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,g){return function(a){function e(d){a.call(this);this.material=null;this.type="Path";this.size=void 0}n(e,a);e.prototype.readSize=function(a,c){return a||c.width||0};e.prototype.clone=function(){return new e({enabled:this.enabled,material:this.material&&this.material.clone(),size:this.size})};
m([g.property()],e.prototype,"material",void 0);m([g.property()],e.prototype,"type",void 0);m([g.property({json:{writable:!0}})],e.prototype,"size",void 0);m([g.read("size",["size","width"])],e.prototype,"readSize",null);return e=m([g.subclass("esri.symbols.PathSymbol3DLayer")],e)}(g.declared(k))})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ./support/Symbol3DOutline ../core/accessorSupport/decorators".split(" "),
function(a,l,n,m,k,g,h){return function(a){function d(c){a.call(this);this.type="Fill";this.outline=this.material=null}n(d,a);d.prototype.clone=function(){return new d({enabled:this.enabled,material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone()})};m([h.property()],d.prototype,"type",void 0);m([h.property()],d.prototype,"material",void 0);m([h.property({type:g.default,json:{writable:!0}})],d.prototype,"outline",void 0);return d=m([h.subclass("esri.symbols.FillSymbol3DLayer")],
d)}(h.declared(k))})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Symbol3DLayer ../core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,g){return function(a){function e(d){a.call(this);this.type="Extrude";this.size=void 0;this.material=null}n(e,a);e.prototype.clone=function(){return new e({enabled:this.enabled,material:this.material&&this.material.clone(),size:this.size})};m([g.property()],
e.prototype,"type",void 0);m([g.property({json:{writable:!0}})],e.prototype,"size",void 0);m([g.property()],e.prototype,"material",void 0);return e=m([g.subclass("esri.symbols.ExtrudeSymbol3DLayer")],e)}(g.declared(k))})},"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/_base/lang ../core/screenUtils ./Symbol3DLayer ../core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,g,h,e){return function(a){function c(b){a.call(this);
this.material=this.font=null;this.text=this.size=void 0;this.type="Text"}n(c,a);c.prototype.writeFont=function(a,c){a&&(c.font=k.clone(a))};c.prototype.clone=function(){return new c({enabled:this.enabled,font:this.font&&k.clone(this.font),material:this.material&&this.material.clone(),size:this.size,text:this.text})};m([e.property()],c.prototype,"font",void 0);m([e.write("font")],c.prototype,"writeFont",null);m([e.property()],c.prototype,"material",void 0);m([e.property({json:{writable:!0}}),e.cast(g.toPt)],
c.prototype,"size",void 0);m([e.property({json:{writable:!0}})],c.prototype,"text",void 0);m([e.property()],c.prototype,"type",void 0);return c=m([e.subclass("esri.symbols.TextSymbol3DLayer")],c)}(e.declared(h))})},"esri/symbols/CartographicLineSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","../core/screenUtils","./SimpleLineSymbol"],function(a,l,n,m,k){var g={STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",
STYLE_NULL:"none",STYLE_INSIDE_FRAME:"inside-frame",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},h={color:[0,0,0,1],style:g.STYLE_SOLID,width:0.75,cap:g.CAP_BUTT,join:g.JOIN_MITER,miterLimit:7.5},e={butt:"esriLCSButt",round:"esriLCSRound",
square:"esriLCSSquare"},d={miter:"esriLJSMiter",round:"esriLJSRound",bevel:"esriLJSBevel"},c=a(k,{declaredClass:"esri.symbols.CartographicLineSymbol",properties:{type:"cartographic-line-symbol",cap:{json:{read:function(a){return n.valueOf(e,a)},write:function(a,c){c.cap=e[this.cap]}}},join:{json:{read:function(a){return n.valueOf(d,a)},write:function(a,c){c.join=d[this.join]}}},miterLimit:{cast:m.toPt,json:{writable:!0}},width:{}},getDefaults:function(){return l.mixin(this.inherited(arguments),h)},
normalizeCtorArgs:function(a,c,d,e,g,h){if(a&&"string"!==typeof a)return a;var k={};a&&(k.style=a);c&&(k.color=c);null!=d&&(k.width=m.toPt(d));e&&(k.cap=e);g&&(k.join=g);null!=h&&(k.miterLimit=m.toPt(h));return k},clone:function(){return new c({cap:this.cap,color:n.clone(this.color),join:this.join,miterLimit:this.miterLimit,style:this.style,width:this.width})}});l.mixin(c,g);c.defaultProps=h;return c})},"esri/symbols/SimpleLineSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang",
"../core/screenUtils","./LineSymbol"],function(a,l,n,m,k){var g={color:[0,0,0,1],style:"solid",width:0.75},h=a(k,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line-symbol",style:{value:"solid",json:{read:function(a,d){return n.valueOf(this._jsonStyles,a)||void 0},write:function(a,d){d.style=this._jsonStyles[a]}}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame",
"short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return l.mixin(this.inherited(arguments),g)},normalizeCtorArgs:function(a,d,c){if(a&&"string"!==typeof a)return a;var b={};null!=a&&(b.style=a);null!=d&&(b.color=d);null!=c&&(b.width=m.toPt(c));return b},clone:function(){return new h({color:n.clone(this.color),style:this.style,
width:this.width})}});l.mixin(h,{STYLE_SOLID:"solid",STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot"});h.defaultProps=g;return h})},"esri/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(a,
l,n){return a(n,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line-symbol",width:{value:0.75,cast:l.toPt,json:{writable:!0}}}})})},"esri/symbols/SimpleMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ./MarkerSymbol ./SimpleLineSymbol".split(" "),function(a,l,n,m,k,g){var h={style:"circle",color:[255,255,255,0.25],outline:new g,size:12,angle:0,xoffset:0,yoffset:0},e=a(k,{declaredClass:"esri.symbol.SimpleMarkerSymbol",properties:{color:{},
type:"simple-marker-symbol",size:{value:12},style:{type:String,value:"circle",json:{read:function(a){return n.valueOf(this._styles,a)},write:function(a,c){c.style=this._styles[a]}}},path:{type:String,value:null,set:function(a){this.style="path";this._set("path",a)},json:{writable:!0}},outline:{type:g,json:{writable:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",path:"esriSMSPath"},getDefaults:function(){return l.mixin(this.inherited(arguments),
h)},normalizeCtorArgs:function(a,c,b,e){if(a&&"string"!==typeof a)return a;var g={};a&&(g.style=a);null!=c&&(g.size=m.toPt(c));b&&(g.outline=b);e&&(g.color=e);return g},clone:function(){return new e({angle:this.angle,color:n.clone(this.color),outline:this.outline&&this.outline.clone(),size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},_setDim:function(a,c,b){this._targetWidth=m.toPt(a);this._targetHeight=m.toPt(c);this._spikeSize=m.toPt(b)}});l.mixin(e,{STYLE_CIRCLE:"circle",
STYLE_SQUARE:"square",STYLE_CROSS:"cross",STYLE_X:"x",STYLE_DIAMOND:"diamond",STYLE_PATH:"path",STYLE_TARGET:"target"});e.defaultProps=h;return e})},"esri/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],function(a,l,n){return a(n,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(a){return a&&-1*a},write:function(a,k){k.angle=a&&-1*a}}},type:{},xoffset:{value:0,cast:l.toPt,json:{writable:!0}},yoffset:{value:0,cast:l.toPt,
json:{writable:!0}},size:{value:9,cast:function(a){return"auto"===a?a:l.toPt(a)},json:{writable:!0}}}})})},"esri/symbols/PictureMarkerSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ../core/urlUtils ./MarkerSymbol".split(" "),function(a,l,n,m,k,g){var h={width:12,height:12,angle:0,xoffset:0,yoffset:0},e=a(g,{declaredClass:"esri.symbols.PictureMarkerSymbol",properties:{color:{json:{writable:!1}},type:"picture-marker-symbol",url:{dependsOn:["source"],json:{readable:!1},
get:function(){return this.source?this.source.url:void 0},set:function(a){var c;a&&0===a.indexOf("data:")?(c=a.substring(5,a.indexOf(";")),this.source={url:a,contentType:c,imageData:a.substring(13+c.length)}):this.source={url:a}}},source:{json:{readFrom:["imageData","url"],read:function(a,c,b){a=k.read(c.url,b);return c.imageData?{url:a,contentType:c.contentType,imageData:c.imageData}:{url:a}},write:function(a,c,b){a.imageData&&(c.imageData=a.imageData);a.contentType&&(c.contentType=a.contentType);
a.url&&(c.url=k.write(a.url,b))}}},height:{json:{readFrom:["height","size"],read:function(a,c){return c.size||a},writable:!0},cast:m.toPt},width:{json:{readFrom:["width","size"],read:function(a,c){return c.size||a},writable:!0},cast:m.toPt},size:{json:{writable:!1}}},getDefaults:function(){return l.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,c,b){if(a&&"string"!==typeof a&&null==a.imageData)return a;var e={};a&&(e.url=a);null!=c&&(e.width=m.toPt(c));null!=b&&(e.height=m.toPt(b));
return e},clone:function(){return new e({angle:this.angle,height:this.height,source:n.clone(this.source),width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});e.defaultProps=h;return e})},"esri/symbols/PictureFillSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ../core/urlUtils ./FillSymbol".split(" "),function(a,l,n,m,k,g){var h={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},e=a(g,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill-symbol",
url:{dependsOn:["source"],json:{readable:!1},get:function(){return this.source?this.source.url:void 0},set:function(a){var c;a&&0===a.indexOf("data:")?(c=a.substring(5,a.indexOf(";")),this.source={url:a,contentType:c,imageData:a.substring(13+c.length)}):this.source={url:a}}},xscale:{value:1,json:{writable:!0}},yscale:{value:1,json:{writable:!0}},width:{value:12,cast:m.toPt,json:{writable:!0}},height:{value:12,cast:m.toPt,json:{writable:!0}},xoffset:{value:0,cast:m.toPt,json:{writable:!0}},yoffset:{value:0,
cast:m.toPt,json:{writable:!0}},source:{json:{readFrom:["imageData","url"],read:function(a,c,b){a=k.read(c.url,b);return c.imageData?{url:a,contentType:c.contentType,imageData:c.imageData}:{url:a}},write:function(a,c,b){a.imageData&&(c.imageData=a.imageData);a.contentType&&(c.contentType=a.contentType);a.url&&(c.url=k.write(a.url,b))}}}},getDefaults:function(){return l.mixin(this.inherited(arguments),h)},normalizeCtorArgs:function(a,c,b,e){if(a&&"string"!==typeof a&&null==a.imageData)return a;var g=
{};a&&(g.url=a);c&&(g.outline=c);null!=b&&(g.width=m.toPt(b));null!=e&&(g.height=m.toPt(e));return g},clone:function(){return new e({color:n.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),source:n.clone(this.source),width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale})}});e.defaultProps=h;return e})},"esri/symbols/FillSymbol":function(){define(["../core/declare","./Symbol","./SimpleLineSymbol"],function(a,l,n){return a(l,
{declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:n,json:{writable:!0}},type:null}})})},"esri/symbols/SimpleFillSymbol":function(){define(["../core/declare","dojo/_base/lang","../core/lang","./FillSymbol","./SimpleLineSymbol"],function(a,l,n,m,k){var g={style:"solid",outline:new k,color:[0,0,0,0.25]},h=a(m,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill-symbol",style:{value:"solid",type:String,json:{read:function(a){return n.valueOf(this._styles,
a)||void 0},write:function(a,d){d.style=this._styles[a]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return l.mixin(this.inherited(arguments),g)},normalizeCtorArgs:function(a,d,c){if(a&&"string"!==typeof a)return a;var b={};a&&(b.style=a);d&&(b.outline=d);c&&(b.color=
c);return b},clone:function(){return new h({color:n.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});l.mixin(h,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});h.defaultProps=g;return h})},"esri/symbols/TextSymbol":function(){define("../core/declare dojo/_base/lang ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),
function(a,l,n,m,k,g,h){var e={x:0,y:0,text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},d=a(g,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:k,json:{writable:!0}},borderLineColor:{type:k,json:{writable:!0}},borderLineSize:{type:Number,json:{writable:!0}},color:{},font:{type:h,json:{writable:!0}},horizontalAlignment:{value:"center",json:{writable:!0}},kerning:{value:!0,json:{writable:!0}},haloColor:{type:k,json:{writable:!0}},
haloSize:{type:Number,cast:m.toPt,json:{writable:!0}},rightToLeft:{json:{writable:!0}},rotated:{value:!1,json:{writable:!0}},text:{type:String,json:{writable:!0}},type:"text-symbol",verticalAlignment:{type:String,json:{writable:!0}},xoffset:{value:0,type:Number,cast:m.toPt,json:{writable:!0}},yoffset:{value:0,type:Number,cast:m.toPt,json:{writable:!0}},angle:{type:Number,value:0,json:{read:function(a){return a&&-1*a},write:function(a,b){b.angle=a&&-1*a}}},width:{json:{writable:!0}}},getDefaults:function(){return l.mixin(this.inherited(arguments),
e)},normalizeCtorArgs:function(a,b,d){if(a&&"string"!==typeof a)return a;var e={};a&&(e.text=a);b&&(e.font=b);d&&(e.color=d);return e},clone:function(){return new d({angle:this.angle,backgroundColor:n.clone(this.backgroundColor),borderLineColor:n.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:n.clone(this.color),font:this.font&&this.font.clone(),haloColor:n.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,
rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});l.mixin(d,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});d.defaultProps=e;return d})},"esri/symbols/Font":function(){define(["dojo/_base/lang","../core/JSONSupport","../core/lang","../core/screenUtils"],function(a,l,n,m){var k=
{style:"normal",variant:"normal",weight:"normal",size:9,family:"serif",decoration:"none"},g=l.createSubclass({declaredClass:"esri.symbols.Font",properties:{decoration:{},family:{},size:{cast:m.toPt},style:{},variant:{},weight:{}},getDefaults:function(){return k},normalizeCtorArgs:function(a,e,d,c,b){if(a&&"string"!==typeof a)return a;var g={};null!=a&&(g.size=m.toPt(a));null!=e&&(g.style=e);null!=d&&(g.variant=d);null!=c&&(g.weight=c);b&&(g.family=b);return g},toJSON:function(){return n.fixJson({size:this.size,
style:this.style,variant:this.variant,decoration:this.decoration,weight:this.weight,family:this.family})},clone:function(){return new g({decoration:this.decoration,family:this.family,size:this.size,style:this.style,variant:this.variant,weight:this.weight})}});g.defaultProps=k;a.mixin(g,{STYLE_NORMAL:"normal",STYLE_ITALIC:"italic",STYLE_OBLIQUE:"oblique",VARIANT_NORMAL:"normal",VARIANT_SMALLCAPS:"small-caps",WEIGHT_NORMAL:"normal",WEIGHT_BOLD:"bold",WEIGHT_BOLDER:"bolder",WEIGHT_LIGHTER:"lighter"});
return g})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,g,h){return function(a){function d(c){a.call(this);this.type="point-symbol-3d"}n(d,a);d.prototype.clone=function(){return new d({symbolLayers:k.clone(this.symbolLayers)})};m([h.property()],d.prototype,"type",void 0);m([h.shared(["Icon","Object","Text"])],d.prototype,
"_allowedLayerTypes",void 0);return d=m([h.subclass("esri.symbols.PointSymbol3D")],d)}(h.declared(g))})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,g,h){return function(a){function d(c){a.call(this);this.type="line-symbol-3d"}n(d,a);d.prototype.clone=function(){return new d({symbolLayers:k.clone(this.symbolLayers)})};
m([h.property()],d.prototype,"type",void 0);m([h.shared(["Line","Path","Text"])],d.prototype,"_allowedLayerTypes",void 0);return d=m([h.subclass("esri.symbols.LineSymbol3D")],d)}(h.declared(g))})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,g,h){return function(a){function d(c){a.call(this);this.type="polygon-symbol-3d"}
n(d,a);d.prototype.clone=function(){return new d({symbolLayers:k.clone(this.symbolLayers)})};d.fromJSON=function(a){var b=new d;b.read(a);if(2===b.symbolLayers.length&&"Fill"===b.symbolLayers.getItemAt(0).type&&"Line"===b.symbolLayers.getItemAt(1).type){var e=b.symbolLayers.getItemAt(0),g=b.symbolLayers.getItemAt(1);if(g.enabled&&(!a.symbolLayers||!a.symbolLayers[1]||!1!==a.symbolLayers[1].enable))e.outline={size:g.size,color:g.material.color};b.symbolLayers.removeAt(1)}return b};m([h.property()],
d.prototype,"type",void 0);m([h.shared("Extrude Fill Line Icon Object Text".split(" "))],d.prototype,"_allowedLayerTypes",void 0);return d=m([h.subclass("esri.symbols.PolygonSymbol3D")],d)}(h.declared(g))})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,g,h){return function(a){function d(c){a.call(this);this.type="mesh-symbol-3d"}
n(d,a);d.prototype.clone=function(){return new d({symbolLayers:k.clone(this.symbolLayers)})};m([h.property()],d.prototype,"type",void 0);m([h.shared(["Fill"])],d.prototype,"_allowedLayerTypes",void 0);return d=m([h.subclass("esri.symbols.MeshSymbol3D")],d)}(h.declared(g))})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ./Symbol3D ../core/accessorSupport/decorators".split(" "),function(a,l,n,m,k,
g,h){return function(a){function d(c){a.call(this);this.type="label-symbol-3d"}n(d,a);d.prototype.clone=function(){return new d({symbolLayers:k.clone(this.symbolLayers)})};m([h.property()],d.prototype,"type",void 0);m([h.shared(["Text"])],d.prototype,"_allowedLayerTypes",void 0);return d=m([h.subclass("esri.symbols.LabelSymbol3D")],d)}(h.declared(g))})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/urlUtils ./Symbol ../portal/Portal ./support/symbolUtils".split(" "),
function(a,l,n,m,k,g,h,e,d){return function(a){function b(b){a.call(this,b);this.name=this.styleUrl=this.portal=this.styleName=null;this.type="web-style-symbol"}n(b,a);b.prototype._readStyleUrl=function(a,b,c){return g.normalize(g.makeAbsolute(a,c&&c.url&&c.url.path))};b.prototype._writeStyleUrl=function(a,b,c){b.styleUrl=g.makeRelative(a,c&&c.url&&c.url.path)};b.prototype._writeType=function(a,b,c){b.type="styleSymbolReference"};b.prototype.read=function(a,b){this.portal=b?b.portal:void 0;this.inherited(arguments,
[a,b]);return this};b.prototype.clone=function(){return new b({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};b.prototype.fetchSymbol=function(){var a=this;return d.fetchStyle(this,{portal:this.portal}).then(function(b){return d.fetchSymbolFromStyle(b,a.name)})};m([k.property({json:{writable:!1}})],b.prototype,"color",void 0);m([k.property({type:String,json:{writable:!0}})],b.prototype,"styleName",void 0);m([k.property({type:e,json:{writable:!1}})],b.prototype,
"portal",void 0);m([k.property({type:String,json:{writable:!0}})],b.prototype,"styleUrl",void 0);m([k.read("styleUrl")],b.prototype,"_readStyleUrl",null);m([k.write("styleUrl")],b.prototype,"_writeStyleUrl",null);m([k.property({type:String,json:{writable:!0}})],b.prototype,"name",void 0);m([k.property({type:String,readOnly:!0,json:{readable:!1}})],b.prototype,"type",void 0);m([k.write("type")],b.prototype,"_writeType",null);return b=m([k.subclass("esri.symbols.WebStyleSymbol")],b)}(k.declared(h))})},
"esri/symbols/support/symbolUtils":function(){define("require exports dojo/has dojo/_base/lang ../../symbols/support/jsonUtils ../../core/urlUtils ../../core/promiseUtils ../../core/Error ../../request ../../portal/Portal ../../portal/PortalQueryParams".split(" "),function(a,l,n,m,k,g,h,e,d,c,b){function s(a,b){a=g.normalize(g.makeAbsolute(a,b));var c=a.lastIndexOf("/");return-1===c?{url:a,base:a,filename:null}:{url:a,base:a.slice(0,c),filename:a.slice(c+1)}}function q(a,b){t(a,function(a){return s(a,
b).url})}function v(a,b){a.symbolLayers&&a.symbolLayers.forEach(b)}function t(a,b){v(a,function(a){if((a=a.resource)&&a.href)a.href=b(a.href)})}function u(a){t(a,function(a){return/\.svg$/.test(a)?(a.slice(0,a.length-4)+".png").replace("/resource/","/resource/png/"):a})}function r(a,b){a=m.clone(a);q(a,b);(n("ie")||n("trident"))&&u(a);return k.fromJSON(a)}function w(a,b){var c=s(a,b&&b.url&&b.url.path);return z(c.url).then(function(a){return{data:a.data,base:c.base,filename:c.filename}})}function y(a,
b){var d=this,e=b.portal||new c,g=e.url+" - "+a;return K[g]?h.resolve(K[g]):f(a,e).then(function(a){return a.fetchData()}).then(function(a){a={data:a,base:d.itemUrl,filename:"data"};return K[g]=a})}function f(a,c){return c.load().then(function(){if(!c.stylesGroupQuery)throw new e("layer-templates:styles-group-query-missing","The styles group query needs to be configured in the portal to query styles");var a=new b({disableExtraQuery:!0,query:c.stylesGroupQuery});return c.queryGroups(a)}).then(function(c){c=
c.results;if(!c||!Array.isArray(c)||0===c.length)throw new e("layer-templates:styles-missing","The styles group does not contain any styles");c=c[0];var f=new b({disableExtraQuery:!0,query:'typekeywords:"'+a+'"'});return c.queryItems(f)}).then(function(b){b=b.results;if(!b||!Array.isArray(b)||0===b.length)throw new e("layer-templates:style-missing","The style '${styleName}' is not part of the styles group",{styleName:a});return b[0].load()})}function p(a,b){return a.styleUrl?w(a.styleUrl,b):a.styleName?
y(a.styleName,b):h.reject(new e("layer-templates:style-url-and-name-missing","Either styleUrl or styleName is required in layerDefinition"))}function x(a,b){for(var c=a.data,f=function(f){if(c.items[f].name===b){var d=s(c.items[f].webRef,a.base);return{value:z(d.url).then(function(a){return r(a.data,d.base)})}}},d=0;d<c.items.length;d++){var g=f(d);if("object"===typeof g)return g.value}return h.reject(new e("layer-templates:symbol-name-not-found","The symbol name '${symbolName}' could not be found",
{symbolName:b}))}function z(a){var b={responseType:"json"};/\.json$/.test(a)||(b.query={f:"json"});return d(g.normalize(a),b)}l.fetchStyleFromUrl=w;var K={};l.fetchStyle=p;l.fetchStyleSymbol=function(a,b){return!a.name?h.reject(new e("layer-templates:style-symbol-reference-name-missing","Missing name in style symbol reference")):p(a,b).then(function(b){return x(b,a.name)})};l.fetchSymbolFromStyle=x;l.fetchSymbolSet=function(a){var b=a.data;if(!b.symbolSetUrl)return h.reject(new e("layer-templates:symbol-set-url-missing",
"Style does not provide symbol set url",{style:b}));var c=s(b.symbolSetUrl,a.base);return z(c.url).then(function(a){a=a.data;if(0===a.length||!a[0].name)throw new e("layer-templates:symbol-set-missing-data","Invalid syntax or missing data in symbol set",{style:b});for(var f={},d=0;d<a.length;d++){var g=r(a[d],c.base);f[a[d].name]=g;a[d].name===b.defaultItem&&(f.defaultSymbol=g)}f.defaultSymbol||(f.defaultSymbol=f[a[0].name]);return f})};l.createSymbol=function(a,b){return!a?null:r(a,b&&b.url&&b.url.path)}})},
"esri/symbols/support/symbolConversion":function(){define("require exports dojo/_base/lang ../../core/Error ../Font ../SimpleLineSymbol ../SimpleMarkerSymbol ../PictureMarkerSymbol ../SimpleFillSymbol ../TextSymbol ../WebStyleSymbol ../Symbol3D ../LineSymbol3D ../PointSymbol3D ../PolygonSymbol3D ../LabelSymbol3D ../LineSymbol3DLayer ../IconSymbol3DLayer ../FillSymbol3DLayer ../TextSymbol3DLayer ../../Color".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w,y,f,p){function x(a){var b=a.color?
a.color.clone():new p([255,255,255]),c,f,d;a instanceof e?(a.color&&(0===a.color.r&&0===a.color.g&&0===a.color.b)&&(b=new p([255,255,255])),c=a.source.imageData&&a.source.contentType?{href:"data:"+a.source.contentType+";base64,"+a.source.imageData}:{href:a.url},f=a.width):(c=a.style,c in z?c=z[c]:(console.log(c+' cannot be mapped to Icon symbol. Fallback to "circle"'),c="circle"),c={primitive:c},f=a.size,a.outline&&(a.outline.color&&0<a.outline.width)&&(d={size:a.outline.width,color:a.outline.color.clone()}));
return new v(new w({size:f,screenOffset:[a.xoffset,a.yoffset],resource:c,material:{color:b},outline:d}))}var z={};z[h.STYLE_CIRCLE]="circle";z[h.STYLE_CROSS]="cross";z[h.STYLE_DIAMOND]="kite";z[h.STYLE_SQUARE]="square";z[h.STYLE_X]="x";l.to3D=function(a,p,l){void 0===p&&(p=!1);void 0===l&&(l=!1);if(!a)return{symbol:null};var v;if(a instanceof s||a instanceof b)v=a;else if(a instanceof g)v=new q(new r({size:a.width||1,material:{color:a.color?a.color.clone():[255,255,255]}}));else if(a instanceof h)v=
x(a);else if(a instanceof e)v=x(a);else if(a instanceof d)v=new y({material:{color:a.color?a.color.clone():[255,255,255]}}),a.outline&&a.outline.color&&(v.outline={size:a.outline.width||0,color:a.outline.color}),v=new t(v);else if(a instanceof c){switch(a.verticalAlignment){case "top":v="top";break;case "middle":v="center";break;case "bottom":v="bottom";break;default:v="center"}switch(a.horizontalAlignment){case "left":v+="Left";break;case "center":v+="Center";break;case "right":v+="Right";break;
default:v+="Center"}var w=n.clone(k.defaultProps);a.font&&n.mixin(w,a.font);v=new u(new f({size:w.size,font:{family:w.family,weight:w.weight,style:w.style},material:{color:a.color.clone()},placement:v,screenOffset:[a.xoffset,a.yoffset],text:a.text}))}else return{error:new m("symbol-conversion:unsupported-2d-symbol","Unsupported 2D symbol of tyoe '"+(a.type||a.declaredClass)+"'",{symbol:a})};p&&(v.id=a.id);if(l&&v.isInstanceOf(s))for(a=0;a<v.symbolLayers.length;++a)v.symbolLayers.getItemAt(a)._ignoreDrivers=
!0;return{symbol:v}}})},"esri/geometry/support/scaleUtils":function(){define(["../../config","../../core/lang","./WKIDUnitConversion"],function(a,l,n){var m=20015077/180,k={getUnitValueForSR:function(a){return this.getUnitValue(a)||m},getUnitValue:function(a){var h,e,d;a&&("object"===typeof a?(h=a.wkid,e=a.wkt):"number"===typeof a?h=a:"string"===typeof a&&(e=a));h?d=n.values[n[h]]:e&&-1!==e.search(/^PROJCS/i)&&(a=/UNIT\[([^\]]+)\]\]$/i.exec(e))&&a[1]&&(d=parseFloat(a[1].split(",")[1]));return d},
getScale:function(g,h,e){var d,c,b;1<arguments.length&&l.isDefined(h)&&!h.declaredClass?(d=g,c=h,h=null,b=k.getUnitValue(e)):(d=h||g.extent,c=g.width,b=k.getUnitValue(d&&d.spatialReference));return d&&c?39.37*(d.width/c*(b||m))*a.screenDPI:0},getExtentForScale:function(g,h){var e=g.extent,d=g.width,c=k.getUnitValue(e.get("spatialReference"));return e.clone().expand(h*d/(39.37*(c||m)*a.screenDPI)/e.get("width"))}};return k})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var a,
l={values:[1,0.3048,0.3048006096012192,0.3047972654,0.9143917962,0.201166195164,0.9143984146160287,0.3047994715386762,20.11676512155263,20.11678249437587,0.9143985307444408,0.91439523,0.3047997101815088,20.116756,5E4,15E4],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,
3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,
3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,
3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4217:2,4414:0,4415:0,4417:0,
4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,
6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,
6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,
6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,
6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,
6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6984:0,6991:0,7131:0,7132:2,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,
7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,
21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,
29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,
102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,
103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,
103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,
103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,
103585:2,103695:2};for(a=2E3;2045>=a;a++)l[a]=0;for(a=2056;2065>=a;a++)l[a]=0;for(a=2067;2135>=a;a++)l[a]=0;for(a=2137;2154>=a;a++)l[a]=0;for(a=2161;2170>=a;a++)l[a]=0;for(a=2172;2193>=a;a++)l[a]=0;for(a=2195;2198>=a;a++)l[a]=0;for(a=2200;2203>=a;a++)l[a]=0;for(a=2205;2217>=a;a++)l[a]=0;for(a=2222;2224>=a;a++)l[a]=1;for(a=2225;2250>=a;a++)l[a]=2;for(a=2251;2253>=a;a++)l[a]=1;for(a=2257;2264>=a;a++)l[a]=2;for(a=2274;2279>=a;a++)l[a]=2;for(a=2280;2282>=a;a++)l[a]=1;for(a=2283;2289>=a;a++)l[a]=2;for(a=
2290;2292>=a;a++)l[a]=0;for(a=2308;2313>=a;a++)l[a]=0;for(a=2315;2491>=a;a++)l[a]=0;for(a=2494;2866>=a;a++)l[a]=0;for(a=2867;2869>=a;a++)l[a]=1;for(a=2870;2888>=a;a++)l[a]=2;for(a=2891;2895>=a;a++)l[a]=2;for(a=2896;2898>=a;a++)l[a]=1;for(a=2902;2908>=a;a++)l[a]=2;for(a=2915;2920>=a;a++)l[a]=2;for(a=2921;2923>=a;a++)l[a]=1;for(a=2924;2930>=a;a++)l[a]=2;for(a=2931;2962>=a;a++)l[a]=0;for(a=2964;2968>=a;a++)l[a]=2;for(a=2969;2973>=a;a++)l[a]=0;for(a=2975;2991>=a;a++)l[a]=0;for(a=2995;3051>=a;a++)l[a]=
0;for(a=3054;3079>=a;a++)l[a]=0;for(a=3081;3088>=a;a++)l[a]=0;for(a=3092;3101>=a;a++)l[a]=0;for(a=3106;3138>=a;a++)l[a]=0;for(a=3146;3151>=a;a++)l[a]=0;for(a=3153;3166>=a;a++)l[a]=0;for(a=3168;3172>=a;a++)l[a]=0;for(a=3174;3203>=a;a++)l[a]=0;for(a=3294;3358>=a;a++)l[a]=0;for(a=3367;3403>=a;a++)l[a]=0;for(a=3408;3416>=a;a++)l[a]=0;for(a=3417;3438>=a;a++)l[a]=2;for(a=3441;3446>=a;a++)l[a]=2;for(a=3447;3450>=a;a++)l[a]=0;for(a=3451;3459>=a;a++)l[a]=2;for(a=3460;3478>=a;a++)l[a]=0;for(a=3554;3559>=a;a++)l[a]=
0;for(a=3560;3570>=a;a++)l[a]=2;for(a=3571;3581>=a;a++)l[a]=0;for(a=3594;3597>=a;a++)l[a]=0;for(a=3601;3604>=a;a++)l[a]=0;for(a=3637;3639>=a;a++)l[a]=0;for(a=3665;3667>=a;a++)l[a]=0;for(a=3693;3695>=a;a++)l[a]=0;for(a=3701;3727>=a;a++)l[a]=0;for(a=3728;3739>=a;a++)l[a]=2;for(a=3740;3751>=a;a++)l[a]=0;for(a=3753;3760>=a;a++)l[a]=2;for(a=3761;3773>=a;a++)l[a]=0;for(a=3775;3777>=a;a++)l[a]=0;for(a=3779;3781>=a;a++)l[a]=0;for(a=3783;3785>=a;a++)l[a]=0;for(a=3788;3791>=a;a++)l[a]=0;for(a=3797;3802>=a;a++)l[a]=
0;for(a=3814;3816>=a;a++)l[a]=0;for(a=3825;3829>=a;a++)l[a]=0;for(a=3832;3841>=a;a++)l[a]=0;for(a=3844;3852>=a;a++)l[a]=0;for(a=3873;3885>=a;a++)l[a]=0;for(a=3890;3893>=a;a++)l[a]=0;for(a=3907;3912>=a;a++)l[a]=0;for(a=3942;3950>=a;a++)l[a]=0;for(a=3968;3970>=a;a++)l[a]=0;for(a=3973;3976>=a;a++)l[a]=0;for(a=3986;3989>=a;a++)l[a]=0;for(a=3994;3997>=a;a++)l[a]=0;for(a=4048;4051>=a;a++)l[a]=0;for(a=4056;4063>=a;a++)l[a]=0;for(a=4093;4096>=a;a++)l[a]=0;for(a=4390;4398>=a;a++)l[a]=0;for(a=4399;4413>=a;a++)l[a]=
2;for(a=4418;4433>=a;a++)l[a]=2;for(a=4455;4457>=a;a++)l[a]=2;for(a=4484;4489>=a;a++)l[a]=0;for(a=4491;4554>=a;a++)l[a]=0;for(a=4568;4589>=a;a++)l[a]=0;for(a=4652;4656>=a;a++)l[a]=0;for(a=4766;4800>=a;a++)l[a]=0;for(a=5014;5016>=a;a++)l[a]=0;for(a=5069;5072>=a;a++)l[a]=0;for(a=5105;5130>=a;a++)l[a]=0;for(a=5173;5188>=a;a++)l[a]=0;for(a=5253;5259>=a;a++)l[a]=0;for(a=5269;5275>=a;a++)l[a]=0;for(a=5292;5311>=a;a++)l[a]=0;for(a=5329;5331>=a;a++)l[a]=0;for(a=5343;5349>=a;a++)l[a]=0;for(a=5355;5357>=a;a++)l[a]=
0;for(a=5387;5389>=a;a++)l[a]=0;for(a=5459;5463>=a;a++)l[a]=0;for(a=5479;5482>=a;a++)l[a]=0;for(a=5518;5520>=a;a++)l[a]=0;for(a=5530;5539>=a;a++)l[a]=0;for(a=5550;5552>=a;a++)l[a]=0;for(a=5562;5583>=a;a++)l[a]=0;for(a=5623;5625>=a;a++)l[a]=2;for(a=5631;5639>=a;a++)l[a]=0;for(a=5649;5653>=a;a++)l[a]=0;for(a=5663;5680>=a;a++)l[a]=0;for(a=5682;5685>=a;a++)l[a]=0;for(a=5875;5877>=a;a++)l[a]=0;for(a=5921;5940>=a;a++)l[a]=0;for(a=6050;6125>=a;a++)l[a]=0;for(a=6244;6275>=a;a++)l[a]=0;for(a=6328;6348>=a;a++)l[a]=
0;for(a=6350;6356>=a;a++)l[a]=0;for(a=6366;6372>=a;a++)l[a]=0;for(a=6381;6387>=a;a++)l[a]=0;for(a=6393;6404>=a;a++)l[a]=0;for(a=6480;6483>=a;a++)l[a]=0;for(a=6511;6514>=a;a++)l[a]=0;for(a=6579;6581>=a;a++)l[a]=0;for(a=6619;6624>=a;a++)l[a]=0;for(a=6625;6627>=a;a++)l[a]=2;for(a=6628;6632>=a;a++)l[a]=0;for(a=6634;6637>=a;a++)l[a]=0;for(a=6669;6692>=a;a++)l[a]=0;for(a=6707;6709>=a;a++)l[a]=0;for(a=6720;6723>=a;a++)l[a]=0;for(a=6732;6738>=a;a++)l[a]=0;for(a=6931;6933>=a;a++)l[a]=0;for(a=7374;7376>=a;a++)l[a]=
0;for(a=7528;7586>=a;a++)l[a]=0;for(a=7587;7645>=a;a++)l[a]=2;for(a=20002;20032>=a;a++)l[a]=0;for(a=20062;20092>=a;a++)l[a]=0;for(a=20135;20138>=a;a++)l[a]=0;for(a=20248;20258>=a;a++)l[a]=0;for(a=20348;20358>=a;a++)l[a]=0;for(a=20436;20440>=a;a++)l[a]=0;for(a=20822;20824>=a;a++)l[a]=0;for(a=20934;20936>=a;a++)l[a]=0;for(a=21035;21037>=a;a++)l[a]=0;for(a=21095;21097>=a;a++)l[a]=0;for(a=21148;21150>=a;a++)l[a]=0;for(a=21413;21423>=a;a++)l[a]=0;for(a=21473;21483>=a;a++)l[a]=0;for(a=21780;21782>=a;a++)l[a]=
0;for(a=21891;21894>=a;a++)l[a]=0;for(a=21896;21899>=a;a++)l[a]=0;for(a=22171;22177>=a;a++)l[a]=0;for(a=22181;22187>=a;a++)l[a]=0;for(a=22191;22197>=a;a++)l[a]=0;for(a=22234;22236>=a;a++)l[a]=0;for(a=22521;22525>=a;a++)l[a]=0;for(a=22991;22994>=a;a++)l[a]=0;for(a=23028;23038>=a;a++)l[a]=0;for(a=23830;23853>=a;a++)l[a]=0;for(a=23866;23872>=a;a++)l[a]=0;for(a=23877;23884>=a;a++)l[a]=0;for(a=23886;23894>=a;a++)l[a]=0;for(a=23946;23948>=a;a++)l[a]=0;for(a=24311;24313>=a;a++)l[a]=0;for(a=24342;24347>=
a;a++)l[a]=0;for(a=24370;24374>=a;a++)l[a]=10;for(a=24375;24381>=a;a++)l[a]=0;for(a=24718;24721>=a;a++)l[a]=0;for(a=24817;24821>=a;a++)l[a]=0;for(a=24877;24882>=a;a++)l[a]=0;for(a=24891;24893>=a;a++)l[a]=0;for(a=25391;25395>=a;a++)l[a]=0;for(a=25828;25838>=a;a++)l[a]=0;for(a=26191;26195>=a;a++)l[a]=0;for(a=26391;26393>=a;a++)l[a]=0;for(a=26701;26722>=a;a++)l[a]=0;for(a=26729;26799>=a;a++)l[a]=2;for(a=26801;26803>=a;a++)l[a]=2;for(a=26811;26813>=a;a++)l[a]=2;for(a=26847;26870>=a;a++)l[a]=2;for(a=26891;26899>=
a;a++)l[a]=0;for(a=26901;26923>=a;a++)l[a]=0;for(a=26929;26946>=a;a++)l[a]=0;for(a=26948;26998>=a;a++)l[a]=0;for(a=27037;27040>=a;a++)l[a]=0;for(a=27205;27232>=a;a++)l[a]=0;for(a=27258;27260>=a;a++)l[a]=0;for(a=27391;27398>=a;a++)l[a]=0;for(a=27561;27564>=a;a++)l[a]=0;for(a=27571;27574>=a;a++)l[a]=0;for(a=27581;27584>=a;a++)l[a]=0;for(a=27591;27594>=a;a++)l[a]=0;for(a=28191;28193>=a;a++)l[a]=0;for(a=28348;28358>=a;a++)l[a]=0;for(a=28402;28432>=a;a++)l[a]=0;for(a=28462;28492>=a;a++)l[a]=0;for(a=29118;29122>=
a;a++)l[a]=0;for(a=29168;29172>=a;a++)l[a]=0;for(a=29177;29185>=a;a++)l[a]=0;for(a=29187;29195>=a;a++)l[a]=0;for(a=29900;29903>=a;a++)l[a]=0;for(a=30161;30179>=a;a++)l[a]=0;for(a=30491;30494>=a;a++)l[a]=0;for(a=30729;30732>=a;a++)l[a]=0;for(a=31251;31259>=a;a++)l[a]=0;for(a=31265;31268>=a;a++)l[a]=0;for(a=31275;31279>=a;a++)l[a]=0;for(a=31281;31297>=a;a++)l[a]=0;for(a=31461;31469>=a;a++)l[a]=0;for(a=31491;31495>=a;a++)l[a]=0;for(a=31917;31922>=a;a++)l[a]=0;for(a=31965;32E3>=a;a++)l[a]=0;for(a=32001;32003>=
a;a++)l[a]=2;for(a=32005;32031>=a;a++)l[a]=2;for(a=32033;32060>=a;a++)l[a]=2;for(a=32064;32067>=a;a++)l[a]=2;for(a=32074;32077>=a;a++)l[a]=2;for(a=32081;32086>=a;a++)l[a]=0;for(a=32107;32130>=a;a++)l[a]=0;for(a=32133;32158>=a;a++)l[a]=0;for(a=32164;32167>=a;a++)l[a]=2;for(a=32180;32199>=a;a++)l[a]=0;for(a=32201;32260>=a;a++)l[a]=0;for(a=32301;32360>=a;a++)l[a]=0;for(a=32601;32662>=a;a++)l[a]=0;for(a=32664;32667>=a;a++)l[a]=2;for(a=32701;32761>=a;a++)l[a]=0;for(a=53001;53004>=a;a++)l[a]=0;for(a=53008;53019>=
a;a++)l[a]=0;for(a=53021;53032>=a;a++)l[a]=0;for(a=53042;53046>=a;a++)l[a]=0;for(a=53074;53080>=a;a++)l[a]=0;for(a=54001;54004>=a;a++)l[a]=0;for(a=54008;54019>=a;a++)l[a]=0;for(a=54021;54032>=a;a++)l[a]=0;for(a=54042;54046>=a;a++)l[a]=0;for(a=54048;54053>=a;a++)l[a]=0;for(a=54074;54080>=a;a++)l[a]=0;for(a=102001;102040>=a;a++)l[a]=0;for(a=102042;102063>=a;a++)l[a]=0;for(a=102065;102067>=a;a++)l[a]=0;for(a=102070;102117>=a;a++)l[a]=0;for(a=102122;102216>=a;a++)l[a]=0;for(a=102221;102377>=a;a++)l[a]=
0;for(a=102382;102388>=a;a++)l[a]=0;for(a=102389;102398>=a;a++)l[a]=2;for(a=102400;102444>=a;a++)l[a]=0;for(a=102445;102447>=a;a++)l[a]=2;for(a=102448;102458>=a;a++)l[a]=0;for(a=102459;102468>=a;a++)l[a]=2;for(a=102469;102496>=a;a++)l[a]=0;for(a=102500;102519>=a;a++)l[a]=1;for(a=102520;102524>=a;a++)l[a]=0;for(a=102525;102529>=a;a++)l[a]=2;for(a=102530;102561>=a;a++)l[a]=0;for(a=102570;102588>=a;a++)l[a]=0;for(a=102590;102598>=a;a++)l[a]=0;for(a=102601;102603>=a;a++)l[a]=0;for(a=102605;102628>=a;a++)l[a]=
0;for(a=102629;102646>=a;a++)l[a]=2;for(a=102648;102700>=a;a++)l[a]=2;for(a=102701;102703>=a;a++)l[a]=0;for(a=102707;102730>=a;a++)l[a]=2;for(a=102733;102758>=a;a++)l[a]=2;for(a=102767;102798>=a;a++)l[a]=0;for(a=102965;102969>=a;a++)l[a]=0;for(a=102971;102973>=a;a++)l[a]=0;for(a=102975;102989>=a;a++)l[a]=0;for(a=102990;102992>=a;a++)l[a]=1;for(a=102997;103002>=a;a++)l[a]=0;for(a=103003;103008>=a;a++)l[a]=2;for(a=103009;103011>=a;a++)l[a]=0;for(a=103012;103014>=a;a++)l[a]=2;for(a=103019;103021>=a;a++)l[a]=
0;for(a=103022;103024>=a;a++)l[a]=2;for(a=103029;103031>=a;a++)l[a]=0;for(a=103032;103034>=a;a++)l[a]=2;for(a=103065;103068>=a;a++)l[a]=0;for(a=103074;103076>=a;a++)l[a]=0;for(a=103077;103079>=a;a++)l[a]=1;for(a=103080;103082>=a;a++)l[a]=0;for(a=103083;103085>=a;a++)l[a]=2;for(a=103090;103093>=a;a++)l[a]=0;for(a=103097;103099>=a;a++)l[a]=0;for(a=103100;103102>=a;a++)l[a]=2;for(a=103107;103109>=a;a++)l[a]=0;for(a=103110;103112>=a;a++)l[a]=2;for(a=103113;103116>=a;a++)l[a]=0;for(a=103117;103120>=a;a++)l[a]=
2;for(a=103153;103157>=a;a++)l[a]=0;for(a=103158;103162>=a;a++)l[a]=2;for(a=103163;103165>=a;a++)l[a]=0;for(a=103166;103168>=a;a++)l[a]=1;for(a=103169;103171>=a;a++)l[a]=2;for(a=103186;103188>=a;a++)l[a]=0;for(a=103189;103191>=a;a++)l[a]=2;for(a=103192;103195>=a;a++)l[a]=0;for(a=103196;103199>=a;a++)l[a]=2;for(a=103200;103224>=a;a++)l[a]=0;for(a=103225;103227>=a;a++)l[a]=1;for(a=103232;103237>=a;a++)l[a]=0;for(a=103238;103243>=a;a++)l[a]=2;for(a=103244;103246>=a;a++)l[a]=0;for(a=103247;103249>=a;a++)l[a]=
2;for(a=103254;103256>=a;a++)l[a]=0;for(a=103257;103259>=a;a++)l[a]=2;for(a=103264;103266>=a;a++)l[a]=0;for(a=103267;103269>=a;a++)l[a]=2;for(a=103300;103375>=a;a++)l[a]=0;for(a=103381;103383>=a;a++)l[a]=0;for(a=103384;103386>=a;a++)l[a]=1;for(a=103387;103389>=a;a++)l[a]=0;for(a=103390;103392>=a;a++)l[a]=2;for(a=103397;103399>=a;a++)l[a]=0;for(a=103400;103471>=a;a++)l[a]=2;for(a=103476;103478>=a;a++)l[a]=0;for(a=103479;103481>=a;a++)l[a]=2;for(a=103486;103488>=a;a++)l[a]=0;for(a=103489;103491>=a;a++)l[a]=
2;for(a=103492;103495>=a;a++)l[a]=0;for(a=103496;103499>=a;a++)l[a]=2;for(a=103528;103543>=a;a++)l[a]=0;for(a=103544;103548>=a;a++)l[a]=2;for(a=103549;103551>=a;a++)l[a]=0;for(a=103552;103554>=a;a++)l[a]=1;for(a=103555;103557>=a;a++)l[a]=2;for(a=103558;103560>=a;a++)l[a]=0;for(a=103571;103573>=a;a++)l[a]=0;for(a=103574;103576>=a;a++)l[a]=2;for(a=103577;103580>=a;a++)l[a]=0;for(a=103581;103583>=a;a++)l[a]=2;for(a=103600;103694>=a;a++)l[a]=0;for(a=103700;103793>=a;a++)l[a]=2;for(a=103794;103871>=a;a++)l[a]=
0;for(a=103900;103971>=a;a++)l[a]=2;return l})},"esri/layers/graphics/sources/FeatureLayerSource":function(){define("dojo/_base/lang ../../../core/declare ../../../core/Accessoire ../../../core/AccessoirePromise ../../../core/urlUtils ../../../request ../../../tasks/QueryTask".split(" "),function(a,l,n,m,k,g,h){return l([n,m],{classMetadata:{properties:{parsedUrl:{dependsOn:["url","layerId"]},queryTask:{dependsOn:["parsedUrl","gdbVersion"]}}},getDefaults:function(e){var d=this.inherited(arguments),
c=e.layer;c&&(d=a.mixin(d,{url:c.url,layerId:c.layerId,gdbVersion:c.gdbVersion}));return d},initialize:function(){this.addResolvingPromise(this._fetchService())},_parsedUrlGetter:function(){var a=this.url?k.urlToObject(this.url):null;null!=this.layerId&&null!=a&&(a.path=k.join(a.path,this.layerId.toString()));return a},_queryTaskGetter:function(){return new h({url:this.parsedUrl.path,gdbVersion:this.gdbVersion})},queryFeatures:function(a){return this.queryTask.execute(a)},queryObjectIds:function(a){return this.queryTask.executeForIds(a)},
queryFeatureCount:function(a){return this.queryTask.executeForCount(a)},queryExtent:function(a){return this.queryTask.executeForExtent(a)},_fixSymbolUrls:function(a){if(a){var d=this.parsedUrl.path+"/images/",c=[a.symbol,a.defaultSymbol];(a=a.classBreakInfos||a.uniqueValueInfos)&&a.forEach(function(a){c.push(a.symbol)});c.forEach(function(a){var c=a&&a.url;c&&-1===c.search(/https?\:/i)&&(a.url=d+c)})}},_updateUrl:function(a){a&&(this.url=this.url.replace(/^http:/i,"https:"))},_fetchService:function(){return null==
this.layerId?g(this.url,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){this._updateUrl(a.ssl);if((a=a.data)&&a.layers&&a.layers[0])this.layerId=a.layers[0].id;return this._fetchServiceLayer()}.bind(this)):this._fetchServiceLayer()},_fetchServiceLayer:function(){return g(this.parsedUrl.path,{query:a.mixin({f:"json"},this.parsedUrl.query),responseType:"json",callbackParamName:"callback"}).then(function(a){this._updateUrl(a.ssl);a=a.data;this._fixSymbolUrls(a.drawingInfo&&
a.drawingInfo.renderer);this.layerDefinition=a}.bind(this))}})})},"esri/tasks/QueryTask":function(){define("dojo/_base/array dojo/_base/lang ../request ../geometry/Extent ../geometry/support/normalizeUtils ./Task ./support/FeatureSet".split(" "),function(a,l,n,m,k,g,h){g=g.createSubclass({declaredClass:"esri.tasks.QueryTask",__msigns:[{n:"execute",c:2,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:1,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:1,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForExtent",
c:1,a:[{i:0,p:["geometry"]}],e:2}],properties:{gdbVersion:{value:null,type:String},source:{value:null}},execute:function(a,d,c){c=c.assembly;a=this._encode(l.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON(c&&c[0])));this.source&&(c={source:this.source.toJSON()},a.layer=JSON.stringify(c));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return n(this.parsedUrl.path+"/query",l.mixin({query:a,callbackParamName:"callback",callbackSuffix:d},this.requestOptions)).then(this._handleExecuteResponse)},executeRelationshipQuery:function(a){a=
this._encode(l.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()));this.gdbVersion&&(a.gdbVersion=this.gdbVersion);return n(this.parsedUrl.path+"/queryRelatedRecords",l.mixin({query:a,callbackParamName:"callback"},this.requestOptions)).then(this._handleExecuteRelationshipQueryResponse)},executeForIds:function(a,d){var c=d.assembly,c=this._encode(l.mixin({},this.parsedUrl.query,{f:"json",returnIdsOnly:!0},a.toJSON(c&&c[0])));if(this.source){var b={source:this.source.toJSON()};c.layer=JSON.stringify(b)}this.gdbVersion&&
(c.gdbVersion=this.gdbVersion);return n(this.parsedUrl.path+"/query",l.mixin({query:c,callbackParamName:"callback"},this.requestOptions)).then(this._handleExecuteForIdsResponse)},executeForCount:function(a,d){var c=d.assembly,c=this._encode(l.mixin({},this.parsedUrl.query,{f:"json",returnIdsOnly:!0,returnCountOnly:!0},a.toJSON(c&&c[0])));if(this.source){var b={source:this.source.toJSON()};c.layer=JSON.stringify(b)}this.gdbVersion&&(c.gdbVersion=this.gdbVersion);return n(this.parsedUrl.path+"/query",
l.mixin({query:c,callbackParamName:"callback"},this.requestOptions)).then(this._handleExecuteForCountResponse)},executeForExtent:function(a,d){var c=d.assembly,c=this._encode(l.mixin({},this.parsedUrl.query,{f:"json",returnExtentOnly:!0,returnCountOnly:!0},a.toJSON(c&&c[0])));if(this.source){var b={source:this.source.toJSON()};c.layer=JSON.stringify(b)}this.gdbVersion&&(c.gdbVersion=this.gdbVersion);return n(this.parsedUrl.path+"/query",l.mixin({query:c,callbackParamName:"callback"},this.requestOptions)).then(this._handleExecuteForExtentResponse)},
_handleExecuteResponse:function(a){return h.fromJSON(a.data)},_handleExecuteRelationshipQueryResponse:function(e){e=e.data;var d=e.geometryType,c=e.spatialReference,b={};a.forEach(e.relatedRecordGroups,function(a){var e={};e.geometryType=d;e.spatialReference=c;e.features=a.relatedRecords;e=h.fromJSON(e);if(null!=a.objectId)b[a.objectId]=e;else for(var g in a)a.hasOwnProperty(g)&&"relatedRecords"!==g&&(b[a[g]]=e)});return b},_handleExecuteForIdsResponse:function(a){return a.data.objectIds},_handleExecuteForCountResponse:function(a){a=
a.data;var d=a.features,c=a.objectIds;if(c)a=c.length;else{if(d)throw Error("Unable to perform query. Please check your parameters.");a=a.count}return a},_handleExecuteForExtentResponse:function(a){a=a.data;if(a.hasOwnProperty("extent"))a.extent=m.fromJSON(a.extent);else{if(a.features)throw Error("Layer does not support extent calculation.");if(a.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");}return a}});k._createWrappers(g);return g})},"esri/geometry/support/normalizeUtils":function(){define("dojo/_base/array dojo/_base/lang dojo/Deferred ../../config ../Polyline ../Polygon ./webMercatorUtils ./jsonUtils".split(" "),
function(a,l,n,m,k,g,h,e){function d(a,b){return Math.ceil((a-b)/(2*b))}function c(a,b){var c=a.paths||a.rings,d,e,g=c.length,h;for(d=0;d<g;d++){h=c[d].length;for(e=0;e<h;e++){var k=a.getPoint(d,e);a.setPoint(d,e,k.clone().offset(b,0))}}return a}function b(b,c){if(!(b instanceof k||b instanceof g))throw console.error("_straightLineDensify: the input geometry is neither polyline nor polygon"),Error("_straightLineDensify: the input geometry is neither polyline nor polygon");var d=b instanceof k,e=[],
h;a.forEach(d?b.paths:b.rings,function(a){e.push(h=[]);h.push([a[0][0],a[0][1]]);var b,d,g,p,k,m,l,n,r,q,s,y;for(k=0;k<a.length-1;k++){b=a[k][0];d=a[k][1];g=a[k+1][0];p=a[k+1][1];l=Math.sqrt((g-b)*(g-b)+(p-d)*(p-d));n=(p-d)/l;r=(g-b)/l;q=l/c;if(1<q){for(m=1;m<=q-1;m++)y=m*c,s=r*y+b,y=n*y+d,h.push([s,y]);m=(l+Math.floor(q-1)*c)/2;s=r*m+b;y=n*m+d;h.push([s,y])}h.push([g,p])}});return d?new k({paths:e,spatialReference:b.spatialReference}):new g({rings:e,spatialReference:b.spatialReference})}function s(a,
f,d){f&&(a=b(a,1E6),a=h.webMercatorToGeographic(a,!0));d&&(a=c(a,d));return a}function q(a,b,c){var e=a.x||a[0],g;e>b?(g=d(e,b),a.x?a=a.clone().offset(g*-2*b,0):a[0]=e+g*-2*b):e<c&&(g=d(e,c),a.x?a=a.clone().offset(g*-2*c,0):a[0]=e+g*-2*c);return a}function v(b,c){var e=-1;a.forEach(c.cutIndexes,function(g,h){var k=c.geometries[h];a.forEach(k.rings||k.paths,function(b,c){a.some(b,function(a){if(!(180>a[0])){a=0;var f,e=b.length,g;for(f=0;f<e;f++)g=b[f][0],a=g>a?g:a;a=Number(a.toFixed(9));a=-360*d(a,
180);e=b.length;for(f=0;f<e;f++)g=k.getPoint(c,f),k.setPoint(c,f,g.clone().offset(a,0))}return!0})});g===e?k.rings?a.forEach(k.rings,function(a){b[g]=b[g].addRing(a)}):a.forEach(k.paths,function(a){b[g]=b[g].addPath(a)}):(e=g,b[g]=k)});return b}function t(b,f,p,l){var r=new n;r.then(p,l);f=f||m.geometryService;var t=[],w=[],u,L,B,I,U,S,D,J,G=0;a.forEach(b,function(b){if(b)if(u||(u=b.spatialReference,L=u._getInfo(),I=(B=u.isWebMercator)?2.0037508342788905E7:180,U=B?-2.0037508342788905E7:-180,S=B?102100:
4326,D=new k({paths:[[[I,U],[I,I]]],spatialReference:{wkid:S}}),J=new k({paths:[[[U,U],[U,I]]],spatialReference:{wkid:S}})),L){var f=e.fromJSON(b.toJSON()),h=b.extent;"point"===b.type?t.push(q(f,I,U)):"multipoint"===b.type?(f.points=a.map(f.points,function(a){return q(a,I,U)}),t.push(f)):"extent"===b.type?(f=h.clone()._normalize(null,null,L),t.push(f.rings?new g(f):f)):h?(b=d(h.xmin,U)*2*I,f=0===b?f:c(f,b),h=h.clone().offset(b,0),h.intersects(D)&&h.xmax!==I?(G=h.xmax>G?h.xmax:G,f=s(f,B),w.push(f),
t.push("cut")):h.intersects(J)&&h.xmin!==U?(G=h.xmax*2*I>G?h.xmax*2*I:G,f=s(f,B,360),w.push(f),t.push("cut")):t.push(f)):t.push(f)}else t.push(b);else t.push(b)});p=new k;l=d(G,I);for(var F=-90,M=l;0<l;){var P=-180+360*l;p.addPath([[P,F],[P,-1*F]]);F*=-1;l--}0<w.length&&0<M?f?f.cut(w,p,function(c){w=v(w,c);var d=[];a.forEach(t,function(a,c){if("cut"===a){var f=w.shift();b[c].rings&&1<b[c].rings.length&&f.rings.length>=b[c].rings.length?(t[c]="simplify",d.push(f)):t[c]=!0===B?h.geographicToWebMercator(f):
f}});0<d.length?f.simplify(d,function(b){a.forEach(t,function(a,c){"simplify"===a&&(t[c]=!0===B?h.geographicToWebMercator(b.shift()):b.shift())});r.resolve(t)},function(a){r.reject(a)}):r.resolve(t)},function(a){r.reject(a)}):r.reject(Error("esri.geometry.normalizeCentralMeridian: 'geometryService' argument is missing.")):(a.forEach(t,function(a,b){if("cut"===a){var c=w.shift();t[b]=!0===B?h.geographicToWebMercator(c):c}}),r.resolve(t));return r.promise}function u(b,c,d,e){var g=!1,h;l.isObject(b)&&
b&&(l.isArray(b)?b.length&&((h=b[0]&&b[0].declaredClass)&&-1!==h.indexOf("Graphic")?(b=a.map(b,function(a){return a.geometry}),g=b.length?!0:!1):h&&-1!==h.indexOf("esri.geometry.")&&(g=!0)):(h=b.declaredClass)&&-1!==h.indexOf("FeatureSet")?(b=a.map(b.features||[],function(a){return a.geometry}),g=b.length?!0:!1):h&&-1!==h.indexOf("esri.geometry.")&&(g=!0));g&&c.push({index:d,property:e,value:b})}function r(b,c){var d=[];a.forEach(c,function(c){var f=c.i,e=b[f];c=c.p;var g;if(l.isObject(e)&&e)if(c)if("*"===
c[0])for(g in e)e.hasOwnProperty(g)&&u(e[g],d,f,g);else a.forEach(c,function(a){u(l.getObject(a,!1,e),d,f,a)});else u(e,d,f)});return d}function w(b,c){var d=0,e={};a.forEach(c,function(a){var c=a.index,f=a.property,g=a.value,h=g.length||1,k=b.slice(d,d+h);l.isArray(g)||(k=k[0]);d+=h;delete a.value;f?(e[c]=e[c]||{},e[c][f]=k):e[c]=k});return e}return{normalizeCentralMeridian:t,_foldCutResults:v,_prepareGeometryForCut:s,_offsetMagnitude:d,_pointNormalization:q,_updatePolyGeometry:c,_straightLineDensify:b,
_createWrappers:function(b){var c=l.isObject(b)?b.prototype:l.getObject(b+".prototype");a.forEach(c.__msigns,function(b){var d=c[b.n];c[b.n]=function(){var c=this,f=[],e;for(e=0;e<b.c;e++)f[e]=arguments[e];var g={};f.push(g);var h,k=[],m;c.normalization&&!c._isTable&&(h=r(f,b.a),a.forEach(h,function(a){k=k.concat(a.value)}),k.length&&(m=t(k)));return m?m.then(function(a){g.assembly=w(a,h);return d.apply(c,f)}):d.apply(c,f)}})},_disassemble:r,_addToBucket:u,_reassemble:w}})},"esri/tasks/Task":function(){define(["dojo/_base/lang",
"../core/Accessor","../core/urlUtils"],function(a,l,n){return l.createSubclass({declaredClass:"esri.tasks._Task",normalizeCtorArgs:function(m,k){if("string"!==typeof m)return m;var g={};m&&(g.url=m);k&&a.mixin(g,k);return g},properties:{normalization:{value:!0},parsedUrl:{value:null,readOnly:!0,dependsOn:["url"],get:function(){return this._parseUrl(this.url)}},requestOptions:{value:null},url:{value:null,type:String}},_parseUrl:function(a){return a?n.urlToObject(a):null},_useSSL:function(){var a=this.parsedUrl,
k=/^http:/i;this.url&&this.set("url",this.url.replace(k,"https:"));a&&a.path&&(a.path=a.path.replace(k,"https:"))},_encode:function(m,k,g){var h,e,d={},c,b;for(c in m)if("declaredClass"!==c&&(h=m[c],e=typeof h,null!==h&&void 0!==h&&"function"!==e))if(a.isArray(h)){d[c]=[];b=h.length;for(e=0;e<b;e++)d[c][e]=this._encode(h[e])}else"object"===e?h.toJSON&&(e=h.toJSON(g&&g[c]),"esri.tasks.support.FeatureSet"===h.declaredClass&&e.spatialReference&&(e.sr=e.spatialReference,delete e.spatialReference),d[c]=
k?e:JSON.stringify(e)):d[c]=h;return d}})})},"esri/tasks/support/FeatureSet":function(){define("../../core/kebabDictionary ../../core/JSONSupporter ../../core/lang ../../Graphic ../../layers/support/Field ../../geometry/SpatialReference ../../geometry/support/graphicsUtils ../../geometry/support/jsonUtils dojo/_base/lang".split(" "),function(a,l,n,m,k,g,h,e,d){a=a({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent"});
return l.createSubclass({declaredClass:"esri.tasks.support.FeatureSet",classMetadata:{reader:{exclude:["fieldAliases","transform"]}},getDefaults:function(){return d.mixin(this.inherited(arguments),{features:[]})},displayFieldName:null,exceededTransferLimit:null,features:null,_featuresReader:function(a,b){var d=g.fromJSON(b.spatialReference),e;e=a.map(function(a){var b=m.fromJSON(a);a=a.geometry&&a.geometry.spatialReference;b.geometry&&!a&&(b.geometry.spatialReference=d);return b});b.transform&&this._hydrate(b.transform,
b.geometryType,e);return e},fields:null,_fieldsReader:function(a){return a.map(function(a){return k.fromJSON(a)})},geometryType:null,_geometryTypeReader:a.fromJSON,spatialReference:null,_spatialReferenceReader:function(a){return g.fromJSON(a)},toJSON:function(a){var b={hasZ:this.hasZ,hasM:this.hasM};this.displayFieldName&&(b.displayFieldName=this.displayFieldName);this.fields&&(b.fields=this.fields.map(function(a){return a.toJSON()}));this.spatialReference?b.spatialReference=this.spatialReference.toJSON():
this.features[0]&&this.features[0].geometry&&(b.spatialReference=this.features[0].geometry.spatialReference.toJSON());this.features[0]&&(this.features[0].geometry&&(b.geometryType=e.getJsonType(this.features[0].geometry)),b.features=h._encodeGraphics(this.features,a));b.exceededTransferLimit=this.exceededTransferLimit;b.transform=this.transform;return n.fixJson(b)},quantize:function(a){var b=a.translate[0],d=a.translate[1],e=a.scale[0],g=a.scale[1],h=this.features,k=function(a,b,c){var d,e,g,h,k,
m,l=[];d=0;for(e=a.length;d<e;d++)if(g=a[d],0<d){if(m=b(g[0]),g=c(g[1]),m!==h||g!==k)l.push([m-h,g-k]),h=m,k=g}else h=b(g[0]),k=c(g[1]),l.push([h,k]);return 0<l.length?l:null},m=function(a,b,c){if("point"===a)return function(a){a.x=b(a.x);a.y=c(a.y);return a};if("polyline"===a||"polygon"===a)return function(a){var f,d,e,g,h;e=a.rings||a.paths;h=[];f=0;for(d=e.length;f<d;f++)g=e[f],(g=k(g,b,c))&&h.push(g);return 0<h.length?(a.rings?a.rings=h:a.paths=h,a):null};if("multipoint"===a)return function(a){var f;
f=k(a.points,b,c);return 0<f.length?(a.points=f,a):null};if("extent"===a)return function(a){return a}}(this.geometryType,function(a){return Math.round((a-b)/e)},function(a){return Math.round((d-a)/g)}),l,n;l=0;for(n=h.length;l<n;l++)m(h[l].geometry)||(h.splice(l,1),l--,n--);this.transform=a;return this},_hydrate:function(a,b,d){if(a){var e=a.translate[0],g=a.translate[1],h=a.scale[0],k=a.scale[1],m=function(a,b,c){if("esriGeometryPoint"===a)return function(a){a.x=b(a.x);a.y=c(a.y)};if("esriGeometryPolyline"===
a||"esriGeometryPolygon"===a)return function(a){a=a.rings||a.paths;var d,e,g,h,k,m,l,n;d=0;for(e=a.length;d<e;d++){k=a[d];g=0;for(h=k.length;g<h;g++)m=k[g],0<g?(l+=m[0],n+=m[1]):(l=m[0],n=m[1]),m[0]=b(l),m[1]=c(n)}};if("esriGeometryEnvelope"===a)return function(a){a.xmin=b(a.xmin);a.ymin=c(a.ymin);a.xmax=b(a.xmax);a.ymax=c(a.ymax)};if("esriGeometryMultipoint"===a)return function(a){a=a.points;var d,e,g,h,k;d=0;for(e=a.length;d<e;d++)g=a[d],0<d?(h+=g[0],k+=g[1]):(h=g[0],k=g[1]),g[0]=b(h),g[1]=c(k)}}(b,
function(a){return a*h+e},function(a){return g-a*k});a=0;for(b=d.length;a<b;a++)d[a].geometry&&m(d[a].geometry)}}})})},"esri/layers/support/Field":function(){define(["../../core/kebabDictionary","../../core/JSONSupporter","./CodedValueDomain","./RangeDomain"],function(a,l,n,m){var k=a({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",
esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"}),g=l.createSubclass({declaredClass:"esri.layers.support.Field",alias:null,domain:null,_domainReader:function(a,e){var d=a&&a.type;return"range"===d?new m(a):"codedValue"===d?new n(a):null},editable:!1,length:-1,name:null,nullable:!0,type:null,_typeReader:k.fromJSON,clone:function(){return g.fromJSON(this.toJSON())},toJSON:function(){return{alias:this.alias,
domain:this.domain&&this.domain.toJSON(),editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:k.toJSON(this.type)}}});return g})},"esri/layers/support/CodedValueDomain":function(){define(["../../core/lang","./Domain","dojo/_base/array","dojo/_base/lang"],function(a,l,n,m){return l.createSubclass({declaredClass:"esri.layers.support.CodedValueDomain",properties:{codedValues:{value:null},type:{value:"coded-value"}},getName:function(a){var g;n.some(this.codedValues,function(h){h.code==
a&&(g=h.name);return!!g});return g},toJSON:function(){var k=this.inherited(arguments);k.codedValues=m.clone(this.codedValues);return a.fixJson(k)}})})},"esri/layers/support/Domain":function(){define(["../../core/kebabDictionary","../../core/JSONSupport","../../core/lang"],function(a,l,n){var m=a({codedValue:"coded-value"});return l.createSubclass({declaredClass:"esri.layers.support.Domain",properties:{name:{value:null},type:{json:{read:m.fromJSON},value:null}},toJSON:function(){return n.fixJson({name:this.name,
type:m.toJSON(this.type)})}})})},"esri/layers/support/RangeDomain":function(){define(["../../core/lang","./Domain"],function(a,l){return l.createSubclass({declaredClass:"esri.layers.support.RangeDomain",properties:{maxValue:{json:{readFrom:["range"],read:function(a,m){return m.range&&m.range[1]}}},minValue:{json:{readFrom:["range"],read:function(a,m){return m.range&&m.range[0]}}},type:{value:"range"}},toJSON:function(){var l=this.inherited(arguments);l.range=[this.minValue,this.maxValue];return a.fixJson(l)}})})},
"esri/geometry/support/graphicsUtils":function(){define(["dojo/_base/array","../Extent"],function(a,l){return{graphicsExtent:function(a){var m=a[0].geometry,k=m.extent,g,h,e=a.length;null===k&&(k=new l(m.x,m.y,m.x,m.y,m.spatialReference));for(h=1;h<e;h++)g=(m=a[h].geometry).extent,null===g&&(g=new l(m.x,m.y,m.x,m.y,m.spatialReference)),k=k.clone().union(g);return 0>k.width&&0>k.height?null:k},getGeometries:function(l){return a.map(l,function(a){return a.geometry})},_encodeGraphics:function(l,m){var k=
[],g,h,e;a.forEach(l,function(a,c){g=a.toJSON();h={};g.geometry&&(e=m&&m[c],h.geometry=e&&e.toJSON()||g.geometry);g.attributes&&(h.attributes=g.attributes);k[c]=h});return k}}})},"esri/layers/graphics/sources/MemorySource":function(){define("../../../core/Collection ../../../core/Promise ../../../core/promiseUtils ../../../core/Error ../../../tasks/support/FeatureSet ../../../Graphic ../QueryEngine".split(" "),function(a,l,n,m,k,g,h){return a.ofType(g).createSubclass([l],{properties:{layer:{value:null},
_queryEngine:{value:null,dependsOn:["layer.loaded"],get:function(){return this.get("layer.loaded")?new h({features:this,objectIdField:this.layer.objectIdField}):null}}},queryFeatures:function(a){return this._queryEngine?this._queryEngine.queryFeatures(a).then(function(a){var c=new k;c.features=a;return c}):this._rejectQuery("Not ready to execute query")},queryObjectIds:function(a){return this._queryEngine?this._queryEngine.queryObjectIds(a):this._rejectQuery("Not ready to execute query")},queryFeatureCount:function(a){return this._queryEngine?
this._queryEngine.queryFeatureCount(a):this._rejectQuery("Not ready to execute query")},queryExtent:function(a){return this._queryEngine?this._queryEngine.queryExtent(a):this._rejectQuery("Not ready to execute query")},_rejectQuery:function(a){return n.reject(new m("MemorySource",a))}})})},"esri/layers/graphics/QueryEngine":function(){define("dojo/_base/declare dojo/_base/lang dojo/Deferred ../../core/promiseUtils ../../core/Error ../../geometry/support/graphicsUtils".split(" "),function(a,l,n,m,
k,g){return a(null,{constructor:function(a){l.mixin(this,a)},features:null,objectIdField:null,queryFeatures:function(a){if(this.features)if(a)if(this._isSupportedQuery(a)){var e=this._createFilters(a);a=e.length?this._executeQuery(a,e):this._rejectQuery("Invalid query")}else a=this._rejectQuery("Unsupported query");else a=this._returnAllFeatures();else a=this._rejectQuery("Engine not initialized");return a},queryObjectIds:function(a){return this.objectIdField?this.queryFeatures(a).then(this._getObjectIds.bind(this)):
this._rejectQuery("Unsupported query")},queryFeatureCount:function(a){return this.queryFeatures(a).then(function(a){return a.length}.bind(this))},queryExtent:function(a){return this.queryFeatures(a).then(function(a){return{count:a.length,extent:this._getExtent(a)}}.bind(this))},_returnAllFeatures:function(){return m.resolve(this.features.toArray())},_executeQuery:function(a,e){var d=new n,c;c=this.features.filter(function(b){return e.every(function(c){return c.call(this,b,a)},this)},this);d.resolve(c.toArray());
return d.promise},_isSupportedQuery:function(a){return null!=a.distance||null!=a.geometryPrecision||a.groupByFieldsForStatistics&&a.groupByFieldsForStatistics.length||null!=a.maxAllowableOffset||a.multipatchOption||null!=a.num||a.orderByFields&&a.orderByFields.length||a.outFields&&a.outFields.length||a.outSpatialReference||a.outStatistics&&a.outStatistics.length||a.pixelSize||a.quantizationParameters||a.relationParam||a.returnDistinctValues||null!=a.start||a.text||a.timeExtent||a.where||a.objectIds&&
a.objectIds.length&&!this.objectIdField?!1:!0},_createFilters:function(a){var e=[];a.objectIds&&a.objectIds.length&&e.push(this._createObjectIdFilter());a.geometry&&("extent"===a.geometry.type&&"intersects"===a.spatialRelationship)&&e.push(this._createExtentFilter());return e},_createExtentFilter:function(){return function(a,e){var d=a.geometry,c=e.geometry;return d&&c.intersects(d)}},_createObjectIdFilter:function(){return function(a,e){var d=a.attributes;return-1<e.objectIds.indexOf(d&&d[this.objectIdField])}},
_rejectQuery:function(a){return m.reject(new k("QueryEngine",a))},_getObjectIds:function(a){var e=this.objectIdField,d=[];a.forEach(function(a){a=(a=a.attributes)&&a[e];null!=a&&d.push(a)});return d},_getExtent:function(a){return a.length?g.graphicsExtent(a):null}})})},"esri/layers/TileLayer":function(){define("dojo/_base/lang dojo/io-query ../request ../core/urlUtils ../core/promiseUtils ../geometry/SpatialReference ./TiledLayer ./mixins/ArcGISMapService ./mixins/ArcGISCachedService ./mixins/OperationalLayer ./mixins/PortalLayer ./support/arcgisLayers ./support/arcgisLayerUrl".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q){return h.createSubclass([e,d,c,b],{declaredClass:"esri.layers.TileLayer",_mapsWithAttribution:"Canvas/World_Dark_Gray_Base Canvas/World_Dark_Gray_Reference Canvas/World_Light_Gray_Base Canvas/World_Light_Gray_Reference Elevation/World_Hillshade Ocean/World_Ocean_Base Ocean/World_Ocean_Reference Ocean_Basemap Reference/World_Boundaries_and_Places Reference/World_Boundaries_and_Places_Alternate Reference/World_Transportation World_Imagery World_Street_Map World_Topo_Map".split(" "),
_TILE_FORMATS:{PNG:"png",PNG8:"png",PNG24:"png",PNG32:"png",JPG:"jpg",JPEG:"jpg",GIF:"gif"},_attributionServices:["services.arcgisonline.com/arcgis/rest/services","servicesdev.arcgisonline.com/arcgis/rest/services","servicesqa.arcgisonline.com/arcgis/rest/services"],normalizeCtorArgs:function(b,c){return"string"===typeof b?a.mixin({},{url:b},c):b},load:function(){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service","Map Service"]}).always(this._fetchService.bind(this)))},
properties:{operationalLayerType:{get:function(){if(this.capabilities)return-1!==this.capabilities.indexOf("Map")?"ArcGISTiledMapServiceLayer":"ArcGISTiledImageServiceLayer";var a=this.url||this.portalItem&&this.portalItem.url;return a&&/\/ImageServer(\/|\/?$)/i.test(a)?"ArcGISTiledImageServiceLayer":"ArcGISTiledMapServiceLayer"}},attributionDataUrl:{dependsOn:["parsedUrl"],get:function(){return this._getDefaultAttribution(this._getMapName(this.parsedUrl.path.toLowerCase()))}},popupTemplates:null,
tileServers:{dependsOn:["parsedUrl"],value:null,cast:function(a){return Array.isArray(a)?a.map(function(a){return m.urlToObject(a).path}):null},get:function(){return this._getDefaultTileServers(this.parsedUrl.path)}},spatialReference:{json:{readFrom:["spatialReference","tileInfo"],read:function(a,b){return(a=a||b.tileInfo&&b.tileInfo.spatialReference)&&g.fromJSON(a)}}}},getTileUrl:function(a,b,c){var d=this.tileServers,e=this.parsedUrl.query?l.objectToQuery(this.parsedUrl.query):"";this.token&&(e=
e+(e?"\x26":"?")+"token\x3d"+encodeURIComponent(this.token));this.resampling&&(!this.tileMap&&this.supportsBlankTile)&&(e=e+(e?"\x26":"?")+"blankTile\x3dfalse");this.refreshTimestamp&&(e=e+(e?"\x26":"?")+"_ts\x3d"+this.refreshTimestamp);a=(d&&d.length?d[b%d.length]:this.parsedUrl.path)+"/tile/"+a+"/"+b+"/"+c;return m.addProxy(a+(e?"?"+e:""))},_fetchService:function(){return k.resolve().then(function(){return this.resourceInfo||n(this.parsedUrl.path,{query:a.mixin({f:"json"},this.parsedUrl.query),
responseType:"json",callbackParamName:"callback"})}.bind(this)).then(function(a){a.ssl&&(this.url=this.url.replace(/^http:/i,"https:"));this.read(a.data,{origin:"service",url:this.parsedUrl});if(10.1===this.version&&!q.isHostedAgolService(this.url))return s.fetchServerVersion(this.url).then(function(a){this.read({currentVersion:a})}.bind(this)).otherwise(function(){})}.bind(this))},_getMapName:function(a){return(a=a.match(/^(?:https?:)?\/\/(server|services)\.arcgisonline\.com\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i))&&
a[2]},_getDefaultAttribution:function(a){if(a){var b;a=a.toLowerCase();for(var c=0,d=this._mapsWithAttribution.length;c<d;c++)if(b=this._mapsWithAttribution[c],-1<b.toLowerCase().indexOf(a))return m.makeAbsolute("//static.arcgis.com/attribution/"+b)}},_getDefaultTileServers:function(a){var b=-1!==a.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i),c=-1!==a.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i);return b||c?[a,a.replace(b?/server\.arcgisonline/i:/services\.arcgisonline/i,b?"services.arcgisonline":
"server.arcgisonline")]:[]}})})},"esri/layers/support/arcgisLayers":function(){define("require exports dojo/_base/lang dojo/when ./arcgisLayerUrl ../../core/promiseUtils ../../core/requireUtils ../../request ../../core/Error ./arcgisLayerUrl".split(" "),function(a,l,n,m,k,g,h,e,d,c){function b(a,b){return a.sublayerIds.map(function(c){return new a.Constructor(n.mixin({},b,{layerId:c,sublayerTitleMode:"service-name"}))})}function s(b){var e=c.parse(b);if(!e)return g.reject(new d("arcgis-layers:url-mismatch",
"The url '${url}' is not a valid arcgis resource",{url:b}));var f=e.serverType,p=e.sublayer;switch(f){case "MapServer":f=null!=p?"FeatureLayer":v(b).then(function(a){return a?"TileLayer":"MapImageLayer"});break;case "ImageServer":f=u(b).then(function(a){var b=a.tileInfo&&a.tileInfo.format;return a.tileInfo?b&&"LERC"===b.toUpperCase()&&a.cacheType&&"elevation"===a.cacheType.toLowerCase()?"ElevationLayer":"TileLayer":"ImageryLayer"});break;case "SceneServer":f=u(e.url.path).then(function(a){return a&&
Array.isArray(a.layers)&&0<a.layers.length&&"IntegratedMesh"===a.layers[0].layerType?"IntegratedMeshLayer":"SceneLayer"});break;default:f={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer"}[f]}var k={FeatureLayer:!0,SceneLayer:!0},l={parsedUrl:e,Constructor:null,sublayerIds:null},n;return m(f).then(function(a){n=a;if(k[a]&&null==p)return q(b).then(function(a){1!==a.length&&(l.sublayerIds=a)})}).then(function(){return h.when(a,r+"/"+n)}).then(function(a){l.Constructor=a;return l})}function q(a){return u(a).then(function(a){return a&&
Array.isArray(a.layers)?a.layers.map(function(a){return a.id}).reverse():[]})}function v(a){return u(a).then(function(a){return a.tileInfo})}function t(a,b){var c=a.Constructor.prototype.declaredClass;return"esri.layers.FeatureLayer"===c||"esri.layers.StreamLayer"===c?n.mixin({returnZ:!0,outFields:["*"]},b):b}function u(a){return e(a,{responseType:"json",callbackParamName:"callback",query:{f:"json"}}).then(function(a){return a.data})}var r="..";l.fromUrl=function(c){return s(c.url).then(function(d){var f=
t(d,n.mixin({},c.properties,{url:c.url}));return d.sublayerIds?h.when(a,r+"/GroupLayer").then(function(a){var c=new a({title:d.parsedUrl.title});b(d,f).forEach(function(a){return c.add(a)});return g.resolve(c)}):g.resolve(new d.Constructor(f))})};l.fetchServerVersion=function(a){if(!k.test(a))return g.reject();a=a.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return e(a,{query:{f:"json"},responseType:"json",callbackParamName:"callback"}).then(function(a){return a.data&&a.data.currentVersion?a.data.currentVersion:
g.reject()})}})},"esri/layers/FeatureLayer":function(){define("require dojo/_base/lang dojo/io-query ../Graphic ../PopupTemplate ../request ../core/lang ../core/kebabDictionary ../core/MultiOriginJSONSupport ../core/sniff ../core/Collection ../core/Error ../core/Logger ../core/HandleRegistry ../core/promiseUtils ../core/requireUtils ../core/urlUtils ../geometry/Extent ../geometry/SpatialReference ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/support/jsonUtils ../renderers/SimpleRenderer ../renderers/UniqueValueRenderer ../renderers/support/jsonUtils ../tasks/support/FeatureSet ../tasks/support/Query ./Layer ./mixins/OperationalLayer ./mixins/PortalLayer ./mixins/ScaleRangeLayer ./mixins/ArcGISService ./graphics/sources/MemorySource ./support/Field ./support/FeatureType ./support/LabelClass ./support/arcgisLayerUrl".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w,y,f,p,x,z,K,A,E,L,B,I,U,S,D,J,G,F,M,P,X){var N=e({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",absoluteHeight:"absolute-height"});e=e({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"});var H=q.getLogger("esri.layers.FeatureLayer"),O=I.createSubclass([U,S,D,J,d],{declaredClass:"esri.layers.FeatureLayer",viewModulePaths:{"2d":"../views/2d/layers/GraphicsLayerView2D",
"3d":"../views/3d/layers/FeatureLayerView3D"},constructor:function(){this._handles=new v},normalizeCtorArgs:function(a,b){return"string"===typeof a?l.mixin({},{url:a},b):a},load:function(){var a;a=this.source&&(Array.isArray(this.source)||this.source.isInstanceOf&&this.source.isInstanceOf(b));a=this.portalItem&&a?t.resolve():this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]}).always(function(){if(this.url&&null==this.layerId&&/FeatureServer\/*$/i.test(this.url))return this._fetchFirstLayerId().then(function(a){null!=
a&&(this.layerId=a)}.bind(this))}.bind(this)).then(function(){if(!this.url&&!this._hasMemorySource())throw new s("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this.createGraphicsSource().then(this._initLayerProperties.bind(this))}.bind(this));this.addResolvingPromise(a)},_handles:null,_rndProps:"field field2 field3 rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" "),
_visVariableProps:["field","normalizationField"],controllerModulePaths:{"0":"./graphics/controllers/SnapshotController",1:{"2d":"./graphics/controllers/OnDemandController","3d":"./graphics/controllers/OnDemandController"},2:"./graphics/controllers/SelectionController",6:"./graphics/controllers/AutoController"},properties:{advancedQueryCapabilities:{json:{readFrom:["supportsStatistics","supportsAdvancedQueries"],read:function(a,b){return a||{supportsPagination:!1,supportsQueryWithDistance:!1,supportsReturningQueryExtent:!1,
supportsStatistics:b.supportsStatistics,supportsOrderBy:b.supportsAdvancedQueries,supportsDistinct:b.supportsAdvancedQueries}}}},allowGeometryUpdates:{json:{read:function(a){return null==a?!0:a}}},allRenderers:{readOnly:!0,dependsOn:["loaded","renderer","fields"],get:function(){return this._getAllRenderers(this.renderer)}},capabilities:{json:{read:function(a){return a&&a.split(",").map(function(a){return a.trim()})}}},copyright:{value:null,json:{readFrom:["copyrightText"],read:function(a,b){return b.copyrightText}}},
definitionExpression:{value:null,json:{origins:{service:{readable:!1}},write:function(a,b){a&&(b.layerDefinition={definitionExpression:a})}}},defaultSymbol:{json:{read:z.read}},editable:{value:!1,get:function(){return this.userIsAdmin||this._hasMemorySource()||this._get("editable")},json:{readFrom:["capabilities"],read:function(a,b){b.capabilities&&(a=-1!==b.capabilities.toLowerCase().indexOf("editing"));return!!a}}},elevationInfo:{value:null,json:{read:function(a){a=h.clone(a);a.mode=N.fromJSON(a.mode);
return a},write:function(a,b){if(a&&(a.mode||a.offset||a.featureExpression)){var c={};a.mode&&(c.mode=N.toJSON(a.mode));a.offset&&(c.offset=a.offset);a.featureExpression&&(c.featureExpression=a.featureExpression);b.layerDefinition={elevationInfo:c}}}}},fields:{value:null,type:[F]},fullExtent:{value:null,type:w,json:{readFrom:["extent"],read:function(a,b){return b.extent&&w.fromJSON(b.extent)}}},gdbVersion:null,generalizeForScale:4E3,geometryType:{json:{read:e.fromJSON}},hasAttachments:{value:!1,readOnly:!0,
get:function(){return!this._hasMemorySource()&&this._get("hasAttachments")}},hasM:!1,hasZ:!1,id:{json:{origins:{service:{readable:!1},portalItem:{readable:!1}}}},isTable:{value:!1,readOnly:!0,json:{readFrom:["type"],read:function(a,b){return"Table"===b.type}}},labelsVisible:{value:!1,json:{readFrom:["showLabels"],read:function(a,b){return b.showLabels},write:function(a,b){a&&(b.showLabels=!0)}}},labelingInfo:{value:null,json:{readFrom:["drawingInfo.labelingInfo"],read:function(a,b,c){a=b.drawingInfo&&
b.drawingInfo.labelingInfo;if(!a)return null;var f=/\[([^\[\]]+)\]/ig,d,e=function(a,c){var f=this.getField(c,b.fields);return"["+(f&&f.name||c)+"]"}.bind(this);return a.map(function(a){var b=new P;b.read(a,c);if(d=b.labelExpression)b.labelExpression=d.replace(f,e);return b})},write:function(a,b,c){a&&(b.layerDefinition={drawingInfo:{labelingInfo:a.map(function(a){return a.write({},c)})}})}}},layerId:{json:{origins:{service:{readFrom:["id"],read:function(a,b){return b.id}}},readable:!1}},legendEnabled:{value:!0,
json:{readFrom:["showLegend"],read:function(a,b){return null!=b.showLegend?b.showLegend:!0},write:function(a,b){a||(b.showLegend=!1)}}},maxPointCountForAuto:4E3,maxRecordCountForAuto:2E3,maxRecordCount:null,maxVertexCountForAuto:25E4,minScale:{json:{readFrom:["minScale","effectiveMinScale"],read:function(a,b){return b.effectiveMinScale||a},writeTo:"layerDefinition.minScale"}},maxScale:{json:{readFrom:["maxScale","effectiveMaxScale"],read:function(a,b){return b.effectiveMaxScale||a},writeTo:"layerDefinition.maxScale"}},
mode:{dependsOn:["source"],get:function(){return O.MODE_SNAPSHOT}},objectIdField:{json:{readFrom:["fields"],read:function(a,b){a||b.fields.some(function(b){"esriFieldTypeOID"===b.type&&(a=b.name);return!!a});return a}}},operationalLayerType:"ArcGISFeatureLayer",outFields:{value:null,dependsOn:["requiredFields"],get:function(){var a=this._get("outFields"),b=this.requiredFields;a?-1===a.indexOf("*")&&b.forEach(function(b){-1===a.indexOf(b)&&a.push(b)}):a=b;this.loaded&&(a=a.filter(function(a){return"*"===
a||!!this.getField(a)},this),a=a.map(function(a){return"*"===a?a:this.getField(a).name},this));return a},set:function(a){var b=this.requiredFields;a?-1===a.indexOf("*")&&b.forEach(function(b){-1===a.indexOf(b)&&a.push(b)}):a=b;this.loaded&&(a=a.filter(function(a){return"*"===a||!!this.getField(a)},this),a=a.map(function(a){return"*"===a?a:this.getField(a).name},this));this._set("outFields",a)}},parsedUrl:{dependsOn:["layerId"],get:function(){var a=this.url?r.urlToObject(this.url):null;null!=this.layerId&&
null!=a&&(a.path=r.join(a.path,this.layerId.toString()));return a}},popupEnabled:{value:!0,json:{readFrom:["disablePopup"],read:function(a,b){return null!=b.disablePopup?!b.disablePopup:!0},write:function(a,b){a||(b.disablePopup=!0)}}},popupTemplate:{value:null,type:k,json:{readFrom:["popupInfo"],read:function(a,b){return b.popupInfo?k.fromJSON(b.popupInfo):null},write:function(a,b){a&&(b.popupInfo=a.toJSON())}}},relationships:null,renderer:{set:function(a){var b=this._getAllRenderers(a);this._fixRendererFields(b);
this._set("renderer",a)},json:{readFrom:["drawingInfo.renderer","defaultSymbol","type"],read:function(a,b,c){var d;if(a=b.drawingInfo&&b.drawingInfo.renderer||void 0)(a=E.read(a,b,c)||void 0)||H.error("Failed to create renderer",{rendererDefinition:b.drawingInfo.renderer,layer:this,context:c});else if(b.defaultSymbol)z.read(b.defaultSymbol,b,c),b.types&&b.types.length?(a=new A({defaultSymbol:d,field:b.typeIdField}),b.types.forEach(function(b){a.addUniqueValueInfo(b.id,z.read(b.symbol,b,c))})):a=new K({symbol:d});
else if("Table"!==b.type){switch(b.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":d=new f;break;case "esriGeometryPolyline":d=new p;break;case "esriGeometryPolygon":d=new x}a=d&&new K({symbol:d})}return a},writeTo:"layerDefinition.drawingInfo.renderer"}},requiredFields:{dependsOn:["allRenderers"],get:function(){var a=this.timeInfo,b=[this.objectIdField,this.typeIdField,this.editFieldsInfo&&this.editFieldsInfo.creatorField,a&&a.startTimeField,a&&a.endTimeField,this.trackIdField],
c=this._rndProps;this.allRenderers.forEach(function(a){c.forEach(function(c){b.push(l.getObject(c,!1,a))});a.visualVariables&&a.visualVariables.forEach(function(a){this._visVariableProps.forEach(function(c){b.push(a[c])})},this)},this);b=b.concat(this.dataAttributes);return b.filter(function(a,b,c){return!!a&&c.indexOf(a)===b&&"function"!==typeof a})}},returnM:!1,returnZ:!1,source:{json:{origins:{portalItem:{readFrom:["featureSet"],read:function(a,b){var c=L.fromJSON(b.featureSet);return new G({layer:this,
items:c&&c.features||[]})}}}},cast:function(a){return a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(b))?new G({layer:this,items:a}):a},set:function(a){var b=this._get("source");b!==a&&(b&&(b.isInstanceOf&&b.isInstanceOf(G))&&this._resetMemorySource(b),a&&(a.isInstanceOf&&a.isInstanceOf(G))&&this._initMemorySource(a),this._set("source",a))}},supportsCoordinatesQuantization:!1,serviceDefinitionExpression:{json:{origins:{service:{readFrom:["definitionExpression"],read:function(a,b){return b.definitionExpression}}}}},
spatialReference:{json:{readFrom:["extent"],read:function(a,b){return(a=b.extent&&b.extent.spatialReference)&&y.fromJSON(a)}}},title:{json:{origins:{portalItem:{readFrom:["title","name"],read:function(a,b){return b.name?this._readTitleFromName(b.name):"item-title"!==this.sublayerTitleMode?void 0:a}},service:{readFrom:["name"],read:function(a,b){return this._readTitleFromName(b.name)}}}}},sublayerTitleMode:{type:String,value:"item-title"},trackIdField:{json:{readFrom:["timeInfo.trackIdField"],read:function(a,
b){return b.timeInfo.trackIdField}}},typeIdField:{json:{read:function(a,b){if(a){var c=this.getField(a,b.fields);c&&(a=c.name)}return a}}},types:{json:{read:function(a,b){var c=b.editFieldsInfo,f=c&&c.creatorField,d=c&&c.editorField;return a&&a.map(function(a){a=new M(a);this._fixTemplates(a.templates,f);this._fixTemplates(a.templates,d);return a},this)}}},url:{set:function(a){var b=r.urlToObject(a),c=X.parse(b.path);c&&null!=c.sublayer&&(null==this.layerId&&(this.layerId=c.sublayer),b=n.objectToQuery(b.query),
a=c.url.path,b&&(a=a+"?"+b));this._set("url",a)},json:{write:function(a,b){a&&(b.url=a);if(null!=this.layerId){var c=r.urlToObject(a);c&&(b.url=c.path+"/"+this.layerId,c.query&&Object.keys(c.query)&&(b.url+="?"+n.objectToQuery(c.query)))}}}},userIsAdmin:!1,version:{json:{readFrom:"currentVersion capabilities drawingInfo hasAttachments htmlPopupType relationships timeInfo typeIdField types".split(" "),read:function(a,b){(a=b.currentVersion)||(a=b.hasOwnProperty("capabilities")||b.hasOwnProperty("drawingInfo")||
b.hasOwnProperty("hasAttachments")||b.hasOwnProperty("htmlPopupType")||b.hasOwnProperty("relationships")||b.hasOwnProperty("timeInfo")||b.hasOwnProperty("typeIdField")||b.hasOwnProperty("types")?10:9.3);return a}}}},createGraphicsSource:function(){return this._hasMemorySource()?(this.emit("graphics-source-create",{graphicsSource:this.source}),t.resolve(this.source)):u.when(a,"./graphics/sources/FeatureLayerSource").then(function(a){return new a({layer:this})}.bind(this)).then(function(a){this.emit("graphics-source-create",
{graphicsSource:a});return a}.bind(this))},createGraphicsController:function(c){var f=this.controllerModulePaths[this.mode],d=c.layerView,e=b.ofType(m),g=this.source,h=g&&g.isInstanceOf&&g.isInstanceOf(b),p=l.mixin(c.options||{},{layer:this,layerView:d,graphics:h?g:new e});if(h)return t.resolve(p);"object"===typeof f&&(f=f[d.view.type]);return f?u.when(a,f).then(function(a){return new a(p)}.bind(this)).then(function(a){this.emit("graphics-controller-create",{graphicsController:a});return a}.bind(this)):
t.reject(new s("Layer mode",'Module path not found for controller type: "'+this.mode+'"'))},createQuery:function(){var a=new B;a.returnGeometry=!0;a.returnZ=this.hasZ&&this.returnZ||null;a.returnM=this.hasM&&this.returnM||null;a.outFields=this.outFields;a.where=this.definitionExpression||"1\x3d1";a.multipatchOption="multipatch"===this.geometryType?"xyFootprint":null;return a},getField:function(a,b){var c;if(b=b||this.fields)a=a.toLowerCase(),b.some(function(b){b&&b.name.toLowerCase()===a&&(c=b);return!!c});
return c},graphicChanged:function(a){this.emit("graphic-update",a)},queryFeatures:function(a){a=a||this.createQuery();if(!this.source.queryFeatures)return t.reject(new s("FeatureLayer","Layer source does not support queryFeatures capability"));var b=this.popupTemplate;return this.source.queryFeatures(a).then(function(a){a&&a.features&&a.features.forEach(function(a){a.popupTemplate=b});return a})},queryObjectIds:function(a){a=a||this.createQuery();return this.source.queryObjectIds?this.source.queryObjectIds(a):
t.reject(new s("FeatureLayer","Layer source does not support queryObjectIds capability"))},queryFeatureCount:function(a){a=a||this.createQuery();return this.source.queryFeatureCount?this.source.queryFeatureCount(a):t.reject(new s("FeatureLayer","Layer source does not support queryFeatureCount capability"))},queryExtent:function(a){a=a||this.createQuery();return this.source.queryExtent?this.source.queryExtent(a):t.reject(new s("FeatureLayer","Layer source does not support queryExtent capability"))},
read:function(a,b){switch(b&&b.origin){case "web-map":this.inherited(arguments,[{outFields:["*"]},b]);break;case "web-scene":this.inherited(arguments,[{mode:O.MODE_SNAPSHOT,returnZ:!0,outFields:["*"]},b])}this.inherited(arguments,[a,b]);a.layerDefinition&&this.inherited(arguments,[a.layerDefinition,b]);return this},write:function(a,b){if(b&&"web-scene"===b.origin&&b.messages){if(!this.url)return b.messages.push(new s("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+
"' require a url to a service to be written to web scenes",{layer:this})),null;if(this.isTable)return b.messages.push(new s("layer:unsupported","Layers ("+this.title+", "+this.id+") of type '"+this.declaredClass+"' using a Table source cannot written to web scenes",{layer:this})),null}return this.inherited(arguments)},_fetchFirstLayerId:function(){return g(this.url,{query:{f:"json"},callbackParamName:"callback",responseType:"json"}).then(function(a){if(a.data&&Array.isArray(a.data.layers)&&0<a.data.layers.length)return a.data.layers[0].id})},
_initLayerProperties:function(a){this.source||(this.source=a);a.url&&(this.url=a.url);a.layerDefinition&&this.read({layerDefinition:a.layerDefinition},{origin:"service",url:this.parsedUrl});this._verifySource();this._verifyFields();this._fixSymbolUrls();this.useQueryTimestamp=(c("ie")||c("safari"))&&this.editable&&10.02>this.version;this.watch("token",function(){this._fixSymbolUrls()}.bind(this))},_fixSymbolUrls:function(){var a=this.renderer;if(!this._hasMemorySource()&&a){var b=this.token,c=[a.symbol,
a.defaultSymbol];(a=a.classBreakInfos||a.uniqueValueInfos)&&a.forEach(function(a){c.push(a.symbol)});c.forEach(function(a){var c=a&&a.url;c&&(b&&-1!==c.search(/https?\:/i)&&-1===c.indexOf("?token\x3d"))&&(a.url+="?token\x3d"+b)})}},_getAllRenderers:function(a){var b=[];a&&[a,a.trackRenderer,a.observationRenderer,a.latestObservationRenderer].forEach(function(a){a&&(b.push(a),a.rendererInfos&&a.rendererInfos.forEach(function(a){a.renderer&&b.push(a.renderer)}))});return b},_fixRendererFields:function(a){var b=
this.fields;a&&b&&a.forEach(function(a){this._fixFieldName(this._rndProps,a);a.visualVariables&&a.visualVariables.forEach(function(a){this._fixFieldName(this._visVariableProps,a)},this)},this)},_fixFieldName:function(a,b){a&&a.forEach(function(a){var c=l.getObject(a,!1,b);(c=c&&"function"!==typeof c&&this.getField(c))&&l.setObject(a,c.name,b)},this)},_verifyFields:function(){var a=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+
a+")");!this.isTable&&(!this._hasMemorySource()&&-1===a.search(/\/FeatureServer\//i)&&(!this.fields||!this.fields.some(function(a){return"geometry"===a.type})))&&console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+a+")")},_fixTemplates:function(a,b){a&&a.forEach(function(a){(a=a.prototype&&a.prototype.attributes)&&b&&delete a[b]})},_verifySource:function(){if(this._hasMemorySource()){if(this.url)throw new s("feature-layer:mixed-source-and-url",
"FeatureLayer cannot be created with both an in-memory source and a url");var a=["geometryType","fields","objectIdField"];if(!a.every(function(a){return this.hasOwnProperty(a)},this))throw new s("feature-layer:missing-property","FeatureLayer created as feature collection requires properties: "+a.join(),{requiredProperties:a});}else{if(this.isTable)throw new s("feature-layer:source-type-not-supported","The table feature service type is not yet supported",{sourceType:"Table"});if(!this.url)throw new s("feature-layer:source-or-url-required",
"FeatureLayer requires either a url, a valid portal item or a source");}},_initMemorySource:function(a){a.forEach(function(a){a.layer=this}.bind(this));this._handles.add([a.on("after-add",function(a){a.item.layer=this}.bind(this)),a.on("after-remove",function(a){a.item.layer=null}.bind(this))],"fl-source")},_resetMemorySource:function(a){a.forEach(function(a){a.layer=null}.bind(this));this._handles.remove("fl-source")},_hasMemorySource:function(){return!(this.url||!this.source)},_readTitleFromName:function(a){var b=
this.portalItem&&this.portalItem.title;if("item-title"===this.sublayerTitleMode)return this.url?X.titleFromUrlAndName(this.url,a):a;if(a=a||this.url&&X.parse(this.url).title)return"item-title-and-service-name"===this.sublayerTitleMode&&b&&(a=b+" - "+a),X.cleanTitle(a)}});l.mixin(O,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,MODE_AUTO:6});return O})},"esri/renderers/SimpleRenderer":function(){define(["../core/declare","../core/lang","../symbols/support/jsonUtils","./Renderer"],function(a,l,n,
m){var k=a(m,{declaredClass:"esri.renderer.SimpleRenderer",properties:{description:{value:null,json:{writable:!0}},label:{value:null,json:{writable:!0}},symbol:{value:null,json:{read:n.read,write:function(a,h,e){h.symbol=n.write(a,{},e)},writeNull:!0}},type:"simple"},getSymbol:function(a){return this.symbol},clone:function(){return new k({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:l.clone(this.visualVariables)})}});return k})},"esri/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang dojo/_base/lang ../Color ../arcade/arcade".split(" "),
function(a,l,n,m,k,g,h,e,d){var c=m({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),b=m({widthAndDepth:"width-and-depth"}),s=Math.PI;return a([l,n],{declaredClass:"esri.renderer.Renderer",properties:{authoringInfo:{value:null,json:{write:function(a,b){a=g.clone(a);a.visualVariables&&a.visualVariables.forEach(function(a){"opacity"===a.type&&(a.type=c.toJSON(a.type))});b.authoringInfo=a}}},requiredFields:{dependsOn:["visualVariables"],get:function(){var a=Object.create(null);
this.collectRequiredFields(a);return Object.keys(a)}},type:{readOnly:!0,json:{readable:!1,writeAlways:!0}},visualVariables:{json:{readFrom:["visualVariables","rotationType","rotationExpression"],read:function(a,b){return this._readVariables(a,b)},write:function(a,b){var c=[];a.forEach(function(a){"size"===a.type?c.push(this._writeSizeInfo(a)):"color"===a.type?c.push(this._writeColorInfo(a)):"opacity"===a.type?c.push(this._writeOpacityInfo(a)):"rotation"===a.type&&c.push(this._writeRotationInfo(a))},
this);b.visualVariables=c}}}},constructor:function(){this._ipDataCache={}},_rotationRE:/^\[([^\]]+)\]$/i,_meterIn:{inches:39.3701,feet:3.28084,yards:1.09361,miles:6.21371E-4,"nautical-miles":5.39957E-4,millimeters:1E3,centimeters:100,decimeters:10,meters:1,kilometers:0.0010,"decimal-degrees":180/20015077},_scaleExpr:"view.scale",_visualVariablesSetter:function(a){var b=this._ipDataCache;this.visualVariables&&this.visualVariables.forEach(function(a,c){b.hasOwnProperty(c)&&(b[c]=null)},this);a&&a.some(function(a){return!!a.target})&&
a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a&&a.forEach(function(a,c){"color"===a.type?b[c]=this._processColorInfo(a):"opacity"===a.type?b[c]=this._processOpacityInfo(a):"size"===a.type&&(b[c]=this._processSizeInfo(a))},this);this._set("visualVariables",a)},getSymbol:function(a){},getVisualVariableValues:function(a,b){var c=this.visualVariables,d;c&&(d=c.map(function(c){var d,e=c.type,f=e+"Info";b=h.mixin({},b);b[f]=c;switch(e){case "size":d=this.getSize(a,b);break;case "color":d=
this.getColor(a,b);break;case "opacity":d=this.getOpacity(a,b);break;case "rotation":d=this.getRotationAngle(a,b)}return{variable:c,value:d}},this).filter(function(a){return null!=a.value},this));return d},hasVisualVariables:function(a,b){return a?!!this.getVisualVariablesForType(a,b):!(!this.getVisualVariablesForType("size",b)&&!this.getVisualVariablesForType("color",b)&&!this.getVisualVariablesForType("opacity",b)&&!this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(a,
b){var c=this.visualVariables,d;c&&(d=c.filter(function(c){return c.type===a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}))&&0===d.length&&(d=void 0);return d},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),d=c.variable,c=this._ipDataCache[c.cacheKey],e=null;if(d)var g=d.minSize,e=d.maxSize,g="object"===typeof g&&g?this._getSize(a,g,c&&c.minSize,b):g,e="object"===typeof e&&e?this._getSize(a,e,c&&c.maxSize,b):e,e=this._getSize(a,d,c&&c.root,b,[g,e]);return e},getSizeRangeAtScale:function(a,
b){var c,d=this._getVarInfo(a,"size"),e=this._ipDataCache[d.cacheKey],g={scale:b};if((a=d.variable)&&b){var h=a.minSize,d=a.maxSize,h="object"===typeof h&&h?this._getSize({},h,e&&e.minSize,g):h,e="object"===typeof d&&d?this._getSize({},d,e&&e.maxSize,g):d;if(null!=h||null!=e)c={minSize:h,maxSize:e}}return c},getColor:function(a,b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(a,c.variable,this._ipDataCache[c.cacheKey])},getOpacity:function(a,b){var c=this._getVarInfo(b&&
b.opacityInfo,"opacity");return this._getColorComponent(a,c.variable,this._ipDataCache[c.cacheKey],!0)},getRotationAngle:function(a,b){var c=this._getVarInfo(b&&b.rotationInfo,"rotation").variable,d="arithmetic"===c.rotationType,c=c.field,e=a.attributes,g=0;c&&(h.isFunction(c)?g=c.apply(this,arguments):e&&(g=e[c]||0),g=(g+(d?-90:0))*(d?-1:1));return g},collectRequiredFields:function(a){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));b.forEach(function(b){b&&b.field&&(a[b.field]=
!0);b&&b.normalizationField&&(a[b.normalizationField]=!0)})},_getVarInfo:function(a,b){var c;a&&a.type===b&&this.visualVariables?(c=this.visualVariables.indexOf(a),a=this.visualVariables[c]):this.visualVariables&&(a=(c=this.getVisualVariablesForType(b))&&c[0],c=this.visualVariables.indexOf(a));return{variable:a,cacheKey:c}},_readSizeInfo:function(a){a.axis&&(a.axis=b.fromJSON(a.axis));return a},_readColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){h.isArray(b)?a.colors[c]=e.fromJSON(b):
a.colors[c]=new e(b)}),a.stops&&a.stops.forEach(function(b,c){b.color&&h.isArray(b.color)?a.stops[c].color=e.fromJSON(b.color):b.color&&(a.stops[c].color=new e(b.color))}));return a},_readOpacityInfo:function(a){var b;a&&(b=h.mixin({},a),b.transparencyValues&&(b.opacityValues=b.transparencyValues.map(function(a){return 1-a/100}),delete b.transparencyValues),b.stops&&(b.stops=b.stops.map(function(a){a=h.mixin({},a);a.opacity=1-a.transparency/100;delete a.transparency;return a})));return b},_readVariables:function(a,
b){a&&(a=a.map(function(a){a=g.clone(a);a.type=c.fromJSON(a.type);"size"===a.type?a=this._readSizeInfo(a):"color"===a.type?a=this._readColorInfo(a):"opacity"===a.type&&(a=this._readOpacityInfo(a));return a},this));var d=b.rotationType,e=b.rotationExpression;if(e&&(d={type:"rotation",rotationType:d},(e=e.match(this._rotationRE))&&e[1]))d.field=e[1],a||(a=[]),a.push(d);return a},_processColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){b instanceof e||(a.colors[c]=new e(b))}),a.stops&&
a.stops.forEach(function(b,c){b.color&&!(b.color instanceof e)&&(a.stops[c].color=new e(b.color))}),this._sortStops(a.stops));return this._interpolateData(a)},_processOpacityInfo:function(a){this._sortStops(a&&a.stops);return this._interpolateData(a)},_processSizeInfo:function(a){a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=a.maxSize&&this._processSizeInfoSize(a.maxSize));return{root:this._interpolateData(a),
minSize:this._interpolateData(a.minSize),maxSize:this._interpolateData(a.maxSize)}},_processSizeInfoSize:function(a){"object"===typeof a?a.stops=this._processSizeInfoStops(a.stops):a=k.toPt(a);return a},_processSizeInfoStops:function(a){a&&Array.isArray(a)&&(a.forEach(function(a){a.size=k.toPt(a.size)}),this._sortStops(a));return a},_sortStops:function(a){a&&Array.isArray(a)&&a.sort(function(a,b){return a.value-b.value})},_getSize:function(a,b,c,d,e){var g=a.attributes,k=b.field,f=b.expression,p=
b.stops,m=0,l="number"===typeof a,n=l?a:null;if(k||f){var A=d&&d.scale,E=e?e[0]:b.minSize,L=e?e[1]:b.maxSize,B=b.minDataValue,I=b.maxDataValue,U=b.valueUnit||"unknown",S=b.valueRepresentation,m=b.scaleBy,D=b.normalizationField,J=g?parseFloat(g[D]):void 0,G=d&&d.shape;f&&(n=f.toLowerCase()===this._scaleExpr?null==A?this._getAverageValue(b):A:null);"number"!==typeof n&&(h.isFunction(k)?n=k.apply(this,arguments):g&&(n=g[k]));if(null==n||D&&!l&&(isNaN(J)||0===J))return null;!isNaN(J)&&!l&&(n/=J);if(p)L=
this._lookupData(n,c),n=L[0],E=L[1],n===E?m=p[n].size:(n=p[n].size,p=p[E].size,m=n+(p-n)*L[2]);else if(null!=E&&null!=L&&null!=B&&null!=I)n<=B?m=E:n>=I?m=L:(p=(n-B)/(I-B),"area"===m&&G?(E=(n="circle"===G)?s*Math.pow(E/2,2):E*E,L=n?s*Math.pow(L/2,2):L*L,p=E+p*(L-E),m=n?2*Math.sqrt(p/s):Math.sqrt(p)):m=E+p*(L-E));else if("unknown"===U)null!=E&&null!=B?(E&&B?(p=n/B,m="circle"===G?2*Math.sqrt(p*Math.pow(E/2,2)):"square"===G||"diamond"===G||"image"===G?Math.sqrt(p*Math.pow(E,2)):p*E):m=n+(E||B),m=m<E?
E:m,null!=L&&m>L&&(m=L)):m=n;else{p=(d&&d.resolution?d.resolution:1)*this._meterIn[U];if("area"===S)m=Math.sqrt(n/s)/p,m*=2;else if(m=n/p,"radius"===S||"distance"===S)m*=2;null!=E&&m<E&&(m=E);null!=L&&m>L&&(m=L)}}else b&&(m=p&&p[0]&&p[0].size,null==m&&(m=b.minSize));return m=isNaN(m)?0:m},_getAverageValue:function(a){var b=a.stops,c;b?(c=b[0].value,a=b[b.length-1].value):(c=a.minDataValue||0,a=a.maxDataValue||0);return(c+a)/2},_getColorComponent:function(a,b,c,d,e){var g=a.attributes,k=b&&b.field,
f="number"===typeof a?a:null,p;if(k){var m=b.normalizationField,l=g?parseFloat(g[m]):void 0;"number"!==typeof f&&(h.isFunction(k)?f=k.apply(this,arguments):g&&(f=g[k]));null!=f&&(m&&(!isNaN(l)&&0!==l)&&(f/=l),p=d?this._getOpacity(f,b,c):this._getColor(f,b,c))}else b&&(g=b.stops,d?(p=g&&g[0]&&g[0].opacity,null==p&&(p=b.opacityValues&&b.opacityValues[0])):p=g&&g[0]&&g[0].color||b.colors&&b.colors[0]);e&&(e.data=f,e.value=p);return e||p},_interpolateData:function(a){var b;if(a)if(a.colors||a.opacityValues){var c=
(a.colors||a.opacityValues).length,d=a.minDataValue,e=(a.maxDataValue-d)/(c-1);b=[];for(a=0;a<c;a++)b[a]=d+a*e}else a.stops&&(b=a.stops.map(function(a){return a.value}));return b},_getOpacity:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.opacityInfo;a&&(c=a[0],d=a[1],c===d?d=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,d),d=c+(b-c)*a[2]));return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:a.stops[b].opacity},_getColor:function(a,
b,c){a=this._lookupData(a,c);var d;b=b||this.colorInfo;a&&(d=a[0],c=a[1],d=d===c?this._getColorObj(b,d):e.blendColors(this._getColorObj(b,d),this._getColorObj(b,c),a[2]),d=new e(d));return d},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},_lookupData:function(a,b){var c;if(b){var d=0,e=b.length-1;b.some(function(b,c){if(a<b)return e=c,!0;d=c;return!1});c=[d,e,(a-b[d])/(b[e]-b[d])]}return c},_writeRotationInfo:function(a){a&&(a=h.mixin({},a),a.type=c.toJSON(a.type));return a},
_writeSizeInfo:function(a){if(a){a=h.mixin({},a);var d=a.legendOptions,e=a.axis;a.type=c.toJSON(a.type);e&&(a.axis=b.toJSON(e));if(d&&(a.legendOptions=h.mixin({},d),d=d.customValues))a.legendOptions.customValues=d.slice(0)}return a},_writeColorInfo:function(a){a&&(a=h.mixin({},a),a.type=c.toJSON(a.type),a.colors&&(a.colors=a.colors.map(function(a){return e.toJSON(a)})),a.stops&&(a.stops=a.stops.map(function(a){a=h.mixin({},a);a.color&&(a.color=e.toJSON(a.color));return a})));return a},_writeOpacityInfo:function(a){var b;
a&&(b=h.mixin({},a),b.type=c.toJSON(b.type),b.opacityValues&&(b.transparencyValues=b.opacityValues.map(function(a){return 100*(1-a)}),delete b.opacityValues),b.stops&&(b.stops=b.stops.map(function(a){a=h.mixin({},a);a.transparency=100*(1-a.opacity);delete a.opacity;return a})));return b},_createExprContext:function(a){return{vars:{$feature:d.constructFeature(a)}}},_parseExpr:function(a,b){return d.parseScript(a,b)},_executeExpr:function(a,b){return d.executeScript(a,b,-1)}})})},"esri/arcade/arcade":function(){define(["require",
"exports","./arcadeRuntime","./parser","./Feature"],function(a,l,n,m,k){l.constructFeature=function(a){return k.fromFeature(a)};l.parseScript=function(a){return m.parseScript(a)};l.validateScript=function(a,h){return m.validateScript(a,h,"simple")};l.scriptCheck=function(a,h,e){return m.scriptCheck(a,h,e,"full")};l.parseAndExecuteScript=function(a,h,e){return n.executeScript(m.parseScript(a),h,e)};l.executeScript=function(a,h,e){return n.executeScript(a,h,e)};l.referencesMember=function(a,h){return n.referencesMember(a,
h)};l.referencesFunction=function(a,h){return n.referencesFunction(a,h)};l.extractFieldLiterals=function(a,h){void 0===h&&(h=!1);return m.extractFieldLiterals(a,h)}})},"esri/arcade/arcadeRuntime":function(){define("require exports ../geometry/Polygon ../Graphic ../geometry/Polyline ../geometry/Point ../geometry/Extent ../geometry/Multipoint ../geometry/SpatialReference ./languageUtils ./treeAnalysis ./Dictionary ./Feature ./FunctionWrapper ./functions/date ./functions/string ./functions/maths ./functions/geometry ./functions/stats ./ImmutablePathArray ./ImmutablePointArray ../geometry/Geometry".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w,y,f,p,x){function z(a,b){for(var c=[],f=0;f<b.arguments.length;f++)c.push(A(a,b.arguments[f]));return c}function K(a,b,c){try{return c(a,b,z(a,b))}catch(f){throw f;}}function A(a,f){try{switch(f.type){case "EmptyStatement":return c.voidOperation;case "VariableDeclarator":var d=null===f.init?null:A(a,f.init);d===c.voidOperation&&(d=null);var e=f.id.name.toLowerCase();null!==a.localScope?a.localScope[e]={value:d,valueset:!0,node:f.init}:a.globalScope[e]=
{value:d,valueset:!0,node:f.init};return c.voidOperation;case "VariableDeclaration":for(var g=0;g<f.declarations.length;g++)A(a,f.declarations[g]);return c.voidOperation;case "BlockStatement":var h;a:{for(var p=c.voidOperation,g=0;g<f.body.length;g++)if(p=A(a,f.body[g]),p instanceof c.ReturnResult||p===c.breakResult||p===c.continueResult){h=p;break a}h=p}return h;case "FunctionDeclaration":var k=f.id.name.toLowerCase();a.globalScope[k]={valueset:!0,node:null,value:new v(f,a)};return c.voidOperation;
case "ReturnStatement":var m;if(null===f.argument)m=new c.ReturnResult(c.voidOperation);else{var l=A(a,f.argument);m=new c.ReturnResult(l)}return m;case "IfStatement":var n;if("AssignmentExpression"===f.test.type||"UpdateExpression"===f.test.type)throw Error(b.nodeErrorMessage(f.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var r=A(a,f.test);if(!0===r)n=A(a,f.consequent);else if(!1===r)n=null!==f.alternate?A(a,f.alternate):c.voidOperation;else throw Error(b.nodeErrorMessage(f,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
return n;case "ExpressionStatement":var x;if("AssignmentExpression"===f.expression.type||"UpdateExpression"===f.expression.type)x=A(a,f.expression);else{var y=A(a,f.expression);x=y===c.voidOperation?c.voidOperation:new c.ImplicitResult(y)}return x;case "AssignmentExpression":var t;var w=A(a,f.right),g=null,u="";if("MemberExpression"===f.left.type){g=A(a,f.left.object);u=!0===f.left.computed?A(a,f.left.property):f.left.property.name;if(c.isArray(g))if(c.isNumber(u)){0>u&&(u=g.length+u);if(0>u||u>g.length)throw Error("Assignment outside of array bounds");
if(u===g.length&&"\x3d"!==f.operator)throw Error("Invalid Parameter");g[u]=L(w,f.operator,g[u],f)}else throw Error("Invalid Parameter");else if(g instanceof s){if(!1===c.isString(u))throw Error("Dictionary accessor must be a string");if(!0===g.hasField(u))g.setField(u,L(w,f.operator,g.field(u),f));else{if("\x3d"!==f.operator)throw Error("Invalid Parameter");g.setField(u,L(w,f.operator,null,f))}}else if(g instanceof q){if(!1===c.isString(u))throw Error("Feature accessor must be a string");if(!0===
g.hasField(u))g.setField(u,L(w,f.operator,g.field(u),f));else{if("\x3d"!==f.operator)throw Error("Invalid Parameter");g.setField(u,L(w,f.operator,null,f))}}else{if(c.isImmutableArray(g))throw Error("Array is Immutable");throw Error("Invalid Parameter");}t=c.voidOperation}else if(g=f.left.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[g])a.localScope[g]={value:L(w,f.operator,a.localScope[g].value,f),valueset:!0,node:f.right},t=c.voidOperation;else if(void 0!==a.globalScope[g])a.globalScope[g]=
{value:L(w,f.operator,a.globalScope[g].value,f),valueset:!0,node:f.right},t=c.voidOperation;else throw Error("Variable not recognised");return t;case "UpdateExpression":var z;var B,g=null,u="";if("MemberExpression"===f.argument.type){g=A(a,f.argument.object);u=!0===f.argument.computed?A(a,f.argument.property):f.argument.property.name;if(c.isArray(g))if(c.isNumber(u)){0>u&&(u=g.length+u);if(0>u||u>=g.length)throw Error("Assignment outside of array bounds");B=c.toNumber(g[u]);g[u]="++"===f.operator?
B+1:B-1}else throw Error("Invalid Parameter");else if(g instanceof s){if(!1===c.isString(u))throw Error("Dictionary accessor must be a string");if(!0===g.hasField(u))B=c.toNumber(g.field(u)),g.setField(u,"++"===f.operator?B+1:B-1);else throw Error("Invalid Parameter");}else if(g instanceof q){if(!1===c.isString(u))throw Error("Feature accessor must be a string");if(!0===g.hasField(u))B=c.toNumber(g.field(u)),g.setField(u,"++"===f.operator?B+1:B-1);else throw Error("Invalid Parameter");}else{if(c.isImmutableArray(g))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}z=!1===f.prefix?B:"++"===f.operator?B+1:B-1}else if(g=f.argument.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[g])B=c.toNumber(a.localScope[g].value),a.localScope[g]={value:"++"===f.operator?B+1:B-1,valueset:!0,node:f},z=!1===f.prefix?B:"++"===f.operator?B+1:B-1;else if(void 0!==a.globalScope[g])B=c.toNumber(a.globalScope[g].value),a.globalScope[g]={value:"++"===f.operator?B+1:B-1,valueset:!0,node:f},z=!1===f.prefix?B:"++"===f.operator?B+1:B-1;else throw Error("Variable not recognised");
return z;case "BreakStatement":return c.breakResult;case "ContinueStatement":return c.continueResult;case "ForStatement":null!==f.init&&A(a,f.init);u={testResult:!0,lastAction:c.voidOperation};do b:{t=a;w=f;z=u;if(null!==w.test){z.testResult=A(t,w.test);if(!1===z.testResult)break b;if(!0!==z.testResult)throw Error(b.nodeErrorMessage(w,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}z.lastAction=A(t,w.body);z.lastAction===c.breakResult?z.testResult=!1:z.lastAction instanceof c.ReturnResult?z.testResult=
!1:null!==w.update&&A(t,w.update)}while(!0===u.testResult);g=u.lastAction instanceof c.ReturnResult?u.lastAction:c.voidOperation;return g;case "ForInStatement":return E(a,f);case "Identifier":var K;var J;try{var G=f.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[G])J=a.localScope[G],!0!==J.valueset&&(J.value=A(a,J.node),J.valueset=!0),K=J.value;else if(void 0!==a.globalScope[G])J=a.globalScope[G],!0!==J.valueset&&(J.value=A(a,J.node),J.valueset=!0),K=J.value;else throw Error(b.nodeErrorMessage(f,
"RUNTIME","VARIABLENOTFOUND"));}catch(F){throw F;}return K;case "MemberExpression":return I(a,f);case "Literal":return f.value;case "ThisExpression":throw Error(b.nodeErrorMessage(f,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return D(a,f);case "UnaryExpression":return U(a,f);case "BinaryExpression":return S(a,f);case "LogicalExpression":var M;a:try{if("AssignmentExpression"===f.left.type||"UpdateExpression"===f.left.type)throw Error(b.nodeErrorMessage(f.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));
if("AssignmentExpression"===f.right.type||"UpdateExpression"===f.right.type)throw Error(b.nodeErrorMessage(f.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var P=[A(a,f.left),A(a,f.right)],N=P[0],H=P[1];if(c.isBoolean(N)&&c.isBoolean(H))switch(f.operator){case "||":M=N||H;break a;case "\x26\x26":M=N&&H;break a;default:throw Error(b.nodeErrorMessage(f,"RUNTIME","ONLYORORAND"));}else throw Error(b.nodeErrorMessage(f,"RUNTIME","ONLYBOOLEAN"));}catch(X){throw X;}return M;case "ConditionalExpression":throw Error(b.nodeErrorMessage(f,
"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{g=[];for(u=0;u<f.elements.length;u++){var O=A(a,f.elements[u]);if(c.isFunctionParameter(O))throw Error(b.nodeErrorMessage(f,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));O===c.voidOperation?g.push(null):g.push(O)}}catch(Q){throw Q;}return g;case "ObjectExpression":g={};for(u=0;u<f.properties.length;u++){var sa=A(a,f.properties[u]);if(c.isFunctionParameter(sa.value))throw Error("Illegal Argument");if(!1===c.isString(sa.key))throw Error("Illegal Argument");
g[sa.key.toString()]=sa.value===c.voidOperation?null:sa.value}var Ia=new s(g);Ia.immutable=!1;return Ia;case "Property":return{key:"Identifier"===f.key.type?f.key.name:A(a,f.key),value:A(a,f.value)};case "Array":throw Error(b.nodeErrorMessage(f,"RUNTIME","NOTSUPPORTED"));default:throw Error(b.nodeErrorMessage(f,"RUNTIME","UNREOGNISED"));}}catch(ea){throw ea;}}function E(a,f){var d=A(a,f.right);"VariableDeclaration"===f.left.type&&A(a,f.left);var e=null,g="VariableDeclaration"===f.left.type?f.left.declarations[0].id.name:
f.left.name;null!==a.localScope&&void 0!==a.localScope[g]&&(e=a.localScope[g]);null===e&&void 0!==a.globalScope[g]&&(e=a.globalScope[g]);if(null===e)throw Error(b.nodeErrorMessage(f,"RUNTIME","VARIABLENOTDECLARED"));if(c.isArray(d)||c.isString(d)){for(var d=d.length,h=0;h<d&&!(e.value=h,g=A(a,f.body),g===c.breakResult);h++)if(g instanceof c.ReturnResult)return g;return c.voidOperation}if(c.isImmutableArray(d)){for(h=0;h<d.length()&&!(e.value=h,g=A(a,f.body),g===c.breakResult);h++)if(g instanceof c.ReturnResult)return g;
return c.voidOperation}if(d instanceof s||d instanceof q){d=d.keys();for(h=0;h<d.length&&!(e.value=d[h],g=A(a,f.body),g===c.breakResult);h++)if(g instanceof c.ReturnResult)return g}else return c.voidOperation}function L(a,f,d,e){switch(f){case "\x3d":return a===c.voidOperation?null:a;case "/\x3d":return c.toNumber(d)/c.toNumber(a);case "*\x3d":return c.toNumber(d)*c.toNumber(a);case "-\x3d":return c.toNumber(d)-c.toNumber(a);case "+\x3d":return c.isString(d)||c.isString(a)?c.toString(d)+c.toString(a):
c.toNumber(d)+c.toNumber(a);case "%\x3d":return c.toNumber(d)%c.toNumber(a);default:throw Error(b.nodeErrorMessage(e,"RUNTIME","OPERATORNOTRECOGNISED"));}}function B(a,d,e,g){d=d.toLowerCase();switch(d){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return d=a.spatialReference._arcadeCacheId,void 0===d&&(e=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(e=!1),e&&(H++,d=a.spatialReference._arcadeCacheId=H)),a=new s({wkt:a.spatialReference.wkt,
wkid:a.spatialReference.wkid}),void 0!==d&&(a._arcadeCacheId="SPREF"+d.toString()),a}switch(a.type){case "extent":switch(d){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[d],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(d){case "rings":return d=c.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===d&&(H++,d=H,c.isVersion4?a.cache._arcadeCacheId=d:a.setCacheValue("_arcadeCacheId",d)),a=new f(a.rings,
a.spatialReference,!0===a.hasZ,!0===a.hasM,d);case "type":return"Polygon"}break;case "point":switch(d){case "x":case "y":case "z":case "m":return void 0!==a[d]?a[d]:null;case "type":return"Point"}break;case "polyline":switch(d){case "paths":return d=c.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===d&&(H++,d=H,c.isVersion4?a.cache._arcadeCacheId=d:a.setCacheValue("_arcadeCacheId",d)),a=new f(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,d);case "type":return"Polyline"}break;
case "multipoint":switch(d){case "points":return d=c.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===d&&(H++,d=H,c.isVersion4?a.cache._arcadeCacheId=d:a.setCacheValue("_arcadeCacheId",d)),a=new p(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,d,1);case "type":return"Multipoint"}}throw Error(b.nodeErrorMessage(g,"RUNTIME","PROPERTYNOTFOUND"));}function I(a,f){try{var d=A(a,f.object);if(null===d)throw Error(b.nodeErrorMessage(f,"RUNTIME","NOTFOUND"));if(!1===f.computed){if(d instanceof
s||d instanceof q)return d.field(f.property.name);if(d instanceof x)return B(d,f.property.name,a,f);throw Error(b.nodeErrorMessage(f,"RUNTIME","INVALIDTYPE"));}var e=A(a,f.property);if(d instanceof s||d instanceof q){if(c.isString(e))return d.field(e)}else if(d instanceof x){if(c.isString(e))return B(d,e,a,f)}else if(c.isArray(d)){if(c.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=d.length+e);if(e>=d.length||0>e)throw Error(b.nodeErrorMessage(f,"RUNTIME","OUTOFBOUNDS"));return d[e]}}else if(c.isString(d)){if(c.isNumber(e)&&
isFinite(e)&&Math.floor(e)===e){0>e&&(e=d.length+e);if(e>=d.length||0>e)throw Error(b.nodeErrorMessage(f,"RUNTIME","OUTOFBOUNDS"));return d[e]}}else if(c.isImmutableArray(d)&&c.isNumber(e)&&isFinite(e)&&Math.floor(e)===e){0>e&&(e=d.length()+e);if(e>=d.length()||0>e)throw Error(b.nodeErrorMessage(f,"RUNTIME","OUTOFBOUNDS"));return d.get(e)}throw Error(b.nodeErrorMessage(f,"RUNTIME","INVALIDTYPE"));}catch(g){throw g;}}function U(a,f){try{var d=A(a,f.argument);if(c.isBoolean(d)){if("!"===f.operator)return!d;
if("-"===f.operator)return-1*c.toNumber(d);if("+"===f.operator)return 1*c.toNumber(d);throw Error(b.nodeErrorMessage(f,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===f.operator)return-1*c.toNumber(d);if("+"===f.operator)return 1*c.toNumber(d);throw Error(b.nodeErrorMessage(f,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(e){throw e;}}function S(a,f){try{var d=[A(a,f.left),A(a,f.right)],e=d[0],g=d[1];switch(f.operator){case "\x3d\x3d":return c.equalityTest(e,g);case "\x3d":return c.equalityTest(e,
g);case "!\x3d":return!c.equalityTest(e,g);case "\x3c":return c.greaterThanLessThan(e,g,f.operator);case "\x3e":return c.greaterThanLessThan(e,g,f.operator);case "\x3c\x3d":return c.greaterThanLessThan(e,g,f.operator);case "\x3e\x3d":return c.greaterThanLessThan(e,g,f.operator);case "+":return c.isString(e)||c.isString(g)?c.toString(e)+c.toString(g):c.toNumber(e)+c.toNumber(g);case "-":return c.toNumber(e)-c.toNumber(g);case "*":return c.toNumber(e)*c.toNumber(g);case "/":return c.toNumber(e)/c.toNumber(g);
case "%":return c.toNumber(e)%c.toNumber(g);default:throw Error(b.nodeErrorMessage(f,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(h){throw h;}}function D(a,f){try{if("Identifier"!==f.callee.type)throw Error(b.nodeErrorMessage(f,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[f.callee.name.toLowerCase()]){var d=a.localScope[f.callee.name.toLowerCase()];if(d.value instanceof c.NativeFunction)return d.value.fn(a,f);if(d.value instanceof v)return X(a,f,d.value.definition);
throw Error(b.nodeErrorMessage(f,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[f.callee.name.toLowerCase()]){d=a.globalScope[f.callee.name.toLowerCase()];if(d.value instanceof c.NativeFunction)return d.value.fn(a,f);if(d.value instanceof v)return X(a,f,d.value.definition);throw Error(b.nodeErrorMessage(f,"RUNTIME","NOTAFUNCTION"));}throw Error(b.nodeErrorMessage(f,"RUNTIME","NOTFOUND"));}catch(e){throw e;}}function J(a){return null==a?"":c.isArray(a)||c.isImmutableArray(a)?"Array":c.isDate(a)?
"Date":c.isString(a)?"String":c.isBoolean(a)?"Boolean":c.isNumber(a)?"Number":a instanceof s?"Dictionary":a instanceof q?"Feature":a instanceof g?"Point":a instanceof n?"Polygon":a instanceof k?"Polyline":a instanceof e?"Multipoint":a instanceof h?"Extent":c.isFunctionParameter(a)?"Function":a===c.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function G(a,b,f,d){try{var e=A(a,b.arguments[f]);if(c.equalityTest(e,d))return A(a,b.arguments[f+1]);var g=b.arguments.length-
f;return 1===g?A(a,b.arguments[f]):2===g?null:G(a,b,f+2,d)}catch(h){throw h;}}function F(a,b,f,d){try{if(!0===d)return A(a,b.arguments[f+1]);if(3===b.arguments.length-f)return A(a,b.arguments[f+2]);var e=A(a,b.arguments[f+2]);if(!1===c.isBoolean(e))throw Error("WHEN needs boolean test conditions");return F(a,b,f+2,e)}catch(g){throw g;}}function M(a,b){var c=a.length,f=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];for(var d=M(a.slice(0,f),b),c=M(a.slice(f,c),b),f=[];0<d.length||0<c.length;)if(0<
d.length&&0<c.length){var e=b(d[0],c[0]);isNaN(e)&&(e=0);0>=e?(f.push(d[0]),d=d.slice(1)):(f.push(c[0]),c=c.slice(1))}else 0<d.length?(f.push(d[0]),d=d.slice(1)):0<c.length&&(f.push(c[0]),c=c.slice(1));return f}function P(a,b,f){try{var d=a.body;if(f.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var e=0;e<f.length;e++)b.localScope[a.params[e].name.toLowerCase()]={d:null,value:f[e],valueset:!0,node:null};var g=A(b,d);if(g instanceof c.ReturnResult)return g.value;
if(g===c.breakResult)throw Error("Cannot Break from a Function");if(g===c.continueResult)throw Error("Cannot Continue from a Function");return g instanceof c.ImplicitResult?g.value:g}catch(h){throw h;}}function X(a,b,c){return K(a,b,function(b,f,d){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+1,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return P(c,
b,d)})}function N(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,spatialReference:a.context.spatialReference,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return P(a.definition,b,arguments)}}var H=0,O={};t.registerFunctions(O,K);u.registerFunctions(O,K);r.registerFunctions(O,K);w.registerFunctions(O,K);y.registerFunctions(O,
K);O["typeof"]=function(a,b){return K(a,b,function(a,b,f){c.pcCheck(f,1,1);a=J(f[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};O.iif=function(a,b){try{c.pcCheck(null===b.arguments?[]:b.arguments,3,3);var f=A(a,b.arguments[0]);if(!1===c.isBoolean(f))throw Error("IF Function must have a boolean test condition");return!0===f?A(a,b.arguments[1]):A(a,b.arguments[2])}catch(d){throw d;}};O.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");if(2===
b.arguments.length)return A(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=A(a,b.arguments[0]);return G(a,b,1,c)}catch(f){throw f;}};O.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var f=A(a,b.arguments[0]);if(!1===c.isBoolean(f))throw Error("WHEN needs boolean test conditions");return F(a,b,0,f)}catch(d){throw d;}};O.top=function(a,
b){return K(a,b,function(a,b,f){c.pcCheck(f,2,2);if(c.isArray(f[0]))return c.toNumber(f[1])>=f[0].length?f[0].slice(0):f[0].slice(0,c.toNumber(f[1]));if(c.isImmutableArray(f[0]))return c.toNumber(f[1])>=f[0].length()?f[0].slice(0):f[0].slice(0,c.toNumber(f[1]));throw Error("Top cannot accept this parameter type");})};O.first=function(a,b){return K(a,b,function(a,b,f){c.pcCheck(f,1,1);return c.isArray(f[0])?0===f[0].length?null:f[0][0]:c.isImmutableArray(f[0])?0===f[0].length()?null:f[0].get(0):null})};
O.sort=function(a,b){return K(a,b,function(a,b,f){c.pcCheck(f,1,2);a=f[0];c.isImmutableArray(a)&&(a=a.toArray());if(!1===c.isArray(a))throw Error("Illegal Argument");if(1<f.length){if(!1===c.isFunctionParameter(f[1]))throw Error("Illegal Argument");var d=N(f[1]);a=M(a,function(a,b){return d(a,b)})}else{if(0===a.length)return[];f={};for(b=0;b<a.length;b++){var e=J(a[b]);""!==e&&(f[e]=!0)}if(!0===f.Array||!0===f.Dictionary||!0===f.Feature||!0===f.Point||!0===f.Polygon||!0===f.Polyline||!0===f.Multipoint||
!0===f.Extent||!0===f.Function)return a.slice(0);b=0;var e="",g;for(g in f)b++,e=g;a=1<b||"String"===e?M(a,function(a,b){if(null===a||void 0===a||a===c.voidOperation)return null===b||void 0===b||b===c.voidOperation?0:1;if(null===b||void 0===b||b===c.voidOperation)return-1;var f=c.toString(a),d=c.toString(b);return f<d?-1:f===d?0:1}):"Number"===e?M(a,function(a,b){return a-b}):"Boolean"===e?M(a,function(a,b){return a===b?0:b?-1:1}):"Date"===e?M(a,function(a,b){return b-a}):a.slice(0)}return a})};l.functionHelper=
{fixSpatialReference:c.fixSpatialReference,parseArguments:z,standardFunction:K};l.executeScript=function(a,b,f){f||(f=new d(102100));var e=b.vars,g=b.customfunctions,h={};e||(e={});g||(g={});var p=new s({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});p.immutable=!1;h.textformatting={value:p,valueset:!0,node:null};h.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};h.pi={value:Math.PI,valueset:!0,node:null};for(var k in O)h[k]={value:new c.NativeFunction(O[k]),
valueset:!0,node:null};for(k in g)h[k]={value:new c.NativeFunction(g[k]),"native":!0,valueset:!0,node:null};for(k in e)h[k]=e[k]instanceof m?{value:new q(e[k]),valueset:!0,node:null}:{value:e[k],valueset:!0,node:null};a=A({spatialReference:f,globalScope:h,localScope:null,depthCounter:1,applicationCache:void 0===b.applicationCache?null:b.applicationCache},a.body[0].body);a instanceof c.ReturnResult&&(a=a.value);a instanceof c.ImplicitResult&&(a=a.value);a===c.voidOperation&&(a=null);if(a===c.breakResult)throw Error("Cannot return BREAK");
if(a===c.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof v)throw Error("Cannot return FUNCTION");if(a instanceof c.NativeFunction)throw Error("Cannot return FUNCTION");return a};l.extractFieldLiterals=function(a,c){void 0===c&&(c=!1);return b.findFieldLiterals(a,c)};l.validateScript=function(a,c){return b.validateScript(a,c,"simple")};l.referencesMember=function(a,c){return b.referencesMember(a,c)};l.referencesFunction=function(a,c){return b.referencesFunction(a,c)}})},"esri/arcade/languageUtils":function(){define("require exports ../geometry/Geometry ../moment dojo/number ./ImmutableArray ../kernel ./ImmutablePointArray ./ImmutablePathArray dojo/_base/array ../geometry/Point ./FunctionWrapper".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s){function q(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function v(a){return a instanceof U||a instanceof s}function t(a){return"string"===typeof a||a instanceof String}function u(a){return"boolean"===typeof a}function r(a){return"number"===typeof a}function w(a){return a instanceof Array}function y(a){return a instanceof Date}function f(a,b){if(!1===isNaN(a)){if(void 0===b||null===b||""===b)return a.toString();
b=q(b,"\u2030","");b=q(b,"\u00a4","");return k.format(a,{pattern:b})}return a.toString()}function p(a,b){var c=m(a);return void 0===b||null===b||""===b?c.format():c.format(b)}function x(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function z(a,c){if(a===c||null===a&&c===l.voidOperation||null===c&&a===l.voidOperation)return!0;if(y(a)&&y(c))return a.getTime()===c.getTime();if(a instanceof d||a instanceof e)return a.equalityTest(c);
if(a instanceof b&&c instanceof b){var f=void 0,g=void 0;l.isVersion4?(f=a.cache._arcadeCacheId,g=c.cache._arcadeCacheId):(f=a.getCacheValue("_arcadeCacheId"),g=c.getCacheValue("_arcadeCacheId"));if(void 0!==f&&null!==f)return f===g}return void 0!==a&&void 0!==c&&null!==a&&null!==c&&"object"===typeof a&&"object"===typeof c&&a._arcadeCacheId===c._arcadeCacheId&&void 0!==a._arcadeCacheId&&null!==a._arcadeCacheId?!0:!1}function K(a,b){if(t(a))return a;if(null===a)return"";if(r(a))return f(a,b);if(u(a))return a.toString();
if(y(a))return p(a,b);if(a instanceof n)return JSON.stringify(a.toJson());if(w(a)){for(var c=[],d=0;d<a.length;d++)c[d]=E(a[d]);return"["+c.join(",")+"]"}if(a instanceof g){c=[];for(d=0;d<a.length();d++)c[d]=E(a.get(d));return"["+c.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():v(a)?"object, Function":""}function A(a,b){if(t(a))return a;if(null===a)return"";if(r(a))return f(a,b);if(u(a))return a.toString();if(y(a))return p(a,b);if(a instanceof n)return JSON.stringify(a.toJSON());
if(w(a)){for(var c=[],d=0;d<a.length;d++)c[d]=E(a[d]);return"["+c.join(",")+"]"}if(a instanceof g){c=[];for(d=0;d<a.length();d++)c[d]=E(a.get(d));return"["+c.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():v(a)?"object, Function":""}function E(a){if(null!==a){if(u(a)||r(a)||t(a))return JSON.stringify(a);if(a instanceof n||a instanceof g||a instanceof Array)return A(a);if(a instanceof Date)return JSON.stringify(a);if(null!==a&&"object"===typeof a&&void 0!==
a.castToText)return a.castToText()}return"null"}function L(a,b){return r(a)?a:null===a||""===a?0:y(a)?NaN:u(a)?a?1:0:""===a||void 0===a?NaN:void 0!==b&&t(a)?(b=q(b,"\u2030",""),b=q(b,"\u00a4",""),k.parse(a,{pattern:b})):a===l.voidOperation?0:Number(a)}function B(a,b){var f;c.some(b.fields,function(b){b.name===a&&(f=b.domain);return!!f});return f}a=function(){return function(a){this.value=a}}();var I=function(){return function(a){this.value=a}}(),U=function(){return function(a){this.fn=a}}();l.NativeFunction=
U;l.ImplicitResult=I;l.ReturnResult=a;l.isVersion4=0===h.version.indexOf("4.");l.voidOperation={type:"VOID"};l.breakResult={type:"BREAK"};l.continueResult={type:"CONTINUE"};l.multiReplace=q;l.isFunctionParameter=v;l.isSimpleType=function(a){return t(a)||r(a)||y(a)||u(a)||null===a||a===l.voidOperation||"number"===typeof a?!0:!1};l.defaultUndefined=function(a,b){return void 0===a?b:a};l.isString=t;l.isBoolean=u;l.isNumber=r;l.isArray=w;l.isImmutableArray=function(a){return a instanceof g};l.isDate=
y;l.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};l.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};l.formatNumber=f;l.formatDate=p;l.greaterThanLessThan=function(a,b,c){if(null===a){if(null===b||b===l.voidOperation)return x(null,null,c);if(r(b))return x(0,b,c);if(t(b)||
u(b))return x(0,L(b),c);if(y(b))return x(0,b.getTime(),c)}if(a===l.voidOperation){if(null===b||b===l.voidOperation)return x(null,null,c);if(r(b))return x(0,b,c);if(t(b)||u(b))return x(0,L(b),c);if(y(b))return x(0,b.getTime(),c)}else if(r(a)){if(r(b))return x(a,b,c);if(u(b))return x(a,L(b),c);if(null===b||b===l.voidOperation)return x(a,0,c);if(t(b))return x(a,L(b),c);if(y(b))return x(a,b.getTime(),c)}else if(t(a)){if(t(b))return x(K(a),K(b),c);if(y(b))return x(L(a),b.getTime(),c);if(r(b))return x(L(a),
b,c);if(null===b||b===l.voidOperation)return x(L(a),0,c);if(u(b))return x(L(a),L(b),c)}else if(y(a)){if(y(b))return x(a,b,c);if(null===b||b===l.voidOperation)return x(a.getTime(),0,c);if(r(b))return x(a.getTime(),b,c);if(u(b)||t(b))return x(a.getTime(),L(b),c)}else if(u(a)){if(u(b))return x(a,b,c);if(r(b))return x(L(a),L(b),c);if(y(b))return x(L(a),b.getTime(),c);if(null===b||b===l.voidOperation)return x(L(a),0,c);if(t(b))return x(L(a),L(b),c)}return z(a,b)&&("\x3c\x3d"===c||"\x3e\x3d"===c)?!0:!1};
l.equalityTest=z;l.toString=K;l.toNumberArray=function(a){var b=[];if(!1===w(a))return null;if(a instanceof g){for(var c=0;c<a.length();c++)b[c]=L(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=L(a[c]);return b};l.toStringExplicit=A;l.toNumber=L;l.toDate=function(a,b){if(y(a))return a;if(t(a)){var c=m(a,[void 0===b||null===b||""===b?m.ISO_8601:b]);if(c.isValid())return c.toDate()}return null};l.toDateM=function(a,b){if(y(a))return m(a);if(t(a)){var c=m(a,[void 0===b||null===b||""===b?m.ISO_8601:b]);
if(c.isValid())return c}return null};l.toBoolean=function(a){if(u(a))return a;if(t(a)){if(a=a.toLowerCase(),"true"===a)return!0}else if(r(a))return 0===a||isNaN(a)?!1:!0;return!1};l.fixSpatialReference=function(a,b){if(null===a)return null;if(null===a.spatialReference||void 0===a.spatialReference)a.spatialReference=b;return a};l.getDomainValue=function(a,b){if(!a||!a.domain)return null;var c=null;b="esriFieldTypeString"===a.field.type?K(b):L(b);for(var f=0;f<a.domain.codedValues.length;f++){var d=
a.domain.codedValues[f];d.code===b&&(c=d)}return null===c?null:c.name};l.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=K(b);for(var f=0;f<a.domain.codedValues.length;f++){var d=a.domain.codedValues[f];d.name===b&&(c=d)}return null===c?null:c.code};l.getDomain=function(a,b,f,d){void 0===f&&(f=null);if(!b||!b.fields)return null;for(var e=null,g=0;g<b.fields.length;g++){var h=b.fields[g];h.name.toLowerCase()===a.toString().toLowerCase()&&(e=h)}if(null===e)return null;var p,k;
d||(d=f&&b.typeIdField&&f._field(b.typeIdField));null!=d&&c.some(b.types,function(a){if(a.id===d){if((p=a.domains&&a.domains[e.name])&&"inherited"===p.type)p=B(e.name,b),k=!0;return!0}return!1},this);!k&&!p&&(p=B(a,b));return{field:e,domain:p}}})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(a,l,n){return n})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(a,l,n,m){var k={ar:1,"ar-ma":1,"ar-sa":1,"ar-tn":1,
cs:1,da:1,de:1,"de-at":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-nz":1,es:1,"es-do":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hr:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-tw":1};l.load=function(a,h,e){a=n.locale;"zh-hk"===a&&(a="zh-tw");var d=a in k;if(!d){var c=a.split("-");1<c.length&&c[0]in k&&(a=c[0],d=!0)}d?h(["moment/locale/"+a],function(){e(m)}):e(m)}})},"moment/moment":function(){(function(a,l){"object"===
typeof exports&&"undefined"!==typeof module?module.exports=l():"function"===typeof define&&define.amd?define(l):a.moment=l()})(this,function(){function a(){return Gb.apply(null,arguments)}function l(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function n(a){return"[object Object]"===Object.prototype.toString.call(a)}function m(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function k(a,b){var c=[],f;for(f=0;f<a.length;++f)c.push(b(a[f],
f));return c}function g(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function h(a,b){for(var c in b)g(b,c)&&(a[c]=b[c]);g(b,"toString")&&(a.toString=b.toString);g(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function e(a,b,c,f){return db(a,b,c,f,!0).utc()}function d(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null});return a._pf}function c(a){if(null==
a._isValid){var b=d(a),c=Hb.call(b.parsedDateParts,function(a){return null!=a});a._isValid=!isNaN(a._d.getTime())&&0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(a._isValid=a._isValid&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour)}return a._isValid}function b(a){var b=e(NaN);null!=a?h(d(b),a):d(b).userInvalidated=!0;return b}function s(a){return void 0===a}function q(a,b){var c,
f,e;s(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);s(b._i)||(a._i=b._i);s(b._f)||(a._f=b._f);s(b._l)||(a._l=b._l);s(b._strict)||(a._strict=b._strict);s(b._tzm)||(a._tzm=b._tzm);s(b._isUTC)||(a._isUTC=b._isUTC);s(b._offset)||(a._offset=b._offset);s(b._pf)||(a._pf=d(b));s(b._locale)||(a._locale=b._locale);if(0<xb.length)for(c in xb)f=xb[c],e=b[f],s(e)||(a[f]=e);return a}function v(b){q(this,b);this._d=new Date(null!=b._d?b._d.getTime():NaN);!1===yb&&(yb=!0,a.updateOffset(this),yb=!1)}
function t(a){return a instanceof v||null!=a&&null!=a._isAMomentObject}function u(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function r(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=u(a));return b}function w(a,b,c){var f=Math.min(a.length,b.length),d=Math.abs(a.length-b.length),e=0,g;for(g=0;g<f;g++)(c&&a[g]!==b[g]||!c&&r(a[g])!==r(b[g]))&&e++;return e+d}function y(b){!1===a.suppressDeprecationWarnings&&("undefined"!==typeof console&&console.warn)&&console.warn("Deprecation warning: "+b)}function f(b,c){var f=
!0;return h(function(){null!=a.deprecationHandler&&a.deprecationHandler(null,b);f&&(y(b+"\nArguments: "+Array.prototype.slice.call(arguments).join(", ")+"\n"+Error().stack),f=!1);return c.apply(this,arguments)},c)}function p(b,c){null!=a.deprecationHandler&&a.deprecationHandler(b,c);Ib[b]||(y(c),Ib[b]=!0)}function x(a){return a instanceof Function||"[object Function]"===Object.prototype.toString.call(a)}function z(a,b){var c=h({},a),f;for(f in b)g(b,f)&&(n(a[f])&&n(b[f])?(c[f]={},h(c[f],a[f]),h(c[f],
b[f])):null!=b[f]?c[f]=b[f]:delete c[f]);for(f in a)g(a,f)&&(!g(b,f)&&n(a[f]))&&(c[f]=h({},c[f]));return c}function K(a){null!=a&&this.set(a)}function A(a,b){var c=a.toLowerCase();jb[c]=jb[c+"s"]=jb[b]=a}function E(a){return"string"===typeof a?jb[a]||jb[a.toLowerCase()]:void 0}function L(a){var b={},c,f;for(f in a)g(a,f)&&(c=E(f))&&(b[c]=a[f]);return b}function B(a){var b=[],c;for(c in a)b.push({unit:c,priority:Aa[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function I(b,c){return function(f){if(null!=
f){if(this.isValid())this._d["set"+(this._isUTC?"UTC":"")+b](f);a.updateOffset(this,c);return this}return U(this,b)}}function U(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function S(a,b,c){var f=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-f.length)).toString().substr(1)+f}function D(a,b,c,f){var d=f;"string"===typeof f&&(d=function(){return this[f]()});a&&(fb[a]=d);b&&(fb[b[0]]=function(){return S(d.apply(this,arguments),b[1],b[2])});c&&(fb[c]=function(){return this.localeData().ordinal(d.apply(this,
arguments),a)})}function J(a){var b=a.match(Kb),c,f;c=0;for(f=b.length;c<f;c++)b[c]=fb[b[c]]?fb[b[c]]:b[c].match(/\[[\s\S]/)?b[c].replace(/^\[|\]$/g,""):b[c].replace(/\\/g,"");return function(c){var d="",e;for(e=0;e<f;e++)d+=b[e]instanceof Function?b[e].call(c,a):b[e];return d}}function G(a,b){if(!a.isValid())return a.localeData().invalidDate();b=F(b,a.localeData());zb[b]=zb[b]||J(b);return zb[b](a)}function F(a,b){function c(a){return b.longDateFormat(a)||a}var f=5;for(pb.lastIndex=0;0<=f&&pb.test(a);)a=
a.replace(pb,c),pb.lastIndex=0,f-=1;return a}function M(a,b,c){Ab[a]=x(b)?b:function(a,f){return a&&c?c:b}}function P(a){return X(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,f,d){return b||c||f||d}))}function X(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function N(a,b){var c,f=b;"string"===typeof a&&(a=[a]);"number"===typeof b&&(f=function(a,c){c[b]=r(a)});for(c=0;c<a.length;c++)Bb[a[c]]=f}function H(a,b){N(a,function(a,c,f,d){f._w=f._w||{};b(a,f._w,
f,d)})}function O(a,b){return(new Date(Date.UTC(a,b+1,0))).getUTCDate()}function Y(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=r(b);else if(b=a.localeData().monthsParse(b),"number"!==typeof b)return a;c=Math.min(a.date(),O(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function V(b){return null!=b?(Y(this,b),a.updateOffset(this,!0),this):U(this,"Month")}function Z(){function a(b,c){return c.length-b.length}var b=[],c=[],f=[],d,g;for(d=0;12>d;d++)g=
e([2E3,d]),b.push(this.monthsShort(g,"")),c.push(this.months(g,"")),f.push(this.months(g,"")),f.push(this.monthsShort(g,""));b.sort(a);c.sort(a);f.sort(a);for(d=0;12>d;d++)b[d]=X(b[d]),c[d]=X(c[d]);for(d=0;24>d;d++)f[d]=X(f[d]);this._monthsShortRegex=this._monthsRegex=RegExp("^("+f.join("|")+")","i");this._monthsStrictRegex=RegExp("^("+c.join("|")+")","i");this._monthsShortStrictRegex=RegExp("^("+b.join("|")+")","i")}function aa(a){return 0===a%4&&0!==a%100||0===a%400}function ba(a,b,c,f,d,e,g){b=
new Date(a,b,c,f,d,e,g);100>a&&(0<=a&&isFinite(b.getFullYear()))&&b.setFullYear(a);return b}function ga(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&(0<=a&&isFinite(b.getUTCFullYear()))&&b.setUTCFullYear(a);return b}function ja(a,b,c){c=7+b-c;return-((7+ga(a,0,c).getUTCDay()-b)%7)+c-1}function la(a,b,c,f,d){c=(7+c-f)%7;f=ja(a,f,d);f=1+7*(b-1)+c+f;0>=f?(b=a-1,a=(aa(b)?366:365)+f):f>(aa(a)?366:365)?(b=a+1,a=f-(aa(a)?366:365)):(b=a,a=f);return{year:b,dayOfYear:a}}function ca(a,b,c){var f=
ja(a.year(),b,c),f=Math.floor((a.dayOfYear()-f-1)/7)+1;1>f?(a=a.year()-1,b=f+ma(a,b,c)):f>ma(a.year(),b,c)?(b=f-ma(a.year(),b,c),a=a.year()+1):(a=a.year(),b=f);return{week:b,year:a}}function ma(a,b,c){var f=ja(a,b,c);b=ja(a+1,b,c);return((aa(a)?366:365)-f+b)/7}function qa(a,b,c){var f,d;a=a.toLocaleLowerCase();if(!this._weekdaysParse){this._weekdaysParse=[];this._shortWeekdaysParse=[];this._minWeekdaysParse=[];for(f=0;7>f;++f)d=e([2E3,1]).day(f),this._minWeekdaysParse[f]=this.weekdaysMin(d,"").toLocaleLowerCase(),
this._shortWeekdaysParse[f]=this.weekdaysShort(d,"").toLocaleLowerCase(),this._weekdaysParse[f]=this.weekdays(d,"").toLocaleLowerCase()}if(c)b="dddd"===b?xa.call(this._weekdaysParse,a):"ddd"===b?xa.call(this._shortWeekdaysParse,a):xa.call(this._minWeekdaysParse,a);else if("dddd"===b){b=xa.call(this._weekdaysParse,a);if(-1!==b)return b;b=xa.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=xa.call(this._minWeekdaysParse,a)}else if("ddd"===b){b=xa.call(this._shortWeekdaysParse,a);if(-1!==b)return b;
b=xa.call(this._weekdaysParse,a);if(-1!==b)return b;b=xa.call(this._minWeekdaysParse,a)}else{b=xa.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=xa.call(this._weekdaysParse,a);if(-1!==b)return b;b=xa.call(this._shortWeekdaysParse,a)}return-1!==b?b:null}function Ha(){function a(b,c){return c.length-b.length}var b=[],c=[],f=[],d=[],g,h,p,k;for(g=0;7>g;g++)h=e([2E3,1]).day(g),p=this.weekdaysMin(h,""),k=this.weekdaysShort(h,""),h=this.weekdays(h,""),b.push(p),c.push(k),f.push(h),d.push(p),d.push(k),
d.push(h);b.sort(a);c.sort(a);f.sort(a);d.sort(a);for(g=0;7>g;g++)c[g]=X(c[g]),f[g]=X(f[g]),d[g]=X(d[g]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=RegExp("^("+d.join("|")+")","i");this._weekdaysStrictRegex=RegExp("^("+f.join("|")+")","i");this._weekdaysShortStrictRegex=RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=RegExp("^("+b.join("|")+")","i")}function ta(){return this.hours()%12||12}function Ca(a,b){D(a,0,0,function(){return this.localeData().meridiem(this.hours(),
this.minutes(),b)})}function Da(a,b){return b._meridiemParse}function La(a){var b=null;if(!wa[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=qb._abbr,require("./locale/"+a),za(b)}catch(c){}return wa[a]}function za(a,b){var c;a&&(c=s(b)?pa(a):ua(a,b))&&(qb=c);return qb._abbr}function ua(a,b){if(null!==b){var c=Mb;b.abbr=a;null!=wa[a]?(p("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),
c=wa[a]._config):null!=b.parentLocale&&(null!=wa[b.parentLocale]?c=wa[b.parentLocale]._config:p("parentLocaleUndefined","specified parentLocale is not defined yet. See http://momentjs.com/guides/#/warnings/parent-locale/"));wa[a]=new K(z(c,b));za(a);return wa[a]}delete wa[a];return null}function pa(a){var b;a&&(a._locale&&a._locale._abbr)&&(a=a._locale._abbr);if(!a)return qb;if(!l(a)){if(b=La(a))return b;a=[a]}a:{b=0;for(var c,f,d,e;b<a.length;){e=(a[b]?a[b].toLowerCase().replace("_","-"):a[b]).split("-");
c=e.length;for(f=(f=a[b+1]?a[b+1].toLowerCase().replace("_","-"):a[b+1])?f.split("-"):null;0<c;){if(d=La(e.slice(0,c).join("-"))){a=d;break a}if(f&&f.length>=c&&w(e,f,!0)>=c-1)break;c--}b++}a=null}return a}function Ea(a){var b;if((b=a._a)&&-2===d(a).overflow){b=0>b[Va]||11<b[Va]?Va:1>b[Ra]||b[Ra]>O(b[Na],b[Va])?Ra:0>b[ya]||24<b[ya]||24===b[ya]&&(0!==b[Oa]||0!==b[Wa]||0!==b[eb])?ya:0>b[Oa]||59<b[Oa]?Oa:0>b[Wa]||59<b[Wa]?Wa:0>b[eb]||999<b[eb]?eb:-1;if(d(a)._overflowDayOfYear&&(b<Na||b>Ra))b=Ra;d(a)._overflowWeeks&&
-1===b&&(b=Vb);d(a)._overflowWeekday&&-1===b&&(b=Wb);d(a).overflow=b}return a}function Ta(a){var b,c;b=a._i;var f=Xb.exec(b)||Yb.exec(b),e,g,h,p;if(f){d(a).iso=!0;b=0;for(c=rb.length;b<c;b++)if(rb[b][1].exec(f[1])){g=rb[b][0];e=!1!==rb[b][2];break}if(null==g)a._isValid=!1;else{if(f[3]){b=0;for(c=Cb.length;b<c;b++)if(Cb[b][1].exec(f[3])){h=(f[2]||" ")+Cb[b][0];break}if(null==h){a._isValid=!1;return}}if(!e&&null!=h)a._isValid=!1;else{if(f[4])if(Zb.exec(f[4]))p="Z";else{a._isValid=!1;return}a._f=g+(h||
"")+(p||"");Ka(a)}}}else a._isValid=!1}function cb(b){var c=$b.exec(b._i);null!==c?b._d=new Date(+c[1]):(Ta(b),!1===b._isValid&&(delete b._isValid,a.createFromInputFallback(b)))}function Fa(a,b,c){return null!=a?a:null!=b?b:c}function Ba(b){var c,f=[],e;if(!b._d){e=new Date(a.now());e=b._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()];if(b._w&&null==b._a[Ra]&&null==b._a[Va]){var g,h,p,k,m,l;g=b._w;if(null!=g.GG||null!=g.W||null!=g.E){if(m=1,l=
4,h=Fa(g.GG,b._a[Na],ca(Q(),1,4).year),p=Fa(g.W,1),k=Fa(g.E,1),1>k||7<k)c=!0}else if(m=b._locale._week.dow,l=b._locale._week.doy,h=Fa(g.gg,b._a[Na],ca(Q(),m,l).year),p=Fa(g.w,1),null!=g.d){if(k=g.d,0>k||6<k)c=!0}else if(null!=g.e){if(k=g.e+m,0>g.e||6<g.e)c=!0}else k=m;1>p||p>ma(h,m,l)?d(b)._overflowWeeks=!0:null!=c?d(b)._overflowWeekday=!0:(c=la(h,p,k,m,l),b._a[Na]=c.year,b._dayOfYear=c.dayOfYear)}if(b._dayOfYear){c=Fa(b._a[Na],e[Na]);if(b._dayOfYear>(aa(c)?366:365))d(b)._overflowDayOfYear=!0;c=ga(c,
0,b._dayOfYear);b._a[Va]=c.getUTCMonth();b._a[Ra]=c.getUTCDate()}for(c=0;3>c&&null==b._a[c];++c)b._a[c]=f[c]=e[c];for(;7>c;c++)b._a[c]=f[c]=null==b._a[c]?2===c?1:0:b._a[c];24===b._a[ya]&&(0===b._a[Oa]&&0===b._a[Wa]&&0===b._a[eb])&&(b._nextDay=!0,b._a[ya]=0);b._d=(b._useUTC?ga:ba).apply(null,f);null!=b._tzm&&b._d.setUTCMinutes(b._d.getUTCMinutes()-b._tzm);b._nextDay&&(b._a[ya]=24)}}function Ka(b){if(b._f===a.ISO_8601)Ta(b);else{b._a=[];d(b).empty=!0;var c=""+b._i,f,e,h,p,k,m=c.length,l=0;h=F(b._f,
b._locale).match(Kb)||[];for(f=0;f<h.length;f++){p=h[f];if(e=(c.match(!g(Ab,p)?RegExp(P(p)):Ab[p](b._strict,b._locale))||[])[0])k=c.substr(0,c.indexOf(e)),0<k.length&&d(b).unusedInput.push(k),c=c.slice(c.indexOf(e)+e.length),l+=e.length;if(fb[p]){if(e?d(b).empty=!1:d(b).unusedTokens.push(p),k=b,null!=e&&g(Bb,p))Bb[p](e,k._a,k,p)}else b._strict&&!e&&d(b).unusedTokens.push(p)}d(b).charsLeftOver=m-l;0<c.length&&d(b).unusedInput.push(c);12>=b._a[ya]&&(!0===d(b).bigHour&&0<b._a[ya])&&(d(b).bigHour=void 0);
d(b).parsedDateParts=b._a.slice(0);d(b).meridiem=b._meridiem;c=b._a;f=ya;m=b._locale;h=b._a[ya];l=b._meridiem;null!=l&&(null!=m.meridiemHour?h=m.meridiemHour(h,l):null!=m.isPM&&((m=m.isPM(l))&&12>h&&(h+=12),!m&&12===h&&(h=0)));c[f]=h;Ba(b);Ea(b)}}function Ya(a){if(!a._d){var b=L(a._i);a._a=k([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});Ba(a)}}function Za(a){var f=a._i,e=a._f;a._locale=a._locale||pa(a._l);if(null===f||void 0===e&&""===
f)return b({nullInput:!0});"string"===typeof f&&(a._i=f=a._locale.preparse(f));if(t(f))return new v(Ea(f));if(l(e)){var g,p,k;if(0===a._f.length)d(a).invalidFormat=!0,a._d=new Date(NaN);else{for(f=0;f<a._f.length;f++)if(e=0,g=q({},a),null!=a._useUTC&&(g._useUTC=a._useUTC),g._f=a._f[f],Ka(g),c(g)&&(e+=d(g).charsLeftOver,e+=10*d(g).unusedTokens.length,d(g).score=e,null==k||e<k))k=e,p=g;h(a,p||g)}}else m(f)?a._d=f:e?Ka(a):Ua(a);c(a)||(a._d=null);return a}function Ua(b){var c=b._i;void 0===c?b._d=new Date(a.now()):
m(c)?b._d=new Date(c.valueOf()):"string"===typeof c?cb(b):l(c)?(b._a=k(c.slice(0),function(a){return parseInt(a,10)}),Ba(b)):"object"===typeof c?Ya(b):"number"===typeof c?b._d=new Date(c):a.createFromInputFallback(b)}function db(a,b,c,f,d){var e={};"boolean"===typeof c&&(f=c,c=void 0);var g;if(g=n(a))a:{for(var h in a){g=!1;break a}g=!0}if(g||l(a)&&0===a.length)a=void 0;e._isAMomentObject=!0;e._useUTC=e._isUTC=d;e._l=c;e._i=a;e._f=b;e._strict=f;a=new v(Ea(Za(e)));a._nextDay&&(a.add(1,"d"),a._nextDay=
void 0);return a}function Q(a,b,c,f){return db(a,b,c,f,!1)}function sa(a,b){var c,f;1===b.length&&l(b[0])&&(b=b[0]);if(!b.length)return Q();c=b[0];for(f=1;f<b.length;++f)if(!b[f].isValid()||b[f][a](c))c=b[f];return c}function Ia(a){a=L(a);var b=a.year||0,c=a.quarter||0,f=a.month||0,d=a.week||0,e=a.day||0;this._milliseconds=+(a.millisecond||0)+1E3*(a.second||0)+6E4*(a.minute||0)+36E5*(a.hour||0);this._days=+e+7*d;this._months=+f+3*c+12*b;this._data={};this._locale=pa();this._bubble()}function ea(a){return a instanceof
Ia}function Ma(a,b){D(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+S(~~(a/60),2)+b+S(~~a%60,2)})}function Ga(a,b){var c=(b||"").match(a)||[],c=((c[c.length-1]||[])+"").match(ac)||["-",0,0],f=+(60*c[1])+r(c[2]);return"+"===c[0]?f:-f}function ia(b,c){var f,d;return c._isUTC?(f=c.clone(),d=(t(b)||m(b)?b.valueOf():Q(b).valueOf())-f.valueOf(),f._d.setTime(f._d.valueOf()+d),a.updateOffset(f,!1),f):Q(b).local()}function Pa(){return this.isValid()?this._isUTC&&0===this._offset:
!1}function T(a,b){var c=a,f=null;if(ea(a))c={ms:a._milliseconds,d:a._days,M:a._months};else if("number"===typeof a)c={},b?c[b]=a:c.milliseconds=a;else if(f=bc.exec(a))c="-"===f[1]?-1:1,c={y:0,d:r(f[Ra])*c,h:r(f[ya])*c,m:r(f[Oa])*c,s:r(f[Wa])*c,ms:r(f[eb])*c};else if(f=cc.exec(a))c="-"===f[1]?-1:1,c={y:ka(f[2],c),M:ka(f[3],c),w:ka(f[4],c),d:ka(f[5],c),h:ka(f[6],c),m:ka(f[7],c),s:ka(f[8],c)};else if(null==c)c={};else if("object"===typeof c&&("from"in c||"to"in c))f=Q(c.from),c=Q(c.to),!f.isValid()||
!c.isValid()?f={milliseconds:0,months:0}:(c=ia(c,f),f.isBefore(c)?c=C(f,c):(c=C(c,f),c.milliseconds=-c.milliseconds,c.months=-c.months),f=c),c={},c.ms=f.milliseconds,c.M=f.months;c=new Ia(c);ea(a)&&g(a,"_locale")&&(c._locale=a._locale);return c}function ka(a,b){var c=a&&parseFloat(a.replace(",","."));return(isNaN(c)?0:c)*b}function C(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,
"M");return c}function fa(a,b){return function(c,f){var d;null!==f&&!isNaN(+f)&&(p(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),d=c,c=f,f=d);d=T("string"===typeof c?+c:c,f);ha(this,d,a);return this}}function ha(b,c,f,d){var e=c._milliseconds,g=0>c._days?-1*Math.round(-1*c._days):Math.round(c._days);c=0>c._months?-1*Math.round(-1*c._months):Math.round(c._months);if(b.isValid()){d=
null==d?!0:d;e&&b._d.setTime(b._d.valueOf()+e*f);if(g&&(e=U(b,"Date")+g*f,b.isValid()))b._d["set"+(b._isUTC?"UTC":"")+"Date"](e);c&&Y(b,U(b,"Month")+c*f);d&&a.updateOffset(b,g||c)}}function na(a){if(void 0===a)return this._locale._abbr;a=pa(a);null!=a&&(this._locale=a);return this}function $(){return this._locale}function da(a,b){D(0,[a,a.length],0,b)}function R(a,b,c,f,d){var e;if(null==a)return ca(this,f,d).year;e=ma(a,f,d);b>e&&(b=e);a=la(a,b,c,f,d);a=ga(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());
this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function nb(a,b){b[eb]=r(1E3*("0."+a))}function hb(a){return a}function gb(a,b,c,f){var d=pa();b=e().set(f,b);return d[c](b,a)}function ob(a,b,c){"number"===typeof a&&(b=a,a=void 0);a=a||"";if(null!=b)return gb(a,b,c,"month");var f=[];for(b=0;12>b;b++)f[b]=gb(a,b,c,"month");return f}function kb(a,b,c,f){"boolean"!==typeof a&&(c=b=a,a=!1);"number"===typeof b&&(c=b,b=void 0);b=b||"";var d=pa();a=a?d._week.dow:0;if(null!=c)return gb(b,
(c+a)%7,f,"day");d=[];for(c=0;7>c;c++)d[c]=gb(b,(c+a)%7,f,"day");return d}function ib(a,b,c,f){b=T(b,c);a._milliseconds+=f*b._milliseconds;a._days+=f*b._days;a._months+=f*b._months;return a._bubble()}function Qa(a){return function(){return this.as(a)}}function bb(a){return function(){return this._data[a]}}function Ub(a,b,c,f,d){return d.relativeTime(b||1,!!c,a,f)}function mb(){var a=Db(this._milliseconds)/1E3,b=Db(this._days),c=Db(this._months),f,d,e;f=u(a/60);d=u(f/60);a%=60;f%=60;e=u(c/12);var c=
c%12,g=this.asSeconds();return!g?"P0D":(0>g?"-":"")+"P"+(e?e+"Y":"")+(c?c+"M":"")+(b?b+"D":"")+(d||f||a?"T":"")+(d?d+"H":"")+(f?f+"M":"")+(a?a+"S":"")}var Gb,Hb;Hb=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,f=0;f<c;f++)if(f in b&&a.call(this,b[f],f,b))return!0;return!1};var xb=a.momentProperties=[],yb=!1,Ib={};a.suppressDeprecationWarnings=!1;a.deprecationHandler=null;var Jb;Jb=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)g(a,b)&&c.push(b);
return c};var jb={},Aa={},Kb=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,pb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,zb={},fb={},Lb=/\d/,Ja=/\d\d/,Nb=/\d{3}/,Eb=/\d{4}/,sb=/[+-]?\d{6}/,va=/\d\d?/,Ob=/\d\d\d\d?/,Pb=/\d\d\d\d\d\d?/,tb=/\d{1,3}/,Fb=/\d{1,4}/,ub=/[+-]?\d{1,6}/,dc=/\d+/,vb=/[+-]?\d+/,ec=/Z|[+-]\d\d:?\d\d/gi,wb=/Z|[+-]\d\d(?::?\d\d)?/gi,lb=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,
Ab={},Bb={},Na=0,Va=1,Ra=2,ya=3,Oa=4,Wa=5,eb=6,Vb=7,Wb=8,xa;xa=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};D("M",["MM",2],"Mo",function(){return this.month()+1});D("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});D("MMMM",0,0,function(a){return this.localeData().months(this,a)});A("month","M");Aa.month=8;M("M",va);M("MM",va,Ja);M("MMM",function(a,b){return b.monthsShortRegex(a)});M("MMMM",function(a,
b){return b.monthsRegex(a)});N(["M","MM"],function(a,b){b[Va]=r(a)-1});N(["MMM","MMMM"],function(a,b,c,f){f=c._locale.monthsParse(a,f,c._strict);null!=f?b[Va]=f:d(c).invalidMonth=a});var Qb=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/;D("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});D(0,["YY",2],0,function(){return this.year()%100});D(0,["YYYY",4],0,"year");D(0,["YYYYY",5],0,"year");D(0,["YYYYYY",6,!0],0,"year");A("year","y");Aa.year=1;M("Y",vb);M("YY",va,Ja);M("YYYY",Fb,Eb);M("YYYYY",ub,sb);
M("YYYYYY",ub,sb);N(["YYYYY","YYYYYY"],Na);N("YYYY",function(b,c){c[Na]=2===b.length?a.parseTwoDigitYear(b):r(b)});N("YY",function(b,c){c[Na]=a.parseTwoDigitYear(b)});N("Y",function(a,b){b[Na]=parseInt(a,10)});a.parseTwoDigitYear=function(a){return r(a)+(68<r(a)?1900:2E3)};var Rb=I("FullYear",!0);D("w",["ww",2],"wo","week");D("W",["WW",2],"Wo","isoWeek");A("week","w");A("isoWeek","W");Aa.week=5;Aa.isoWeek=5;M("w",va);M("ww",va,Ja);M("W",va);M("WW",va,Ja);H(["w","ww","W","WW"],function(a,b,c,f){b[f.substr(0,
1)]=r(a)});D("d",0,"do","day");D("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});D("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});D("dddd",0,0,function(a){return this.localeData().weekdays(this,a)});D("e",0,0,"weekday");D("E",0,0,"isoWeekday");A("day","d");A("weekday","e");A("isoWeekday","E");Aa.day=11;Aa.weekday=11;Aa.isoWeekday=11;M("d",va);M("e",va);M("E",va);M("dd",function(a,b){return b.weekdaysMinRegex(a)});M("ddd",function(a,b){return b.weekdaysShortRegex(a)});
M("dddd",function(a,b){return b.weekdaysRegex(a)});H(["dd","ddd","dddd"],function(a,b,c,f){f=c._locale.weekdaysParse(a,f,c._strict);null!=f?b.d=f:d(c).invalidWeekday=a});H(["d","e","E"],function(a,b,c,f){b[f]=r(a)});D("H",["HH",2],0,"hour");D("h",["hh",2],0,ta);D("k",["kk",2],0,function(){return this.hours()||24});D("hmm",0,0,function(){return""+ta.apply(this)+S(this.minutes(),2)});D("hmmss",0,0,function(){return""+ta.apply(this)+S(this.minutes(),2)+S(this.seconds(),2)});D("Hmm",0,0,function(){return""+
this.hours()+S(this.minutes(),2)});D("Hmmss",0,0,function(){return""+this.hours()+S(this.minutes(),2)+S(this.seconds(),2)});Ca("a",!0);Ca("A",!1);A("hour","h");Aa.hour=13;M("a",Da);M("A",Da);M("H",va);M("h",va);M("HH",va,Ja);M("hh",va,Ja);M("hmm",Ob);M("hmmss",Pb);M("Hmm",Ob);M("Hmmss",Pb);N(["H","HH"],ya);N(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});N(["h","hh"],function(a,b,c){b[ya]=r(a);d(c).bigHour=!0});N("hmm",function(a,b,c){var f=a.length-2;b[ya]=r(a.substr(0,f));b[Oa]=
r(a.substr(f));d(c).bigHour=!0});N("hmmss",function(a,b,c){var f=a.length-4,e=a.length-2;b[ya]=r(a.substr(0,f));b[Oa]=r(a.substr(f,2));b[Wa]=r(a.substr(e));d(c).bigHour=!0});N("Hmm",function(a,b,c){c=a.length-2;b[ya]=r(a.substr(0,c));b[Oa]=r(a.substr(c))});N("Hmmss",function(a,b,c){c=a.length-4;var f=a.length-2;b[ya]=r(a.substr(0,c));b[Oa]=r(a.substr(c,2));b[Wa]=r(a.substr(f))});var fc=I("Hours",!0),Mb={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",
lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",ordinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),
monthsShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),meridiemParse:/[ap]\.?m?\.?/i},wa={},qb,Xb=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,Yb=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?/,
Zb=/Z|[+-]\d\d(?::?\d\d)?/,rb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Cb=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",
/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],$b=/^\/?Date\((\-?\d+)/i;a.createFromInputFallback=f("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});a.ISO_8601=function(){};var gc=f("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",
function(){var a=Q.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:b()}),hc=f("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=Q.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:a:b()});Ma("Z",":");Ma("ZZ","");M("Z",wb);M("ZZ",wb);N(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=Ga(wb,a)});var ac=/([\+\-]|\d\d)/gi;a.updateOffset=function(){};var bc=/^(\-)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?\d*)?$/,
cc=/^(-)?P(?:(-?[0-9,.]*)Y)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)W)?(?:(-?[0-9,.]*)D)?(?:T(?:(-?[0-9,.]*)H)?(?:(-?[0-9,.]*)M)?(?:(-?[0-9,.]*)S)?)?$/;T.fn=Ia.prototype;var ic=fa(1,"add"),jc=fa(-1,"subtract");a.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";a.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Sb=f("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});
D(0,["gg",2],0,function(){return this.weekYear()%100});D(0,["GG",2],0,function(){return this.isoWeekYear()%100});da("gggg","weekYear");da("ggggg","weekYear");da("GGGG","isoWeekYear");da("GGGGG","isoWeekYear");A("weekYear","gg");A("isoWeekYear","GG");Aa.weekYear=1;Aa.isoWeekYear=1;M("G",vb);M("g",vb);M("GG",va,Ja);M("gg",va,Ja);M("GGGG",Fb,Eb);M("gggg",Fb,Eb);M("GGGGG",ub,sb);M("ggggg",ub,sb);H(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,f){b[f.substr(0,2)]=r(a)});H(["gg","GG"],function(b,c,f,d){c[d]=
a.parseTwoDigitYear(b)});D("Q",0,"Qo","quarter");A("quarter","Q");Aa.quarter=7;M("Q",Lb);N("Q",function(a,b){b[Va]=3*(r(a)-1)});D("D",["DD",2],"Do","date");A("date","D");Aa.date=9;M("D",va);M("DD",va,Ja);M("Do",function(a,b){return a?b._ordinalParse:b._ordinalParseLenient});N(["D","DD"],Ra);N("Do",function(a,b){b[Ra]=r(a.match(va)[0],10)});var Tb=I("Date",!0);D("DDD",["DDDD",3],"DDDo","dayOfYear");A("dayOfYear","DDD");Aa.dayOfYear=4;M("DDD",tb);M("DDDD",Nb);N(["DDD","DDDD"],function(a,b,c){c._dayOfYear=
r(a)});D("m",["mm",2],0,"minute");A("minute","m");Aa.minute=14;M("m",va);M("mm",va,Ja);N(["m","mm"],Oa);var kc=I("Minutes",!1);D("s",["ss",2],0,"second");A("second","s");Aa.second=15;M("s",va);M("ss",va,Ja);N(["s","ss"],Wa);var lc=I("Seconds",!1);D("S",0,0,function(){return~~(this.millisecond()/100)});D(0,["SS",2],0,function(){return~~(this.millisecond()/10)});D(0,["SSS",3],0,"millisecond");D(0,["SSSS",4],0,function(){return 10*this.millisecond()});D(0,["SSSSS",5],0,function(){return 100*this.millisecond()});
D(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});D(0,["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});D(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});D(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});A("millisecond","ms");Aa.millisecond=16;M("S",tb,Lb);M("SS",tb,Ja);M("SSS",tb,Nb);var Sa;for(Sa="SSSS";9>=Sa.length;Sa+="S")M(Sa,dc);for(Sa="S";9>=Sa.length;Sa+="S")N(Sa,nb);var mc=I("Milliseconds",!1);D("z",0,0,"zoneAbbr");D("zz",0,0,"zoneName");
var W=v.prototype;W.add=ic;W.calendar=function(b,c){var f=b||Q(),d=ia(f,this).startOf("day"),d=a.calendarFormat(this,d)||"sameElse",e=c&&(x(c[d])?c[d].call(this,f):c[d]);return this.format(e||this.localeData().calendar(d,this,Q(f)))};W.clone=function(){return new v(this)};W.diff=function(a,b,c){var f;if(!this.isValid())return NaN;a=ia(a,this);if(!a.isValid())return NaN;f=6E4*(a.utcOffset()-this.utcOffset());b=E(b);if("year"===b||"month"===b||"quarter"===b){f=12*(a.year()-this.year())+(a.month()-this.month());
var d=this.clone().add(f,"months"),e;0>a-d?(e=this.clone().add(f-1,"months"),a=(a-d)/(d-e)):(e=this.clone().add(f+1,"months"),a=(a-d)/(e-d));a=-(f+a)||0;"quarter"===b?a/=3:"year"===b&&(a/=12)}else a=this-a,a="second"===b?a/1E3:"minute"===b?a/6E4:"hour"===b?a/36E5:"day"===b?(a-f)/864E5:"week"===b?(a-f)/6048E5:a;return c?a:u(a)};W.endOf=function(a){a=E(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};W.format=
function(b){b||(b=this.isUtc()?a.defaultFormatUtc:a.defaultFormat);b=G(this,b);return this.localeData().postformat(b)};W.from=function(a,b){return this.isValid()&&(t(a)&&a.isValid()||Q(a).isValid())?T({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};W.fromNow=function(a){return this.from(Q(),a)};W.to=function(a,b){return this.isValid()&&(t(a)&&a.isValid()||Q(a).isValid())?T({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};W.toNow=
function(a){return this.to(Q(),a)};W.get=function(a){a=E(a);return x(this[a])?this[a]():this};W.invalidAt=function(){return d(this).overflow};W.isAfter=function(a,b){var c=t(a)?a:Q(a);if(!this.isValid()||!c.isValid())return!1;b=E(!s(b)?b:"millisecond");return"millisecond"===b?this.valueOf()>c.valueOf():c.valueOf()<this.clone().startOf(b).valueOf()};W.isBefore=function(a,b){var c=t(a)?a:Q(a);if(!this.isValid()||!c.isValid())return!1;b=E(!s(b)?b:"millisecond");return"millisecond"===b?this.valueOf()<
c.valueOf():this.clone().endOf(b).valueOf()<c.valueOf()};W.isBetween=function(a,b,c,f){f=f||"()";return("("===f[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===f[1]?this.isBefore(b,c):!this.isAfter(b,c))};W.isSame=function(a,b){var c=t(a)?a:Q(a);if(!this.isValid()||!c.isValid())return!1;b=E(b||"millisecond");if("millisecond"===b)return this.valueOf()===c.valueOf();c=c.valueOf();return this.clone().startOf(b).valueOf()<=c&&c<=this.clone().endOf(b).valueOf()};W.isSameOrAfter=function(a,b){return this.isSame(a,
b)||this.isAfter(a,b)};W.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};W.isValid=function(){return c(this)};W.lang=Sb;W.locale=na;W.localeData=$;W.max=hc;W.min=gc;W.parsingFlags=function(){return h({},d(this))};W.set=function(a,b){if("object"===typeof a){a=L(a);for(var c=B(a),f=0;f<c.length;f++)this[c[f].unit](a[c[f].unit])}else if(a=E(a),x(this[a]))return this[a](b);return this};W.startOf=function(a){a=E(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);
case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};W.subtract=jc;W.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};W.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),
hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};W.toDate=function(){return new Date(this.valueOf())};W.toISOString=function(){var a=this.clone().utc();return 0<a.year()&&9999>=a.year()?x(Date.prototype.toISOString)?this.toDate().toISOString():G(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):G(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")};W.toJSON=function(){return this.isValid()?this.toISOString():null};W.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};
W.unix=function(){return Math.floor(this.valueOf()/1E3)};W.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};W.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};W.year=Rb;W.isLeapYear=function(){return aa(this.year())};W.weekYear=function(a){return R.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};W.isoWeekYear=function(a){return R.call(this,a,this.isoWeek(),this.isoWeekday(),
1,4)};W.quarter=W.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)};W.month=V;W.daysInMonth=function(){return O(this.year(),this.month())};W.week=W.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};W.isoWeek=W.isoWeeks=function(a){var b=ca(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};W.weeksInYear=function(){var a=this.localeData()._week;return ma(this.year(),a.dow,a.doy)};W.isoWeeksInYear=function(){return ma(this.year(),
1,4)};W.date=Tb;W.day=W.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};W.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};W.isoWeekday=function(a){if(!this.isValid())return null!=
a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};W.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};W.hour=W.hours=fc;W.minute=W.minutes=kc;W.second=W.seconds=lc;W.millisecond=W.milliseconds=mc;W.utcOffset=function(b,c){var f=this._offset||0,d;return!this.isValid()?null!=b?this:NaN:null!=
b?("string"===typeof b?b=Ga(wb,b):16>Math.abs(b)&&(b*=60),!this._isUTC&&c&&(d=15*-Math.round(this._d.getTimezoneOffset()/15)),this._offset=b,this._isUTC=!0,null!=d&&this.add(d,"m"),f!==b&&(!c||this._changeInProgress?ha(this,T(b-f,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,a.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?f:15*-Math.round(this._d.getTimezoneOffset()/15)};W.utc=function(a){return this.utcOffset(0,a)};W.local=function(a){this._isUTC&&(this.utcOffset(0,
a),this._isUTC=!1,a&&this.subtract(15*-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};W.parseZone=function(){this._tzm?this.utcOffset(this._tzm):"string"===typeof this._i&&this.utcOffset(Ga(ec,this._i));return this};W.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?Q(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};W.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};W.isLocal=function(){return this.isValid()?
!this._isUTC:!1};W.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};W.isUtc=Pa;W.isUTC=Pa;W.zoneAbbr=function(){return this._isUTC?"UTC":""};W.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};W.dates=f("dates accessor is deprecated. Use date instead.",Tb);W.months=f("months accessor is deprecated. Use month instead",V);W.years=f("years accessor is deprecated. Use year instead",Rb);W.zone=f("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",
function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});W.isDSTShifted=f("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!s(this._isDSTShifted))return this._isDSTShifted;var a={};q(a,this);a=Za(a);if(a._a){var b=a._isUTC?e(a._a):Q(a._a);this._isDSTShifted=this.isValid()&&0<w(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ra=K.prototype;ra.calendar=function(a,
b,c){a=this._calendar[a]||this._calendar.sameElse;return x(a)?a.call(b,c):a};ra.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};ra.invalidDate=function(){return this._invalidDate};ra.ordinal=function(a){return this._ordinal.replace("%d",a)};ra.preparse=hb;ra.postformat=hb;ra.relativeTime=function(a,b,c,f){var d=this._relativeTime[c];
return x(d)?d(a,b,c,f):d.replace(/%d/i,a)};ra.pastFuture=function(a,b){var c=this._relativeTime[0<a?"future":"past"];return x(c)?c(b):c.replace(/%s/i,b)};ra.set=function(a){var b,c;for(c in a)b=a[c],x(b)?this[c]=b:this["_"+c]=b;this._config=a;this._ordinalParseLenient=RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)};ra.months=function(a,b){return l(this._months)?this._months[a.month()]:this._months[(this._months.isFormat||Qb).test(b)?"format":"standalone"][a.month()]};ra.monthsShort=function(a,
b){return l(this._monthsShort)?this._monthsShort[a.month()]:this._monthsShort[Qb.test(b)?"format":"standalone"][a.month()]};ra.monthsParse=function(a,b,c){var f,d;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[];for(f=0;12>f;++f)d=e([2E3,f]),this._shortMonthsParse[f]=this.monthsShort(d,"").toLocaleLowerCase(),this._longMonthsParse[f]=this.months(d,"").toLocaleLowerCase()}if(c)b="MMM"===b?xa.call(this._shortMonthsParse,
a):xa.call(this._longMonthsParse,a);else if("MMM"===b){b=xa.call(this._shortMonthsParse,a);if(-1!==b)break a;b=xa.call(this._longMonthsParse,a)}else{b=xa.call(this._longMonthsParse,a);if(-1!==b)break a;b=xa.call(this._shortMonthsParse,a)}b=-1!==b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(f=0;12>f;f++)if(d=e([2E3,f]),c&&!this._longMonthsParse[f]&&(this._longMonthsParse[f]=RegExp("^"+this.months(d,"").replace(".","")+"$","i"),this._shortMonthsParse[f]=
RegExp("^"+this.monthsShort(d,"").replace(".","")+"$","i")),!c&&!this._monthsParse[f]&&(d="^"+this.months(d,"")+"|^"+this.monthsShort(d,""),this._monthsParse[f]=RegExp(d.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[f].test(a)||c&&"MMM"===b&&this._shortMonthsParse[f].test(a)||!c&&this._monthsParse[f].test(a))return f};ra.monthsRegex=function(a){if(this._monthsParseExact)return g(this,"_monthsRegex")||Z.call(this),a?this._monthsStrictRegex:this._monthsRegex;g(this,"_monthsRegex")||(this._monthsRegex=
lb);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};ra.monthsShortRegex=function(a){if(this._monthsParseExact)return g(this,"_monthsRegex")||Z.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;g(this,"_monthsShortRegex")||(this._monthsShortRegex=lb);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};ra.week=function(a){return ca(a,this._week.dow,this._week.doy).week};ra.firstDayOfYear=function(){return this._week.doy};
ra.firstDayOfWeek=function(){return this._week.dow};ra.weekdays=function(a,b){return l(this._weekdays)?this._weekdays[a.day()]:this._weekdays[this._weekdays.isFormat.test(b)?"format":"standalone"][a.day()]};ra.weekdaysMin=function(a){return this._weekdaysMin[a.day()]};ra.weekdaysShort=function(a){return this._weekdaysShort[a.day()]};ra.weekdaysParse=function(a,b,c){var f,d;if(this._weekdaysParseExact)return qa.call(this,a,b,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],
this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(f=0;7>f;f++)if(d=e([2E3,1]).day(f),c&&!this._fullWeekdaysParse[f]&&(this._fullWeekdaysParse[f]=RegExp("^"+this.weekdays(d,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[f]=RegExp("^"+this.weekdaysShort(d,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[f]=RegExp("^"+this.weekdaysMin(d,"").replace(".",".?")+"$","i")),this._weekdaysParse[f]||(d="^"+this.weekdays(d,"")+"|^"+this.weekdaysShort(d,"")+"|^"+this.weekdaysMin(d,""),
this._weekdaysParse[f]=RegExp(d.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[f].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[f].test(a)||c&&"dd"===b&&this._minWeekdaysParse[f].test(a)||!c&&this._weekdaysParse[f].test(a))return f};ra.weekdaysRegex=function(a){if(this._weekdaysParseExact)return g(this,"_weekdaysRegex")||Ha.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;g(this,"_weekdaysRegex")||(this._weekdaysRegex=lb);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:
this._weekdaysRegex};ra.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return g(this,"_weekdaysRegex")||Ha.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;g(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=lb);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};ra.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return g(this,"_weekdaysRegex")||Ha.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;
g(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=lb);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};ra.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};ra.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};za("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===r(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});a.lang=f("moment.lang is deprecated. Use moment.locale instead.",za);a.langData=
f("moment.langData is deprecated. Use moment.localeData instead.",pa);var Xa=Math.abs,nc=Qa("ms"),oc=Qa("s"),pc=Qa("m"),qc=Qa("h"),rc=Qa("d"),sc=Qa("w"),tc=Qa("M"),uc=Qa("y"),vc=bb("milliseconds"),wc=bb("seconds"),xc=bb("minutes"),yc=bb("hours"),zc=bb("days"),Ac=bb("months"),Bc=bb("years"),$a=Math.round,ab={s:45,m:45,h:22,d:26,M:11},Db=Math.abs,oa=Ia.prototype;oa.abs=function(){var a=this._data;this._milliseconds=Xa(this._milliseconds);this._days=Xa(this._days);this._months=Xa(this._months);a.milliseconds=
Xa(a.milliseconds);a.seconds=Xa(a.seconds);a.minutes=Xa(a.minutes);a.hours=Xa(a.hours);a.months=Xa(a.months);a.years=Xa(a.years);return this};oa.add=function(a,b){return ib(this,a,b,1)};oa.subtract=function(a,b){return ib(this,a,b,-1)};oa.as=function(a){var b,c=this._milliseconds;a=E(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+
c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*b)+c;default:throw Error("Unknown unit "+a);}};oa.asMilliseconds=nc;oa.asSeconds=oc;oa.asMinutes=pc;oa.asHours=qc;oa.asDays=rc;oa.asWeeks=sc;oa.asMonths=tc;oa.asYears=uc;oa.valueOf=function(){return this._milliseconds+864E5*this._days+2592E6*(this._months%12)+31536E6*r(this._months/12)};oa._bubble=function(){var a=this._milliseconds,b=this._days,c=
this._months,f=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*(0>146097*c/4800+b?Math.floor(146097*c/4800+b):Math.ceil(146097*c/4800+b)),c=b=0);f.milliseconds=a%1E3;a=u(a/1E3);f.seconds=a%60;a=u(a/60);f.minutes=a%60;a=u(a/60);f.hours=a%24;b+=u(a/24);a=u(4800*b/146097);c+=a;b-=0>146097*a/4800?Math.floor(146097*a/4800):Math.ceil(146097*a/4800);a=u(c/12);f.days=b;f.months=c%12;f.years=a;return this};oa.get=function(a){a=E(a);return this[a+"s"]()};oa.milliseconds=vc;oa.seconds=wc;oa.minutes=
xc;oa.hours=yc;oa.days=zc;oa.weeks=function(){return u(this.days()/7)};oa.months=Ac;oa.years=Bc;oa.humanize=function(a){var b=this.localeData(),c;c=!a;var f=T(this).abs(),d=$a(f.as("s")),e=$a(f.as("m")),g=$a(f.as("h")),h=$a(f.as("d")),p=$a(f.as("M")),f=$a(f.as("y")),d=d<ab.s&&["s",d]||1>=e&&["m"]||e<ab.m&&["mm",e]||1>=g&&["h"]||g<ab.h&&["hh",g]||1>=h&&["d"]||h<ab.d&&["dd",h]||1>=p&&["M"]||p<ab.M&&["MM",p]||1>=f&&["y"]||["yy",f];d[2]=c;d[3]=0<+this;d[4]=b;c=Ub.apply(null,d);a&&(c=b.pastFuture(+this,
c));return b.postformat(c)};oa.toISOString=mb;oa.toString=mb;oa.toJSON=mb;oa.locale=na;oa.localeData=$;oa.toIsoString=f("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",mb);oa.lang=Sb;D("X",0,0,"unix");D("x",0,0,"valueOf");M("x",vb);M("X",/[+-]?\d+(\.\d{1,3})?/);N("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});N("x",function(a,b,c){c._d=new Date(r(a))});a.version="2.14.1";Gb=Q;a.fn=W;a.min=function(){var a=[].slice.call(arguments,0);return sa("isBefore",
a)};a.max=function(){var a=[].slice.call(arguments,0);return sa("isAfter",a)};a.now=function(){return Date.now?Date.now():+new Date};a.utc=e;a.unix=function(a){return Q(1E3*a)};a.months=function(a,b){return ob(a,b,"months")};a.isDate=m;a.locale=za;a.invalid=b;a.duration=T;a.isMoment=t;a.weekdays=function(a,b,c){return kb(a,b,c,"weekdays")};a.parseZone=function(){return Q.apply(null,arguments).parseZone()};a.localeData=pa;a.isDuration=ea;a.monthsShort=function(a,b){return ob(a,b,"monthsShort")};a.weekdaysMin=
function(a,b,c){return kb(a,b,c,"weekdaysMin")};a.defineLocale=ua;a.updateLocale=function(a,b){if(null!=b){var c;c=Mb;null!=wa[a]&&(c=wa[a]._config);b=z(c,b);c=new K(b);c.parentLocale=wa[a];wa[a]=c;za(a)}else null!=wa[a]&&(null!=wa[a].parentLocale?wa[a]=wa[a].parentLocale:null!=wa[a]&&delete wa[a]);return wa[a]};a.locales=function(){return Jb(wa)};a.weekdaysShort=function(a,b,c){return kb(a,b,c,"weekdaysShort")};a.normalizeUnits=E;a.relativeTimeRounding=function(a){return void 0===a?$a:"function"===
typeof a?($a=a,!0):!1};a.relativeTimeThreshold=function(a,b){if(void 0===ab[a])return!1;if(void 0===b)return ab[a];ab[a]=b;return!0};a.calendarFormat=function(a,b){var c=a.diff(b,"days",!0);return-6>c?"sameElse":-1>c?"lastWeek":0>c?"lastDay":1>c?"sameDay":2>c?"nextDay":7>c?"nextWeek":"sameElse"};a.prototype=W;return a})},"esri/arcade/ImmutableArray":function(){define(["require","exports"],function(a,l){return function(){function a(m){void 0===m&&(m=[]);this._elements=m}a.prototype.length=function(){return this._elements.length};
a.prototype.get=function(a){return this._elements[a]};a.prototype.toArray=function(){for(var a=[],k=0;k<this.length();k++)a.push(this.get(k));return a};return a}()})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ./ImmutableArray ../geometry/Point ../kernel".split(" "),function(a,l,n,m,k,g){var h=0===g.version.indexOf("4.");return function(a){function d(c,b,d,g,h,k){a.call(this,c);this._lazyPt=[];this._hasM=this._hasZ=!1;this._spRef=b;this._hasZ=
d;this._hasM=g;this._cacheId=h;this._partId=k}n(d,a);d.prototype.get=function(a){if(void 0===this._lazyPt[a]){var b=this._elements[a];if(void 0===b)return;var d=this._hasZ,e=this._hasM,g=null,g=d&&!e?new k(b[0],b[1],b[2],void 0,this._spRef):e&&d?new k(b[0],b[1],void 0,b[2],this._spRef):d&&e?new k(b[0],b[1],b[2],b[3],this._spRef):new k(b[0],b[1],this._spRef);h?g.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString():g.setCacheValue("_arcadeCacheId",this._cacheId.toString()+
"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=g}return this._lazyPt[a]};d.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof d?!1:a.getUniqueHash()===this.getUniqueHash()};d.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return d}(m)})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(a,l,n,m,k){return function(a){function h(e,
d,c,b,h){a.call(this,e);this._lazyPath=[];this._hasM=this._hasZ=!1;this._hasZ=c;this._hasM=b;this._spRef=d;this._cacheId=h}n(h,a);h.prototype.get=function(a){if(void 0===this._lazyPath[a]){var d=this._elements[a];if(void 0===d)return;this._lazyPath[a]=new k(d,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};h.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof h?!1:a.getUniqueHash()===this.getUniqueHash()};h.prototype.getUniqueHash=function(){return this._cacheId.toString()};
return h}(m)})},"esri/arcade/FunctionWrapper":function(){define(["require","exports"],function(a,l){return function(){return function(a,m){this.context=this.definition=null;this.definition=a;this.context=m}}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(a,l){function n(a,b,c,f){void 0!==a.fmin&&(a.min=a.fmin);void 0!==a.fmax&&(a.max=a.fmax);return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function m(a,b,c){if(null!==c.localScope&&
void 0!==c.localScope[a.toLowerCase()]){var f=c.localScope[a.toLowerCase()];if("FormulaFunction"===f.type||"any"===f.type)return void 0===f.signature&&(f.signature={min:"0",max:"*"}),n(f.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(f=c.globalScope[a.toLowerCase()],"FormulaFunction"===f.type||"any"===f.type)?(void 0===f.signature&&(f.signature={min:"0",max:"*"}),n(f.signature,a,b,c)):-1}function k(a,b){void 0===b&&(b=!0);var c=q(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==
a.init&&"FunctionExpression"===a.init.type?q(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):"Identifier"!==a.id.type?q(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?k(a.init,!1):"";case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)if(c=k(a.declarations[f],b),""!==c)return c;return"";case "ForInStatement":c=k(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return q(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return q(a,
"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return q(a,"SYNTAX","LEFTNOTVAR");c=k(a.right,b);if(""!==c)break;c=k(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=k(a.test,b),""!==c))break;if(null!==a.init&&(c=k(a.init,b),""!==c))break;if(null!==a.update&&(c=k(a.update,b),""!==c))break;if(null!==a.body&&(c=k(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=
k(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=k(a.consequent,!1),""!==c))break;if(null!==a.alternate&&(c=k(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var d=[],f=0;f<a.body.length;f++)"EmptyStatement"!==a.body[f].type&&d.push(a.body[f]);a.body=d;for(f=0;f<a.body.length;f++)if(c=k(a.body[f],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?q(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?q(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):k(a.body,
!1);case "ReturnStatement":return null!==a.argument?k(a.argument,b):"";case "UpdateExpression":return"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?q(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):k(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=k(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return q(a,
"SYNTAX","OPERATORNOTRECOGNISED")}return k(a.right,!1);case "ExpressionStatement":return k(a.expression,!1);case "Identifier":c="";break;case "MemberExpression":c=k(a.object,b);if(""!==c)break;return!0===a.computed?k(a.property,b):"";case "Literal":return"";case "ThisExpression":return q(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return q(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(f=0;f<a.arguments.length;f++)if(c=k(a.arguments[f],b),""!==c)return c;return"";case "UnaryExpression":c=
k(a.argument,b);break;case "BinaryExpression":c=k(a.left,b);if(""!==c)break;c=k(a.right,b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=k(a.left,b);if(""!==c)break;c=k(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return q(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";
case "ConditionalExpression":return q(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c="";for(f=0;f<a.elements.length&&!(c=k(a.elements[f],b),""!==c);f++);break;case "Array":return q(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(f=0;f<a.properties.length&&!(c="",null!==a.properties[f].key&&("Literal"!==a.properties[f].key.type&&"Identifier"!==a.properties[f].key.type&&(c=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[f].key.type&&(d=a.properties[f].key.value,
"string"===typeof d||d instanceof String||(c=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),""===c&&(c=k(a.properties[f],b)),""!==c);f++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return q(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=k(a.key,b),""!==c))break;c=k(a.value,b)}return c}catch(e){throw e;}}function g(a,d){var e=q(a,"SYNTAX","UNREOGNISED"),f=null,h="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return q(a,
"SYNTAX","FUNCTIONVARIABLEDECLARATOR");null!==d.localScope?void 0!==d.localScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase():void 0!==d.globalScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase();var k=null==a.init?"":g(a.init,d);if(""!==k)return k;null===d.localScope?d.globalScope[a.id.name.toLowerCase()]={type:"any"}:d.localScope[a.id.name.toLowerCase()]={type:"any"};return"";case "FunctionDeclaration":f=c(a.id.name.toLowerCase(),a,d);h=b(a,d);if(""!==h)return h;if(null!==d.localScope)return q(a,
"SYNTAX","GLOBALFUNCTIONSONLY");f.isnative=!1;d.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[f]};return"";case "VariableDeclaration":for(var e="",l=0;l<a.declarations.length&&!(e=g(a.declarations[l],d),""!==e);l++);break;case "IfStatement":e=g(a.test,d);if(""!==e)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return q(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(e=g(a.consequent,d),""!==e))break;if(null!==
a.alternate&&(e=g(a.alternate,d),""!==e))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(l=0;l<a.body.length;l++)if(e=g(a.body[l],d),""!==e)return e;return"";case "ReturnStatement":return null!==a.argument?g(a.argument,d):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return q(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return q(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return q(a,"SYNTAX",
"LEFTNOTVAR");e=g(a.left,d);if(""!==e)break;e=g(a.right,d);if(""!==e)break;e=g(a.body,d);if(""!==e)break;return"";case "ForStatement":if(null!==a.init&&(e=g(a.init,d),""!==e))break;if(null!==a.test&&(e=g(a.test,d),""!==e))break;if(null!==a.body&&(e=g(a.body,d),""!==e))break;if(null!==a.update&&(e=g(a.update,d),""!==e))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return q(a,
"SYNTAX","ASSIGNMENTTOVARSONLY");var n=!1;if("MemberExpression"===a.argument.type)return g(a.argument,d);null!==d.localScope&&void 0!==d.localScope[a.argument.name.toLowerCase()]&&(n=!0);void 0!==d.globalScope[a.argument.name.toLowerCase()]&&(n=!0);return!1===n?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return q(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var s=g(a.right,d);if(""!==s)return s;n=!1;if("MemberExpression"===
a.left.type)return s=g(a.left,d),""!==s?s:"";null!==d.localScope&&void 0!==d.localScope[a.left.name.toLowerCase()]&&(n=!0);void 0!==d.globalScope[a.left.name.toLowerCase()]&&(n=!0);return!1===n?"Identifier "+a.left.name+" has not been declared.":"";case "ExpressionStatement":return g(a.expression,d);case "Identifier":var t=a.name.toLowerCase();if(null!==d.localScope&&void 0!==d.localScope[t])return"";e=void 0!==d.globalScope[t]?"":q(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":e=g(a.object,
d);if(""!==e)break;return!0===a.computed?g(a.property,d):"";case "Literal":return"";case "ThisExpression":e=q(a,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==a.callee.type)return q(a,"SYNTAX","ONLYNODESSUPPORTED");e="";for(l=0;l<a.arguments.length;l++)if(e=g(a.arguments[l],d),""!==e)return e;var u=m(a.callee.name,a.arguments,d);-1===u&&(e=q(a,"SYNTAX","NOTFOUND"));-2===u&&(e=q(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":e=g(a.argument,d);break;case "BinaryExpression":e=
g(a.left,d);if(""!==e)break;e=g(a.right,d);if(""!==e)break;return"";case "LogicalExpression":e=g(a.left,d);if(""!==e)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return q(a.left,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");e=g(a.right,d);if(""!==e)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?q(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return q(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":e=
"";for(l=0;l<a.elements.length&&!(e=g(a.elements[l],d),""!==e);l++);break;case "ObjectExpression":e="";for(l=0;l<a.properties.length;l++){e="";if(null!==a.properties[l].key&&("Literal"!==a.properties[l].key.type&&"Identifier"!==a.properties[l].key.type&&(e=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[l].key.type)){var v=a.properties[l].key.value;"string"===typeof v||v instanceof String||(e=q(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===e&&(e=g(a.properties[l],d));if(""!==
e)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return q(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(e=g(a.key,d),""!==e))break;e=g(a.value,d);break;case "Array":return q(a,"SYNTAX","NOTSUPPORTED")}return e}catch(I){throw I;}}function h(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?h(a.init,b):c;case "FunctionDeclaration":return h(a.body,b);case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)if(h(a.declarations[f],
b))return!0;return c;case "IfStatement":return h(a.test,b)||null!==a.consequent&&h(a.consequent,b)||null!==a.alternate&&h(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(f=0;f<a.body.length;f++)if(h(a.body[f],b))return!0;return c;case "ReturnStatement":return null!==a.argument?h(a.argument,b):c;case "UpdateExpression":return(c=h(a.right,b))?c:h(a.left,b);case "AssignmentExpression":return h(a.right,b);case "ExpressionStatement":return h(a.expression,b);case "ForInStatement":return(c=
h(a.left,b))||(c=h(a.right,b))?c:c=h(a.body,b);case "ForStatement":if(null!==a.init&&(c=h(a.init,b))||null!==a.test&&(c=h(a.test,b))||null!==a.body&&(c=h(a.body,b)))return c;null!==a.update&&(c=h(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===a.name.toLowerCase();case "MemberExpression":if(c=h(a.object,b))return c;!0===a.computed&&(c=h(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;
case "CallExpression":for(f=0;f<a.arguments.length;f++)h(a.arguments[f],b)&&(c=!0);return c;case "ArrayExpression":for(f=0;f<a.elements.length;f++)h(a.elements[f],b)&&(c=!0);return c;case "UnaryExpression":return h(a.argument,b);case "BinaryExpression":return(c=h(a.left,b))?c:c=h(a.right,b);case "LogicalExpression":return(c=h(a.left,b))?c:c=h(a.right,b);case "ObjectExpression":for(f=0;f<a.properties.length;f++)h(a.properties[f],b)&&(c=!0);return c;case "Property":return c=h(a.value,b);case "ConditionalExpression":return c;
case "Array":return c;default:return c}}catch(d){throw d;}}function e(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?e(a.init,b):c;case "FunctionDeclaration":return e(a.body,b);case "VariableDeclaration":for(var f=0;f<a.declarations.length;f++)if(e(a.declarations[f],b))return!0;return c;case "IfStatement":return e(a.test,b)||null!==a.consequent&&e(a.consequent,b)||null!==a.alternate&&e(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(f=
0;f<a.body.length;f++)if(e(a.body[f],b))return!0;return c;case "ReturnStatement":return null!==a.argument?e(a.argument,b):c;case "UpdateExpression":return e(a.argument,b);case "AssignmentExpression":return e(a.left,b)?!0:e(a.right,b);case "ExpressionStatement":return e(a.expression,b);case "ForInStatement":return(c=e(a.left,b))||(c=e(a.right,b))?c:c=e(a.body,b);case "ForStatement":if(null!==a.init&&(c=e(a.init,b))||null!==a.test&&(c=e(a.test,b))||null!==a.body&&(c=e(a.body,b)))return c;null!==a.update&&
(c=e(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if(c=e(a.object,b))return c;!0===a.computed&&(c=e(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":if(a.callee.name.toLowerCase()===b.toLowerCase())return!0;for(f=0;f<a.arguments.length;f++)e(a.arguments[f],b)&&(c=!0);return c;case "ArrayExpression":for(f=0;f<a.elements.length;f++)e(a.elements[f],
b)&&(c=!0);return c;case "UnaryExpression":return e(a.argument,b);case "BinaryExpression":return(c=e(a.left,b))?c:c=e(a.right,b);case "LogicalExpression":return(c=e(a.left,b))?c:c=e(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(f=0;f<a.properties.length;f++)e(a.properties[f],b)&&(c=!0);return c;case "Property":return c=e(a.value,b);case "Array":return c;default:return c}}catch(d){throw d;}}function d(a,b){var c=[],f;try{switch(a.type){case "VariableDeclarator":return null!==
a.init?d(a.init,b):c;case "FunctionDeclaration":return d(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)f=d(a.declarations[e],b),c=c.concat(f);return c;case "ForInStatement":return f=d(a.left,b),c=c.concat(f),f=d(a.right,b),c=c.concat(f),f=d(a.body,b),c=c.concat(f);case "ForStatement":return null!==a.init&&(f=d(a.init,b),c=c.concat(f)),null!==a.test&&(f=d(a.test,b),c=c.concat(f)),null!==a.body&&(f=d(a.body,b),c=c.concat(f)),null!==a.update&&(f=d(a.update,b),c=c.concat(f)),
c;case "IfStatement":return f=d(a.test,b),c=c.concat(f),null!==a.consequent&&(f=d(a.consequent,b),c=c.concat(f)),null!==a.alternate&&(f=d(a.alternate,b),c=c.concat(f)),c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)f=d(a.body[e],b),c=c.concat(f);return c;case "ReturnStatement":return null!==a.argument?d(a.argument,b):c;case "UpdateExpression":return d(a.argument,b);case "AssignmentExpression":return c=d(a.left,b),c=c.concat(d(a.right,b));case "ExpressionStatement":return d(a.expression,
b);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if("Identifier"!==a.object.type)return c;if(!1===a.computed)c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&"string"===typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(g){}return c;case "Literal":return c;case "ThisExpression":return c;
case "CallExpression":for(e=0;e<a.arguments.length;e++)f=d(a.arguments[e],b),c=c.concat(f);return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)f=d(a.elements[e],b),c=c.concat(f);return c;case "UnaryExpression":return d(a.argument,b);case "ObjectExpression":for(e=0;e<a.properties.length;e++)f=d(a.properties[e],b),c=c.concat(f);return c;case "Property":return d(a.value,b);case "BinaryExpression":return f=d(a.left,b),c=c.concat(f),f=d(a.right,b),c=c.concat(f);case "LogicalExpression":return f=
d(a.left,b),c=c.concat(f),f=d(a.right,b),c=c.concat(f);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(h){throw h;}}function c(a,b,c){c=[];if(void 0!==b.params&&null!==b.params)for(var f=0;f<b.params.length;f++)c.push("any");return{name:a,"return":"any",params:c}}function b(a,b){for(var c={globalScope:b.globalScope,localScope:{}},f=0;f<a.params.length;f++)c.localScope[a.params[f].name.toLowerCase()]={type:"any"};return g(a.body,c)}function s(a,b,c,f){var d={};if(void 0===
a||null===a)a={};if(void 0===c||null===c)c={};d.infinity={type:"any"};d.textformatting={type:"any"};d.pi={type:"any"};for(var e in b)if("simple"!==f||"simple"===f&&"a"===b[e].av)d[e]={type:"FormulaFunction",signature:b[e]};for(b=0;b<c.length;b++)e=c[b],d[e.name]={type:"FormulaFunction",signature:e};for(e in a)d[e]=a[e],d[e].type="any";return d}function q(a,b,c){var f="";switch(b){case "SYNTAX":f="Syntax Error: ";break;case "RUNTIME":f="Runtime Error: ";break;default:f="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":f+=
" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":f+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":f+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":f+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":f+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":f+=
" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":f+=" Function Definition must have an identifier"}break;case "VariableDeclaration":f+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":f+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":f+=" Variable Definition must have an identifier"}break;case "Identifier":f+=" Identifier Not Found. ";f+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":f+=
" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":f+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":f+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":f+=" Can only declare value for use with IN";break;case "LEFTNOVAR":f+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":f+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":f+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":f+="Cannot find member property. ";f+=!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":f+="Out of Bounds. ";f+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":f+="Cannot call member method on null. ";f+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":f+="Cannot call member property on object of this type. ",f+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":f+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":f+="THIS construct is not supported.";case "CallExpression":switch(c){case "WRONGSIGNATURE":f+="Function signature does not match: ";f+=a.callee.name;break;case "ONLYNODESUPPORTED":f+="Functions must be declared.";f+=a.callee.name;break;case "NOTAFUNCTION":f+="Not a Function: ";f+=a.callee.name;break;case "NOTFOUND":f+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":f+=
"Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":f+="Unary operator "+a.operator+" cannot be used with this argument.";break}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":f+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":return"";case "ConditionalExpression":f+="Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":f+=
" Cannot Put Function inside Array."}break;case "Array":f+="Expression contains unrecognised array structure.";break;default:f+="Expression contains unrecognised code structures."}}catch(d){throw d;}return f}function v(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:q(a,b,c)}}function t(a,b,c,f,d){b={globalScope:b.globalScope,localScope:{}};for(d=0;d<a.params.length;d++)b.localScope[a.params[d].name.toLowerCase()]={type:"any"};u(a.body,b,c,f,!1)}function u(a,b,d,f,e){void 0===
e&&(e=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");q(a,"SYNTAX","UNREOGNISED");var g=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){f.push(v(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?f.push(v(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER")):(null!==b.localScope?void 0!==b.localScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase():void 0!==b.globalScope[a.id.name.toLowerCase()]&&a.id.name.toLowerCase(),
null===b.localScope?b.globalScope[a.id.name.toLowerCase()]={type:"any"}:b.localScope[a.id.name.toLowerCase()]={type:"any"});null===a.init?"":u(a.init,b,d,f,e);break;case "FunctionDeclaration":!1===e&&f.push(v(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&f.push(v(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));g=c("",a,b);t(a,b,d,f,e);null!==b.localScope&&f.push(v(a,"SYNTAX","GLOBALFUNCTIONSONLY"));g.isnative=!1;"Identifier"===a.id.type&&(b.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",
signature:[g]});break;case "VariableDeclaration":for(var h=0;h<a.declarations.length;h++)u(a.declarations[h],b,d,f,e);break;case "IfStatement":null!==a.test&&(u(a.test,b,d,f,e),("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)&&f.push(v(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&u(a.consequent,b,d,f,e);null!==a.alternate&&u(a.alternate,b,d,f,e);break;case "EmptyStatement":break;case "BlockStatement":if(null!==a.body)for(h=0;h<a.body.length;h++)u(a.body[h],
b,d,f,e);break;case "ReturnStatement":null!==a.argument&&u(a.argument,b,d,f,e);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&f.push(v(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&f.push(v(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&f.push(v(a,"SYNTAX","LEFTNOTVAR"));u(a.left,b,d,f,e);u(a.right,b,d,f,e);u(a.body,b,d,f,e);break;case "ForStatement":null!==a.init&&u(a.init,b,d,f,e);null!==a.test&&u(a.test,b,d,f,e);null!==
a.body&&u(a.body,b,d,f,e);null!==a.update&&u(a.update,b,d,f,e);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?f.push(v(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(g=!1,!1===d&&(null!==b.localScope&&void 0!==b.localScope[a.argument.name.toLowerCase()]&&(g=!0),void 0!==b.globalScope[a.argument.name.toLowerCase()]&&(g=!0),!1===g&&f.push({line:null===a?0:a.loc.start.line,
character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&u(a.argument,b,d,f,e));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&f.push(v(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:f.push(v(a,"SYNTAX","OPERATORNOTRECOGNISED"))}u(a.right,b,d,f,e);g=!1;"Identifier"===
a.left.type&&(null!==b.localScope&&void 0!==b.localScope[a.left.name.toLowerCase()]&&(g=!0),void 0!==b.globalScope[a.left.name.toLowerCase()]&&(g=!0),!1===d&&!1===g&&f.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}));"MemberExpression"===a.left.type&&u(a.left,b,d,f,e);break;case "ExpressionStatement":u(a.expression,b,d,f,e);break;case "Identifier":var k=a.name.toLowerCase();if(null!==b.localScope&&void 0!==
b.localScope[k])break;if(void 0!==b.globalScope[k])break;else!1===d&&f.push(v(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":u(a.object,b,d,f,e);!0===a.computed&&u(a.property,b,d,f,e);break;case "Literal":return"";case "ThisExpression":f.push(v(a,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==a.callee.type&&f.push(v(a,"SYNTAX","ONLYNODESSUPPORTED"));for(h=0;h<a.arguments.length;h++)u(a.arguments[h],b,d,f,e);var l=m(a.callee.name,a.arguments,b);!1===d&&-1===l&&
f.push(v(a,"SYNTAX","NOTFOUND"));-2===l&&f.push(v(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":u(a.argument,b,d,f,e);break;case "BinaryExpression":u(a.left,b,d,f,e);u(a.right,b,d,f,e);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:f.push(v(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;default:f.push(v(a,
"SYNTAX","OPERATORNOTRECOGNISED"))}u(a.left,b,d,f,e);("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)&&f.push(v(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));u(a.right,b,d,f,e);("AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type)&&f.push(v(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":f.push(v(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(h=0;h<a.elements.length;h++)u(a.elements[h],b,d,f,e);break;
case "Array":f.push(v(a,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(h=0;h<a.properties.length;h++)u(a.properties[h],b,d,f,e);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&f.push(v(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&u(a.key,b,d,f,e);u(a.value,b,d,f,e);break;default:f.push(v(a,"SYNTAX","UNRECOGNISED"))}}catch(n){f.push({line:null==a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}l.functionDecls={concatenate:{min:"0",
max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",av:"a"},today:{min:"0",max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",
max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",max:"3",av:"a"},trim:{min:"1",max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",
max:"1",av:"a"},maplayer:{min:"2",max:"3",av:"f"},domaincode:{min:"3",max:"4",av:"a"},domainname:{min:"2",max:"4",av:"a"},polygon:{min:"1",max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",av:"a"},geometry:{min:"1",max:"1",av:"a"},featurelayer:{min:"1",max:"3",av:"f"},featurecollection:{min:"1",max:"1",av:"f"},buffer:{min:"2",max:"4",av:"f"},area:{min:"1",max:"2",av:"f"},sumarea:{min:"1",max:"2",av:"f"},length:{min:"1",
max:"2",av:"f"},sumlength:{min:"1",max:"2",av:"f"},count:{min:"0",max:"*",av:"a"},filter:{min:"2",max:"2",av:"f"},envelopeintersects:{min:"2",max:"2",av:"f"},intersects:{min:"2",max:"2",av:"f"},contains:{min:"2",max:"2",av:"f"},overlaps:{min:"2",max:"2",av:"f"},within:{min:"2",max:"2",av:"f"},touches:{min:"2",max:"2",av:"f"},crosses:{min:"2",max:"2",av:"f"},union:{min:"1",max:"2",av:"f",fmin:1},difference:{min:"2",max:"2",av:"f",fmin:2,fmax:3},intersection:{min:"2",max:"2",av:"f",fmin:2,fmax:3},symmetricdifference:{min:"2",
max:"2",av:"f",fmin:2,fmax:3},number:{min:"1",max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",max:"1",av:"a"},log:{min:"1",max:"1",av:"a"},min:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",av:"a"},sqrt:{min:"1",max:"1",
av:"a"},sin:{min:"1",max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},mean:{min:"0",max:"*",av:"a"},sum:{min:"0",max:"*",av:"a"},variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},addfield:{min:"3",max:"3",av:"f"},removefield:{min:"2",max:"2",av:"f"},aggregate:{min:"3",max:"3",av:"f"},dissolve:{min:"2",max:"3",av:"f"},changeshape:{min:"2",max:"4",av:"f"},first:{min:"1",
max:"1",av:"a"},top:{min:"2",max:"2",av:"a"},orderby:{min:"2",max:"2",av:"f"},"boolean":{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},servicearea:{min:"2",max:"*",av:"f"},equals:{min:"2",max:"2",av:"a"},"typeof":{min:"1",max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",max:"*",av:"a"},haskey:{min:"2",max:"2",av:"a"},centroid:{min:"1",max:"1",av:"f"},multiparttosinglepart:{min:"1",max:"1",av:"f"}};l.checkFunctionSignature=
n;l.findFunction=m;l.validateLanguageNode=k;l.testValidityOfExpression=g;l.referencesMemberImpl=h;l.referencesMember=function(a,b){return!0===h(a.body[0].body,b)?!0:!1};l.referencesFunctionImpl=e;l.referencesFunction=function(a,b){return!0===e(a.body[0].body,b)?!0:!1};l.findFieldLiteralsImpl=d;l.findFieldLiterals=function(a,b){return d(a.body[0].body,b)};l.extractFunctionDeclaration=c;l.validateFunction=b;l.constructGlobalScope=s;l.validateScript=function(a,b,c){void 0===c&&(c="full");b={globalScope:s(b.vars,
l.functionDecls,b.customFunctions,c),localScope:null};return g(a.body[0].body,b)};l.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":k(a.body[0].body)};l.nodeErrorMessage=q;l.makeError=v;l.extractAllIssuesInFunction=t;l.extractAllIssues=u;l.checkScript=function(a,b,c,f){void 0===f&&(f="full");var d=[];if("BlockStatement"!==a.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===b||void 0===b)b={vars:{},customFunctions:[]};
b={globalScope:s(b.vars,l.functionDecls,b.customFunctions,f),localScope:null};try{u(a.body[0].body,b,c,d)}catch(e){}return d}})},"esri/arcade/Dictionary":function(){define(["require","exports","./languageUtils","../geometry/Geometry","./ImmutableArray"],function(a,l,n,m,k){return function(){function a(h){this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=h instanceof a?h.attributes:void 0===h?{}:null===h?{}:h}a.prototype.field=function(a){var e=a.toLowerCase();a=this.attributes[a];
if(void 0!==a)return a;for(var d in this.attributes)if(d.toLowerCase()===e)return this.attributes[d];throw Error("Field not Found");};a.prototype.setField=function(a,e){if(this.immutable)throw Error("Dictionary is Immutable");var d=a.toLowerCase();if(void 0===this.attributes[a])for(var c in this.attributes)if(c.toLowerCase()===d){this.attributes[c]=e;return}this.attributes[a]=e};a.prototype.hasField=function(a){var e=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var d in this.attributes)if(d.toLowerCase()===
e)return!0;return!1};a.prototype.keys=function(){var a=[],e;for(e in this.attributes)a.push(e);return a=a.sort()};a.prototype.castToText=function(){var a="",e;for(e in this.attributes){""!==a&&(a+=",");var d=this.attributes[e];null!=d&&(n.isBoolean(d)||n.isNumber(d)||n.isString(d)?a+=JSON.stringify(e)+":"+JSON.stringify(d):d instanceof m?a+=JSON.stringify(e)+":"+n.toStringExplicit(d):d instanceof k?a+=JSON.stringify(e)+":"+n.toStringExplicit(d):d instanceof Array?a+=JSON.stringify(e)+":"+n.toStringExplicit(d):
d instanceof Date?a+=JSON.stringify(e)+":"+JSON.stringify(d):null!==d&&"object"===typeof d&&void 0!==d.castToText&&(a+=JSON.stringify(e)+":"+d.castToText()))}return"{"+a+"}"};return a}()})},"esri/arcade/Feature":function(){define("require exports ../geometry/Geometry ../Graphic ../geometry/support/jsonUtils ./Dictionary ./languageUtils ./ImmutableArray ../geometry/Point".split(" "),function(a,l,n,m,k,g,h,e,d){return function(){function a(b,d,e){this._layer=this.attributes=this.geometry=null;this.immutable=
!0;b instanceof a?(this.attributes=b.attributes,this.geometry=b.geometry,b._layer&&(this._layer=b._layer)):b instanceof m?(this.geometry=b.geometry,this.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes,b._layer&&(this._layer=b._layer)):b instanceof g?(this.attributes=b.field("attributes"),null!==this.attributes&&(this.attributes=this.attributes instanceof g?this.attributes.attributes:null),this.geometry=b.field("geometry"),null!==this.geometry&&(this.geometry instanceof g?this.geometry=
a.parseGeometryFromDictionary(this.geometry):this.geometry instanceof n||(this.geometry=null))):(d instanceof n||null===d?(this.geometry=d,this.attributes=void 0===b?{}:null===b?{}:b):"string"===typeof b?(b=JSON.parse(b),null!==b.geometry&&void 0!==b.geometry&&(this.geometry=k.fromJSON(b.geometry)),this.attributes=void 0===b.attributes?{}:null===b.attributes?{}:b.attributes):(void 0===b?this.attributes={}:null===b&&(this.attributes={}),this.geometry=null),void 0!==e&&(this._layer=e))}a.prototype.castToText=
function(){var a="",c;for(c in this.attributes){""!==a&&(a+=",");var d=this.attributes[c];null!=d&&(h.isBoolean(d)||h.isNumber(d)||h.isString(d)?a+=JSON.stringify(c)+":"+JSON.stringify(d):d instanceof n?a+=JSON.stringify(c)+":"+h.toStringExplicit(d):d instanceof e?a+=JSON.stringify(c)+":"+h.toStringExplicit(d):d instanceof Array?a+=JSON.stringify(c)+":"+h.toStringExplicit(d):d instanceof Date?a+=JSON.stringify(c)+":"+JSON.stringify(d):null!==d&&"object"===typeof d&&void 0!==d.castToText&&(a+=JSON.stringify(c)+
":"+d.castToText()))}return'{"geometry":'+(null===this.geometry?"null":h.toStringExplicit(this.geometry))+',"attributes":{'+a+"}}"};a.prototype._fixDateFields=function(a){for(var c=0;c<a.length;c++){var d=this.attributes[a[c]];if(null!==d)if(void 0===d)for(var e in this.attributes){if(e.toLowerCase()===a[c]){d=this.attributes[e];null!==d&&!(d instanceof Date)&&(this.attributes[e]=new Date(d));break}}else d instanceof Date||(this.attributes[a[c]]=new Date(d))}};a.prototype.field=function(a){var c=
a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var d in this.attributes)if(d.toLowerCase()===c)return this.attributes[d];throw Error("Field not Found");};a.prototype._field=function(a){var c=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var d in this.attributes)if(d.toLowerCase()===c)return this.attributes[d];return null};a.prototype.setField=function(a,c){if(this.immutable)throw Error("Feature is Immutable");if(!1===h.isSimpleType(c))throw Error("Illegal Value Assignment to Feature");
var d=a.toLowerCase();if(void 0===this.attributes[a])for(var e in this.attributes)if(e.toLowerCase()===d){this.attributes[e]=c;return}this.attributes[a]=c};a.prototype.hasField=function(a){var c=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var d in this.attributes)if(d.toLowerCase()===c)return!0;return!1};a.prototype.keys=function(){var a=[],c;for(c in this.attributes)a.push(c);return a=a.sort()};a.fromFeature=function(b){return new a(b)};a.parseGeometryFromDictionary=function(b){b=
a.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return k.fromJSON(b)};a.fixPathArrays=function(a,c,d){var g=[];if(a instanceof Array)for(var h=0;h<a.length;h++)g.push(this.fixPointArrays(a[h],
c,d));else if(a instanceof e)for(h=0;h<a.length();h++)g.push(this.fixPointArrays(a.get(h),c,d));return g};a.fixPointArrays=function(a,c,g){var h=[];if(a instanceof Array)for(var k=0;k<a.length;k++){var m=a[k];m instanceof d?c&&g?h.push([m.x,m.y,m.z,m.m]):c?h.push([m.x,m.y,m.z]):g?h.push([m.x,m.y,m.m]):h.push([m.x,m.y]):h.push(m)}else if(a instanceof e)for(k=0;k<a.length();k++)m=a.get(k),m instanceof d?c&&g?h.push([m.x,m.y,m.z,m.m]):c?h.push([m.x,m.y,m.z]):g?h.push([m.x,m.y,m.m]):h.push([m.x,m.y]):
h.push(m);return h};a.convertDictionaryToJson=function(b,d){void 0===d&&(d=!1);var e={},h;for(h in b.attributes){var k=b.attributes[h];k instanceof g&&(k=a.convertDictionaryToJson(k));d?e[h.toLowerCase()]=k:e[h]=k}return e};a.parseAttributesFromDictionary=function(a){var c={},d;for(d in a.attributes){var e=a.attributes[d];if(h.isSimpleType(e))c[d]=e;else throw Error("Illegal Argument");}return c};a.fromJson=function(b){var d=null;null!==b.geometry&&void 0!==b.geometry&&(d=k.fromJSON(b.geometry));
var e={};if(null!==b.attributes&&void 0!==b.attributes)for(var g in b.attributes){var m=b.attributes[g];if(h.isString(m)||h.isNumber(m)||h.isBoolean(m)||h.isDate(m))e[g]=m;else throw Error("Illegal Argument");}return new a(e,d)};a.prototype.domainValueLookup=function(a,c,d){if(null===this._layer||!this._layer.fields)return null;d=h.getDomain(a,this._layer,this,d);if(void 0===c)try{c=this.field(a)}catch(e){return null}return h.getDomainValue(d,c)};a.prototype.domainCodeLookup=function(a,c,d){if(null===
this._layer||!this._layer.fields)return null;a=h.getDomain(a,this._layer,this,d);return h.getDomainCode(a,c)};return a}()})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(a,l,n,m){function k(a){return null===a?a:isNaN(a.getTime())?null:a}l.registerFunctions=function(a,h){a.today=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,0,0);a=new Date;a.setHours(0,0,0,0);return a})};a.now=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,
0,0);return new Date})};a.timestamp=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.toutc=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,1,1);a=m.toDate(d[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.tolocal=
function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,1,1);a=m.toDate(d[0]);return null===a?null:n.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};a.day=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,1,1);a=m.toDate(d[0]);return null===a?NaN:a.getDate()})};a.month=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,1,1);a=m.toDate(d[0]);return null===a?NaN:a.getMonth()})};a.year=function(a,d){return h(a,d,function(a,
b,d){m.pcCheck(d,1,1);a=m.toDate(d[0]);return null===a?NaN:a.getFullYear()})};a.hour=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,1,1);a=m.toDate(d[0]);return null===a?NaN:a.getHours()})};a.second=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,1,1);a=m.toDate(d[0]);return null===a?NaN:a.getSeconds()})};a.millisecond=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,1,1);a=m.toDate(d[0]);return null===a?NaN:a.getMilliseconds()})};a.minute=function(a,d){return h(a,d,function(a,
b,d){m.pcCheck(d,1,1);a=m.toDate(d[0]);return null===a?NaN:a.getMinutes()})};a.weekday=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,1,1);a=m.toDate(d[0]);return null===a?NaN:a.getDay()})};a.date=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,0,7);if(3===d.length)return k(new Date(m.toNumber(d[0]),m.toNumber(d[1]),m.toNumber(d[2]),0,0,0,0));if(4===d.length)return k(new Date(m.toNumber(d[0]),m.toNumber(d[1]),m.toNumber(d[2]),m.toNumber(d[3]),0,0,0));if(5===d.length)return k(new Date(m.toNumber(d[0]),
m.toNumber(d[1]),m.toNumber(d[2]),m.toNumber(d[3]),m.toNumber(d[4]),0,0));if(6===d.length)return k(new Date(m.toNumber(d[0]),m.toNumber(d[1]),m.toNumber(d[2]),m.toNumber(d[3]),m.toNumber(d[4]),m.toNumber(d[5]),0));if(7===d.length)return k(new Date(m.toNumber(d[0]),m.toNumber(d[1]),m.toNumber(d[2]),m.toNumber(d[3]),m.toNumber(d[4]),m.toNumber(d[5]),m.toNumber(d[6])));if(2===d.length){a=m.toString(d[1]);if(""===a)return null;d=n(m.toString(d[0]),a,!0);return!0===d.isValid()?d.toDate():null}if(1===d.length){if(m.isString(d[0])&&
""===d[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;a=m.toNumber(d[0]);return!1===isNaN(a)?k(new Date(a)):m.toDate(d[0])}if(0===d.length)return new Date})};a.datediff=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,2,3);a=m.toDateM(d[0]);b=m.toDateM(d[1]);if(null===a||null===b)return NaN;switch(m.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(b,"days",!0);case "months":case "month":return a.diff(b,"months",!0);case "minutes":case "minute":case "m":return"M"===
d[2]?a.diff(b,"months",!0):a.diff(b,"minutes",!0);case "seconds":case "second":case "s":return a.diff(b,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(b);case "hours":case "hour":case "h":return a.diff(b,"hours",!0);case "years":case "year":case "y":return a.diff(b,"years",!0);default:return a.diff(b)}})};a.dateadd=function(a,d){return h(a,d,function(a,b,d){m.pcCheck(d,2,3);a=m.toDateM(d[0]);if(null===a)return null;b="milliseconds";switch(m.toString(d[2]).toLowerCase()){case "days":case "day":case "d":b=
"days";break;case "months":case "month":b="months";break;case "minutes":case "minute":case "m":b="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":b="seconds";break;case "milliseconds":case "millisecond":case "ms":b="milliseconds";break;case "hours":case "hour":case "h":b="hours";break;case "years":case "year":case "y":b="years"}a.add(m.toNumber(d[1]),b);return a.toDate()})}}})},"esri/arcade/functions/string":function(){define(["require","exports","../languageUtils","../Feature"],
function(a,l,n,m){l.registerFunctions=function(a,g){a.trim=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,1,1);return n.toString(b[0]).trim()})};a.upper=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,1,1);return n.toString(b[0]).toUpperCase()})};a.proper=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,1,2);a=1;2===b.length&&"firstword"===n.toString(b[1]).toLowerCase()&&(a=2);c=/\s/;b=n.toString(b[0]);for(var e="",g=!0,h=0;h<b.length;h++){var k=b[h];c.test(k)?1===a&&(g=!0):k.toUpperCase()!==
k.toLowerCase()&&(g?(k=k.toUpperCase(),g=!1):k=k.toLowerCase());e+=k}return e})};a.lower=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,1,1);return n.toString(b[0]).toLowerCase()})};a.guid=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,0,1);if(0<b.length)switch(n.toString(b[0]).toLowerCase()){case "digits":return n.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return n.generateUUID();case "digits-hyphen-parentheses":return"("+n.generateUUID()+
")"}return"{"+n.generateUUID()+"}"})};a.mid=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,2,3);a=n.toNumber(b[1]);if(isNaN(a))return"";0>a&&(a=0);if(2===b.length)return n.toString(b[0]).substr(a);c=n.toNumber(b[2]);if(isNaN(c))return"";0>c&&(c=0);return n.toString(b[0]).substr(a,c)})};a.find=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,2,3);a=0;if(2<b.length){a=n.toNumber(n.defaultUndefined(b[2],0));if(isNaN(a))return-1;0>a&&(a=0)}return n.toString(b[1]).indexOf(n.toString(b[0]),
a)})};a.left=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,2,2);a=n.toNumber(b[1]);if(isNaN(a))return"";0>a&&(a=0);return n.toString(b[0]).substr(0,a)})};a.right=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,2,2);a=n.toNumber(b[1]);if(isNaN(a))return"";0>a&&(a=0);return n.toString(b[0]).substr(-1*a,a)})};a.split=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,2,4);a=n.toNumber(n.defaultUndefined(b[2],-1));-1===a||null===a?a=n.toString(b[0]).split(n.toString(b[1])):(isNaN(a)&&
(a=-1),-1>a&&(a=-1),a=n.toString(b[0]).split(n.toString(b[1]),a));b=n.defaultUndefined(b[3],!1);if(!1===n.isBoolean(b))throw Error("Invalid Parameter");if(!1===b)return a;b=[];for(c=0;c<a.length;c++)""!==a[c]&&void 0!==a[c]&&b.push(a[c]);return b})};a.text=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,1,2);return n.toStringExplicit(b[0],b[1])})};a.concatenate=function(a,e){return g(a,e,function(a,c,b){a=[];if(1>b.length)return"";if(n.isArray(b[0])){c=n.defaultUndefined(b[2],"");for(var e=
0;e<b[0].length;e++)a[e]=n.toStringExplicit(b[0][e],c);return 1<b.length?a.join(b[1]):a.join("")}if(n.isImmutableArray(b[0])){c=n.defaultUndefined(b[2],"");for(e=0;e<b[0].length();e++)a[e]=n.toStringExplicit(b[0].get(e),c);return 1<b.length?a.join(b[1]):a.join("")}for(e=0;e<b.length;e++)a[e]=n.toStringExplicit(b[e]);return a.join("")})};a.reverse=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,1,1);if(n.isArray(b[0]))return a=b[0].slice(0),a.reverse(),a;if(n.isImmutableArray(b[0]))return a=
b[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};a.replace=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,3,4);a=n.toString(b[0]);c=n.toString(b[1]);var e=n.toString(b[2]);return(4===b.length?n.toBoolean(b[3]):1)?n.multiReplace(a,c,e):a.replace(c,e)})};a.domainname=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,2,4);if(b[0]instanceof m)return b[0].domainValueLookup(n.toString(b[1]),b[2],void 0===b[3]?void 0:n.toNumber(b[3]));throw Error("Invalid Parameter");
})};a.domaincode=function(a,e){return g(a,e,function(a,c,b){n.pcCheck(b,3,4);if(b[0]instanceof m)return b[0].domainCodeLookup(n.toString(b[1]),b[2],void 0===b[3]?void 0:n.toNumber(b[3]));throw Error("Invalid Parameter");})}}})},"esri/arcade/functions/maths":function(){define(["require","exports","../languageUtils","dojo/number"],function(a,l,n,m){function k(a,h,e){if("undefined"===typeof e||0===+e)return Math[a](h);h=+h;e=+e;if(isNaN(h)||!("number"===typeof e&&0===e%1))return NaN;h=h.toString().split("e");
h=Math[a](+(h[0]+"e"+(h[1]?+h[1]-e:-e)));h=h.toString().split("e");return+(h[0]+"e"+(h[1]?+h[1]+e:e))}l.registerFunctions=function(a,h){a.number=function(a,d){return h(a,d,function(c,b,g){return h(a,d,function(a,b,c){n.pcCheck(c,1,2);a=c[0];return n.isNumber(a)?a:null===a?0:n.isDate(a)||n.isBoolean(a)||""===a||void 0===a?Number(a):n.isString(a)?void 0!==c[1]?(c=n.multiReplace(c[1],"\u2030",""),c=n.multiReplace(c,"\u00a4",""),m.parse(a,{pattern:c})):Number(a.trim()):Number(a)})})};a.abs=function(a,
d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return Math.abs(n.toNumber(d[0]))})};a.acos=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return Math.acos(n.toNumber(d[0]))})};a.asin=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return Math.asin(n.toNumber(d[0]))})};a.atan=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return Math.atan(n.toNumber(d[0]))})};a.atan2=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,2,2);return Math.atan2(n.toNumber(d[0]),
n.toNumber(d[1]))})};a.ceil=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,2);return 2===d.length?(a=n.toNumber(d[1]),isNaN(a)&&(a=0),k("ceil",n.toNumber(d[0]),-1*a)):Math.ceil(n.toNumber(d[0]))})};a.round=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,2);return 2===d.length?(a=n.toNumber(d[1]),isNaN(a)&&(a=0),k("round",n.toNumber(d[0]),-1*a)):Math.round(n.toNumber(d[0]))})};a.floor=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,2);return 2===d.length?(a=n.toNumber(d[1]),
isNaN(a)&&(a=0),k("floor",n.toNumber(d[0]),-1*a)):Math.floor(n.toNumber(d[0]))})};a.cos=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return Math.cos(n.toNumber(d[0]))})};a.isnan=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};a.exp=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return Math.exp(n.toNumber(d[0]))})};a.log=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return Math.log(n.toNumber(d[0]))})};
a.pow=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,2,2);return Math.pow(n.toNumber(d[0]),n.toNumber(d[1]))})};a.random=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,0,0);return Math.random()})};a.sin=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return Math.sin(n.toNumber(d[0]))})};a.sqrt=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return Math.sqrt(n.toNumber(d[0]))})};a.tan=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return Math.tan(n.toNumber(d[0]))})};
a.defaultvalue=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,2,2);return null===d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};a.isempty=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};a["boolean"]=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);return n.toBoolean(d[0])})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../../geometry/Geometry ../../geometry/Polygon ../../geometry/Polyline ../../geometry/Point ../../geometry/Extent ../../geometry/Multipoint ../../geometry/support/jsonUtils ../languageUtils ../Dictionary ../Feature".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s){l.registerFunctions=function(a,l){a.polygon=function(a,e){return l(a,e,function(e,g,h){c.pcCheck(h,1,1);e=null;if(h[0]instanceof b){if(e=c.fixSpatialReference(s.parseGeometryFromDictionary(h[0]),a.spatialReference),!1===e instanceof m)throw Error("Illegal Parameter");}else e=h[0]instanceof m?d.fromJSON(h[0].toJSON()):c.fixSpatialReference(new m(JSON.parse(h[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return e})};a.polyline=function(a,e){return l(a,e,function(e,g,h){c.pcCheck(h,1,1);e=null;if(h[0]instanceof b){if(e=c.fixSpatialReference(s.parseGeometryFromDictionary(h[0]),a.spatialReference),!1===e instanceof k)throw Error("Illegal Parameter");}else e=h[0]instanceof k?d.fromJSON(h[0].toJSON()):c.fixSpatialReference(new k(JSON.parse(h[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return e})};a.point=function(a,e){return l(a,e,function(e,h,k){c.pcCheck(k,1,1);e=null;if(k[0]instanceof b){if(e=c.fixSpatialReference(s.parseGeometryFromDictionary(k[0]),a.spatialReference),!1===e instanceof g)throw Error("Illegal Parameter");}else e=k[0]instanceof g?d.fromJSON(k[0].toJSON()):c.fixSpatialReference(new g(JSON.parse(k[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return e})};a.multipoint=function(a,g){return l(a,g,function(g,h,k){c.pcCheck(k,1,1);g=null;if(k[0]instanceof b){if(g=c.fixSpatialReference(s.parseGeometryFromDictionary(k[0]),a.spatialReference),!1===g instanceof e)throw Error("Illegal Parameter");}else g=k[0]instanceof e?d.fromJSON(k[0].toJSON()):c.fixSpatialReference(new e(JSON.parse(k[0])),a.spatialReference);if(null!==g&&!1===g.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return g})};a.extent=function(a,n){return l(a,n,function(l,n,q){c.pcCheck(q,1,1);l=null;q[0]instanceof b?l=c.fixSpatialReference(s.parseGeometryFromDictionary(q[0]),a.spatialReference):q[0]instanceof g?(l={xmin:q[0].x,ymin:q[0].y,xmax:q[0].x,ymax:q[0].y,spatialReference:q[0].spatialReference.toJSON()},q[0].hasZ?(l.zmin=q[0].z,l.zmax=q[0].z):q[0].hasM&&(l.mmin=q[0].m,l.mmax=q[0].m),l=d.fromJSON(l)):l=q[0]instanceof m?d.fromJSON(q[0].extent.toJSON()):q[0]instanceof k?d.fromJSON(q[0].extent.toJSON()):
q[0]instanceof e?d.fromJSON(q[0].extent.toJSON()):q[0]instanceof h?d.fromJSON(q[0].toJSON()):c.fixSpatialReference(new h(JSON.parse(q[0])),a.spatialReference);if(null!==l&&!1===l.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return l})};a.geometry=function(a,e){return l(a,e,function(e,g,h){c.pcCheck(h,1,1);e=null;e=h[0]instanceof s?c.fixSpatialReference(h[0].geometry,a.spatialReference):h[0]instanceof
b?c.fixSpatialReference(s.parseGeometryFromDictionary(h[0]),a.spatialReference):c.fixSpatialReference(d.fromJSON(JSON.parse(h[0])),a.spatialReference);if(null!==e&&!1===e.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return e})};a.feature=function(a,d){return l(a,d,function(d,e,g){if(0===g.length)throw Error("Missing Parameters");d=null;if(1===g.length)if(c.isString(g[0]))d=s.fromJson(JSON.parse(g[0]));
else if(g[0]instanceof s)d=new s(g[0]);else if(g[0]instanceof n)d=new s(null,g[0]);else if(g[0]instanceof b)d=g[0].hasField("geometry")?g[0].field("geometry"):null,e=g[0].hasField("attributes")?g[0].field("attributes"):null,null!==d&&d instanceof b&&(d=s.parseGeometryFromDictionary(d)),null!==e&&(e=s.parseAttributesFromDictionary(e)),d=new s(e,d);else throw Error("Illegal Argument");else{if(2===g.length){e=d=null;if(null!==g[0])if(g[0]instanceof n)d=g[0];else if(d instanceof b)d=s.parseGeometryFromDictionary(g[0]);
else throw Error("Illegal Argument");if(null!==g[1])if(g[1]instanceof b)e=s.parseAttributesFromDictionary(g[1]);else throw Error("Illegal Argument");}else{d=null;e={};if(null!==g[0])if(g[0]instanceof n)d=g[0];else if(d instanceof b)d=s.parseGeometryFromDictionary(g[0]);else throw Error("Illegal Argument");for(var f=1;f<g.length;f+=2){var h=c.toString(g[f]),k=g[f+1];if(null===k||void 0===k||c.isString(k)||isNaN(k)||c.isDate(k)||c.isNumber(k)||c.isBoolean(k)){if(c.isFunctionParameter(k)||!1===c.isSimpleType(k))throw Error("Illegal Argument");
e[h]=k===c.voidOperation?null:k}else throw Error("Illegal Argument");}}d=new s(e,d)}d.geometry=c.fixSpatialReference(d.geometry,a.spatialReference);d.immutable=!1;return d})};a.dictionary=function(a,d){return l(a,d,function(a,d,e){if(0===e.length)throw Error("Missing Parameters");if(0!==e.length%2)throw Error("Missing Parameters");a={};for(d=0;d<e.length;d+=2){var f=c.toString(e[d]),g=e[d+1];if(null===g||void 0===g||c.isString(g)||isNaN(g)||c.isDate(g)||c.isNumber(g)||c.isBoolean(g)){if(c.isFunctionParameter(g))throw Error("Illegal Argument");
a[f]=g===c.voidOperation?null:g}else throw Error("Illegal Argument");}e=new b(a);e.immutable=!1;return e})};a.haskey=function(a,d){return l(a,d,function(a,d,e){c.pcCheck(e,2,2);a=c.toString(e[1]);if(e[0]instanceof s||e[0]instanceof b)return e[0].hasField(a);throw Error("Illegal Argument");})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(a,l,n,m){function k(a,h,e,d){if(1===d.length){if(n.isArray(d[0]))return m.calculateStat(a,
d[0],-1);if(n.isImmutableArray(d[0]))return m.calculateStat(a,d[0].toArray(),-1)}return m.calculateStat(a,d,-1)}l.registerFunctions=function(a,h){a.stdev=function(a,d){return h(a,d,function(a,b,d){return k("stdev",a,b,d)})};a.variance=function(a,d){return h(a,d,function(a,b,d){return k("variance",a,b,d)})};a.average=function(a,d){return h(a,d,function(a,b,d){return k("mean",a,b,d)})};a.mean=function(a,d){return h(a,d,function(a,b,d){return k("mean",a,b,d)})};a.sum=function(a,d){return h(a,d,function(a,
b,d){return k("sum",a,b,d)})};a.min=function(a,d){return h(a,d,function(a,b,d){return k("min",a,b,d)})};a.max=function(a,d){return h(a,d,function(a,b,d){return k("max",a,b,d)})};a.distinct=function(a,d){return h(a,d,function(a,b,d){return k("distinct",a,b,d)})};a.count=function(a,d){return h(a,d,function(a,b,d){n.pcCheck(d,1,1);if(n.isArray(d[0])||n.isString(d[0]))return d[0].length;if(n.isImmutableArray(d[0]))return d[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require",
"exports","../languageUtils"],function(a,l,n){function m(a){for(var h=0,e=0;e<a.length;e++)h+=a[e];return h/a.length}function k(a){for(var h=m(a),e=0,d=0;d<a.length;d++)e+=Math.pow(h-a[d],2);return e/a.length}l.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};
l.calculateStat=function(a,h,e){void 0===e&&(e=1E3);switch(a.toLowerCase()){case "distinct":a:{a=e;e=[];for(var d={},c=[],b=0;b<h.length;b++){if(void 0!==h[b]&&null!==h[b]&&h[b]!==n.voidOperation){var l=h[b];if(n.isNumber(l)||n.isString(l))void 0===d[l]&&(e.push(l),d[l]=1);else{for(var q=!1,v=0;v<c.length;v++)!0===n.equalityTest(c[v],l)&&(q=!0);!1===q&&(c.push(l),e.push(l))}}if(e.length>=a&&-1!==a){h=e;break a}}h=e}return h;case "avg":case "mean":return m(n.toNumberArray(h));case "min":return Math.min.apply(Math,
n.toNumberArray(h));case "sum":h=n.toNumberArray(h);for(e=a=0;e<h.length;e++)a+=h[e];return a;case "max":return Math.max.apply(Math,n.toNumberArray(h));case "stdev":case "stddev":return Math.sqrt(k(n.toNumberArray(h)));case "var":case "variance":return k(n.toNumberArray(h));case "count":return h.length}return 0}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(a,l,n,m){l.parseScript=function(a){a=m.parse("function _() { "+a+"\n}");if(null===
a.body||void 0===a.body)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if("BlockStatement"!==a.body[0].body.type)throw Error("Invalid formula content.");var g=n.validateLanguage(a);if(""!==g)throw Error(g);return a};l.scriptCheck=function(a,g,h,e){var d=[];try{var c=m.parse("function _() { "+a+"\n}",{tolerant:!0,loc:!0}),b=c.errors;if(0<b.length)for(var l=0;l<b.length;l++)d.push({line:b[l].lineNumber,
character:b[l].column,reason:b[l].description});var q=n.checkScript(c,g,h,e);for(g=0;g<q.length;g++)d.push(q[g])}catch(v){try{"Unexpected token }"===v.description&&(v.index=("function _() { "+a+"\n}").length-1)?d.push({line:v.lineNumber,character:v.column,reason:"Unexpected end of script"}):d.push({line:v.lineNumber,character:v.column,reason:v.description})}catch(t){}}return d};l.extractFieldLiterals=function(a,g){void 0===g&&(g=!1);return n.findFieldLiterals(a,g)};l.validateScript=function(a,g,h){void 0===
h&&(h="full");return n.validateScript(a,g,h)};l.referencesMember=function(a,g){return n.referencesMember(a,g)};l.referencesFunction=function(a,g){return n.referencesFunction(a,g)}})},"esri/arcade/lib/esprima":function(){(function(a,l){"function"===typeof define&&define.amd?define(["exports"],l):"undefined"!==typeof exports?l(exports):l(a.esprima={})})(this,function(a){function l(a,b){if(!a)throw Error("ASSERT: "+b);}function n(a){return 48<=a&&57>=a}function m(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}
function k(a){return 0<="01234567".indexOf(a)}function g(a){return 10===a||13===a||8232===a||8233===a}function h(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||92===a||128<=a&&Pa.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function e(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&Pa.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function d(a){switch(a){default:return!1}}function c(a){if(ka&&d(a))return!0;a=a.toLowerCase();switch(a.length){case 2:return"if"===
a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function b(a,b,c,f,d){l("number"===typeof c,"Comment must have valid position");da.lastCommentStart>=c||(da.lastCommentStart=c,a={type:a,value:b},R.range&&(a.range=[c,f]),R.loc&&(a.loc=d),R.comments.push(a),R.attachComment&&(R.leadingComments.push(a),R.trailingComments.push(a)))}function s(a){var c,f,d;
c=C-a;for(f={start:{line:fa,column:C-ha-a}};C<na;)if(d=T.charCodeAt(C),++C,g(d)){R.comments&&(a=T.slice(c+a,C-1),f.end={line:fa,column:C-ha-1},b("Line",a,c,C-1,f));13===d&&10===T.charCodeAt(C)&&++C;++fa;ha=C;return}R.comments&&(a=T.slice(c+a,C),f.end={line:fa,column:C-ha},b("Line",a,c,C,f))}function q(){var a,c;for(c=0===C;C<na;)if(a=T.charCodeAt(C),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++C;
else if(g(a))++C,13===a&&10===T.charCodeAt(C)&&++C,++fa,ha=C,c=!0;else if(47===a)if(a=T.charCodeAt(C+1),47===a)++C,++C,s(2),c=!0;else if(42===a){++C;++C;a:{var f=a=void 0,d=void 0,d=void 0;R.comments&&(a=C-2,f={start:{line:fa,column:C-ha-2}});for(;C<na;)if(d=T.charCodeAt(C),g(d))13===d&&10===T.charCodeAt(C+1)&&++C,++fa,++C,ha=C,C>=na&&F();else{if(42===d&&47===T.charCodeAt(C+1)){++C;++C;R.comments&&(d=T.slice(a+2,C-2),f.end={line:fa,column:C-ha},b("Block",d,a,C,f));break a}++C}F()}}else break;else if(c&&
45===a)if(45===T.charCodeAt(C+1)&&62===T.charCodeAt(C+2))C+=3,s(3);else break;else if(60===a)if("!--"===T.slice(C+1,C+4))++C,++C,++C,++C,s(4);else break;else break}function v(a){var b,c,f=0;b="u"===a?4:2;for(a=0;a<b;++a)if(C<na&&m(T[C]))c=T[C++],f=16*f+"0123456789abcdef".indexOf(c.toLowerCase());else return"";return String.fromCharCode(f)}function t(){var a,b;a=T.charCodeAt(C++);b=String.fromCharCode(a);92===a&&(117!==T.charCodeAt(C)&&F(),++C,a=v("u"),(!a||"\\"===a||!h(a.charCodeAt(0)))&&F(),b=a);
for(;C<na;){a=T.charCodeAt(C);if(!e(a))break;++C;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==T.charCodeAt(C)&&F(),++C,a=v("u"),(!a||"\\"===a||!e(a.charCodeAt(0)))&&F(),b+=a)}return b}function u(){var a=C,b=T.charCodeAt(C),c,f=T[C];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++C,R.tokenize&&(40===b?R.openParenToken=R.tokens.length:123===b&&(R.openCurlyToken=R.tokens.length)),{type:Q.Punctuator,value:String.fromCharCode(b),
lineNumber:fa,lineStart:ha,start:a,end:C};default:if(c=T.charCodeAt(C+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return C+=2,{type:Q.Punctuator,value:String.fromCharCode(b)+String.fromCharCode(c),lineNumber:fa,lineStart:ha,start:a,end:C};case 33:case 61:return C+=2,61===T.charCodeAt(C)&&++C,{type:Q.Punctuator,value:T.slice(a,C),lineNumber:fa,lineStart:ha,start:a,end:C}}}b=T.substr(C,4);if("\x3e\x3e\x3e\x3d"===b)return C+=4,{type:Q.Punctuator,
value:b,lineNumber:fa,lineStart:ha,start:a,end:C};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return C+=3,{type:Q.Punctuator,value:b,lineNumber:fa,lineStart:ha,start:a,end:C};b=b.substr(0,2);if(f===b[1]&&0<="+-\x3c\x3e\x26|".indexOf(f)||"\x3d\x3e"===b)return C+=2,{type:Q.Punctuator,value:b,lineNumber:fa,lineStart:ha,start:a,end:C};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(f))return++C,{type:Q.Punctuator,value:f,lineNumber:fa,lineStart:ha,start:a,end:C};F()}function r(){var a,
b,c;c=T[C];l(n(c.charCodeAt(0))||"."===c,"Numeric literal must start with a decimal digit or a decimal point");b=C;a="";if("."!==c){a=T[C++];c=T[C];if("0"===a){if("x"===c||"X"===c){++C;for(a="";C<na&&m(T[C]);)a+=T[C++];0===a.length&&F();h(T.charCodeAt(C))&&F();return{type:Q.NumericLiteral,value:parseInt("0x"+a,16),lineNumber:fa,lineStart:ha,start:b,end:C}}if("b"===c||"B"===c){++C;for(c="";C<na;){a=T[C];if("0"!==a&&"1"!==a)break;c+=T[C++]}0===c.length&&F();C<na&&(a=T.charCodeAt(C),(h(a)||n(a))&&F());
return{type:Q.NumericLiteral,value:parseInt(c,2),lineNumber:fa,lineStart:ha,start:b,end:C}}if("o"===c||"O"===c||k(c)){k(c)?(c=!0,a="0"+T[C++]):(c=!1,++C,a="");for(;C<na&&k(T[C]);)a+=T[C++];!c&&0===a.length&&F();(h(T.charCodeAt(C))||n(T.charCodeAt(C)))&&F();return{type:Q.NumericLiteral,value:parseInt(a,8),octal:c,lineNumber:fa,lineStart:ha,start:b,end:C}}c&&n(c.charCodeAt(0))&&F()}for(;n(T.charCodeAt(C));)a+=T[C++];c=T[C]}if("."===c){for(a+=T[C++];n(T.charCodeAt(C));)a+=T[C++];c=T[C]}if("e"===c||"E"===
c){a+=T[C++];c=T[C];if("+"===c||"-"===c)a+=T[C++];if(n(T.charCodeAt(C)))for(;n(T.charCodeAt(C));)a+=T[C++];else F()}h(T.charCodeAt(C))&&F();return{type:Q.NumericLiteral,value:parseFloat(a),lineNumber:fa,lineStart:ha,start:b,end:C}}function w(){$=null;q();D("Regular Expression language structures not supported")}function y(){q();w()}function f(){var a;a=R.tokens[R.tokens.length-1];if(!a)return y();if("Punctuator"===a.type){if("]"===a.value)return u();if(")"===a.value)return(a=R.tokens[R.openParenToken-
1])&&"Keyword"===a.type&&("if"===a.value.toLowerCase()||"while"===a.value.toLowerCase()||"for"===a.value.toLowerCase()||"with"===a.value.toLowerCase())?y():u();if("}"===a.value){if(R.tokens[R.openCurlyToken-3]&&"Keyword"===R.tokens[R.openCurlyToken-3].type){if(a=R.tokens[R.openCurlyToken-4],!a)return u()}else if(R.tokens[R.openCurlyToken-4]&&"Keyword"===R.tokens[R.openCurlyToken-4].type){if(a=R.tokens[R.openCurlyToken-5],!a)return y()}else return u();if(0<=Ia.indexOf(a.value))return u()}return y()}return"Keyword"===
a.type&&"this"!==a.value?y():u()}function p(){var a;q();if(C>=na)return{type:Q.EOF,lineNumber:fa,lineStart:ha,start:C,end:C};a=T.charCodeAt(C);if(h(a)){var b;a=C;if(92===T.charCodeAt(C))b=t();else a:{var d;for(b=C++;C<na;){d=T.charCodeAt(C);if(92===d){C=b;b=t();break a}if(e(d))++C;else break}b=T.slice(b,C)}return{type:1===b.length?Q.Identifier:c(b)?Q.Keyword:"null"===b.toLowerCase()?Q.NullLiteral:"true"===b.toLowerCase()||"false"===b.toLowerCase()?Q.BooleanLiteral:Q.Identifier,value:b,lineNumber:fa,
lineStart:ha,start:a,end:C}}if(40===a||41===a||59===a)return u();if(39===a||34===a){var p="",x,s,z;d=!1;var E,B;E=fa;B=ha;a=T[C];l("'"===a||'"'===a,"String literal must starts with a quote");b=C;for(++C;C<na;)if(x=T[C++],x===a){a="";break}else if("\\"===x)if(x=T[C++],!x||!g(x.charCodeAt(0)))switch(x){case "u":case "x":if("{"===T[C]){++C;s=x=s=void 0;s=T[C];x=0;for("}"===s&&F();C<na;){s=T[C++];if(!m(s))break;x=16*x+"0123456789abcdef".indexOf(s.toLowerCase())}(1114111<x||"}"!==s)&&F();65535>=x?x=String.fromCharCode(x):
(s=(x-65536>>10)+55296,x=String.fromCharCode(s,(x-65536&1023)+56320));p+=x}else z=C,(s=v(x))?p+=s:(C=z,p+=x);break;case "n":p+="\n";break;case "r":p+="\r";break;case "t":p+="\t";break;case "b":p+="\b";break;case "f":p+="\f";break;case "v":p+="\x0B";break;default:k(x)?(s="01234567".indexOf(x),0!==s&&(d=!0),C<na&&k(T[C])&&(d=!0,s=8*s+"01234567".indexOf(T[C++]),0<="0123".indexOf(x)&&(C<na&&k(T[C]))&&(s=8*s+"01234567".indexOf(T[C++]))),p+=String.fromCharCode(s)):p+=x}else++fa,"\r"===x&&"\n"===T[C]&&++C,
ha=C;else if(g(x.charCodeAt(0)))break;else p+=x;""!==a&&F();return{type:Q.StringLiteral,value:p,octal:d,startLineNumber:E,startLineStart:B,lineNumber:fa,lineStart:ha,start:b,end:C}}return 46===a?n(T.charCodeAt(C+1))?r():u():n(a)?r():R.tokenize&&47===a?f():u()}function x(){var a,b,c;q();a={start:{line:fa,column:C-ha}};b=p();a.end={line:fa,column:C-ha};b.type!==Q.EOF&&(c=T.slice(b.start,b.end),a={type:sa[b.type],value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),
R.tokens.push(a));return b}function z(){var a;a=$;C=a.end;fa=a.lineNumber;ha=a.lineStart;$="undefined"!==typeof R.tokens?x():p();C=a.end;fa=a.lineNumber;ha=a.lineStart;return a}function K(){var a,b,c;a=C;b=fa;c=ha;$="undefined"!==typeof R.tokens?x():p();C=a;fa=b;ha=c}function A(){this.line=fa;this.column=C-ha}function E(){this.start=new A;this.end=null}function L(a){this.start=a.type===Q.StringLiteral?{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};
this.end=null}function B(){C=$.start;$.type===Q.StringLiteral?(fa=$.startLineNumber,ha=$.startLineStart):(fa=$.lineNumber,ha=$.lineStart);R.range&&(this.range=[C,0]);R.loc&&(this.loc=new E)}function I(a){R.range&&(this.range=[a.start,0]);R.loc&&(this.loc=new L(a))}function U(){var a,b,c,f;a=C;b=fa;c=ha;q();f=fa!==b;C=a;fa=b;ha=c;return f}function S(a,b,c){var f=Error("Line "+a+": "+c);f.index=b;f.lineNumber=a;f.column=b-ha+1;f.description=c;return f}function D(a){var b,c;b=Array.prototype.slice.call(arguments,
1);c=a.replace(/%(\d)/g,function(a,c){l(c<b.length,"Message reference must be in range");return b[c]});throw S(fa,C,c);}function J(a){var b,c;b=Array.prototype.slice.call(arguments,1);c=a.replace(/%(\d)/g,function(a,c){l(c<b.length,"Message reference must be in range");return b[c]});c=S(fa,C,c);if(R.errors)R.errors.push(c);else throw c;}function G(a,b){var c=ia.UnexpectedToken;a&&(c=b?b:a.type===Q.EOF?ia.UnexpectedEOS:a.type===Q.Identifier?ia.UnexpectedIdentifier:a.type===Q.NumericLiteral?ia.UnexpectedNumber:
a.type===Q.StringLiteral?ia.UnexpectedString:ia.UnexpectedToken,a.type===Q.Keyword&&ka&&d(a.value)&&(c=ia.StrictReservedWord));c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?S(a.lineNumber,a.start,c):S(fa,C,c)}function F(a,b){throw G(a,b);}function M(a,b){var c=G(a,b);if(R.errors)R.errors.push(c);else throw c;}function P(a){var b=z();(b.type!==Q.Punctuator||b.value!==a)&&F(b)}function X(){var a;R.errors?(a=$,a.type===Q.Punctuator&&","===a.value?z():a.type===Q.Punctuator&&
";"===a.value?(z(),M(a)):M(a,ia.UnexpectedToken)):P(",")}function N(a){var b=z();(b.type!==Q.Keyword||b.value.toLowerCase()!==a.toLowerCase())&&F(b)}function H(a){return $.type===Q.Punctuator&&$.value===a}function O(a){return $.type===Q.Keyword&&$.value.toLowerCase()===a.toLowerCase()}function Y(){var a;59===T.charCodeAt(C)||H(";")?z():(a=fa,q(),fa===a&&$.type!==Q.EOF&&!H("}")&&F($))}function V(a){return a.type===ea.Identifier||a.type===ea.MemberExpression}function Z(a,b){var c,f,d=new B;c=ka;f=Ba();
ka=c;return d.finishFunctionExpression(null,a,[],f)}function aa(){var a,b;a=ka;ka=!0;b=Ya();b=Z(b.params);ka=a;return b}function ba(){var a,b=new B;a=z();return a.type===Q.StringLiteral||a.type===Q.NumericLiteral?(ka&&a.octal&&M(a,ia.StrictOctalLiteral),b.finishLiteral(a)):b.finishIdentifier(a.value)}function ga(){var a,b,c,f=new B;a=$;if(a.type===Q.Identifier)return b=ba(),"get"===a.value&&!H(":")&&!H("(")?(b=ba(),P("("),P(")"),a=Z([]),f.finishProperty("get",b,a,!1,!1)):"set"===a.value&&!H(":")&&
!H("(")?(b=ba(),P("("),a=$,a.type!==Q.Identifier?(P(")"),M(a),a=Z([])):(c=[Ea()],P(")"),a=Z(c,a)),f.finishProperty("set",b,a,!1,!1)):H(":")?(z(),a=ua(),f.finishProperty("init",b,a,!1,!1)):H("(")?(a=aa(),f.finishProperty("init",b,a,!0,!1)):f.finishProperty("init",b,b,!1,!0);if(a.type===Q.EOF||a.type===Q.Punctuator)F(a);else{b=ba();if(H(":"))return z(),a=ua(),f.finishProperty("init",b,a,!1,!1);if(H("("))return a=aa(),f.finishProperty("init",b,a,!0,!1);F(z())}}function ja(a){var b=[],c,f,d={},e=String,
g=new B;for(!0!==a&&P("{");!H("}");)a=ga(),c=a.key.type===ea.Identifier?a.key.name:e(a.key.value),f="init"===a.kind?Ga.Data:"get"===a.kind?Ga.Get:Ga.Set,c="$"+c,Object.prototype.hasOwnProperty.call(d,c)?(d[c]===Ga.Data?ka&&f===Ga.Data?J(ia.StrictDuplicateProperty):f!==Ga.Data&&J(ia.AccessorDataProperty):f===Ga.Data?J(ia.AccessorDataProperty):d[c]&f&&J(ia.AccessorGetSet),d[c]|=f):d[c]=f,b.push(a),H("}")||X();P("}");return g.finishObjectExpression(b)}function la(){var a,b,c,f;if(H("("))return P("("),
H(")")?(z(),b=Ma.ArrowParameterPlaceHolder):(++da.parenthesisCount,b=pa(),P(")")),b;if(H("[")){b=[];var e=new B;for(P("[");!H("]");)H(",")?(z(),b.push(null)):(b.push(ua()),H("]")||P(","));z();return e.finishArrayExpression(b)}if(H("{"))return ja();a=$.type;f=new B;if(a===Q.Identifier)c=f.finishIdentifier(z().value);else if(a===Q.StringLiteral||a===Q.NumericLiteral)ka&&$.octal&&M($,ia.StrictOctalLiteral),c=f.finishLiteral(z());else if(a===Q.Keyword){if(O("function")){f=null;var g,h=[],k=[],p;a=new B;
N("function");H("(")||(c=$,f=Ea(),!ka&&d(c.value)&&(b=c,e=ia.StrictReservedWord));g=Ya(b);h=g.params;k=g.defaults;c=g.stricted;b=g.firstRestricted;g.message&&(e=g.message);p=ka;g=Ba();ka&&b&&F(b,e);ka&&c&&M(c,e);ka=p;return a.finishFunctionExpression(f,h,k,g)}O("this")?(z(),c=f.finishThisExpression()):F(z())}else a===Q.BooleanLiteral?(b=z(),b.value="true"===b.value.toLowerCase(),c=f.finishLiteral(b)):a===Q.NullLiteral?(b=z(),b.value=null,c=f.finishLiteral(b)):H("/")||H("/\x3d")?(c="undefined"!==typeof R.tokens?
f.finishLiteral(y()):f.finishLiteral(w()),K()):F(z());return c}function ca(){var a=[];P("(");if(!H(")"))for(;C<na;){a.push(ua());if(H(")"))break;X()}P(")");return a}function ma(){P(".");var a,b=new B;a=z();a.type===Q.Identifier||(a.type===Q.Keyword||a.type===Q.BooleanLiteral||a.type===Q.NullLiteral)||F(a);return b.finishIdentifier(a.value)}function qa(){var a;P("[");a=pa();P("]");return a}function Ha(){var a,b,c=new B;N("new");var f;l(da.allowIn,"callee of new expression always allow in keyword.");
f=$;for(a=O("new")?Ha():la();;)if(H("["))b=qa(),a=(new I(f)).finishMemberExpression("[",a,b);else if(H("."))b=ma(),a=(new I(f)).finishMemberExpression(".",a,b);else break;b=H("(")?ca():[];return c.finishNewExpression(a,b)}function ta(){var a,b,c=$,f,d=da.allowIn;b=$;da.allowIn=!0;for(a=O("new")?Ha():la();;)if(H("."))f=ma(),a=(new I(b)).finishMemberExpression(".",a,f);else if(H("("))f=ca(),a=(new I(b)).finishCallExpression(a,f);else if(H("["))f=qa(),a=(new I(b)).finishMemberExpression("[",a,f);else break;
da.allowIn=d;if($.type===Q.Punctuator&&(H("++")||H("--"))&&!U())V(a)||J(ia.InvalidLHSInAssignment),b=z(),a=(new I(c)).finishPostfixExpression(b.value,a);return a}function Ca(){var a,b,c;$.type!==Q.Punctuator&&$.type!==Q.Keyword?b=ta():H("++")||H("--")?(c=$,a=z(),b=Ca(),V(b)||J(ia.InvalidLHSInAssignment),b=(new I(c)).finishUnaryExpression(a.value,b)):H("+")||H("-")||H("~")||H("!")?(c=$,a=z(),b=Ca(),b=(new I(c)).finishUnaryExpression(a.value,b)):O("delete")||O("void")||O("typeof")?(c=$,a=z(),b=Ca(),
b=(new I(c)).finishUnaryExpression(a.value,b),ka&&("delete"===b.operator&&b.argument.type===ea.Identifier)&&J(ia.StrictDelete)):b=ta();return b}function Da(a,b){var c=0;if(a.type!==Q.Punctuator&&a.type!==Q.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;
case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function La(){var a,b,c,f,d,e;a=$;b=Ca();if(b===Ma.ArrowParameterPlaceHolder)return b;c=$;f=Da(c,da.allowIn);if(0===f)return b;c.prec=f;z();a=[a,$];e=Ca();for(d=[b,c,e];0<(f=Da($,da.allowIn));){for(;2<d.length&&f<=d[d.length-2].prec;)e=d.pop(),c=d.pop().value,b=d.pop(),a.pop(),b=(new I(a[a.length-1])).finishBinaryExpression(c,b,e),d.push(b);c=z();
c.prec=f;d.push(c);a.push($);b=Ca();d.push(b)}f=d.length-1;b=d[f];for(a.pop();1<f;)b=(new I(a.pop())).finishBinaryExpression(d[f-1].value,d[f-2],b),f-=2;return b}function za(a){var b,c,f,d,e,g,h;d=[];e=[];g=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(f=a[b],f.type===ea.Identifier)d.push(f),e.push(null),Ka(h,f,f.name);else if(f.type===ea.AssignmentExpression)d.push(f.left),e.push(f.right),++g,Ka(h,f.left,f.left.name);else return null;h.message===ia.StrictParamDupe&&(a=ka?h.stricted:h.firstRestricted,
F(a,h.message));0===g&&(e=[]);return{params:d,defaults:e,rest:null,stricted:h.stricted,firstRestricted:h.firstRestricted,message:h.message}}function ua(){var a,b,c,f;a=da.parenthesisCount;f=$;var d,e,g;g=$;b=La();b!==Ma.ArrowParameterPlaceHolder&&H("?")&&(z(),d=da.allowIn,da.allowIn=!0,e=ua(),da.allowIn=d,P(":"),d=ua(),b=(new I(g)).finishConditionalExpression(b,e,d));if(b===Ma.ArrowParameterPlaceHolder||H("\x3d\x3e"))if(da.parenthesisCount===a||da.parenthesisCount===a+1)if(b.type===ea.Identifier?
c=za([b]):b.type===ea.AssignmentExpression?c=za([b]):b.type===ea.SequenceExpression?c=za(b.expressions):b===Ma.ArrowParameterPlaceHolder&&(c=za([])),c)return a=c,f=new I(f),P("\x3d\x3e"),c=ka,b=H("{")?Ba():ua(),ka&&a.firstRestricted&&F(a.firstRestricted,a.message),ka&&a.stricted&&M(a.stricted,a.message),ka=c,f.finishArrowFunctionExpression(a.params,a.defaults,b,b.type!==ea.BlockStatement);$.type!==Q.Punctuator?a=!1:(a=$.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===
a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(V(b)||J(ia.InvalidLHSInAssignment),a=z(),c=ua(),b=(new I(f)).finishAssignmentExpression(a.value,b,c));return b}function pa(){var a,b=$;a=ua();if(H(",")){for(a=[a];C<na&&H(",");)z(),a.push(ua());a=(new I(b)).finishSequenceExpression(a)}return a}function Ea(){var a,b=new B;a=z();a.type!==Q.Identifier&&(ka&&a.type===Q.Keyword&&d(a.value)?M(a,ia.StrictReservedWord):F(a));return b.finishIdentifier(a.value)}
function Ta(a){var b=null,c,f=new B;c=Ea();"const"===a?(P("\x3d"),b=ua()):H("\x3d")&&(z(),b=ua());return f.finishVariableDeclarator(c,b)}function cb(a){var b=[];do{b.push(Ta(a));if(!H(","))break;z()}while(C<na);return b}function Fa(a){var b=$.type,c,f;b===Q.EOF&&F($);if(b===Q.Punctuator&&"{"===$.value){if(a){P("{");var d=$;a=C;c=fa;f=ha;z();b=H(":");$=d;C=a;fa=c;ha=f;if(($.type===Q.Identifier||$.type===Q.StringLiteral)&&b)return ja(!0);a=new B;for(c=[];C<na&&!H("}");){f=Ua();if("undefined"===typeof f)break;
c.push(f)}P("}");return a.finishBlockStatement(c)}return ja()}a=new B;if(b===Q.Punctuator)switch($.value){case ";":return a=new B,P(";"),a.finishEmptyStatement();case "(":return c=pa(),Y(),a.finishExpressionStatement(c)}else if(b===Q.Keyword)switch($.value.toLowerCase()){case "break":return c=null,N("break"),59===T.charCodeAt(C)?(z(),!da.inIteration&&!da.inSwitch&&D(ia.IllegalBreak),a=a.finishBreakStatement(null)):U()?(!da.inIteration&&!da.inSwitch&&D(ia.IllegalBreak),a=a.finishBreakStatement(null)):
($.type===Q.Identifier&&(c=Ea(),f="$"+c.name,Object.prototype.hasOwnProperty.call(da.labelSet,f)||D(ia.UnknownLabel,c.name)),Y(),null===c&&(!da.inIteration&&!da.inSwitch)&&D(ia.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,N("continue"),59===T.charCodeAt(C)?(z(),da.inIteration||D(ia.IllegalContinue),a=a.finishContinueStatement(null)):U()?(da.inIteration||D(ia.IllegalContinue),a=a.finishContinueStatement(null)):($.type===Q.Identifier&&(c=Ea(),f="$"+c.name,Object.prototype.hasOwnProperty.call(da.labelSet,
f)||D(ia.UnknownLabel,c.name)),Y(),null===c&&!da.inIteration&&D(ia.IllegalContinue),a=a.finishContinueStatement(c)),a;case "for":var e,g,k;g=da.allowIn;e=b=d=null;N("for");P("(");if(H(";"))z();else{if(O("var")){da.allowIn=!1;var p=new B;e=z();k=cb();e=p.finishVariableDeclaration(k,e.value);da.allowIn=g;1===e.declarations.length&&O("in")&&(z(),c=e,f=pa(),e=null)}else da.allowIn=!1,e=pa(),da.allowIn=g,O("in")&&(V(e)||J(ia.InvalidLHSInForIn),z(),c=e,f=pa(),e=null);"undefined"===typeof c&&P(";")}"undefined"===
typeof c&&(H(";")||(b=pa()),P(";"),H(")")||(d=pa()));P(")");k=da.inIteration;da.inIteration=!0;g=Fa(!0);da.inIteration=k;return"undefined"===typeof c?a.finishForStatement(e,b,d,g):a.finishForInStatement(c,f,g);case "function":return Za(a);case "if":return N("if"),P("("),c=pa(),P(")"),f=Fa(!0),O("else")?(z(),b=Fa(!0)):b=null,a.finishIfStatement(c,f,b);case "return":return c=null,N("return"),da.inFunctionBody||J(ia.IllegalReturn),32===T.charCodeAt(C)&&h(T.charCodeAt(C+1))?(c=pa(),Y(),a=a.finishReturnStatement(c)):
U()?a=a.finishReturnStatement(null):(H(";")||!H("}")&&$.type!==Q.EOF&&(c=pa()),Y(),a=a.finishReturnStatement(c)),a;case "var":return N("var"),c=cb(),Y(),a.finishVariableDeclaration(c,"var")}c=pa();if(c.type===ea.Identifier&&H(":"))return z(),b="$"+c.name,Object.prototype.hasOwnProperty.call(da.labelSet,b)&&D(ia.Redeclaration,"Label",c.name),da.labelSet[b]=!0,f=Fa(!1),delete da.labelSet[b],a.finishLabeledStatement(c,f);Y();return a.finishExpressionStatement(c)}function Ba(){var a,b=[],c,f,d,e,g,h=
new B;for(P("{");C<na&&$.type===Q.StringLiteral;){c=$;a=Ua();b.push(a);if(a.expression.type!==ea.Literal)break;a=T.slice(c.start+1,c.end-1);"use strict"===a?(ka=!0,f&&M(f,ia.StrictOctalLiteral)):!f&&c.octal&&(f=c)}c=da.labelSet;f=da.inIteration;d=da.inSwitch;e=da.inFunctionBody;g=da.parenthesizedCount;da.labelSet={};da.inIteration=!1;da.inSwitch=!1;da.inFunctionBody=!0;for(da.parenthesizedCount=0;C<na&&!H("}");){a=Ua();if("undefined"===typeof a)break;b.push(a)}P("}");da.labelSet=c;da.inIteration=
f;da.inSwitch=d;da.inFunctionBody=e;da.parenthesizedCount=g;return h.finishBlockStatement(b)}function Ka(a,b,c){var f="$"+c;ka?Object.prototype.hasOwnProperty.call(a.paramSet,f)&&(a.stricted=b,a.message=ia.StrictParamDupe):a.firstRestricted||(d(c)?(a.firstRestricted=b,a.message=ia.StrictReservedWord):Object.prototype.hasOwnProperty.call(a.paramSet,f)&&(a.firstRestricted=b,a.message=ia.StrictParamDupe));a.paramSet[f]=!0}function Ya(a){a={params:[],defaultCount:0,defaults:[],firstRestricted:a};P("(");
if(!H(")"))for(a.paramSet={};C<na;){var b=a,c=void 0,f=void 0,d=void 0,c=$,f=Ea();Ka(b,c,c.value);H("\x3d")&&(z(),d=ua(),++b.defaultCount);b.params.push(f);b.defaults.push(d);if(H(")"))break;P(",")}P(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function Za(){var a,b=[],c=[],f,e,g,h,k,p=new B;N("function");b=$;a=Ea();!ka&&d(b.value)&&(g=b,h=ia.StrictReservedWord);f=Ya(g);b=f.params;c=f.defaults;
e=f.stricted;g=f.firstRestricted;f.message&&(h=f.message);k=ka;f=Ba();ka&&g&&F(g,h);ka&&e&&M(e,h);ka=k;return p.finishFunctionDeclaration(a,b,c,f)}function Ua(){if($.type===Q.Keyword)switch($.value){default:return"function"==$.value.toLowerCase()?Za():Fa(!1)}if($.type!==Q.EOF)return Fa(!1)}function db(){var a,b,c,f=[];for(a=0;a<R.tokens.length;++a)b=R.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),R.range&&(c.range=b.range),R.loc&&(c.loc=b.loc),
f.push(c);R.tokens=f}var Q,sa,Ia,ea,Ma,Ga,ia,Pa,T,ka,C,fa,ha,na,$,da,R;Q={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};sa={};sa[Q.BooleanLiteral]="Boolean";sa[Q.EOF]="\x3cend\x3e";sa[Q.Identifier]="Identifier";sa[Q.Keyword]="Keyword";sa[Q.NullLiteral]="Null";sa[Q.NumericLiteral]="Numeric";sa[Q.Punctuator]="Punctuator";sa[Q.StringLiteral]="String";sa[Q.RegularExpression]="RegularExpression";Ia="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ea={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};Ma={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
Ga={Data:1,Get:2,Set:4};ia={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Pa={NonAsciiIdentifierStart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),
NonAsciiIdentifierPart:RegExp("[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]")};
I.prototype=B.prototype={processComment:function(){var a,b,c,f=R.bottomRightStack,d,e,g=f[f.length-1];if(!(this.type===ea.Program&&0<this.body.length)){if(0<R.trailingComments.length){c=[];for(d=R.trailingComments.length-1;0<=d;--d)e=R.trailingComments[d],e.range[0]>=this.range[1]&&(c.unshift(e),R.trailingComments.splice(d,1));R.trailingComments=[]}else g&&(g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1])&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=
this.range[0];)a=g,g=f.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<R.leadingComments.length){b=[];for(d=R.leadingComments.length-1;0<=d;--d)e=R.leadingComments[d],e.range[1]<=this.range[0]&&(b.unshift(e),R.leadingComments.splice(d,1))}b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);f.push(this)}},finish:function(){R.range&&(this.range[1]=
C);R.loc&&(this.loc.end=new A,R.source&&(this.loc.source=R.source));R.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=ea.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=ea.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?ea.LogicalExpression:ea.BinaryExpression;this.operator=a;this.left=b;
this.right=c;this.finish();return this},finishBlockStatement:function(a){this.type=ea.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=ea.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=ea.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=ea.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();
return this},finishContinueStatement:function(a){this.type=ea.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=ea.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=ea.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,f){this.type=ea.ForStatement;this.init=a;this.test=b;this.update=c;this.body=f;this.finish();return this},finishForInStatement:function(a,b,c){this.type=
ea.ForInStatement;this.left=a;this.right=b;this.body=c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,f){this.type=ea.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=f;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,f){this.type=ea.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=f;this.rest=null;this.expression=this.generator=!1;this.finish();return this},
finishIdentifier:function(a){this.type=ea.Identifier;this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=ea.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=ea.Literal;this.value=a.value;this.raw=T.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=ea.MemberExpression;this.computed="["===a;this.object=b;this.property=c;
this.finish();return this},finishObjectExpression:function(a){this.type=ea.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=ea.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=ea.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,f,d){this.type=ea.Property;this.key=b;this.value=c;this.kind=a;this.method=f;this.shorthand=d;this.finish();
return this},finishReturnStatement:function(a){this.type=ea.ReturnStatement;this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?ea.UpdateExpression:ea.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=ea.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=ea.VariableDeclarator;this.id=
a;this.init=b;this.finish();return this}};a.version="2.0.0-dev";a.tokenize=function(a,b){var c,f;c=String;"string"!==typeof a&&!(a instanceof String)&&(a=c(a));T=a;C=0;fa=0<T.length?1:0;ha=0;na=T.length;$=null;da={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};R={};b=b||{};b.tokens=!0;R.tokens=[];R.tokenize=!0;R.openParenToken=-1;R.openCurlyToken=-1;R.range="boolean"===typeof b.range&&b.range;R.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&
b.comment&&(R.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(R.errors=[]);try{K();if($.type===Q.EOF)return R.tokens;for(z();$.type!==Q.EOF;)try{z()}catch(d){if(R.errors){R.errors.push(d);break}else throw d;}db();f=R.tokens;"undefined"!==typeof R.comments&&(f.comments=R.comments);"undefined"!==typeof R.errors&&(f.errors=R.errors)}catch(e){throw e;}finally{R={}}return f};a.parse=function(a,b){var c,f;f=String;"string"!==typeof a&&!(a instanceof String)&&(a=f(a));T=a;C=0;fa=0<T.length?1:0;
ha=0;na=T.length;$=null;da={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};R={};"undefined"!==typeof b&&(R.range="boolean"===typeof b.range&&b.range,R.loc="boolean"===typeof b.loc&&b.loc,R.attachComment="boolean"===typeof b.attachComment&&b.attachComment,R.loc&&(null!==b.source&&void 0!==b.source)&&(R.source=f(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(R.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(R.comments=[]),"boolean"===
typeof b.tolerant&&b.tolerant&&(R.errors=[]),R.attachComment&&(R.range=!0,R.comments=[],R.bottomRightStack=[],R.trailingComments=[],R.leadingComments=[]));try{var d;q();K();d=new B;ka=!1;var e;f=[];for(var g,h,k;C<na;){g=$;if(g.type!==Q.StringLiteral)break;e=Ua();f.push(e);if(e.expression.type!==ea.Literal)break;h=T.slice(g.start+1,g.end-1);"use strict"===h?(ka=!0,k&&M(k,ia.StrictOctalLiteral)):!k&&g.octal&&(k=g)}for(;C<na;){e=Ua();if("undefined"===typeof e)break;f.push(e)}c=d.finishProgram(f);"undefined"!==
typeof R.comments&&(c.comments=R.comments);"undefined"!==typeof R.tokens&&(db(),c.tokens=R.tokens);"undefined"!==typeof R.errors&&(c.errors=R.errors)}catch(p){throw p;}finally{R={}}return c};a.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in ea)ea.hasOwnProperty(a)&&(b[a]=ea[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/renderers/UniqueValueRenderer":function(){define("../core/declare ../core/lang dojo/_base/array dojo/_base/lang ../symbols/support/jsonUtils ./Renderer".split(" "),
function(a,l,n,m,k,g){var h=a(g,{declaredClass:"esri.renderer.UniqueValueRenderer",properties:{type:"uniqueValue",field:{value:null,json:{readFrom:["field1"],read:function(a,d){return d.field1},writeTo:"field1"}},field2:{value:null,json:{writable:!0}},field3:{value:null,json:{writable:!0}},expression:{value:null,json:{writable:!0}},expressionTree:{value:null,dependsOn:["expression"],get:function(){return this.expression?this._parseExpr(this.expression,{vars:{$feature:"any"}}):null}},defaultLabel:{value:null,
json:{writable:!0}},defaultSymbol:{value:null,json:{read:k.read,write:function(a,d,c){if(a=k.write(a,{},c))d.defaultSymbol=a}}},fieldDelimiter:{value:null,json:{writable:!0}},uniqueValueInfos:{set:function(a){this._symbols={};n.forEach(a,this._processUVInfo,this);this._set("uniqueValueInfos",a)},json:{read:function(a,d,c){if(a&&Array.isArray(a))return a.map(function(a){a=l.clone(a);a.symbol=k.read(a.symbol,d,c);return a})},write:function(a,d,c){d.uniqueValueInfos=n.map(this.uniqueValueInfos||[],function(a){a=
l.clone(a);a.symbol&&(a.symbol=k.write(a.symbol,{},c));a.value+="";return l.fixJson(a)})}}},requiredFields:{dependsOn:["field","field2","field3"]}},constructor:function(){this._symbols={};this.uniqueValueInfos=[]},addUniqueValueInfo:function(a,d){var c=m.isObject(a)?a:{value:a,symbol:d};this.uniqueValueInfos.push(c);this._processUVInfo(c)},removeUniqueValueInfo:function(a){var d=-1;n.some(this.uniqueValueInfos,function(c,b){if(c.value==a)return d=b,!0});-1!==d&&(delete this._symbols[a],this.uniqueValueInfos.splice(d,
1))},getUniqueValueInfo:function(a){var d=this.field,c=a.attributes,b,g;this.expression?d=this._executeExpr(this.expressionTree,this._createExprContext(a)):this.field2?(a=this.field2,b=this.field3,g=[],d&&g.push(c[d]),a&&g.push(c[a]),b&&g.push(c[b]),d=g.join(this.fieldDelimiter||"")):d=m.isFunction(d)?d(a):c[d];return this._symbols[d]},getSymbol:function(a){return(a=this.getUniqueValueInfo(a))&&a.symbol||this.defaultSymbol},clone:function(){return new h({field:this.field,field2:this.field2,field3:this.field3,
defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),expression:this.expression,fieldDelimiter:this.fieldDelimiter,uniqueValueInfos:l.clone(this.uniqueValueInfos),visualVariables:l.clone(this.visualVariables)})},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.field2,this.field3].forEach(function(d){d&&(a[d]=!0)})},_processUVInfo:function(a){var d=a.value,c=a.symbol;c&&!c.declaredClass&&(a.symbol=k.fromJSON(c));this._symbols[d]=a}});
return h})},"esri/renderers/support/jsonUtils":function(){define(["../../core/Warning","../SimpleRenderer","../UniqueValueRenderer","../ClassBreaksRenderer"],function(a,l,n,m){var k={simple:l,uniqueValue:n,classBreaks:m},g={fromJson:function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(e){console.warn(e.stack)}return g.fromJSON(a)},read:function(g,e,d){if(e=!g?null:k[g.type]||null)return e=new e,e.read(g,d),e;d&&(d.messages&&g)&&d.messages.push(new a("renderer:unsupported",
"Renderers of type '"+(g.type||"unknown")+"' are not supported",{definition:g,context:d}));return null},fromJSON:function(a){var e=!a?null:k[a.type]||null;return e?e.fromJSON(a):null}};return g})},"esri/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary dojo/_base/array dojo/_base/lang ../symbols/support/jsonUtils ./Renderer".split(" "),function(a,l,n,m,k,g,h){var e=n({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"}),
d=n({esriClassifyNaturalBreaks:"natural-breaks",esriClassifyEqualInterval:"equal-interval",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyGeometricalInterval:"geometrical-interval"}),c=a(h,{declaredClass:"esri.renderer.ClassBreaksRenderer",properties:{backgroundFillSymbol:{value:null,json:{read:g.read,write:function(a,c,d){if(a=g.write(a,{},d))c.backgroundFillSymbol=a}}},classBreakInfos:{set:function(a){this._symbols={};a&&a.forEach(this._processCBInfo,
this);this._set("classBreakInfos",a)},json:{readFrom:["classBreakInfos","minValue"],read:function(a,c,d){var e=c.minValue;if(a&&Array.isArray(a)){var h=a[0]&&null!=a[0].classMaxValue;return a.map(function(a){a=l.clone(a);if(h){var b=a.classMaxValue;a.minValue=e;e=a.maxValue=b}a.symbol=g.read(a.symbol,c,d);return a})}return a},write:function(a,c,d){a=this.classBreakInfos||[];var e=a[0]&&a[0].minValue;c.minValue=-Infinity===e?-Number.MAX_VALUE:e;c.classBreakInfos=m.map(a,function(a){a=l.clone(a);a.symbol&&
(a.symbol=g.write(a.symbol,{},d));a.classMaxValue=Infinity===a.maxValue?Number.MAX_VALUE:a.maxValue;delete a.minValue;delete a.maxValue;return l.fixJson(a)})}}},classificationMethod:{value:null,json:{read:d.fromJSON,write:function(a,c){var e=d.toJSON(a);e&&(c.classificationMethod=e)}}},defaultLabel:{value:null,json:{writable:!0}},defaultSymbol:{value:null,json:{read:g.read,write:function(a,c,d){if(a=g.write(a,{},d))c.defaultSymbol=a}}},expression:{value:null,json:{writable:!0}},expressionTree:{dependsOn:["expression"],
get:function(){return this.expression?this._parseExpr(this.expression,{vars:{$feature:"any"}}):null}},field:{value:null,json:{writable:!0}},isMaxInclusive:!0,normalizationField:{value:null,json:{writable:!0}},normalizationTotal:{value:null,json:{writable:!0}},normalizationType:{value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var a=this._get("normalizationType"),c=!!this.normalizationField,d=null!=this.normalizationTotal;if(c||d)a=c&&"field"||d&&"percent-of-total",c&&
d&&console.warn("warning: both normalizationField and normalizationTotal are set!");else if("field"===a||"percent-of-total"===a)a=null;return a},json:{read:e.fromJSON,write:function(a,c){var d=e.toJSON(a);d&&(c.normalizationType=d)}}},requiredFields:{dependsOn:["field","normalizationField"]},type:"classBreaks"},constructor:function(){this._symbols={};this.classBreakInfos=[]},addClassBreakInfo:function(a,c,d){a=k.isObject(a)?a:{minValue:a,maxValue:c,symbol:d};this.classBreakInfos.push(a);this._processCBInfo(a)},
removeClassBreakInfo:function(a,c){var d,e,g=this.classBreakInfos.length,h=this._symbols;for(e=0;e<g;e++)if(d=[this.classBreakInfos[e].minValue,this.classBreakInfos[e].maxValue],d[0]==a&&d[1]==c){delete h[a+"-"+c];this.classBreakInfos.splice(e,1);break}},getBreakIndex:function(a){var c=this.field,d=a.attributes,e=this.classBreakInfos.length,g=this.isMaxInclusive;if(this.expression)a=this._executeExpr(this.expressionTree,this._createExprContext(a));else if(k.isFunction(c))a=c(a);else{a=parseFloat(d[c]);
var c=this.normalizationType,h;c&&(h=parseFloat(this.normalizationTotal),d=parseFloat(d[this.normalizationField]),"log"===c?a=Math.log(a)*Math.LOG10E:"percent-of-total"===c&&!isNaN(h)?a=100*(a/h):"field"===c&&!isNaN(d)&&(a/=d))}for(d=0;d<e;d++)if(c=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],c[0]<=a&&(g?a<=c[1]:a<c[1]))return d;return-1},getClassBreakInfo:function(a){a=this.getBreakIndex(a);return-1!==a?this.classBreakInfos[a]:null},getSymbol:function(a){a=this.getBreakIndex(a);
return(a=-1<a&&[this.classBreakInfos[a].minValue,this.classBreakInfos[a].maxValue])?this._symbols[a[0]+"-"+a[1]]:this.defaultSymbol},clone:function(){return new c({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),classificationMethod:this.classificationMethod,defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),expression:this.expression,classBreakInfos:l.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,
normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:l.clone(this.visualVariables)})},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(c){c&&(a[c]=!0)})},_processCBInfo:function(a){var c=a.minValue,d=a.maxValue,e=a.symbol;e&&!e.declaredClass&&(a.symbol=g.fromJSON(e));this._symbols[c+"-"+d]=a.symbol}});return c})},"esri/tasks/support/Query":function(){define("../../core/Accessoire ../../core/declare ../../core/kebabDictionary ../../core/lang ../../geometry/support/jsonUtils dojo/_base/array dojo/_base/lang".split(" "),
function(a,l,n,m,k,g,h){var e=n({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),d=n({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",
esriSRUnit_USNauticalMile:"us-nautical-miles"}),c=n({upperLeft:"upper-left",lowerLeft:"lower-left"});return l(a,{declaredClass:"esri.tasks.support.Query",spatialRelationship:"intersects",text:null,where:"",geometry:null,geometryPrecision:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:!1,returnDistinctValues:!1,maxAllowableOffset:null,multipatchOption:null,num:null,start:null,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,
pixelSize:null,distance:null,units:"meters",resultOffset:null,resultRecordCount:null,quantizationParameters:null,sqlFormat:null,toJSON:function(a){var h={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:e.toJSON(this.spatialRelationship),maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision,returnZ:this.returnZ,returnM:this.returnM,sqlFormat:this.sqlFormat},l=a&&a.geometry||this.geometry,n=this.objectIds,t=this.outFields,u=this.outSpatialReference,
r=this.groupByFieldsForStatistics,w=this.orderByFields,y=this.outStatistics;a=this.distance;l&&(h.geometry=l,h.geometryType=k.getJsonType(l),h.inSR=l.spatialReference.wkid||JSON.stringify(l.spatialReference.toJSON()));n&&(h.objectIds=n.join(","));t&&(h.outFields=t.join(","));this.returnDistinctValues&&(h.returnDistinctValues=!0);r&&(h.groupByFieldsForStatistics=r.join(","));w&&(h.orderByFields=w.join(","));if(y){var f=[];g.forEach(y,function(a){f.push(a.toJSON())});h.outStatistics=JSON.stringify(f)}u?
h.outSR=u.wkid||JSON.stringify(u.toJSON()):l&&(h.outSR=l.spatialReference.wkid||JSON.stringify(l.spatialReference.toJSON()));l=this.timeExtent;h.time=l?l.toJSON().join(","):null;if((l=this.relationParam)&&h.spatialRel===e.toJSON("relation"))h.relationParam=l;a&&(h.distance=this.distance,h.units=d.toJSON(this.units));this.hasOwnProperty("start")&&(h.resultOffset=this.start,h.resultRecordCount=10,""===h.where&&(h.where="1\x3d1"));this.hasOwnProperty("num")&&(h.resultRecordCount=this.num);h.pixelSize=
this.pixelSize?JSON.stringify(this.pixelSize.toJSON()):null;h.multipatchOption=this.multipatchOption;this.quantizationParameters&&(a=m.clone(this.quantizationParameters),a.originPosition&&(a.originPosition=c.toJSON(a.originPosition)),h.quantizationParameters=JSON.stringify(a));h._ts=this._ts;return h}})})},"esri/layers/support/FeatureType":function(){define("../../core/declare dojo/_base/lang dojo/_base/array ../../core/lang ../../symbols/support/jsonUtils ./RangeDomain ./CodedValueDomain ./InheritedDomain ./FeatureTemplate".split(" "),
function(a,l,n,m,k,g,h,e,d){return a(null,{declaredClass:"esri.layers.support.FeatureType",constructor:function(a){if(a&&l.isObject(a)){this.id=a.id;this.name=a.name;var b=a.symbol;b&&(this.symbol=k.fromJSON(b));var b=a.domains,m,n=this.domains={};for(m in b)if(b.hasOwnProperty(m)){var v=b[m];switch(v.type){case "range":n[m]=new g(v);break;case "codedValue":n[m]=new h(v);break;case "inherited":n[m]=new e(v)}}if(m=a.templates){b=this.templates=[];for(a=0;a<m.length;a++)b.push(new d(m[a]))}}},toJSON:function(){var a=
{id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJSON()},b,d=this.domains,e=this.templates,g=m.fixJson;if(d){var h=a.domains={};for(b in d)d.hasOwnProperty(b)&&(h[b]=d[b]&&d[b].toJSON());g(h)}e&&(a.templates=n.map(e,function(a){return a.toJSON()}));return g(a)}})})},"esri/layers/support/InheritedDomain":function(){define(["../../core/declare","./Domain"],function(a,l){return a([l],{declaredClass:"esri.layers.support.InheritedDomain"})})},"esri/layers/support/FeatureTemplate":function(){define(["../../core/declare",
"dojo/_base/lang","../../core/lang","../../Graphic"],function(a,l,n,m){a=a(null,{declaredClass:"esri.layers.support.FeatureTemplate",constructor:function(a){a&&l.isObject(a)&&(this.name=a.name,this.description=a.description,this.drawingTool=a.drawingTool,a=a.prototype,this.prototype=new m(a.geometry,null,a.attributes))},toJSON:function(){return n.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJSON()})}});l.mixin(a,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",
TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",
TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});return a})},"esri/layers/support/LabelClass":function(){define("../../core/JSONSupport ../../core/lang ../../core/kebabDictionary dojo/_base/lang dojo/number ../../PopupTemplate ../../widgets/Popup/PopupRendererViewModel ../../symbols/support/jsonUtils".split(" "),function(a,l,n,m,k,g,h,e){var d=n({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",
esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",
esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",
esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"}),c=a.createSubclass({declaredClass:"esri.layers.support.LabelClass",properties:{labelExpression:{value:null,json:{writable:!0}},labelExpressionInfo:{value:null,json:{write:function(a,c){c.labelExpressionInfo=m.clone(a)}}},labelPlacement:{value:null,json:{read:function(a,c){return d.fromJSON(a)},write:function(a,c){var e=d.toJSON(a);e&&(c.labelPlacement=e)}}},maxScale:{value:0,json:{write:function(a,c){if(a||this.minScale)c.maxScale=a}}},
minScale:{value:0,json:{write:function(a,c){if(a||this.maxScale)c.minScale=a}}},requiredFields:{readOnly:!0,dependsOn:["labelExpression","labelExpressionInfo","where"],get:function(){var a=Object.create(null);this._collectRequiredFields(a);return Object.keys(a)}},symbol:{value:null,json:{read:e.read,write:function(a,c,d){c.symbol=e.write(a,{},d)}}},useCodedValues:{value:null,json:{writable:!0}},where:{value:null,json:{writable:!0}}},getLabelExpression:function(){return this.labelExpressionInfo?this.labelExpressionInfo.value:
this._validateLabelExpression(this.labelExpression)?this._convertLabelExpression(this.labelExpression):""},_collectRequiredFields:function(a){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),a);this._collectWhereRequiredFields(this.where,a)},_validateLabelExpression:function(a){return/^(\s*\[[^\]]+\]\s*)+$/i.test(a)},_convertLabelExpression:function(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")},_collectWhereRequiredFields:function(a,c){if(null!=a){var d=a.split(" ");3===d.length&&
(c[d[0]]=!0);7===d.length&&(c[d[0]]=!0,c[d[4]]=!0)}},_collectLabelExpressionRequiredFields:function(a,c){var d=a.match(/{[^}]*}/g);d&&d.forEach(function(a){c[a.slice(1,-1)]=!0})}});c.evaluateWhere=function(a,c){var d=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;var e=a.split(" ");if(3===e.length)return d(c[e[0]],
e[1],e[2]);if(7===e.length){var g=d(c[e[0]],e[1],e[2]),h=e[3],k=d(c[e[4]],e[5],e[6]);switch(h){case "AND":return g&&k;case "OR":return g||k}}return!1}catch(m){console.log("Error.: can't parse \x3d "+a)}};c.buildLabelText=function(a,d,e,g){return a.replace(/{[^}]*}/g,function(a){return c.formatField(a.slice(1,-1),a,d,e,g)})};c.formatField=function(a,c,d,e,n){var u;for(u=0;u<e.length;u++)if(e[u].name==a){c=d[e[u].name];var r=e[u].domain;if(r&&m.isObject(r)){if("codedValue"==r.type)for(a=0;a<r.codedValues.length;a++)r.codedValues[a].code==
c&&(c=r.codedValues[a].name);else"range"==r.type&&(r.minValue<=c&&c<=r.maxValue)&&(c=r.name);break}r=e[u].type;if("date"==r)r=n&&n.dateFormat||"shortDate",r=g.prototype._dateFormatKebabDict.fromJSON(r),(r="DateFormat"+h.prototype._dateFormats[r])&&(c=l.substitute({myKey:c},"{myKey:"+r+"}"));else if("integer"==r||"small-integer"==r||"long"==r||"double"==r)n&&(n.numberFormat&&n.numberFormat.digitSeparator&&n.numberFormat.places)&&(c=k.format(c,{places:n.numberFormat.places}))}return null==c?"":c};return c})},
"esri/widgets/Popup/PopupRendererViewModel":function(){define("../../core/Accessor ../../core/HandleRegistry ../../core/lang ../../core/urlUtils ../../core/promiseList ../../core/promiseUtils ../../core/watchUtils ../../request ../../tasks/support/StatisticDefinition ../../tasks/support/Query ../../tasks/QueryTask dojo/_base/lang dojo/promise/all dojo/i18n!dojo/cldr/nls/number".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s,q,v){var t=/\'/g,u=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/ig,r=/(\{([^\{\r\n]+)\})/g,
w={attachments:"attachments",fields:"fields",media:"media",text:"text"},y={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",
"short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",
"short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};return a.createSubclass({declaredClass:"esri.widgets.Popup.PopupRendererViewModel",properties:{content:{readOnly:!0},contentEnabled:!0,contentTypes:{readOnly:!0},formattedAttributes:{readOnly:!0},graphic:{},title:{readOnly:!0},
waitingForContent:{readOnly:!0}},constructor:function(){this._handles=new l},initialize:function(){this._handles.add([h.init(this,"graphic",function(a){this._updateGraphic(a,this.contentEnabled)}.bind(this)),h.init(this,"contentEnabled",function(a){this._updateGraphic(this.graphic,a)}.bind(this))])},destroy:function(){this._handles.destroy();this._handles=null;this._clearRelatedInfo();this._cancelPromises();this.graphic=null;this._set("title",null);this._set("content",null);this._set("waitingForContent",
null)},content:null,contentEnabled:!0,contentTypes:w,formattedAttributes:null,graphic:null,title:"",waitingForContent:!1,_handles:null,_contentPromise:null,_contentPromiseLookup:null,_relatedRecordsPromise:null,_relatedRecordsQueryPromises:[],_relatedRecordsLayerPromises:[],_relatedLayersInfo:null,_relatedInfo:null,_dateFormats:y,_addValuesToHref:function(a,b,c,d){b=this._trimString(b);return n.substitute(b&&0===b.indexOf("${")?c:d,a)},_cancelPromises:function(){this._contentPromiseLookup&&(Object.keys(this._contentPromiseLookup).forEach(function(a){this._contentPromiseLookup[a].cancel()},
this),this._contentPromiseLookup=null);this._contentPromise&&(this._contentPromise.cancel(),this._contentPromise=null);this._relatedRecordsQueryPromises.forEach(function(a){a.cancel()});this._relatedRecordsQueryPromises.length=0;this._relatedRecordsLayerPromises.length&&(this._relatedRecordsLayerPromises.forEach(function(a){a.cancel()}),this._relatedRecordsLayerPromises.length=0);this._relatedRecordsPromise&&(this._relatedRecordsPromise.cancel(),this._relatedRecordsPromise=null)},_clearRelatedInfo:function(){this._relatedInfo=
this._relatedLayersInfo=null},_compileContent:function(a,b){var c=a.content;if("function"===typeof c&&(c=c.call(null,{graphic:a.graphic}))&&c.nodeName)return c;if("string"===typeof c)return this._compileText(a,{type:w.text,text:c}).text;if(Array.isArray(c))return c.map(function(c,d){switch(c.type){case w.attachments:return this._proxyAttachments(c,b&&b[d]);case w.fields:return c;case w.media:return this._compileMedia(a,c);case w.text:return this._compileText(a,c)}},this);try{throw Error(this.declaredClass+
"::invalid content type.");}catch(d){console.warn(d.stack)}},_compileMedia:function(a,b){var c=s.clone(b),d=c.mediaInfos,e=a.attributes,g=a.layer,h=this.formattedAttributes.global,k=a.substOptions,m,l;d&&(m=[],d.forEach(function(b){l=0;var c=b.value;switch(b.type){case "image":var d=c.sourceURL,d=d&&this._trimString(n.substitute(e,this._fixTokens(d,g)));l=!!d;break;case "pie-chart":case "line-chart":case "column-chart":case "bar-chart":var p,d=c.normalizeField;c.fields=c.fields.map(function(a){return(p=
this._getLayerFieldInfo(g,a))?p.name:a},this);d&&(p=this._getLayerFieldInfo(g,d),c.normalizeField=p?p.name:d);l=c.fields.some(function(a){return n.isDefined(e[a])||-1!==a.indexOf("relationships/")&&this._relatedInfo},this);break;default:return}if(l){b=s.clone(b);var c=b.value,d=b.title?this._processFieldsInLinks(this._fixTokens(b.title,g),e):"",x=b.caption?this._processFieldsInLinks(this._fixTokens(b.caption,g),e):"";b.title=d?this._trimString(n.substitute(h,d,k)):"";b.caption=x?this._trimString(n.substitute(h,
x,k)):"";if("image"===b.type)c.sourceURL=n.substitute(e,this._fixTokens(c.sourceURL,g)),c.linkURL&&(c.linkURL=this._trimString(n.substitute(e,this._fixTokens(c.linkURL,g))));else{var q,r=(d=a.template)&&d.fieldInfos;c.fields.forEach(function(a,b){if(-1!==a.indexOf("relationships/")){var f=this._getRelatedChartInfos(g,r,a,c,e,k);Array.isArray(f)?c.fields=f:c.fields[b]=f}else{f=e[a];f=void 0===f?null:f;q=e[c.normalizeField]||0;f&&q&&(f/=q);var d=r&&this._getFieldInfo(r,a);c.fields[b]={y:f,tooltip:(d&&
d.label||a)+":"+this._formatValue(r,f,a,k,!!q)}}},this)}m.push(b)}},this));c.mediaInfos=m;return c},_compileText:function(a,b){var c=s.clone(b);if(c&&c.text){var d=a.attributes,e=this.formattedAttributes.global,g=a.substOptions,d=this._processFieldsInLinks(this._fixTokens(c.text,a.layer),d);c.text=this._trimString(n.substitute(e,d,g))}return c},_compileTitle:function(a){var b="",c=a.title,d=a.layer,e=a.attributes,g=a.substOptions,h=this.formattedAttributes.global;c&&("function"===typeof c&&(c=c.call(null,
{graphic:a.graphic})),"string"===typeof c&&-1===c.indexOf("{relationships/")&&(a=this._processFieldsInLinks(this._fixTokens(c,d),e),b=this._trimString(n.substitute(h,a,g))));return b},_createGraphicInfo:function(a,b){var c=a.getEffectivePopupTemplate(),d=c&&c.title,e=c&&c.content,g=a.layer,h=g&&g._getDateOpts&&g._getDateOpts().properties,k=s.clone(a.attributes)||{};return{graphic:a,template:c,title:d,content:e,contentEnabled:b,layer:g,attributes:k,properties:h,substOptions:{dateFormat:{properties:h,
formatter:"DateFormat"+y["short-date-short-time"]}}}},_fixTokens:function(a,b){return a.replace(r,function(a,c,f){return(a=this._getLayerFieldInfo(b,f))?"{"+a.name+"}":c}.bind(this))},_encodeAttributes:function(a){var b=s.clone(a)||{};Object.keys(b).forEach(function(a){var c=b[a];"string"===typeof c&&(c=encodeURIComponent(c).replace(t,"\x26apos;"),b[a]=c)});return b},_formatAttributesToFieldInfos:function(a,b,c,d,e){a.forEach(function(g){var h=g.fieldName,k=this._getLayerFieldInfo(b,h);k&&(h=g.fieldName=
k.name);e[h]=this._formatValue(a,e[h],h,c);d&&(g.format&&g.format.dateFormat)&&(g=d.indexOf(h),-1<g&&d.splice(g,1))},this)},_formatAttributes:function(a,b,c,d,e,g){var h=s.clone(e);this._relatedInfo&&Object.keys(this._relatedInfo).forEach(function(a){var b=this._relatedInfo[a];a=this._relatedLayersInfo[a];b&&(b.relatedFeatures.forEach(this._relatedFeaturesAttributes.bind(this,a,e,h)),b.relatedStatsFeatures.forEach(this._relatedStatsAttributes.bind(this,a,e,h)))},this);a&&this._formatAttributesToFieldInfos(a,
b,c,d,h);if(b){var k=b.typeIdField;Object.keys(e).forEach(function(a){if(-1===a.indexOf("relationships/")){var c=e[a];if(n.isDefined(c)){var f=this._getDomainName(b,g,a,c);n.isDefined(f)?h[a]=f:a===k&&(c=this._getTypeName(b,g,c),n.isDefined(c)&&(h[a]=c))}}},this)}return h},_formatValue:function(a,b,c,d,e){var g=a&&this._getFieldInfo(a,c);a=g&&g.format;c="number"===typeof b&&d.dateFormat.properties&&-1===d.dateFormat.properties.indexOf(c)&&(!a||!a.dateFormat);if(!n.isDefined(b)||!g||!n.isDefined(a))return c?
this._forceLTR(b):b;var h="",k=[],g=a.hasOwnProperty("places")||a.hasOwnProperty("digitSeparator"),m=a.hasOwnProperty("digitSeparator")?a.digitSeparator:!0;if(g)h="NumberFormat",k.push("places: "+(n.isDefined(a.places)&&(!e||0<a.places)?Number(a.places):"Infinity")),k.length&&(h+="("+k.join(",")+")");else if(a.dateFormat)h="DateFormat"+y[a.dateFormat]||y["short-date-short-time"];else return c?this._forceLTR(b):b;b=n.substitute({myKey:b},"{myKey:"+h+"}",d)||"";g&&!m&&v.group&&(b=b.replace(RegExp("\\"+
v.group,"g"),""));return c?this._forceLTR(b):b},_forceLTR:function(a){return"\x26lrm;"+a},_getDomainName:function(a,b,c,d){return(a=a.getDomain&&a.getDomain(c,{feature:b}))&&a.codedValues?a.getName(d):null},_getFieldInfo:function(a,b){for(var c=b.toLowerCase(),d,e=0;e<a.length;e++){var g=a[e];if(g.fieldName&&g.fieldName.toLowerCase()===c){d=g;break}}return d},_getLayerFieldInfo:function(a,b){return a&&a.getField?a.getField(b):null},_getTypeName:function(a,b){var c=a.getType&&a.getType(b);return c&&
c.name},_processFieldsInLinks:function(a,b){var c=this._encodeAttributes(b);a&&(a=a.replace(u,function(a,f){return this._addValuesToHref(a,f,b,c)}.bind(this)));return a},_proxyAttachments:function(a,b){var c=s.clone(a);if(b&&!(b instanceof Error)&&b.attachmentInfos&&b.attachmentInfos.length){var d=b.attachmentInfos.map(function(a){a.url=m.addProxy(a.url);return a},this);c.attachmentInfos=d}return c},_queryAttachments:function(a){var b=a.layer,c=a.attributes;a=b&&b.objectIdField;c=c&&a&&c[a];if(a&&
b.hasAttachments&&c)return this._queryAttachmentInfos(b,c)},_queryAttachmentInfos:function(a,b){var c=a.url+"/"+a.layerId+"/"+b+"/attachments",d=a.token||"";return e(c,{query:{f:"json",token:d},callbackParamName:"callback"}).then(function(a){a=a.data;a.attachmentInfos.forEach(function(a){a.url=c+"/"+a.id;d&&(a.url+="?token\x3d"+d);a.objectId=b});return a})},_queryContent:function(a){var b=a.template,b=b&&b.content;if(!b||"string"===typeof b||"function"===typeof b)return g.resolve();if(!Array.isArray(b))return g.reject(Error(this.declaredClass+
"::Invalid content type."));var c={};b.forEach(function(b,d){b.type===w.attachments&&(c[d]=this._queryAttachments(a))},this);if(0===Object.keys(c).length)return g.resolve();this._contentPromiseLookup=c;return k(c).always(function(a){this._contentPromiseLookup=null;return a}.bind(this))},_trimString:function(a){return(a||"").trim()},_updateContent:function(a){if(a.contentEnabled){var b=this._queryContent(a).then(function(b){this._set("content",this._compileContent(a,b))}.bind(this),function(a){console.log(this.declaredClass+
"::error loading template",a)}.bind(this)).always(function(){this._contentPromise=null}.bind(this));return this._contentPromise=b}return g.resolve()},_createFormattedAttributes:function(a){var b=a.graphic,c=a.attributes,d=a.layer,e=a.template,g=a.substOptions,h=a.properties,k={global:this._formatAttributes(e&&e.fieldInfos,d,g,h,c,b),content:[]};a=e&&e.content;Array.isArray(a)&&a.forEach(function(a,f){a.type===w.fields&&a.fieldInfos&&(k.content[f]=this._formatAttributes(a.fieldInfos,d,g,h,c,b))},this);
return k},_updateGraphic:function(a,b){if(this._handles&&(this._clearRelatedInfo(),this._cancelPromises(),this._set("title",""),this._set("content",null),this._set("formattedAttributes",null),this._set("waitingForContent",!1),a)){this._set("waitingForContent",!0);var c=this._createGraphicInfo(a,b);this._relatedRecordsPromise=this._checkForRelatedRecords(c).then(function(){this._set("formattedAttributes",this._createFormattedAttributes(c));this._set("title",this._compileTitle(c));return this._updateContent(c)}.bind(this)).always(function(){this._relatedRecordsPromise=
null;this._relatedRecordsLayerPromises.length=0;this._relatedRecordsQueryPromises.length=0;this._set("waitingForContent",!1)}.bind(this))}},_getAllFieldInfos:function(a){var b=[],c=a.template,d=c&&c.fieldInfos;a=a.contentEnabled;d&&(b=b.concat(d));a&&(c=c&&c.content,Array.isArray(c)&&c.forEach(function(a){b=b.concat(a&&a.fieldInfos)},this));return b},_checkForRelatedRecords:function(a){var b=this._getAllFieldInfos(a).filter(function(a){return a&&a.fieldName&&-1!==a.fieldName.indexOf("relationships/")},
this);return b&&0<b.length?this._getRelatedRecords({graphic:a.graphic,fieldsInfo:b}):g.resolve()},_relatedFeaturesAttributes:function(a,b,c,d){Object.keys(d.attributes).forEach(function(e){if("esriRelCardinalityOneToOne"===a.relation.cardinality){var g=this._toRelatedFieldName([a.relation.id,e]);b[g]=c[g]=d.attributes[e]}},this)},_relatedStatsAttributes:function(a,b,c,d){Object.keys(d.attributes).forEach(function(e){var g=this._toRelatedFieldName([a.relation.id,e]);b[g]=c[g]=d.attributes[e]},this)},
_getRelatedChartInfos:function(a,b,c,d,e,g){var h,k,m,l,n,q;h=[];q=this._fromRelatedFieldName(c);n=q[0];k=this._relatedInfo[n];n=this._relatedLayersInfo[n];k&&k.relatedFeatures.forEach(function(k){var n=k.attributes,r;Object.keys(n).forEach(function(k){if(k===q[1]){r={};l=n[k];d.normalizeField&&(m=-1!==d.normalizeField.indexOf("relationships/")?n[this._fromRelatedFieldName(d.normalizeField)[1]]:e[d.normalizeField]);l&&m&&(l/=m);if(d.tooltipField)if(-1!==d.tooltipField.indexOf("relationships/"))k=
this._fromRelatedFieldName(d.tooltipField)[1],r.tooltip=n[k]+": "+this._formatValue(b,l,n[k],g,!!m);else{if(k=this._getLayerFieldInfo(a,c))c=k.name;r.tooltip=c+": "+this._formatValue(b,l,d.tooltipField,g,!!m)}else r.tooltip=l;r.y=l;h.push(r)}},this)},this);return"esriRelCardinalityOneToMany"===n.relation.cardinality||"esriRelCardinalityManyToMany"===n.relation.cardinality?h:h[0]},_getRelatedRecords:function(a){var b=a.graphic;return this._relatedLayersInfo?this._queryRelatedLayers(b).then(function(a){this._setRelatedRecords(a);
return a}.bind(this)):this._getRelatedLayersInfo(a).then(function(a){Object.keys(a).forEach(function(b){a[b]&&(this._relatedLayersInfo[b].relatedLayerInfo=a[b].data)},this);return this._queryRelatedLayers(b).then(function(a){this._setRelatedRecords(a);return a}.bind(this))}.bind(this))},_getRelatedLayersInfo:function(a){var b=a.fieldsInfo,c,g={};c=a.graphic.layer;this._relatedLayersInfo||(this._relatedLayersInfo={});b.forEach(function(a){var b,f,e;b=this._fromRelatedFieldName(a.fieldName);f=b[0];
b=b[1];f&&(this._relatedLayersInfo[f]||(c.relationships.some(function(a){if(a.id==f)return e=a,!0}),e&&(this._relatedLayersInfo[f]={relation:e,relatedFields:[],outStatistics:[]})),this._relatedLayersInfo[f]&&(this._relatedLayersInfo[f].relatedFields.push(b),a.statisticType&&(a=new d({statisticType:a.statisticType,onStatisticField:b,outStatisticFieldName:b}),this._relatedLayersInfo[f].outStatistics.push(a))))},this);Object.keys(this._relatedLayersInfo).forEach(function(a){var b;this._relatedLayersInfo[a]&&
(b=this._relatedLayersInfo[a].relation,b=c.url+"/"+b.relatedTableId,this._relatedLayersInfo[a].relatedLayerUrl=b,g[a]=e(b,{query:{f:"json"},callbackParamName:"callback"}))},this);Object.keys(g).forEach(function(a){this._relatedRecordsLayerPromises.push(g[a])},this);return q(g)},_queryRelatedLayers:function(a){var b={};Object.keys(this._relatedLayersInfo).forEach(function(c){b[c]=this._queryRelatedLayer({graphic:a,relatedInfo:this._relatedLayersInfo[c]})},this);return q(b)},_queryRelatedLayer:function(a){var d,
e,g,h,k,m,l,n,r;d=a.graphic;e=d.layer.layerId;l=a.relatedInfo;a=l.relatedLayerInfo;n=l.relatedLayerUrl;r=l.relation;a&&a.relationships&&a.relationships.some(function(a){if(a.relatedTableId===parseInt(e,10))return g=a,!0});g&&(a.fields.some(function(a){if(a.name===g.keyField)return h=-1!==["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"].indexOf(a.type)?"number":"string",!0}),k="string"===h?g.keyField+"\x3d'"+d.attributes[r.keyField]+"'":g.keyField+"\x3d"+
d.attributes[r.keyField],k=new c({where:k,outFields:l.relatedFields}),l.outStatistics&&(0<l.outStatistics.length&&a.supportsStatistics)&&(m=new c({where:k.where,outFields:k.outFields,outStatistics:l.outStatistics})),a=new b({url:n}),k=[a.execute(k)],m&&k.push(a.execute(m)));this._relatedRecordsQueryPromises=this._relatedRecordsQueryPromises.concat(k);return q(k)},_setRelatedRecords:function(a){this._relatedInfo=[];Object.keys(a).forEach(function(b){if(a[b]){var c=a[b];this._relatedInfo[b]={relatedFeatures:c[0].features};
n.isDefined(c[1])&&(this._relatedInfo[b].relatedStatsFeatures=c[1].features)}},this)},_fromRelatedFieldName:function(a){return-1!==a.indexOf("relationships/")?a.split("/").slice(1):[]},_toRelatedFieldName:function(a){return a&&0<a.length?"relationships/"+a[0]+"/"+a[1]:""}})})},"esri/core/promiseList":function(){define(["dojo/_base/array","dojo/Deferred","dojo/when"],function(a,l,n){var m=a.forEach;return function(a){function g(a,b){d[b]=a;s.progress([a,b]);0===--q&&s.resolve(d)}var h,e;a instanceof
Array?e=a:a&&"object"===typeof a&&(h=a);var d,c=[];if(h){e=[];for(var b in h)Object.hasOwnProperty.call(h,b)&&(c.push(b),e.push(h[b]));d={}}else e&&(d=[]);if(!e||!e.length)return(new l).resolve(d);var s=new l;s.promise.always(function(){d=c=null});var q=e.length;m(e,function(a,b){h||c.push(b);n(a,function(a){g(a,c[b])},function(a){g(a,c[b])})});return s.promise}})},"esri/core/watchUtils":function(){define(["require","exports","dojo/Deferred","dojo/promise/Promise"],function(a,l,n,m){function k(a,
b,c,d,e){e=a.watch(b,function(b,e,g,h){(!d||d(b))&&c.call(a,b,e,g,h)},e);var g=a.get(b);d&&d(g)&&c.call(a,g,g,b,a);return e}function g(a,b,c,d,e){function g(){h&&(h.remove(),h=null)}var f=!1,h,l=new n(g),q=new m;q.cancel=l.cancel;q.isCanceled=l.isCanceled;q.isFulfilled=l.isFulfilled;q.isRejected=l.isRejected;q.isResolved=l.isResolved;q.then=l.then;q.remove=g;Object.freeze(q);h=k(a,b,function(b,d,e,h){f=!0;g();c&&c.call(a,b,d,e,h);l.resolve({value:b,oldValue:d,propertyName:e,target:h})},d,e);f&&h.remove();
return q}function h(a){return!!a}function e(a){return!a}function d(a){return!0===a}function c(a){return!1===a}function b(a){return void 0!==a}function s(a){return void 0===a}function q(a,b,c,d){(Array.isArray(b)?b:-1<b.indexOf(",")?b.split(","):[b]).forEach(function(b){b=b.trim();var d=a.get(b.trim());c.call(a,d,d,b,a)});return a.watch(b,c,d)}l.init=q;l.watch=function(a,b,c,d){return a.watch(b,c,d)};l.once=function(a,b,c,d){return g(a,b,c,null,d)};l.when=function(a,b,c,d){return k(a,b,c,h,d)};l.whenOnce=
function(a,b,c,d){return g(a,b,c,h,d)};l.whenNot=function(a,b,c,d){return k(a,b,c,e,d)};l.whenNotOnce=function(a,b,c,d){return g(a,b,c,e,d)};l.whenTrue=function(a,b,c,e){return k(a,b,c,d,e)};l.whenTrueOnce=function(a,b,c,e){return g(a,b,c,d,e)};l.whenFalse=function(a,b,d,e){return k(a,b,d,c,e)};l.whenFalseOnce=function(a,b,d,e){return g(a,b,d,c,e)};l.whenDefined=function(a,c,d,e){return k(a,c,d,b,e)};l.whenDefinedOnce=function(a,c,d,e){return g(a,c,d,b,e)};l.whenUndefined=function(a,b,c,d){return k(a,
b,c,s,d)};l.whenUndefinedOnce=function(a,b,c,d){return g(a,b,c,s,d)};l.pausable=function(a,b,c,d){var e=!1;return{remove:a.watch(b,function(b,f,d,g){e||c.call(a,b,f,d,g)},d).remove,pause:function(){e=!0},resume:function(){e=!1}}};l.on=function(a,b,c,d,e,g,f){function h(){m&&(g&&g(k,b,a,c),m.remove(),k=m=null)}var k=null,m=null,l=q(a,b,function(f){h();f&&f.on&&(k=f,m=f.on(c,d),e&&e(k,b,a,c))},f);return{remove:function(){l.remove();h()}}}})},"esri/tasks/support/StatisticDefinition":function(){define(["../../core/declare",
"../../core/Accessoire"],function(a,l){return a(l,{declaredClass:"esri.tasks.support.StatisticDefinition",onStatisticField:null,outStatisticFieldName:null,statisticType:null,toJSON:function(){return{statisticType:this.statisticType,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount}}})})},"esri/plugins/popupManager":function(){define(["../views/PopupManager"],
function(a){return{add:function(l,n){l.popupManager||(l.popupManager=new a(n),l.popupManager.view=l)},remove:function(a){var n=a.popupManager;n&&(n.destroy(),a.popupManager=null)}}})},"esri/views/PopupManager":function(){define("require ../core/declare ../core/promiseUtils dojo/_base/array dojo/on dojo/Deferred dojo/promise/all ../layers/support/layerUtils ../geometry/support/scaleUtils ../geometry/Extent ../tasks/support/Query ../layers/GroupLayer ../core/Accessoire".split(" "),function(a,l,n,m,
k,g,h,e,d,c,b,s,q){var v;return l(q,{declaredClass:"esri.views.PopupManager",classMetadata:{properties:{map:{dependsOn:["view.map"],readOnly:!0}}},constructor:function(){this._featureLayersCache={}},destroy:function(){this._featureLayersCache={};this.view=null},_clickHandle:null,_featureLayersCache:null,enabled:!1,_enabledSetter:function(a){this._clickHandle&&(a?this._clickHandle.resume():this._clickHandle.pause());return a},_mapGetter:function(){return this.get("view.map")||null},view:null,_viewSetter:function(a){this._clickHandle&&
(this._clickHandle.remove(),this._clickHandle=null);a&&(this._clickHandle=k.pausable(a,"click",this._clickHandler.bind(this)),this.enabled||this._clickHandle.pause());return a},getMapLayer:function(a){var b;if(a&&(b=a.findLayerById()))if(a=b.id,this._featureLayersCache[a]){var c=a.lastIndexOf("_");-1<c&&(a=a.substring(0,c),b=this.map.findLayerById(a))}return b},_showPopup:function(a){function e(){p.clear();p.close()}function h(a){return f.allLayerViews.find(function(b){return b.layer===a})}function k(a){if(null==
a)return!1;var b=h(a);return null==b?!1:a.loaded&&!b.suspended&&(a.popupEnabled&&a.popupTemplate||"esri.layers.GraphicsLayer"===a.declaredClass||b.getPopupData)}function l(a){return(a=h(a))&&a.hasDraped}var f=this.view,p=f.popup,q=this,v=[],K="3d"===f.type;m.forEach(this.map.layers.toArray(),function(a){a.isInstanceOf(s)?m.forEach(a.layers.toArray(),function(a){k(a)&&(!K||l(a))&&v.push(a)}):k(a)&&(!K||l(a))&&v.push(a)});0<f.graphics.length&&v.push(f.graphics);var A=null;if(a.graphic&&(a.graphic.popupTemplate||
k(a.graphic.layer)))A=a.graphic;if(!v.length&&!A)e();else{var E=[],L=!!A;if(A)if(A.layer&&"esri.layers.SceneLayer"===A.layer.declaredClass){var B=f.whenLayerView(A.layer).then(function(a){var b=this._getOutFields(A.layer.popupTemplate);return a.whenGraphicAttributes(A,b)}.bind(this)).then(function(a){return[a]}).otherwise(function(){return[A]});E.unshift(B)}else A.getEffectivePopupTemplate()&&(B=new g,E.unshift(B.resolve([A])));else{var I=q._calculateClickTolerance(v),E=a.mapPoint;if(!E){e();return}var U=
1;f.state&&(U=f.state.resolution);(B=f.basemapTerrain)&&B.overlayManager&&(U=B.overlayManager.overlayPixelSizeInMapUnits(E));I*=U;B&&!B.spatialReference.equals(f.spatialReference)&&(I*=d.getUnitValueForSR(B.spatialReference)/d.getUnitValueForSR(f.spatialReference));var B=E.clone().offset(-I,-I),E=E.clone().offset(I,I),S=new c(Math.min(B.x,E.x),Math.min(B.y,E.y),Math.max(B.x,E.x),Math.max(B.y,E.y),f.spatialReference),E=m.map(v,function(c){var f;if("esri.layers.ImageryLayer"===c.declaredClass){f=new b;
f.geometry=a.mapPoint;var d=h(c),e={rasterAttributeTableFieldPrefix:"Raster.",returnDomainValues:!0};e.layerView=d;f=c.queryVisibleRasters(f,e).then(function(a){L=L||0<a.length;return a})}else if("esri.layers.SceneLayer"!==c.declaredClass)if(q._featureLayersCache[c.id]||"function"===typeof c.queryFeatures&&(0===c.mode||1===c.mode))d=c.createQuery(),d.geometry=S,f=c.queryFeatures(d).then(function(a){a=a.features;L=L||0<a.length;return a});else{if("esri.layers.MapImageLayer"===c.declaredClass)return d=
h(c),d.getPopupData(S);var e=[],g;if("esri.core.Collection\x3cesri.Graphic\x3e"===c.declaredClass)g=c;else if("esri.layers.GraphicsLayer"===c.declaredClass)g=c.graphics;else if((d=h(c))&&(d.loadedGraphics||d._graphicsCollection))g=d.loadedGraphics||d._graphicsCollection;g&&(e=g.filter(function(a){return a&&a.popupTemplate&&a.visible&&S.intersects(a.geometry)}).toArray());0<e.length&&(L=!0,f=n.resolve(e))}return f}),E=m.filter(E,function(a){return null!=a}),D=function(a){return a.reduce(function(a,
b){return a.concat(b.items?D(b.items):b)},[])},E=D(E)}!m.some(E,function(a){return!a.isFulfilled()})&&!L?e():E.length&&p.open({promises:E,location:a.mapPoint})}},_getSubLayerFeatureLayers:function(b,c){var d=c||new g,l=[],n=b.length,f=Math.floor(this.view.extent.width/this.view.width),p=this.view.scale,q=!1,s=this,K=0;a:for(;K<n;K++){var A=b[K],E=A.dynamicLayerInfos||A.layerInfos;if(E){var L=null;if(A._params&&(A._params.layers||A._params.dynamicLayers))L=A.visibleLayers;for(var L=e._getVisibleLayers(E,
L),B=e._getLayersForScale(p,E),I=E.length,U=0;U<I;U++){var S=E[U],D=S.id,J=A.popupTemplates[D];if(!S.subLayerIds&&J&&J.popupTemplate&&-1<m.indexOf(L,D)&&-1<m.indexOf(B,D)){if(!v){q=!0;break a}var G=A.id+"_"+D,F=this._featureLayersCache[G];if(!F||!F.loadError)F||((F=J.layerUrl)||(F=S.source?this._getLayerUrl(A.url,"/dynamicLayer"):this._getLayerUrl(A.url,D)),F=new v(F,{id:G,drawMode:!1,mode:v.MODE_SELECTION,outFields:this._getOutFields(J.popupTemplate),resourceInfo:J.resourceInfo,source:S.source}),
this._featureLayersCache[G]=F),F.setDefinitionExpression(A.layerDefinitions&&A.layerDefinitions[D]),F.setGDBVersion(A.gdbVersion),F.popupTemplate=J.popupTemplate,F.setMaxAllowableOffset(f),F.setUseMapTime(!!A.useMapTime),A.layerDrawingOptions&&(A.layerDrawingOptions[D]&&A.layerDrawingOptions[D].renderer)&&F.setRenderer(A.layerDrawingOptions[D].renderer),l.push(F)}}}}if(q){var M=new g;a(["../layers/FeatureLayer"],function(a){v=a;M.resolve()});M.then(function(){s._getSubLayerFeatureLayers(b,d)})}else{var P=
[];m.forEach(l,function(a){if(!a.loaded){var b=new g;k.once(a,"load, error",function(){b.resolve()});P.push(b.promise)}});P.length?h(P).then(function(){l=m.filter(l,function(a){return!a.loadError&&a.isVisibleAtScale(p)});d.resolve(l)}):(l=m.filter(l,function(a){return a.isVisibleAtScale(p)}),d.resolve(l))}return d.promise},_getLayerUrl:function(a,b){var c=a.indexOf("?");return-1===c?a+"/"+b:a.substring(0,c)+"/"+b+a.substring(c)},_getOutFields:function(a){var b;"esri.PopupTemplate"===a.declaredClass&&
a.fieldInfos?(b=[],m.forEach(a.fieldInfos,function(a){var c=a.fieldName&&a.fieldName.toLowerCase();c&&("shape"!==c&&0!==c.indexOf("relationships/"))&&b.push(a.fieldName)})):b=["*"];return b},_calculateClickTolerance:function(a){var b=6;m.forEach(a,function(a){if(a=a.renderer)"esri.renderer.SimpleRenderer"===a.declaredClass?((a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset))),a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))):("esri.renderer.UniqueValueRenderer"===a.declaredClass||"esri.renderer.ClassBreaksRenderer"===
a.declaredClass)&&m.forEach(a.infos,function(a){(a=a.symbol)&&a.xoffset&&(b=Math.max(b,Math.abs(a.xoffset)));a&&a.yoffset&&(b=Math.max(b,Math.abs(a.yoffset)))})});return b},_clickHandler:function(a){function b(a){return c.allLayerViews.find(function(b){return b.layer===a})}var c=this.view,d=c.map,e=a.screenPoint,f=this;if(c.popup&&c.ready){var g="3d"===c.type,h=d.allLayers.some(function(a){if(a.isInstanceOf(s))return!1;var c;null==a?c=!1:(c=b(a),c=null==c?!1:a.loaded&&!c.suspended&&(a.popupEnabled&&
a.popupTemplate||"esri.layers.GraphicsLayer"===a.declaredClass||c.getPopupData));if(c&&!(c=!g))c=(a=b(a))&&a.hasDraped;return c?!0:!1});null!=e?this.view.hitTest(e.x,e.y).then(function(b){0<b.results.length?f._showPopup(b.results[0]):h&&f._showPopup(a)}):f._showPopup(a)}}})})},"esri/layers/support/layerUtils":function(){define(["dojo/_base/array"],function(a){return{_serializeLayerDefinitions:function(l){var n=[],m=!1,k=/[:;]/;if(l&&(a.forEach(l,function(a,e){a&&(n.push([e,a]),!m&&k.test(a)&&(m=!0))}),
0<n.length)){var g;m?(g={},a.forEach(n,function(a){g[a[0]]=a[1]}),g=JSON.stringify(g)):(g=[],a.forEach(n,function(a){g.push(a[0]+":"+a[1])}),g=g.join(";"));return g}return null},_serializeTimeOptions:function(l,n){if(l){var m=[];a.forEach(l,function(k,g){if(k){var h=k.toJSON();n&&-1!==a.indexOf(n,g)&&(h.useTime=!1);m.push('"'+g+'":'+JSON.stringify(h))}});if(m.length)return"{"+m.join(",")+"}"}},_getVisibleLayers:function(l,n){var m=[],k,g,h;if(!l)return m;if(n){m=n.concat();for(h=0;h<l.length;h++)k=
l[h],g=a.indexOf(l,k.id),k.subLayerIds&&-1<g&&(m.splice(g,1),m=m.concat(k.subLayerIds))}else m=this._getDefaultVisibleLayers(l);return m},_getDefaultVisibleLayers:function(l){var n=[],m;if(!l)return n;for(m=0;m<l.length;m++)0<=l[m].parentLayerId&&-1===a.indexOf(n,l[m].parentLayerId)&&a.some(l,function(a){return a.id===l[m].parentLayerId})||l[m].defaultVisibility&&n.push(l[m].id);return n},_getLayersForScale:function(l,n){var m=[];if(0<l&&n){var k;for(k=0;k<n.length;k++)if(!(0<=n[k].parentLayerId&&
-1===a.indexOf(m,n[k].parentLayerId)&&a.some(n,function(a){return a.id===n[k].parentLayerId}))&&0<=n[k].id){var g=!0,h=n[k].maxScale,e=n[k].minScale;if(0<h||0<e)0<h&&0<e?g=h<=l&&l<=e:0<h?g=h<=l:0<e&&(g=l<=e);g&&m.push(n[k].id)}}return m}}})},"esri/layers/GroupLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Layer ../core/MultiOriginJSONSupport ./mixins/PortalLayer ./mixins/OperationalLayer ../support/LayersMixin ../core/accessorSupport/utils ../core/accessorSupport/decorators".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b){return function(a){function d(b){a.call(this);this._visibilityHandles={};this.fullExtent=void 0;this.operationalLayerType="GroupLayer";this.spatialReference=void 0;this._visibilityWatcher=this._visibilityWatcher.bind(this)}n(d,a);d.prototype.initialize=function(){this._enforceVisibility(this.visibilityMode,this.visible);this.watch("visible",this._visibleWatcher.bind(this),!0)};d.prototype._writeLayers=function(a,b,c){var d=[];if(!a)return d;a.forEach(function(a){a.write&&
(a=a.write(null,c))&&a.layerType&&d.push(a)});b.layers=d};Object.defineProperty(d.prototype,"visibilityMode",{set:function(a){this._get("visibilityMode")!==a&&this._enforceVisibility(a,this.visible);this._set("visibilityMode",a)},enumerable:!0,configurable:!0});d.prototype.load=function(){this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection","Scene Service"]}));return this};d.prototype.layerAdded=function(a,b){a.visible&&"exclusive"===this.visibilityMode?
this._turnOffOtherLayers(a):"inherited"===this.visibilityMode&&(a.visible=this.visible);this._visibilityHandles[a.uid]=a.watch("visible",this._visibilityWatcher,!0)};d.prototype.layerRemoved=function(a,b){var c=this._visibilityHandles[a.uid];c&&(c.remove(),delete this._visibilityHandles[a.uid]);this._enforceVisibility(this.visibilityMode,this.visible)};d.prototype._turnOffOtherLayers=function(a){this.layers.forEach(function(b){b!==a&&(b.visible=!1)})};d.prototype._enforceVisibility=function(a,b){if(c.getProperties(this).initialized){var d=
this.layers,e=d.find(function(a){return a.visible});switch(a){case "exclusive":d.length&&!e&&(e=d.getItemAt(0),e.visible=!0);this._turnOffOtherLayers(e);break;case "inherited":d.forEach(function(a){a.visible=b})}}};d.prototype._visibleWatcher=function(a){"inherited"===this.visibilityMode&&this.layers.forEach(function(b){b.visible=a})};d.prototype._visibilityWatcher=function(a,b,c,d){switch(this.visibilityMode){case "exclusive":a?this._turnOffOtherLayers(d):this._isAnyLayerVisible()||(d.visible=!0);
break;case "inherited":d.visible=this.visible}};d.prototype._isAnyLayerVisible=function(){return this.layers.some(function(a){return a.visible})};m([b.shared({"2d":"../views/layers/GroupLayerVue","3d":"../views/layers/GroupLayerView"})],d.prototype,"viewModulePaths",void 0);m([b.property()],d.prototype,"fullExtent",void 0);m([b.property({json:{readable:!1,writeAlways:!0}})],d.prototype,"layers",void 0);m([b.write("layers")],d.prototype,"_writeLayers",null);m([b.property()],d.prototype,"operationalLayerType",
void 0);m([b.property({json:{writable:!1}})],d.prototype,"portalItem",void 0);m([b.property()],d.prototype,"spatialReference",void 0);m([b.property({json:{readable:!1,writable:!1}})],d.prototype,"url",void 0);m([b.property({value:"independent",json:{writable:!0}})],d.prototype,"visibilityMode",null);return d=m([b.subclass("esri.layers.GroupLayer")],d)}(b.declared(k,d,g,e,h))})},"esri/portal/support/layersCreator":function(){define("require exports ../../layers/Layer ../../core/promiseUtils ../../core/requireUtils ./byReferenceRenderer dojo/has".split(" "),
function(a,l,n,m,k,g,h){function e(b,c,f){var d,e;return k.when(a,"../../layers/"+c).then(function(a){var c={};b.itemId&&(c.portalItem={id:b.itemId,portal:f.context.portal});e=d=new a(c);return g.read(e,b,f.context)}).then(function(){e.read(b,f.context);return m.resolve(d)})}function d(a,b){var c=a.layerType||a.type;!c&&(b&&b.defaultLayerType)&&(c=b.defaultLayerType);var d;switch(b.context.origin){case "web-scene":switch(b.context.layerContainerType){case "basemap":d=t;break;case "ground":d=v;break;
default:d=q}break;default:switch(b.context.layerContainerType){case "basemap":d=r;break;default:d=u}}return e(a,d[c]||"UnknownLayer",b)}function c(a,b,c){return!b||!b.filter?c:c.then(function(a){var c=b.filter(a);return void 0===c?m.resolve(a):c instanceof n?m.resolve(c):c})}function b(a,b,f){if(!b)return[];for(var e=[],g=[],h=0;h<b.length;h++){var k=b[h],l=d(k,f);e.push(l);g.push(null);if("GroupLayer"===k.layerType&&k.layers&&Array.isArray(k.layers)&&0<k.layers.length){k=k.layers.map(function(a){return d(a,
f)});e.push.apply(e,k);for(var n=0;n<k.length;n++)g.push(l)}}var q={};return e.map(function(b,d){var e=function(a,b){q[b.id]=d;var c=a.findIndex(function(a){if(!a.id)return!1;a=q[a.id];return void 0===a?!1:d<a});0>c&&(c=void 0);a.add(b,c)},h=c(a,f,b).then(function(b){if(null===g[d])e(a,b);else return g[d].then(function(a){e(a.layers,b);return m.resolve(b)});return m.resolve(b)});s&&(h=h.otherwise(function(a){console.error(a.toString?a.toString():a);return m.reject(a)}));return h})}var s=0,q={ArcGISFeatureLayer:"FeatureLayer",
ArcGISMapServiceLayer:"MapImageLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",DefaultTileLayer:"TileLayer"},v={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer"},t={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"TileLayer",
OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",DefaultTileLayer:"TileLayer"},u={ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",
WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",GeoRSS:"UnsupportedLayer",KML:"UnsupportedLayer",WMS:"UnsupportedLayer",DefaultTileLayer:"TileLayer"},r={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"UnsupportedLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"TileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",bingLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",
DefaultTileLayer:"TileLayer"};l.createLayer=d;l.processLayer=c;l.populateLayers=b;l.populateOperationalLayers=function(a,c,f){return b(a,c,f)}})},"esri/portal/support/byReferenceRenderer":function(){define("require exports ../../renderers/support/layerTemplates ../../core/promiseUtils ../../core/accessorSupport/utils ../../core/Logger".split(" "),function(a,l,n,m,k,g){var h=g.getLogger("esri.renderers");l.read=function(a,d,c){var b=(d=d&&d.layerDefinition&&d.layerDefinition.drawingInfo)&&d.renderer;
if(!b||!n.isByReferenceRendererJSON(b))return m.resolve();delete d.renderer;return n.createRenderer(b,c).then(function(b){var d=k.getProperties(a);d.setDefaultOrigin(c.origin);d.set("renderer",b);d.setDefaultOrigin("user")}).otherwise(function(b){h.error("Failed to create by reference renderer",{error:b.toString?b.toString():b,layer:a,context:c})})}})},"esri/renderers/support/layerTemplates":function(){define("require exports dojo/_base/lang ../Renderer ../UniqueValueRenderer ../../symbols/WebStyleSymbol ../../symbols/support/jsonUtils ../../core/promiseUtils ../../symbols/support/symbolUtils".split(" "),
function(a,l,n,m,k,g,h,e,d){function c(a){return"uniqueValue"===a.type&&(void 0!==a.styleUrl||void 0!==a.styleName)}function b(a,b){var c=m.fromJSON(a);c.sizeInfo&&(b.sizeInfo=c.sizeInfo);c.colorInfo&&(b.colorInfo=c.colorInfo);c.visualVariables&&(b.visualVariables=c.visualVariables);return b}function s(a,b){var c=a.clone;b=n.clone(b);var d={toJSON:function(){return b},clone:function(){return d.apply(c.apply(this))},apply:function(a){a.toJSON=d.toJSON;a.clone=d.clone;return a}};return d.apply(a)}function q(a,
c){return d.fetchStyle(a,c).then(function(d){var e=new k({defaultSymbol:a.defaultSymbol?h.fromJSON(a.defaultSymbol,c):void 0,field:a.field1});d.data.items.forEach(function(b){var h=new g({styleUrl:a.styleUrl||void 0,styleName:a.styleName||void 0,portal:a.styleName?c.portal:void 0,name:b.name});e.addUniqueValueInfo(b.name,h);!e.defaultSymbol&&b.name===d.data.defaultItem&&(e.defaultSymbol=h)});e.defaultSymbol||(e.defaultSymbol=e.uniqueValueInfos[0].symbol);return b(a,s(e,a))})}l.createRenderer=function(a,
b){return c(a)&&(a.styleUrl||a.styleName)?q(a,b):e.resolve(null)};l.isByReferenceRendererJSON=function(a){return c(a)}})},"esri/views/layers/GraphicsLayerView":function(){define(["../../core/declare","./LayerView"],function(a,l){return a(l,{declaredClass:"esri.views.layers.GraphicsLayerView",constructor:function(a){},getRenderer:function(a){if(!a||a.symbol)return null;var m=this._rndForScale||this.layer.get("renderer");a&&(m&&m.getObservationRenderer)&&(m=m.getObservationRenderer(a));return m},getSymbol:function(a){if(a.symbol)return a.symbol;
var m=this.getRenderer(a);return m&&m.getSymbol(a)},getRenderingInfo:function(a){var m=this.getRenderer(a),k=this.getSymbol(a),g;if(!k)return null;k={renderer:m,symbol:k};if(m&&(m.colorInfo&&(k.color=m.getColor(a)),m.sizeInfo&&(g=m.getSize(a),k.size=[g,g,g]),m.visualVariables)){a=m.getVisualVariableValues(a);g=["proportional","proportional","proportional"];for(m=0;m<a.length;m++){var h=a[m];if("outline"!==h.variable.target){var e=h.variable.type;"color"===e?k.color=h.value:"size"===e?(e=h.variable.axis,
h=h.variable.useSymbolValue?"symbolValue":h.value,"width"===e?g[0]=h:"depth"===e?g[1]=h:"height"===e?g[2]=h:g[0]="width-and-depth"===e?g[1]=h:g[1]=g[2]=h):"opacity"===e?k.opacity=h.value:"rotation"===e&&(k.rotationAngle=h.value)}}if(isFinite(g[0])||isFinite(g[1])||isFinite(g[2]))k.size=g}return k},_evalSDRenderer:function(){}})})},"esri/views/layers/LayerView":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor ../../core/Evented ../../core/Identifiable ../../core/Promise ../../core/HandleRegistry".split(" "),
function(a,l,n,m,k,g,h,e,d,c){return function(a){function d(){a.apply(this,arguments);this.handles=new c;this.view=this.parent=null}n(d,a);d.prototype.initialize=function(){this.addResolvingPromise(this.layer)};d.prototype.destroy=function(){this.layer=this.parent=null};Object.defineProperty(d.prototype,"layer",{set:function(a){this.handles.remove("layer");a&&this.handles.add(a.on("refresh",this.refresh.bind(this)),"layer");this._set("layer",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,
"suspended",{get:function(){return!this.canResume()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"updating",{get:function(){return!this.suspended&&this.isUpdating()},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"visible",{get:function(){return!0===this.get("layer.visible")},set:function(a){void 0===a?this._clearOverride("visible"):this._override("visible",a)},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"fullOpacity",{get:function(){var a=
this.get("layer.opacity"),a=null!=a?a:1,b=this.get("parent.fullOpacity");return a*(null!=b?b:1)},enumerable:!0,configurable:!0});d.prototype.refresh=function(){};d.prototype.canResume=function(){return!this.get("parent.suspended")&&this.get("view.ready")&&this.get("layer.loaded")&&this.visible||!1};d.prototype.isUpdating=function(){return!1};m([k.property({value:null})],d.prototype,"layer",null);m([k.property()],d.prototype,"parent",void 0);m([k.property({readOnly:!0,dependsOn:["view","visible","layer.loaded",
"parent.suspended"]})],d.prototype,"suspended",null);m([k.property({type:Boolean,dependsOn:["suspended"],readOnly:!0})],d.prototype,"updating",null);m([k.property()],d.prototype,"view",void 0);m([k.property({dependsOn:["layer.visible"]})],d.prototype,"visible",null);m([k.property({dependsOn:["layer.opacity","parent.fullOpacity"]})],d.prototype,"fullOpacity",null);return d=m([k.subclass("esri.views.layers.LayerView")],d)}(k.declared(g,h,e,d))})},"esri/views/View":function(){define("dojo/_base/lang dojo/dom dojo/dom-construct dojo/dom-class ../Graphic ../core/Accessor ../core/Collection ../core/CollectionFlattener ../core/Evented ../core/HandleRegistry ../core/Promise ../core/watchUtils ../core/promiseUtils ../core/Scheduler ../geometry/SpatialReference ../geometry/Extent ./BreakpointsOwner ./DOMContainer ./LayerViewManager ./BasemapView ./GroundView ./PopupManager ./ui/DefaultUI ./support/DefaultsFromMap ../widgets/Popup".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w,y,f,p,x,z,K,A){return g.createSubclass([b,w,d,r],{declaredClass:"esri.views.View",properties:{allLayerViews:{readOnly:!0},basemapView:{},container:{},animation:{},resizing:{},interacting:{},graphics:{type:h.ofType(k)},groundView:{},defaultsFromMap:K,initialExtent:{readOnly:!0,type:u,dependsOn:["defaultsFromMap.extent"]},initialExtentRequired:{},layerViews:{type:h},map:{},popup:{type:A},ready:{readOnly:!0,dependsOn:"map spatialReference surface width height suspended initialExtentRequired initialExtent defaultsFromMap.isDone map.loaded".split(" ")},
root:{},spatialReference:{type:t,dependsOn:["defaultsFromMap.spatialReference"]},stationary:{dependsOn:["animation","interacting","resizing"]},surface:{},type:{},ui:{type:z},updating:{},padding:{},width:{},height:{},suspended:{}},constructor:function(a){this._viewHandles=new c;this._viewHandles.add(this.watch("ready",function(a,b){this._currentSpatialReference=a?this.spatialReference:null;this.notifyChange("spatialReference");!a&&b&&this.layerViewManager.empty()}.bind(this)));this.allLayerViews=new e({root:this,
rootCollectionNames:["basemapView.baseLayerViews","groundView.layerViews","layerViews","basemapView.referenceLayerViews"],getChildrenFunction:function(a){return a.layerViews}});this.defaultsFromMap=new K({view:this})},getDefaults:function(){return a.mixin(this.inherited(arguments),{layerViews:[],graphics:[],padding:{left:0,top:0,right:0,bottom:0},popup:{},ui:{}})},initialize:function(){var a=this.validate().then(function(){this._isValid=!0;this.notifyChange("ready");return s.whenOnce(this,"ready")}.bind(this));
this.addResolvingPromise(a);this.basemapView=new f({view:this});this.groundView=new p({view:this});this.layerViewManager=new y({view:this});this._resetInitialViewPropertiesFromContent()},destroy:function(){this.basemapView.destroy();this.groundView.destroy();this.destroyLayerViews();this.ui.destroy();this.popup&&this.popup.destroy();this.defaultsFromMap.destroy();this.defaultsFromMap=null;this._viewHandles.destroy();this.container=this.map=null},destroyLayerViews:function(){this.layerViewManager.destroy()},
_viewHandles:null,_isValid:!1,_readyCycleForced:!1,_userSpatialReference:null,_currentSpatialReference:null,activeTool:"navigation",animation:null,basemapView:null,groundView:null,container:null,_containerSetter:function(a){a=l.byId(a);var b=this._get("container");b!==a&&(b&&(m.remove(b,"esri-view"),this.popupManager.destroy(),this.popupManager=null,n.destroy(this.root),this.root=null),a?(m.add(a,"esri-view"),this.root=n.create("div",{className:"esri-view-root"},a,"first"),this.surface=n.create("div",
{className:"esri-view-surface"},this.root),l.setSelectable(this.surface,!1),this._forceReadyCycle(),this.popupManager=new x({enabled:!0,view:this})):this.surface=null,this._set("container",a))},graphics:null,_graphicsSetter:function(a){this._graphicsView&&(this._graphicsView.graphics=a);this._set("graphics",a)},interacting:!1,_interactingSetter:function(a){var b=this.surface;b&&b.setAttribute("data-interacting",a);this._set("interacting",a)},layerViews:null,map:null,_mapSetter:function(a){var b=this._get("map");
a!==b&&(a&&a.load&&a.load(),this._forceReadyCycle(),this._resetInitialViewPropertiesFromContent(),this._set("map",a))},padding:null,_popupSetter:function(a){var b=this._get("popup");if(a===b)return b;this._viewHandles.remove("view-popup");b&&b.destroy();a&&(a.viewModel.view=this,a._started||a.startup(),this._viewHandles.add([s.init(this,"root",function(b,c){var f=a.domNode;l.isDescendant(f.parentNode,c)&&f.parentNode.removeChild(f);b&&!f.parentNode&&a.placeAt(b)})],"view-popup"));this._set("popup",
a)},_readyGetter:function(){return!(!this._isValid||this._readyCycleForced||!this.map||!(null!=this.surface&&0!==this.width&&0!==this.height&&this.spatialReference&&(!this.map.load||this.map.loaded)&&(this._currentSpatialReference||!this.initialExtentRequired||this.initialExtent||this.defaultsFromMap&&this.defaultsFromMap.isDone)&&this.isSpatialReferenceSupported(this.spatialReference)))},spatialReference:null,_spatialReferenceGetter:function(){return this._userSpatialReference||this._currentSpatialReference||
this.getDefaultSpatialReference()||null},_spatialReferenceSetter:function(a){this._userSpatialReference=a;this._set("spatialReference",a)},stationary:!0,_stationaryGetter:function(){return!this.animation&&!this.interacting&&!this.resizing},surface:null,type:null,_uiSetter:function(a){var b=this._get("ui");a!==b&&(this._viewHandles.remove("ui"),b&&b.destroy(),a&&(a.view=this,this._viewHandles.add([s.init(this,"root",function(b){a.container=b?n.create("div",null,b):null})],"ui")),this._set("ui",a))},
updating:!1,initialExtentRequired:!0,initialExtent:null,_initialExtentGetter:function(){return this.defaultsFromMap&&this.defaultsFromMap.extent},whenLayerView:function(a){return this.layerViewManager.whenLayerView(a)},addHandler:function(a){this.gestureManager&&this.gestureManager.addHandler(a);return this},removeHandler:function(a){this.gestureManager&&this.gestureManager.removeHandler(a);return this},pageToContent:function(a,b,c){var f=this.padding;c=this.pageToContainer(a,b,c);f&&(c[0]-=f.left,
c[1]-=f.top);return c},getDefaultSpatialReference:function(){return this.get("defaultsFromMap.spatialReference")},validate:function(){return q.resolve()},isSpatialReferenceSupported:function(){return!0},_resetInitialViewPropertiesFromContent:function(){if(this.defaultsFromMap){var a=this.defaultsFromMap.start.bind(this.defaultsFromMap);this.defaultsFromMap.reset();this._currentSpatialReference=null;this.notifyChange("spatialReference");this._viewHandles.remove("defaultsFromMap");this._viewHandles.add([s.watch(this,
"spatialReference",a),s.watch(this,"initialExtentRequired",a),v.schedule(a)],"defaultsFromMap")}},_forceReadyCycle:function(){this.ready&&(this._readyCycleForced=!0,this.notifyChange("ready"),s.whenFalseOnce(this,"ready",function(){this._readyCycleForced=!1;this.notifyChange("ready")}.bind(this)))}})})},"esri/views/BreakpointsOwner":function(){define("../core/Accessor ../core/ArrayPool ../core/HandleRegistry ../core/watchUtils dojo/_base/lang dojo/dom-class".split(" "),function(a,l,n,m,k,g){var h=
{widthBreakpoint:{getValue:function(a){var c=a.viewSize[0];a=a.breakpoints;var b=this.values;return c<=a.xsmall?b.xsmall:c<=a.small?b.small:c<=a.medium?b.medium:c<=a.large?b.large:b.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},
heightBreakpoint:{getValue:function(a){var c=a.viewSize[1];a=a.breakpoints;var b=this.values;return c<=a.xsmall?b.xsmall:c<=a.small?b.small:c<=a.medium?b.medium:c<=a.large?b.large:b.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},
orientation:{getValue:function(a){a=a.viewSize;var c=this.values;return a[1]>=a[0]?c.portrait:c.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},e={xsmall:544,small:768,medium:992,large:1200};return a.createSubclass({properties:{breakpoints:{},orientation:{},widthBreakpoint:{},heightBreakpoint:{}},constructor:function(){this._handles=new n},getDefaults:function(){return k.mixin(this.inherited(arguments),
{breakpoints:e})},initialize:function(){this._handles.add(m.init(this,"size",this._updateClassNames))},destroy:function(){this._removeActiveClassNames();this._handles.destroy();this.view=this._handles=null},_breakpointsSetter:function(a){var c=this._get("breakpoints");if(a!==c){var c=(c=a)&&c.xsmall<c.small&&c.small<c.medium&&c.medium<c.large,b;c||(b=JSON.stringify(e,null,2),console.warn("provided breakpoints are not valid, using defaults:"+b));a=c?a:e;this._set("breakpoints",k.mixin({},a))}},_updateClassNames:function(){if(this.container){var a=
l.acquire(),c=l.acquire(),b=!1,e,g,k;for(e in h)g=this[e],k=h[e].getValue({viewSize:this.size,breakpoints:this.breakpoints}),g!==k&&(b=!0,this[e]=k,c.push(h[e].valueToClassName[g]),a.push(h[e].valueToClassName[k]));b&&(this._applyClassNameChanges(a,c),l.release(a),l.release(c))}},_applyClassNameChanges:function(a,c){var b=this.container;b&&(g.remove(b,c),g.add(b,a))},_removeActiveClassNames:function(){var a=this.container,c;if(a)for(c in h)g.remove(a,h[c].valueToClassName[this[c]])}})})},"esri/views/DOMContainer":function(){define(["dojo/on",
"../core/Accessor","../core/Scheduler","../core/watchUtils"],function(a,l,n,m){var k=[0,0];return l.createSubclass({declaredClass:"esri.views.DOMContainer",properties:{container:{},height:{},position:{},resizing:{},size:{dependsOn:["width","height"],readOnly:!0},suspended:{},width:{}},constructor:function(){Object.defineProperty(this,"_measureInfo",{enumerable:!1,writable:!1,value:{task:null,freq:16,time:750}})},initialize:function(){var g=this._measureInfo,h=null;m.init(this,"container",function(e,
d,c,b){h&&(h.remove(),h=null,g.freq=16,g.time=750);g.task&&(g.task.remove(),g.task=null);e?(h=a(window,"resize",function(){g.freq=16;g.time=750}.bind(b)),g.task=n.addFrameTask({prepare:function(a){var b=this._measureInfo;b.time+=a.deltaTime;b.time<b.freq||(b.time=0,this._measure()?(b.freq=16,this.resizing=!0):(b.freq=Math.min(750,2*b.freq),512<=b.freq&&(this.resizing=!1)))}.bind(b)})):this.resizing=!1;this._measure();e=this.root;d=this.surface;c=this.width;b=this.height;e&&(d&&c&&b)&&(e.style.width=
d.style.width=c+"px",e.style.height=d.style.height=b+"px")})},destroy:function(){this.container=null},_measureInfo:null,size:null,_sizeGetter:function(){return[this.width,this.height]},position:null,height:0,resizing:!1,suspended:!0,width:0,pageToContainer:function(a,h,e){var d=this.position;a-=d[0];h-=d[1];e?(e[0]=a,e[1]=h):e=[a,h];return e},containerToPage:function(a,h,e){var d=this.position;a+=d[0];h+=d[1];e?(e[0]=a,e[1]=h):e=[a,h];return e},_measure:function(){var a=this.container,h=a?a.clientWidth:
0,e=a?a.clientHeight:0;if(0===h||0===e||"hidden"===window.getComputedStyle(a).visibility)return this.suspended=!0,!1;var d=this.root,c=this.surface,b=this.width,m=this.height,l=this.position;if(h===b&&e===m)return this.suspended=!1;d&&c&&(d.style.width=c.style.width=h+"px",d.style.height=c.style.height=e+"px");this.width=h;this.height=e;this.suspended=!1;d=a.ownerDocument||window.document;d=d.parentWindow||d.defaultView;a=a.getBoundingClientRect();k[0]=a.left+d.pageXOffset;k[1]=a.top+d.pageYOffset;
if(!l||k[0]!==l[0]||k[1]!==l[1])this.position=k.slice();this.emit("resize",{oldWidth:b,oldHeight:m,width:h,height:e});return!0}})})},"esri/views/LayerViewManager":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ../core/Accessor ../core/Error ../core/HandleRegistry ../core/Scheduler ../core/promiseUtils ../core/watchUtils ./LayerViewFactory".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s){return function(a){function g(){var c=
this;a.call(this);this._promisesMap=new Map;this._layerViewsMap=new Map;this._handles=new e;this.factory=new s;this.ready=!1;this.layersToLayerViews=function(){var a=new Map;a.set("view.map.basemap.baseLayers","view.basemapView.baseLayerViews");a.set("view.map.ground.layers","view.groundView.layerViews");a.set("view.map.layers","view.layerViews");a.set("view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews");return a}();this._doWork=this._doWork.bind(this);this.refresh=this.refresh.bind(this);
this._handles.add(b.init(this,"view.ready",function(a){return c.ready=a}));this._handles.add(this.watch(["view.map.basemap","view.map.ground","view.map.layers","ready"],this.refresh),"watcher")}n(g,a);g.prototype.destroy=function(){this.view=null;this.empty();this.factory.destroy();this.factory=null;this._handles.destroy();this._map=this._layerViewsMap=this._promisesMap=this._handles=null};g.prototype.empty=function(){this._layerViewsMap.forEach(this._disposeLayerView,this);this._promisesMap.forEach(function(a){return a.cancel()});
this._layerViewsMap.clear();this._promisesMap.clear();this._refreshCollections()};g.prototype.refresh=function(){var a=this._handles;a.remove("refresh");a.add(d.schedule(this._doWork),"refresh")};g.prototype.whenLayerView=function(a){this.refresh();this._doWork();return!this._promisesMap.has(a)?c.reject(new h("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:a})):this._promisesMap.get(a)};g.prototype._doWork=function(){var a=this,b=this._handles,c=this.get("view.map");
this._map!==c&&(this.empty(),this._map=c);if(b.has("refresh")){b.remove("refresh");b.remove("collection-change");this.factory.paused=!this.ready;var d=this._map&&this._map.allLayers;d&&(d.forEach(this._createLayerView,this),this._refreshCollections(),this._promisesMap.forEach(function(b,c){d.includes(c)||a._disposeLayerView(a._layerViewsMap.get(c),c)}),b.add(d.on("change",this.refresh),"collection-change"))}};g.prototype._refreshCollections=function(){var a=this;this.layersToLayerViews.forEach(function(b,
c){a._populateLayerViewsOwners(a.get(c),a.get(b),a.view)})};g.prototype._populateLayerViewsOwners=function(a,b,c){var d=this;if(!a||!b)b&&b.removeAll();else{var e=0;a.forEach(function(a){var g=d._layerViewsMap.get(a);g&&(g.layer=a,g.parent=c,b.getItemAt(e)!==g&&b.splice(e,0,g),a.layers&&d._populateLayerViewsOwners(a.layers,g.layerViews,g),e+=1)});e<b.length&&b.splice(e,b.length)}};g.prototype._createLayerView=function(a){var b=this,d=this.view,e=this.factory,g=this._layerViewsMap,f=this._promisesMap;
g.has(a)?a.load():f.has(a)||(e=e.create(d,a).then(function(f){if(!b._map||!b._map.allLayers.some(function(b){return a===b}))throw new h("view:no-layerview-for-layer","The layer has been removed from the map",{layer:a});g.set(a,f);b._refreshCollections();a.emit("layerview-create",{view:d,layerView:f});d.emit("layerview-create",{layer:a,layerView:f});return c.resolve(f)}),f.set(a,e),e.always(this.refresh))};g.prototype._disposeLayerView=function(a,b){if(this._promisesMap.has(b)&&(this._promisesMap.get(b).cancel(),
this._promisesMap.delete(b),a)){var c=a.layer,d=a.view;this.factory.dispose(a);a.layer=a.parent=a.view=null;this._layerViewsMap.delete(c);c.emit("layerview-destroy",{view:d,layerView:a});d.emit("layerview-destroy",{layer:c,layerView:a})}};m([k.property()],g.prototype,"ready",void 0);m([k.property()],g.prototype,"view",void 0);return g=m([k.subclass("esri.views.LayerViewManager")],g)}(k.declared(g))})},"esri/views/LayerViewFactory":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators dojo/Deferred dojo/when ../core/Accessor ../core/Collection ../core/Error ../core/watchUtils".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b){return function(a){function e(){a.apply(this,arguments);this.creationRequests=new d;this.paused=!0}n(e,a);e.prototype.initialize=function(){var a=this;b.whenFalse(this,"paused",function(){a.creationRequests.toArray().forEach(a._processRequest,a)},!0)};e.prototype.destroy=function(){this.creationRequests.drain(function(a){return a.deferred.cancel(void 0)})};Object.defineProperty(e.prototype,"working",{get:function(){return 0<this.creationRequests.length},enumerable:!0,
configurable:!0});e.prototype.create=function(a,b){var d=this.getLayerViewPromise(b);if(d)return d;var e=this.creationRequests,h={deferred:new g(function(){var a=new c("cancelled:layerview-create","layerview creation cancelled",{layer:b});e.remove(h);h.creationPromise&&h.creationPromise.cancel(a);return a}),view:a,layer:b,started:!1,creationPromise:null};e.push(h);this.paused||this._processRequest(h);return h.deferred.promise};e.prototype.dispose=function(a){a.layer.destroyLayerView(a)};e.prototype.getLayerViewPromise=
function(a){var b=this.creationRequests&&this.creationRequests.find(function(b){return b.layer===a});return b&&b.deferred.promise};e.prototype._processRequest=function(a){var b=this;if(!a.started){a.started=!0;var d=a.deferred,e=a.layer,g=a.view;e.load().then(function(b){if(!d.isCanceled())return a.creationPromise=b.createLayerView(g),a.creationPromise}).then(function(b){return!d.isCanceled()?a.creationPromise=h(b):b}).otherwise(function(a){d.isCanceled()||d.reject(new c("layerview:create-error",
"layerview creation failed",{layer:e,error:a}))}).then(function(c){b.creationRequests&&b.creationRequests.remove(a);d.isFulfilled()?c&&b.dispose(c):d.resolve(c);return c})}};m([k.property()],e.prototype,"creationRequests",void 0);m([k.property()],e.prototype,"paused",void 0);m([k.property()],e.prototype,"view",void 0);m([k.property({dependsOn:["paused","creationRequests.length"],readOnly:!0})],e.prototype,"working",null);return e=m([k.subclass("esri.views.LayerViewFactory")],e)}(k.declared(e))})},
"esri/views/BasemapView":function(){define(["../core/Accessor","../core/Collection","../core/watchUtils"],function(a,l,n){return a.createSubclass({declaredClass:"esri.views.BasemapView",properties:{view:{},baseLayerViews:{type:l},referenceLayerViews:{type:l}},getDefaults:function(){return{baseLayerViews:[],referenceLayerViews:[]}},initialize:function(){this._loadingHdl=n.init(this,"view.map.basemap",this._loadBasemap)},destroy:function(){this.view=null;this._loadingHdl.remove();this._loadingHdl=null},
_suspendedGetter:function(){return this.view?this.view.suspended:!0},_loadBasemap:function(a){a&&a.load()}})})},"esri/views/GroundView":function(){define(["../core/Accessor","../core/Collection"],function(a,l){return a.createSubclass({declaredClass:"esri.views.GroundView",properties:{view:{},layerViews:{type:l},suspended:{get:function(){return this.view?this.view.suspended:!0}}},getDefaults:function(){return{layerViews:[]}},destroy:function(){this.view=null}})})},"esri/views/ui/DefaultUI":function(){define("../../core/watchUtils ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom ./Component ./UI dojo/_base/lang dojo/dom-geometry".split(" "),
function(a,l,n,m,k,g,h,e,d){return h.createSubclass({declaredClass:"esri.views.ui.DefaultUI",constructor:function(){this._addComponents=this._addComponents.bind(this);this._componentsWatcher=this._componentsWatcher.bind(this);this._updateViewAwareWidgets=this._updateViewAwareWidgets.bind(this)},getDefaults:function(){return e.mixin(this.inherited(arguments),{components:[]})},initialize:function(){this._handles.add([a.init(this,"components",this._componentsWatcher),a.init(this,"view",this._updateViewAwareWidgets)])},
_defaultPositionLookup:null,_componentsSetter:function(a){this._set("components",a||[])},_findComponentPosition:function(a){if(!this._defaultPositionLookup){var b=d.isBodyLtr();this._defaultPositionLookup={attribution:"manual",compass:b?"top-left":"top-right","navigation-toggle":b?"top-left":"top-right",zoom:b?"top-left":"top-right"}}return this._defaultPositionLookup[a]},_removeComponents:function(a){a.forEach(function(a){if(a=this.find(a))this.remove(a),a.destroy()},this)},_updateViewAwareWidgets:function(a){this.components.forEach(function(b){if(b=
(b=this.find(b))&&b.widget)b.viewModel&&b.viewModel.hasOwnProperty("view")?b.viewModel.view=a:b.hasOwnProperty("view")&&b.set("view",a)},this)},_componentsWatcher:function(a,b){this._removeComponents(b);this._addComponents(a)},_addComponents:function(a){this.initialized&&a.forEach(function(a){this.add(this._createComponent(a),this._findComponentPosition(a))},this)},_createComponent:function(a){var b=this._createWidget(a);if(b)return new g({id:a,node:b})},_createWidget:function(a){if("attribution"===
a)return this._createAttribution();if("compass"===a)return this._createCompass();if("navigation-toggle"===a)return this._createNavigationToggle();if("zoom"===a)return this._createZoom()},_createAttribution:function(){var a=new l({viewModel:{view:this.view}});a.startup();return a},_createCompass:function(){var a=new n({viewModel:{view:this.view}});a.startup();return a},_createNavigationToggle:function(){var a=new m({viewModel:{view:this.view}});a.startup();return a},_createZoom:function(){var a=new k({viewModel:{view:this.view}});
a.startup();return a}})})},"esri/widgets/Attribution":function(){define("../core/watchUtils ./Attribution/AttributionViewModel ./support/viewModelWiring ./Widget dijit/_TemplatedMixin dijit/a11yclick dojo/dom-attr dojo/dom-class dojo/on dojo/text!./Attribution/templates/Attribution.html".split(" "),function(a,l,n,m,k,g,h,e,d,c){var b={base:"esri-attribution",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",
link:"esri-attribution__link",clearFix:"esri-clearfix",interactive:"esri-interactive",hidden:"esri-hidden"};return m.createSubclass([k],{declaredClass:"esri.widgets.Attribution",baseClass:b.base,templateString:c,constructor:function(){this._attributionTextWatcher=this._attributionTextWatcher.bind(this);this._updateStatus=this._updateStatus.bind(this)},postCreate:function(){this.inherited(arguments);this.own(d(this._sourcesNode,g,this._toggleOpenState.bind(this)),a.init(this.viewModel,"view.size",
this._updateStatus),a.init(this.viewModel,"attributionText",this._attributionTextWatcher))},_css:b,properties:{view:{aliasOf:"viewModel.view"},viewModel:{type:l}},_attributionTextWatcher:function(a){this._sourcesNode.innerHTML=a;this._updateStatus()},_updateStatus:function(){var a=this.domNode,c=this._sourcesNode,d=e.contains(a,b.open);e.remove(a,b.open);e.remove(c,b.sourcesOpen);e.remove(c,b.interactive);h.set(c,{tabIndex:"",role:""});this._hasOverflowingText()&&(e.add(c,b.interactive),d&&(e.add(a,
b.open),e.add(c,b.sourcesOpen)),h.set(c,{tabIndex:0,role:"button"}))},_hasOverflowingText:function(){var a=this._sourcesNode;return a.scrollWidth>a.clientWidth},_toggleOpenState:function(){e.contains(this._sourcesNode,b.interactive)&&e.toggle(this.domNode,b.open);this._updateStatus()}})})},"esri/widgets/Attribution/AttributionViewModel":function(){define("dojo/_base/lang ../../core/Accessor ../../core/Evented ../../core/HandleRegistry ../../core/lang ../../core/watchUtils ../../geometry/Extent ../../geometry/support/webMercatorUtils".split(" "),
function(a,l,n,m,k,g,h,e){return l.createSubclass([n],{properties:{attributionText:{dependsOn:["items","itemDelimiter"],readOnly:!0},itemDelimiter:{},items:{},state:{dependsOn:["view.ready"],readOnly:!0},view:{}},declaredClass:"esri.widgets.Attribution.AttributionViewModel",constructor:function(){this._handles=new m;this._pendingAttributionItemsByLayerId={};this._attributionDataByLayerId={};this._updateAttributionItems=this._updateAttributionItems.bind(this)},getDefaults:function(){return a.mixin(this.inherited(arguments),
{items:[]})},initialize:function(){this._handles.add(g.init(this,"view",this._viewWatcher))},destroy:function(){this._handles.destroy();this.view=this._handles=null},_handles:null,_pendingAttributionItemsByLayerId:null,_attributionDataByLayerId:null,attributionText:null,_attributionTextGetter:function(){return this.items.join(this.itemDelimiter)},itemDelimiter:" | ",items:null,state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},view:null,_viewWatcher:function(a){var c=
this._handles;c&&c.remove();a&&(c.add([a.allLayerViews.on("change",function(a){this._addLayerViews(a.added);0<a.removed.length&&(a.removed.forEach(function(a){c.remove(a.uid)}),this._updateAttributionItems())}.bind(this)),g.init(a,"stationary",this._updateAttributionItems)]),this._addLayerViews(a.allLayerViews))},_addLayerViews:function(a){a.forEach(function(a){this._handles.has(a.uid)||this._handles.add(g.init(a,"suspended",this._updateAttributionItems),a.uid)},this)},_updateAttributionItems:function(){var a=
[];this._getActiveLayerViews().forEach(function(c){var b=c.layer,e,g;b.hasAttributionData?(e=this._attributionDataByLayerId,e[b.uid]?(c=this._getDynamicAttribution(e[b.uid],this.view,b),this._isUnique(a,c)&&a.push(c)):(g=this._pendingAttributionItemsByLayerId,this._inProgress(g[b.uid])||(g[b.uid]=b.fetchAttributionData().then(function(a){a=this._createContributionIndex(a,this._isBingLayer(b));delete g[b.uid];e[b.uid]=a;this._updateAttributionItems()}.bind(this))))):(c=b.copyright,this._isUnique(a,
c)&&a.push(c))},this);this._itemsChanged(this.items,a)&&(this.items=a)},_itemsChanged:function(a,c){return a.length!==c.length||a.some(function(a,d){return a!==c[d]})},_inProgress:function(a){return a&&!a.isFulfilled()},_getActiveLayerViews:function(){return(this.get("view.allLayerViews")||[]).filter(function(a){return!a.suspended&&a.get("layer.attributionVisible")})},_isUnique:function(a,c){return c&&-1===a.indexOf(c)},_isBingLayer:function(a){return-1!==a.declaredClass.toLowerCase().indexOf("vetiledlayer")},
_createContributionIndex:function(a,c){var b=a.contributors,g={},l,m,n,u,r,w,y,f;if(!b)return g;for(u=0;u<b.length;u++)if(l=b[u],m=l.coverageAreas)for(r=0;r<m.length;r++){n=m[r];w=n.bbox;f=n.zoomMin-(c&&n.zoomMin?1:0);y=n.zoomMax-(c&&n.zoomMax?1:0);l={extent:e.geographicToWebMercator(new h({xmin:w[1],ymin:w[0],xmax:w[3],ymax:w[2]})),attribution:l.attribution||"",score:k.isDefined(n.score)?n.score:100,id:u};for(n=f;n<=y;n++)g[n]=g[n]||[],g[n].push(l)}g.maxKey=Math.max.apply(null,Object.keys(g));return g},
_getDynamicAttribution:function(a,c,b){var e=c.extent;c=b.tileInfo.scaleToZoom(c.scale);var g,h;c=Math.min(a.maxKey,Math.round(c));if(!e||!k.isDefined(c)||-1>=c)return"";a=a[c];g=e.center.clone().normalize();h={};return a.filter(function(a){var b=!h[a.id]&&a.extent.contains(g);b&&(h[a.id]=!0);return b}).sort(function(a,b){return b.score-a.score||a.objectId-b.objectId}).map(function(a){return a.attribution}).join(", ")}})})},"esri/widgets/support/viewModelWiring":function(){define(["../../core/watchUtils"],
function(a){function l(a,l){Array.isArray(l)||(l=[l]);return l.map(function(k){return a.viewModel.on(k,function(g){a.emit(k,g)})})}return{createGetterDelegate:function(a){var l="viewModel."+a;return function(){return this.get(l)}},createSetterDelegate:function(a){return function(l){var k=this.get("viewModel");k&&k.set(a,l)}},createMethodDelegate:function(a){var l="viewModel."+a;return function(){var a=this.get(l);if(a)return a.apply(this.viewModel,arguments)}},setUpEventDelegates:function(n,m){var k=
l(n,m),g=a.init(n,"viewModel",function(a,e){k.forEach(function(a){a.remove()});k.length=0;a&&(k=l(n,m));n.own.apply(n,k)});n.own(g)}}})},"esri/widgets/Widget":function(){define("../core/Accessor ../core/declare ../core/accessorSupport/metadata dijit/_WidgetBase dijit/Destroyable dijit/registry dojo/_base/lang dojo/_base/window dojo/dom dojo/dom-attr dojo/dom-class dojo/on".split(" "),function(a,l,n,m,k,g,h,e,d,c,b,s){function q(a){return function(b){this._set(a,b)}}function v(a,b){return function(c){t.call(this,
a,b,c);this._set(a,c)}}function t(a,d,e){(Array.isArray(d)?d:[d]).forEach(function(f){var d=this[f.node||f||"domNode"];switch(f.type||"attribute"){case "attribute":h.isFunction(e)&&(e=e.bind(this));f=f.attribute?f.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;d.tagName?c.set(d,f,e):d.set(f,e);break;case "innerText":d.innerHTML="";d.appendChild(this.ownerDocument.createTextNode(e));break;case "innerHTML":d.innerHTML=e;break;case "class":f=this._get(a),b.replace(d,e,f)}},this)}l.before(function(a,
b){if(b.declaredClass===u||l.hasMixin(a,u)){var c=n.getPropertiesMetadata(b);Object.keys(c).forEach(function(a){var b=c[a];var d=b.set;a="function"===typeof d?d:null===d?q(b.name):"string"===typeof d||"object"===typeof d?v(a,d):void 0;b.set=a})}});var u="esri.widgets._WidgetBase";return a.createSubclass([k],{declaredClass:u,postscript:function(a){var b=this.__accessor__;a=b.ctorArgs||a;var d;(d=this.getDefaults?a?this.getDefaults(a):this.getDefaults({}):null)&&Object.getOwnPropertyNames(d).forEach(function(a){b.set(a,
d[a])},this);this.postMixInProperties();this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=e.body(this.ownerDocument);g.add(this);this.buildRendering();b.initialize();a&&(this.set(a),b.ctorArgs=null);b.initialize();this.initialize();this.postCreate();if(this.domNode){var f;if((a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a)a.parentNode.replaceChild(this.domNode,a),f=!0;c.set(this.domNode,{widgetId:this.id,id:this.id});f&&delete this.srcNodeRef}this._created=
!0},getDefaults:function(a){var b={};b.id=a.id?a.id:a.srcNodeRef&&a.srcNodeRef.id||g.getUniqueId(this.declaredClass.replace(/\./g,"_"));delete a.id;a.srcNodeRef&&(b.srcNodeRef=a.srcNodeRef,delete a.srcNodeRef);return h.mixin(this.inherited(arguments),b)},normalizeCtorArgs:function(a,b){a=a||{};if(a.srcNodeRef||b)a.srcNodeRef=d.byId(b||a.srcNodeRef);return a},destroy:function(){this._customWidgetBaseDestroy()},postMixInProperties:m.prototype.postMixInProperties,buildRendering:m.prototype.buildRendering,
postCreate:m.prototype.postCreate,startup:m.prototype.startup,_beingDestroyed:!1,_destroyed:!1,_created:!1,properties:{"class":{value:"",set:{node:"domNode",type:"class"}},domNode:{value:null},focused:!1,id:{value:""},srcNodeRef:{value:null},style:{value:null,set:m.prototype._setStyleAttr},widgetId:{}},destroyDescendants:m.prototype.destroyDescendants,destroyRecursive:m.prototype.destroyRecursive,destroyRendering:m.prototype.destroyRendering,emit:m.prototype.emit,on:function(a,b){return this.own(s(this.domNode,
a,b))[0]},toString:m.prototype.toString,getChildren:m.prototype.getChildren,getParent:m.prototype.getParent,isLeftToRight:m.prototype.isLeftToRight,placeAt:m.prototype.placeAt,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()},dojoAttachEvent:"",dojoAttachPoint:"",_customWidgetBaseDestroy:function(a){function b(c){c.destroyRecursive?c.destroyRecursive(a):c.destroy&&c.destroy(a)}this._beingDestroyed=!0;this.domNode&&g.findWidgets(this.domNode,
this.containerNode).forEach(b);this.destroyRendering(a);g.remove(this.id);this._destroyed=!0}}).createSubclass({declaredClass:"esri.widgets.Widget",getDefaults:function(){return h.mixin(this.inherited(arguments),{viewModel:{}})},buildRendering:function(){this.inherited(arguments);b.add(this.domNode,"esri-widget")},destroy:function(){this.viewModel.destroy&&this.viewModel.destroy();this.viewModel=null},properties:{viewModel:{value:null},visible:{value:!0,set:function(a){this._set("visible",a);b.toggle(this.domNode,
"esri-hidden",!a)}}}})})},"esri/widgets/Compass":function(){define("../core/watchUtils ./Compass/CompassViewModel ./support/viewModelWiring ./Widget dijit/_TemplatedMixin dijit/a11yclick dojo/dom-attr dojo/dom-class dojo/dom-style dojo/i18n!./Compass/nls/Compass dojo/text!./Compass/templates/Compass.html".split(" "),function(a,l,n,m,k,g,h,e,d,c,b){var s={base:"esri-compass esri-widget-button",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",
interactive:"esri-interactive",disabled:"esri-disabled"};return m.createSubclass([k],{declaredClass:"esri.widgets.Compass",baseClass:s.base,templateString:b,constructor:function(){this._applyRotation=this._applyRotation.bind(this);this._handleClick=this._handleClick.bind(this);this._handleState=this._handleState.bind(this)},postCreate:function(){this.inherited(arguments);this.own(a.init(this.viewModel,"state",this._handleState),a.when(this.viewModel,"orientation",this._applyRotation),this.on(g,this._handleClick))},
_css:s,_i18n:c,properties:{view:{aliasOf:"viewModel.view"},viewModel:{type:l}},reset:n.createMethodDelegate("reset"),_applyRotation:function(a){a="rotateZ("+a.z+"deg)";d.set(this._iconNode,{transform:a,mozTransform:a,webkitTransform:a,oTransform:a,msTransform:a})},_handleClick:function(){this.viewModel.reset()},_handleState:function(a){var b="disabled"===a;a="compass"===("rotation"===a?"rotation":"compass");e.toggle(this.domNode,s.disabled,b);e.toggle(this.domNode,s.interactive,!b);h.set(this.domNode,
"tabindex",b?"":0);e.toggle(this._iconNode,s.northIcon,a);e.toggle(this._iconNode,s.rotationIcon,!a)}})})},"esri/widgets/Compass/CompassViewModel":function(){define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils","dojo/_base/lang"],function(a,l,n,m){return a.createSubclass({declaredClass:"esri.widgets.CompassViewModel",properties:{canShowNorth:{dependsOn:["spatialReference"]},orientation:{},spatialReference:{dependsOn:["view.spatialReference"]},state:{dependsOn:["view.ready",
"canShowNorth"]},view:{}},constructor:function(){this._handles=new l;this._updateForCamera=this._updateForCamera.bind(this);this._updateForRotation=this._updateForRotation.bind(this);this._updateRotationWatcher=this._updateRotationWatcher.bind(this)},getDefaults:function(){return m.mixin(this.inherited(arguments),{orientation:{x:0,y:0,z:0}})},initialize:function(){this._handles.add(n.init(this,"view",this._updateRotationWatcher))},destroy:function(){this._handles.destroy()},_handles:null,canShowNorth:!1,
_canShowNorthGetter:function(){var a=this.spatialReference;return a&&(a.isWebMercator||4326===a.wkid)},orientation:null,spatialReference:null,_spatialReferenceGetter:function(){return this.get("view.spatialReference")||null},state:"disabled",_stateGetter:function(){return!this.get("view.ready")?"disabled":this.canShowNorth?"compass":"rotation"},view:null,reset:function(){var a=this.view;a&&a.ready&&("2d"===a.type?a.goTo({rotation:0}):a.goTo({heading:0}))},_updateForRotation:function(a){void 0===a||
null===a||(this.orientation={z:a})},_updateForCamera:function(a){a&&(this.orientation={x:0,y:0,z:-a.heading})},_updateRotationWatcher:function(a){this._handles.removeAll();a&&("2d"===a.type?this._handles.add(n.init(this,"view.rotation",this._updateForRotation)):this._handles.add(n.init(this,"view.camera",this._updateForCamera)))}})})},"esri/widgets/NavigationToggle":function(){define("dojo/dom-class dojo/dom-attr dojo/on dijit/_TemplatedMixin dijit/a11yclick ../core/watchUtils ./support/viewModelWiring ./Widget ./NavigationToggle/NavigationToggleViewModel dojo/i18n!./NavigationToggle/nls/NavigationToggle dojo/text!./NavigationToggle/templates/NavigationToggle.html".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b){var s={base:"esri-navigation-toggle",button:"esri-navigation-toggle__button esri-widget-button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",disabled:"esri-disabled"};return e.createSubclass([m],{declaredClass:"esri.widgets.NavigationToggle",baseClass:s.base,
templateString:b,postCreate:function(){this.inherited(arguments);this.own(g.init(this,"viewModel.state",this._handleState),g.init(this,"viewModel.navigationMode",this._applyPrimaryButton),n(this.domNode,k,this.viewModel.toggle))},_css:s,_i18n:c,properties:{layout:{value:"vertical",set:function(b){"horizontal"!==b&&(b="vertical");a.toggle(this.domNode,s.isLayoutHorizontal,"horizontal"===b);this._set("layout",b)}},view:{aliasOf:"viewModel.view"},viewModel:{type:d}},toggle:h.createMethodDelegate("toggle"),
_handleState:function(b){b="disabled"===b;a.toggle(this.domNode,s.disabled,b);l.set(this.domNode,"tabindex",b?"":0)},_applyPrimaryButton:function(b){b="pan"===b;a.toggle(this._panButtonNode,s.activeButton,b);a.toggle(this._rotateButtonNode,s.activeButton,!b)}})})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils","../../views/3d/navigation/EventController"],function(a,l,n,m){return a.createSubclass({declaredClass:"esri.widgets.NavigationToggleViewModel",
properties:{navigationMode:{},state:{dependsOn:["view.navigationController","view.ready"],readOnly:!0},view:{}},constructor:function(){this._handles=new l;this.toggle=this.toggle.bind(this)},initialize:function(){this._handles.add(n.when(this,"view.navigationController",this._updateNavMode.bind(this)))},destroy:function(){this._handles.destroy()},_handles:null,state:"disabled",_stateGetter:function(){return this.get("view.ready")&&"3d"===this.view.type?"ready":"disabled"},navigationMode:"pan",view:null,
toggle:function(){if("disabled"!==this.state){var a=this.get("view.navigationController"),g=a.getControls();g===m.PRO_PAN||g===m.PRO_TUMBLE?a.setControls("pan"!==this.navigationMode?m.PRO_PAN:m.PRO_TUMBLE):a.setControls("pan"!==this.navigationMode?m.PAN:m.TUMBLE);this.navigationMode="pan"!==this.navigationMode?"pan":"rotate"}},_updateNavMode:function(){var a=this.view.navigationController.getControls();a===m.PRO_TUMBLE?a.setControls(m.PRO_PAN):a===m.TUMBLE&&a.setControls(m.PAN)}})})},"esri/views/3d/navigation/EventController":function(){define("dojo/_base/array dojo/sniff ../lib/glMatrix ../../../core/watchUtils ../webgl-engine/lib/Util ./NavigationConstants".split(" "),
function(a,l,n,m,k,g){var h=function(e,d){function c(a){if(!U||a.isPrimary)if(a.preventDefault(),0!==X&&!(void 0===a.originalTouchEvent&&void 0!==typeof a.movementX&&void 0!==typeof a.movementY&&0===a.movementX&&0===a.movementY)){var b=w(a,V),c=X-1;switch(N){case 1:y("mouseDragLeft",b,c);break;case 2:y("mouseDragMiddle",b,c);break;case 3:case 0:y("mouseDragRight",b,c)}1===X&&!(0===Math.abs(b[0]-O[0])&&0===Math.abs(b[1]-O[1]))?X=2:3===X&&(Y&&window.clearTimeout(Y),N=X=0,F(a))}}function b(a){if(!U||
a.isPrimary)a.preventDefault(),G.focus(),O=w(a),Y&&window.clearTimeout(Y),P.stop(),X=1,N=a.which,1===N&&(0<H?(y("mouseClickDouble",w(a,V),2),H=0):H=Date.now()),U?(G.setPointerCapture(a.pointerId),G.addEventListener(D.move,c,!0),G.addEventListener(D.up,s,!0)):(document.addEventListener(D.move,c,!0),document.addEventListener(D.up,s,!0))}function s(a){if(!U||a.isPrimary){a.preventDefault();var b=w(a,V);1===X&&1===N?0<H&&setTimeout(function(){0<H&&(y("mouseClick",w(a,V)),H=0)},Math.max(f-(Date.now()-
H),0)):H=0;2===X?(X=3,Y=setTimeout(function(){if(3===X)switch(N){case 1:y("mouseDragLeft",b,2);break;case 2:y("mouseDragMiddle",b,2);break;case 3:case 0:y("mouseDragRight",b,2)}F(a);N=X=0},p)):(F(a),N=X=0)}}function q(a){a.preventDefault();var b=a.deltaY;switch(a.deltaMode){case 0:if(B||I)b=600*(b/document.documentElement.clientHeight);break;case 1:b*=30;break;case 2:b*=900}0!==b&&y("mouseWheel",b,w(a,Z))}function v(a){a.stopPropagation();var b=a.changedTouches[0],c="";if(!(1<a.touches.length)){var f;
switch(a.type){case "touchstart":c="mousedown";break;case "touchmove":c="mousemove";break;case "touchend":c="mouseup";f=document.createEvent("MouseEvent");f.initMouseEvent("click",!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);b.target.dispatchEvent(f);a.preventDefault();break;default:return}f=document.createEvent("MouseEvent");f.initMouseEvent(c,!0,!0,window,1,b.screenX,b.screenY,b.clientX,b.clientY,!1,!1,!1,!1,0,null);f.originalTouchEvent=a;b.target.dispatchEvent(f);
a.preventDefault()}}function t(a){a.preventDefault()}function u(a){if(!a.shiftKey&&!a.ctrlKey&&!a.altKey&&!a.metaKey){var b=x[a.keyCode];void 0!==b&&(ga[b](),a.preventDefault())}}function r(a){var b=x[a.keyCode];void 0!==b&&(b=ja[b],void 0!==b&&b(),a.preventDefault())}function w(a,b){b||(b=K.create());var c=G.getBoundingClientRect();b[0]=a.clientX-Math.round(c.left);b[1]=Math.round(c.height)-(a.clientY-Math.round(c.top));return b}function y(a,b,c){a=d[a];if(void 0!==a)aa[a](b,c)}var f=200,p=100,x=
{37:"panLeft",38:"panForward",39:"panRight",40:"panBackward",66:"lookAround",74:"panDown",78:"lookNorth",80:"lookDown",85:"panUp"},z,K=n.vec2d,A=k.assert,E={down:"mousedown",move:"mousemove",up:"mouseup"},L={down:"pointerdown",move:"pointermove",up:"pointerup"},B=l("trident"),I=l("edge"),U=!!window.PointerEvent&&(B||I),S=!U,D=U?L:E,J=["touchmove","touchstart","touchend","touchcancel"],G=null,F=function(a){U?(G.releasePointerCapture(a.pointerId),G.removeEventListener(D.move,c,!0),G.removeEventListener(D.up,
s,!0)):(document.removeEventListener(D.move,c,!0),document.removeEventListener(D.up,s,!0))};this.connect=function(){if(G=e.get("canvas"))G.style.touchAction="none",S&&a.forEach(J,function(a){G.addEventListener(a,v,!0)}),G.addEventListener(D.down,b,!1),G.addEventListener("wheel",q,!1),G.addEventListener("contextmenu",t,!1),G.setAttribute("tabindex","1"),G.addEventListener("keydown",u,!1),G.addEventListener("keyup",r,!1)};this.disconnect=function(){G&&(S&&a.forEach(J,function(a){G.removeEventListener(a,
v,!0)}),G.removeEventListener(D.down,b,!1),G.removeEventListener("wheel",q,!1),G.removeEventListener("contextmenu",t,!1),G.removeEventListener("keydown",u,!1),G.removeEventListener("keyup",r,!1),G=null)};var M=m.init(e,"canvas",function(){this.disconnect();this.connect()}.bind(this)),P=e.navigation;this.destroy=function(){this.disconnect();M.remove()};this.setControls=function(a){z?z=a:d=a};this.getControls=function(){return d};var X=0,N=0,H=0,O=null,Y,V=K.create(),Z=K.create(),aa={select:function(a){e.get("ready")&&
e._stage.select(a)},clickStep:function(a,b){e.get("ready")&&P.zoom.stepScreen(Math.log(0.5)/Math.log(0.6),a)},pan:function(a,b){switch(b){case 0:P.pan.begin(a);break;case 1:P.pan.update(a);break;case 2:P.pan.end(a);break;default:A(!1)}},tumble:function(a,b){switch(b){case 0:P.rotate.begin(a,g.Rotate.PivotPoint.POI);break;case 1:P.rotate.update(a,g.Rotate.PivotPoint.POI);break;case 2:P.rotate.end(a);break;default:A(!1)}},zoom:function(a,b){switch(b){case 0:P.zoom.begin(a);break;case 1:P.zoom.update(a);
break;case 2:P.zoom.end(a);break;default:A(!1)}},zoomStep:function(a,b){P.zoom.stepScreen(-a/60,b)},lookAround:function(a,b){switch(b){case 0:P.rotate.begin(a,g.Rotate.PivotPoint.EYE);break;case 1:P.rotate.update(a,g.Rotate.PivotPoint.EYE);break;case 2:P.rotate.end(a);break;default:A(!1)}}},ba=g.Pan.Direction,ga={panLeft:function(){P.pan.beginContinuous(ba.LEFT)},panRight:function(){P.pan.beginContinuous(ba.RIGHT)},panForward:function(){P.pan.beginContinuous(ba.FORWARD)},panBackward:function(){P.pan.beginContinuous(ba.BACKWARD)},
panUp:function(){P.pan.beginContinuous(ba.UP)},panDown:function(){P.pan.beginContinuous(ba.DOWN)},lookAround:function(){z||(z=d,d=h.LOOK_AROUND)},lookNorth:function(){e.goTo({heading:0})},lookDown:function(){e.goTo({tilt:0})}},ja={panLeft:function(){P.pan.endContinuous(ba.LEFT)},panRight:function(){P.pan.endContinuous(ba.RIGHT)},panForward:function(){P.pan.endContinuous(ba.FORWARD)},panBackward:function(){P.pan.endContinuous(ba.BACKWARD)},panUp:function(){P.pan.endContinuous(ba.UP)},panDown:function(){P.pan.endContinuous(ba.DOWN)},
lookAround:function(){z&&(d=z,z=void 0)}}};h.PAN={mouseClick:"select",mouseClickDouble:"clickStep",mouseDragLeft:"pan",mouseDragRight:"tumble",mouseDragMiddle:"zoom",mouseWheel:"zoomStep"};h.TUMBLE={mouseClick:"select",mouseClickDouble:"clickStep",mouseDragLeft:"tumble",mouseDragRight:"pan",mouseDragMiddle:"zoom",mouseWheel:"zoomStep"};h.LOOK_AROUND={mouseClick:"select",mouseClickDouble:"clickStep",mouseDragLeft:"lookAround",mouseDragRight:"tumble",mouseDragMiddle:"pan",mouseWheel:"zoomStep"};h.OLD=
{mouseClick:"select",mouseClickDouble:"clickStep",mouseDragMiddle:"tumble",mouseDragRight:"pan",mouseWheel:"zoomStep"};h.PRO_PAN={mouseClick:"select",mouseClickDouble:"clickStep",mouseDragLeft:"pan",mouseDragMiddle:"tumble",mouseDragRight:"zoom",mouseWheel:"zoomStep"};h.PRO_TUMBLE={mouseClick:"select",mouseClickDouble:"clickStep",mouseDragLeft:"tumble",mouseDragMiddle:"pan",mouseDragRight:"zoom",mouseWheel:"zoomStep"};return h})},"esri/views/3d/webgl-engine/lib/Util":function(){define(["./gl-matrix"],
function(a){function l(a){this.message=a}var n=a.vec2d,m=a.vec3d,k=a.vec4d,g=a.mat4d,h=g.create(),e=[k.createFrom(-1,-1,-1,1),k.createFrom(1,-1,-1,1),k.createFrom(1,1,-1,1),k.createFrom(-1,1,-1,1),k.createFrom(-1,-1,1,1),k.createFrom(1,-1,1,1),k.createFrom(1,1,1,1),k.createFrom(-1,1,1,1)],d=k.create(),c=Array(8);for(a=0;8>a;++a)c[a]=m.create();var b=m.create(),s=m.create(),q=m.create(),v=m.create(),t=m.create(),u=m.create(),r=m.create(),w=m.create(),y=m.create(),f=m.create(),p=m.create(),x=m.create(),
z=m.create(),K=m.create();l.prototype.toString=function(){return"AssertException: "+this.message};var A={EARTH_RADIUS:6378137,METER2FEET:3.28084,ECCENTRICITY_SQUARED:0.0066943799901414,AssertException:l,VertexAttrConstants:{POSITION:"position",NORMAL:"normal",UV0:"uv0",AUXPOS1:"auxpos1",AUXPOS2:"auxpos2",COLOR:"color",SIZE:"size",REGION:"region"},assert:function(a,b){if(!a){var c=Error("dummy");c.stack&&console.log(c.stack);throw new l(b);}},verify:function(a,b){a||(console.log("Verify failed: "+
b),console.log(Error("dummy").stack))},createQuadVertexUvBuffer:function(a){a=a||Float32Array;a=new a(20);a[0]=-1;a[1]=-1;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=-1;a[7]=0;a[8]=1;a[9]=0;a[10]=-1;a[11]=1;a[12]=0;a[13]=0;a[14]=1;a[15]=1;a[16]=1;a[17]=0;a[18]=1;a[19]=1;return a},isPowerOfTwo:function(a){return 0===(a&a-1)},lerp:function(a,b,c){return a+(b-a)*c},clamp:function(a,b,c){return a<b?b:a>c?c:a},fallbackIfUndefined:function(a,b){return void 0===a?b:a},hex2rgb:function(a){a=Math.floor(a);return[(a>>
16&255)/255,(a>>8&255)/255,(a&255)/255]},rgb2hex:function(a){var b=A.clamp(Math.round(255*a[0]),0,255),c=A.clamp(Math.round(255*a[1]),0,255);a=A.clamp(Math.round(255*a[2]),0,255);return"0x"+((b<<16)+(c<<8)+a).toString(16)},dec2hex:function(a){a=a.toString(16);return"00000000".substr(0,8-a.length)+a},deg2rad:function(a){return a/180*Math.PI},rad2deg:function(a){return 180*a/Math.PI},azimuthElevationAngle2Direction:function(a,b){var c=1.5*Math.PI-a,f=0.5*Math.PI-b,d=Math.cos(c)*Math.sin(f),e=Math.cos(f),
c=Math.sin(c)*Math.sin(f);return[d,e,c]},rayPlane:function(a,b,c,f){var d=m.dot(c,b);if(0===d)return!1;c=-(m.dot(c,a)+c[3])/d;m.add(a,m.scale(b,c,f),f);return!0},raySphereClosestPositive:function(a,b,c,f){var d=m.dot(b,b),e=2*m.dot(b,a);c=m.dot(a,a)-c*c;c=e*e-4*d*c;if(0>c)return!1;var g=Math.sqrt(c);c=(-e-g)/(2*d);d=(-e+g)/(2*d);if(0>c||d<c&&0<d)c=d;return 0<c?(m.add(a,m.scale(b,c,f),f),!0):!1},rayTriangle3D:function(a,b,c,f,d,e,g,h,k){k||(k=m.create());var l=f[g]-c[e],p=f[g+1]-c[e+1],n=f[g+2]-c[e+
2];f=d[h]-c[e];g=d[h+1]-c[e+1];d=d[h+2]-c[e+2];var x=b[1]*d-g*b[2],q=b[2]*f-d*b[0],r=b[0]*g-f*b[1];h=l*x+p*q+n*r;if(-1E-5<h&&1E-5>h)return!1;h=1/h;var s=a[0]-c[e],t=a[1]-c[e+1];a=a[2]-c[e+2];k[1]=h*(s*x+t*q+a*r);if(0>k[1]||1<k[1])return!1;c=t*n-p*a;a=a*l-n*s;l=s*p-l*t;k[2]=h*(b[0]*c+b[1]*a+b[2]*l);if(0>k[2]||1<k[1]+k[2])return!1;k[0]=h*(f*c+g*a+d*l);return!0},rayBoxTest:function(a,b,c,f){var d,e=(c[0]-a[0])/b[0],g=(f[0]-a[0])/b[0];e>g&&(d=e,e=g,g=d);var h=(c[1]-a[1])/b[1],k=(f[1]-a[1])/b[1];h>k&&
(d=h,h=k,k=d);if(e>k||h>g)return!1;h>e&&(e=h);k<g&&(g=k);c=(c[2]-a[2])/b[2];a=(f[2]-a[2])/b[2];c>a&&(d=c,c=a,a=d);if(e>a||c>g)return!1;a<g&&(g=a);return 0>g?!1:!0},rayRay2D:function(a,b,c,f,d,e){e||(e=n.create());var g=(f[d]-c[d])*(b[0]-a[0])-(f[0]-c[0])*(b[d]-a[d]);if(0===g)return!1;c=((f[0]-c[0])*(a[d]-c[d])-(f[d]-c[d])*(a[0]-c[0]))/g;e[0]=a[0]+c*(b[0]-a[0]);e[1]=a[d]+c*(b[d]-a[d]);return!0},matrix2frustum:function(a,b,c){g.multiply(b,a,h);g.inverse(h);for(a=0;8>a;++a)g.multiplyVec4(h,e[a],d),m.set3(d[0]/
d[3],d[1]/d[3],d[2]/d[3],c[a])},matrix2frustumPlanes:function(a,b,f,d){void 0===d&&(d=f,f=c);A.matrix2frustum(a,b,f);A.point2plane(f[4],f[0],f[3],d[0]);A.point2plane(f[1],f[5],f[6],d[1]);A.point2plane(f[4],f[5],f[1],d[2]);A.point2plane(f[3],f[2],f[6],d[3]);A.point2plane(f[0],f[1],f[2],d[4]);A.point2plane(f[5],f[4],f[7],d[5])},point2plane:function(a,c,f,d){m.subtract(a,c,b);m.subtract(f,c,s);m.cross(s,b,d);m.normalize(d);d[3]=-m.dot(d,a)},project:function(a,b,c,f,e){e||(e=a);d[0]=a[0];d[1]=a[1];d[2]=
a[2];d[3]=1;g.multiplyVec4(b,d);2<e.length&&(e[2]=-d[2]);g.multiplyVec4(c,d);A.assert(0!==d[3]);e[0]=d[0]/d[3];e[1]=d[1]/d[3];e[2]=d[2]/d[3];e[0]=(0.5*e[0]+0.5)*f[2]+f[0];e[1]=(0.5*e[1]+0.5)*f[3]+f[1]},geodeticToGeocentricLatidude:function(a){return Math.atan((1-A.ECCENTRICITY_SQUARED)*Math.tan(a))},latLon2positionWGS84Ellipsoid:function(a,b,c,f){var d=6378137/Math.sqrt(1-A.ECCENTRICITY_SQUARED*Math.pow(Math.sin(a),2)),e=Math.cos(a);f[0]=(d+c)*Math.cos(b)*e;f[1]=(d*(1-A.ECCENTRICITY_SQUARED)+c)*Math.sin(a);
f[2]=-(d+c)*Math.sin(b)*e},pos2latLon:function(a,b){var c=m.length(a);b[0]=Math.asin(A.clamp(a[1]/c,-1,1));var f=Math.cos(b[0]);b[1]=(0>a[2]?1:-1)*Math.acos(A.clamp(a[0]/(f*c),-1,1));b[0]=A.rad2deg(b[0]);b[1]=A.rad2deg(b[1]);b[2]=c},pos2latLonWGS84Ellipsoid:function(a,b){var c=a[0],f=-a[2],d=a[1],e=Math.sqrt(Math.pow(6378137,2)*(1-A.ECCENTRICITY_SQUARED)),g=Math.sqrt((Math.pow(6378137,2)-Math.pow(e,2))/Math.pow(e,2)),h=Math.sqrt(Math.pow(c,2)+Math.pow(f,2)),k=Math.atan2(6378137*d,e*h),c=Math.atan2(f,
c),d=Math.atan2(d+Math.pow(g,2)*e*Math.pow(Math.sin(k),3),h-6378137*A.ECCENTRICITY_SQUARED*Math.pow(Math.cos(k),3)),e=6378137/Math.sqrt(1-A.ECCENTRICITY_SQUARED*Math.pow(Math.sin(d),2)),h=h/Math.cos(d)-e+A.EARTH_RADIUS;b[0]=d;b[1]=c;b[2]=h},computeGlobeTransformation:function(a,b,c){var f=A.deg2rad(a[0]);a=A.deg2rad(a[1]);A.latLon2position(f,a,q,b);g.translate(c,q);g.rotateY(c,0.5*Math.PI+a);g.rotateX(c,0.5*Math.PI-f);return c},readUInt16:function(a,b){return a[b]+(a[b+1]<<8)},readUInt32:function(a,
b){return a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24)},setIfDefined:function(a,b,c){void 0!==b[a]&&(c[a]=b[a])},array2object:function(a,b){var c={},f,d;if(void 0!==b){f=0;for(d=a.length;f<d;++f)c[b(a[f])]=a[f]}else{f=0;for(d=a.length;f<d;++f)c[a[f]]=a[f]}return c},object2array:function(a){var b=[],c;for(c in a)b.push(a[c]);return b},mergeObjects:function(a,b,c){void 0===c&&(c={});var f;if(c!==a)for(f in a)c[f]=a[f];if(c!==b)for(f in b)c[f]=b[f];return c},subtractObjects:function(a,b){var c={},f;for(f in a)void 0===
b[f]&&(c[f]=a[f]);return c},intersectObjects:function(a,b){var c={},f;for(f in a)void 0!==b[f]&&(c[f]=a[f]);return c},getFirstObjectKey:function(a){for(var b in a)return b},getFirstObjectValue:function(a){return a[A.getFirstObjectKey(a)]},objectEmpty:function(a){for(var b in a)return!1;return!0},arraysEqual:function(a,b){if(a.length!==b.length)return!1;for(var c=0,f=a.length;c<f;++c)if(a[c]!==b[c])return!1;return!0},byteBuffer2base64image:function(a,b,c,f,d){var e=4*b;A.assert(a.length===e*c,"buffer length must match image resolution");
var g=document.createElement("canvas");g.width=b;g.height=c;var h=g.getContext("2d");b=h.getImageData(0,0,b,c);for(var k=b.data,l=0;l<c;++l)for(var p=l*e,m=(c-1-l)*e,n=0;n<e;++n)k[p++]=a[m++];h.putImageData(b,0,0);return g.toDataURL(f,d)},cround:function(a){return Math.round(100*a)/100},logWithBase:function(a,b){return Math.log(a)/Math.log(b)},setMatrixTranslation:function(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2]},setMatrixTranslation3:function(a,b,c,f){a[12]=b;a[13]=c;a[14]=f},getMatrixTranslation:function(a,
b){b=b||m.create();b[0]=a[12];b[1]=a[13];b[2]=a[14];return b},createTranslationMatrix:function(a,b){a=g.identity(a);A.setMatrixTranslation(a,b);return a},fovx2fovy:function(a,b,c){return 2*Math.atan(c*Math.tan(0.5*a)/b)},fovy2fovx:function(a,b,c){return 2*Math.atan(b*Math.tan(0.5*a)/c)},fovx2fovd:function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(0.5*a)/b)},fovy2fovd:function(a,b,c){return 2*Math.atan(Math.sqrt(b*b+c*c)*Math.tan(0.5*a)/c)},fovd2fovx:function(a,b,c){return 2*Math.atan(b*
Math.tan(0.5*a)/Math.sqrt(b*b+c*c))},fovd2fovy:function(a,b,c){return 2*Math.atan(c*Math.tan(0.5*a)/Math.sqrt(b*b+c*c))},nextHighestPowerOfTwo:function(a){--a;for(var b=1;32>b;b<<=1)a|=a>>b;return a+1},resampleHermite:function(a,b,c,f,d,e,g){var h=b/d;c/=e;for(var k=Math.ceil(h/2),l=Math.ceil(c/2),p=0;p<e;p++)for(var m=0;m<d;m++){for(var n=4*(m+(g?e-p-1:p)*d),x=0,q=0,r=0,s=0,t=0,u=0,z=0,v=(p+0.5)*c,w=Math.floor(p*c);w<(p+1)*c;w++)for(var y=Math.abs(v-(w+0.5))/l,A=(m+0.5)*h,y=y*y,K=Math.floor(m*h);K<
(m+1)*h;K++){var ma=Math.abs(A-(K+0.5))/k,x=Math.sqrt(y+ma*ma);-1<=x&&1>=x&&(x=2*x*x*x-3*x*x+1,0<x&&(ma=4*(K+w*b),z+=x*a[ma+3],r+=x,255>a[ma+3]&&(x=x*a[ma+3]/250),s+=x*a[ma],t+=x*a[ma+1],u+=x*a[ma+2],q+=x))}f[n]=s/q;f[n+1]=t/q;f[n+2]=u/q;f[n+3]=z/r}},linelineDistance3D:function(a,b,c,f){var d,e,g;v[0]=a[0]-c[0];v[1]=a[1]-c[1];v[2]=a[2]-c[2];t[0]=f[0]-c[0];t[1]=f[1]-c[1];t[2]=f[2]-c[2];if(1E-4>Math.abs(t.x)&&1E-4>Math.abs(t.y)&&1E-4>Math.abs(t.z))return[!1];u[0]=b[0]-a[0];u[1]=b[1]-a[1];u[2]=b[2]-
a[2];if(1E-4>Math.abs(u.x)&&1E-4>Math.abs(u.y)&&1E-4>Math.abs(u.z))return[!1];b=v[0]*t[0]+v[1]*t[1]+v[2]*t[2];f=t[0]*u[0]+t[1]*u[1]+t[2]*u[2];d=v[0]*u[0]+v[1]*u[1]+v[2]*u[2];e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2];g=(u[0]*u[0]+u[1]*u[1]+u[2]*u[2])*e-f*f;if(1E-4>Math.abs(g))return[!1];d=(b*f-d*e)/g;b=(b+f*d)/e;r[0]=a[0]+d*u[0];r[1]=a[1]+d*u[1];r[2]=a[2]+d*u[2];w[0]=c[0]+b*t[0];w[1]=c[1]+b*t[1];w[2]=c[2]+b*t[2];return[!0,m.dist(r,w),r,w]},projectVectorVector2D:function(a,b,c){x[0]=b[0]-a[0];x[1]=b[1]-a[1];
x[2]=0;z[0]=c[0]-a[0];z[1]=c[1]-a[1];z[2]=0;K[0]=c[0];K[1]=c[1];K[2]=0;b=m.dot(z,x);c=m.length(x);b/=c*c;p[0]=x[0]*b;p[1]=x[1]*b;y[0]=a[0]+p[0];y[1]=a[1]+p[1];m.subtract(K,y,f);a=m.length(f);b=m.length(z);c=m.length(x);var d=m.length(p);if(d>b||d>c)a=Number.MAX_VALUE;return a}};A.performance=window.performance||{};A.performance.now=A.performance.now||A.performance.mozNow||A.performance.msNow||A.performance.oNow||A.performance.webkitNow||function(){return(new Date).getTime()};return A})},"esri/views/3d/webgl-engine/lib/gl-matrix":function(){define([],
function(){var a={};(function(a,n){n(a,!0);n(a,!1)})(a,function(a,n){var m={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),b=new Int32Array(a.buffer);m.invsqrt=function(c){a[0]=c;b[0]=1597463007-(b[0]>>1);var d=a[0];return d*(1.5-0.5*c*d*d)}}else m.invsqrt=function(a){return 1/Math.sqrt(a)}})();var k=Array;"undefined"!=typeof Float32Array&&(k=n?Float32Array:Array);var g={create:function(a){var b=new k(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,
b,c){var d=new k(3);d[0]=a;d[1]=b;d[2]=c;return d},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,d){d[0]=a;d[1]=b;d[2]=c;return d},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=
b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],
d=a[1],e=a[2],g=Math.sqrt(c*c+d*d+e*e);if(g){if(1===g)return b[0]=c,b[1]=d,b[2]=e,b}else return b[0]=0,b[1]=0,b[2]=0,b;g=1/g;b[0]=c*g;b[1]=d*g;b[2]=e*g;return b},cross:function(a,b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var g=b[0],h=b[1];b=b[2];c[0]=e*b-a*h;c[1]=a*g-d*b;c[2]=d*h-e*g;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,
b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(d*d+e*e+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=d*b;c[1]=e*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)},dist2:function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return c*c+d*d+e*e}},h=null,e=new k(4);g.unproject=function(a,b,c,d,g){g||(g=a);
h||(h=t.create());var k=h;e[0]=2*(a[0]-d[0])/d[2]-1;e[1]=2*(a[1]-d[1])/d[3]-1;e[2]=2*a[2]-1;e[3]=1;t.multiply(c,b,k);if(!t.inverse(k))return null;t.multiplyVec4(k,e);if(0===e[3])return null;g[0]=e[0]/e[3];g[1]=e[1]/e[3];g[2]=e[2]/e[3];return g};var d=g.createFrom(1,0,0),c=g.createFrom(0,1,0),b=g.createFrom(0,0,1);g.rotationTo=function(a,e,h){h||(h=u.create());var k=g.dot(a,e),l=g.create();if(1<=k)u.set(r,h);else if(-0.999999>k)g.cross(d,a,l),1E-6>l.length&&g.cross(c,a,l),1E-6>l.length&&g.cross(b,
a,l),g.normalize(l),u.fromAxisAngle(l,Math.PI,h);else{var k=Math.sqrt(2*(1+k)),m=1/k;g.cross(a,e,l);h[0]=l[0]*m;h[1]=l[1]*m;h[2]=l[2]*m;h[3]=0.5*k;u.normalize(h)}1<h[3]?h[3]=1:-1>h[3]&&(h[3]=-1);return h};var s=g.create(),q=g.create();g.project=function(a,b,c,d){d||(d=a);g.direction(b,c,s);g.subtract(a,b,q);a=g.dot(s,q);g.scale(s,a,d);g.add(d,b,d)};g.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var v={create:function(a){var b=new k(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],
b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,d,e,g,h,l,m){var n=new k(9);n[0]=a;n[1]=b;n[2]=c;n[3]=d;n[4]=e;n[5]=g;n[6]=h;n[7]=l;n[8]=m;return n},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],g=a[7],h=a[8];return a[0]*(h*c-d*g)+a[1]*(-h*b+d*e)+a[2]*(g*b-c*e)},inverse:function(a,b){var c=a[0],d=a[1],e=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7],n=a[8],q=n*h-k*m,r=-n*g+k*l,s=m*g-h*l,t=c*q+d*r+e*s;if(!t)return null;
t=1/t;b||(b=v.create());b[0]=q*t;b[1]=(-n*d+e*m)*t;b[2]=(k*d-e*h)*t;b[3]=r*t;b[4]=(n*c-e*l)*t;b[5]=(-k*c+e*g)*t;b[6]=s*t;b[7]=(-m*c+d*l)*t;b[8]=(h*c-d*g)*t;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2],h=a[3],k=a[4],l=a[5],m=a[6],n=a[7];a=a[8];var q=b[0],r=b[1],s=b[2],t=b[3],u=b[4],v=b[5],w=b[6],y=b[7];b=b[8];c[0]=q*d+r*h+s*m;c[1]=q*e+r*k+s*n;c[2]=q*g+r*l+s*a;c[3]=t*d+u*h+v*m;c[4]=t*e+u*k+v*n;c[5]=t*g+u*l+v*a;c[6]=w*d+y*h+b*m;c[7]=w*e+y*k+b*n;c[8]=w*g+y*l+b*a;return c},multiplyVec2:function(a,
b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[3]+a[6];c[1]=d*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=d*a[0]+e*a[3]+b*a[6];c[1]=d*a[1]+e*a[4]+b*a[7];c[2]=d*a[2]+e*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},identity:function(a){a||(a=v.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||
a===b){var c=a[1],d=a[2],e=a[5];a[1]=a[3];a[2]=a[6];a[3]=c;a[5]=a[7];a[6]=d;a[7]=e;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=t.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},
t={create:function(a){var b=new k(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],
b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,d,e,g,h,l,m,n,q,r,s,t,u,v){var w=new k(16);w[0]=a;w[1]=b;w[2]=c;w[3]=d;w[4]=e;w[5]=g;w[6]=h;w[7]=l;w[8]=m;w[9]=n;w[10]=q;w[11]=r;w[12]=s;w[13]=t;w[14]=u;w[15]=v;return w},createFromMatrixRowMajor:function(a){var b=new k(16);b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=
new k(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=
a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},identity:function(a){a||(a=t.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[3],g=a[6],h=a[7],k=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=c;a[6]=a[9];a[7]=a[13];a[8]=d;a[9]=g;a[11]=a[14];a[12]=e;a[13]=h;a[14]=k;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];
b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],h=a[5],k=a[6],l=a[7],m=a[8],n=a[9],q=a[10],r=a[11],s=a[12],t=a[13],u=a[14];a=a[15];return s*n*k*e-m*t*k*e-s*h*q*e+g*t*q*e+m*h*u*e-g*n*u*e-s*n*d*l+m*t*d*l+s*c*q*l-b*t*q*l-m*c*u*l+b*n*u*l+s*h*d*r-g*t*d*r-s*c*k*r+b*t*k*r+g*c*u*r-b*h*u*r-m*h*d*a+g*n*d*a+m*c*k*a-b*n*k*a-g*c*q*a+b*h*q*a},inverse:function(a,
b){b||(b=a);var c=a[0],d=a[1],e=a[2],g=a[3],h=a[4],k=a[5],l=a[6],m=a[7],n=a[8],q=a[9],r=a[10],s=a[11],t=a[12],u=a[13],v=a[14],w=a[15],y=c*k-d*h,N=c*l-e*h,H=c*m-g*h,O=d*l-e*k,Y=d*m-g*k,V=e*m-g*l,Z=n*u-q*t,aa=n*v-r*t,ba=n*w-s*t,ga=q*v-r*u,ja=q*w-s*u,la=r*w-s*v,ca=y*la-N*ja+H*ga+O*ba-Y*aa+V*Z;if(!ca)return null;ca=1/ca;b[0]=(k*la-l*ja+m*ga)*ca;b[1]=(-d*la+e*ja-g*ga)*ca;b[2]=(u*V-v*Y+w*O)*ca;b[3]=(-q*V+r*Y-s*O)*ca;b[4]=(-h*la+l*ba-m*aa)*ca;b[5]=(c*la-e*ba+g*aa)*ca;b[6]=(-t*V+v*H-w*N)*ca;b[7]=(n*V-r*H+
s*N)*ca;b[8]=(h*ja-k*ba+m*Z)*ca;b[9]=(-c*ja+d*ba-g*Z)*ca;b[10]=(t*Y-u*H+w*y)*ca;b[11]=(-n*Y+q*H-s*y)*ca;b[12]=(-h*ga+k*aa-l*Z)*ca;b[13]=(c*ga-d*aa+e*Z)*ca;b[14]=(-t*O+u*N-v*y)*ca;b[15]=(n*O-q*N+r*y)*ca;return b},toRotationMat:function(a,b){b||(b=t.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=v.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];
b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],d=a[1],e=a[2],g=a[4],h=a[5],k=a[6],l=a[8],m=a[9],n=a[10],q=n*h-k*m,r=-n*g+k*l,s=m*g-h*l,t=c*q+d*r+e*s;if(!t)return null;t=1/t;b||(b=v.create());b[0]=q*t;b[1]=(-n*d+e*m)*t;b[2]=(k*d-e*h)*t;b[3]=r*t;b[4]=(n*c-e*l)*t;b[5]=(-k*c+e*g)*t;b[6]=s*t;b[7]=(-m*c+d*l)*t;b[8]=(h*c-d*g)*t;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2],h=a[3],k=a[4],l=a[5],m=a[6],n=a[7],q=a[8],r=a[9],s=a[10],
t=a[11],u=a[12],v=a[13],w=a[14];a=a[15];var y=b[0],N=b[1],H=b[2],O=b[3],Y=b[4],V=b[5],Z=b[6],aa=b[7],ba=b[8],ga=b[9],ja=b[10],la=b[11],ca=b[12],ma=b[13],qa=b[14];b=b[15];c[0]=y*d+N*k+H*q+O*u;c[1]=y*e+N*l+H*r+O*v;c[2]=y*g+N*m+H*s+O*w;c[3]=y*h+N*n+H*t+O*a;c[4]=Y*d+V*k+Z*q+aa*u;c[5]=Y*e+V*l+Z*r+aa*v;c[6]=Y*g+V*m+Z*s+aa*w;c[7]=Y*h+V*n+Z*t+aa*a;c[8]=ba*d+ga*k+ja*q+la*u;c[9]=ba*e+ga*l+ja*r+la*v;c[10]=ba*g+ga*m+ja*s+la*w;c[11]=ba*h+ga*n+ja*t+la*a;c[12]=ca*d+ma*k+qa*q+b*u;c[13]=ca*e+ma*l+qa*r+b*v;c[14]=ca*
g+ma*m+qa*s+b*w;c[15]=ca*h+ma*n+qa*t+b*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];b=b[2];c[0]=a[0]*d+a[4]*e+a[8]*b+a[12];c[1]=a[1]*d+a[5]*e+a[9]*b+a[13];c[2]=a[2]*d+a[6]*e+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],e=b[1],g=b[2];b=b[3];c[0]=a[0]*d+a[4]*e+a[8]*g+a[12]*b;c[1]=a[1]*d+a[5]*e+a[9]*g+a[13]*b;c[2]=a[2]*d+a[6]*e+a[10]*g+a[14]*b;c[3]=a[3]*d+a[7]*e+a[11]*g+a[15]*b;return c},translate:function(a,b,c){var d=b[0],e=b[1];b=b[2];var g,h,k,l,
m,n,q,r,s,t,u,v;if(!c||a===c)return a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*e+a[10]*b+a[14],a[15]=a[3]*d+a[7]*e+a[11]*b+a[15],a;g=a[0];h=a[1];k=a[2];l=a[3];m=a[4];n=a[5];q=a[6];r=a[7];s=a[8];t=a[9];u=a[10];v=a[11];c[0]=g;c[1]=h;c[2]=k;c[3]=l;c[4]=m;c[5]=n;c[6]=q;c[7]=r;c[8]=s;c[9]=t;c[10]=u;c[11]=v;c[12]=g*d+m*e+s*b+a[12];c[13]=h*d+n*e+t*b+a[13];c[14]=k*d+q*e+u*b+a[14];c[15]=l*d+r*e+v*b+a[15];return c},scale:function(a,b,c){var d=b[0],e=b[1];b=b[2];if(!c||
a===c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*e;c[5]=a[5]*e;c[6]=a[6]*e;c[7]=a[7]*e;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){var b=Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),c=Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9]);a=Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*a[10]);return Math.max(Math.max(b,
c),a)},rotate:function(a,b,c,d){var e=c[0],g=c[1];c=c[2];var h=Math.sqrt(e*e+g*g+c*c),k,l,m,n,q,r,s,t,u,v,w,y,N,H,O,Y,V,Z,aa,ba;if(!h)return null;1!==h&&(h=1/h,e*=h,g*=h,c*=h);k=Math.sin(b);l=Math.cos(b);m=1-l;b=a[0];h=a[1];n=a[2];q=a[3];r=a[4];s=a[5];t=a[6];u=a[7];v=a[8];w=a[9];y=a[10];N=a[11];H=e*e*m+l;O=g*e*m+c*k;Y=c*e*m-g*k;V=e*g*m-c*k;Z=g*g*m+l;aa=c*g*m+e*k;ba=e*c*m+g*k;e=g*c*m-e*k;g=c*c*m+l;d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*H+r*O+v*Y;d[1]=h*H+s*O+w*Y;d[2]=
n*H+t*O+y*Y;d[3]=q*H+u*O+N*Y;d[4]=b*V+r*Z+v*aa;d[5]=h*V+s*Z+w*aa;d[6]=n*V+t*Z+y*aa;d[7]=q*V+u*Z+N*aa;d[8]=b*ba+r*e+v*g;d[9]=h*ba+s*e+w*g;d[10]=n*ba+t*e+y*g;d[11]=q*ba+u*e+N*g;return d},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],g=a[5],h=a[6],k=a[7],l=a[8],m=a[9],n=a[10],q=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=e*b+l*d;c[5]=g*b+m*d;c[6]=h*b+n*d;c[7]=k*b+q*d;c[8]=e*-d+l*b;c[9]=g*-d+m*b;c[10]=h*-d+n*b;
c[11]=k*-d+q*b;return c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],g=a[1],h=a[2],k=a[3],l=a[8],m=a[9],n=a[10],q=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+l*-d;c[1]=g*b+m*-d;c[2]=h*b+n*-d;c[3]=k*b+q*-d;c[8]=e*d+l*b;c[9]=g*d+m*b;c[10]=h*d+n*b;c[11]=k*d+q*b;return c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],g=a[1],h=a[2],k=a[3],l=a[4],m=a[5],n=a[6],q=a[7];c?a!==c&&(c[8]=a[8],
c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+l*d;c[1]=g*b+m*d;c[2]=h*b+n*d;c[3]=k*b+q*d;c[4]=e*-d+l*b;c[5]=g*-d+m*b;c[6]=h*-d+n*b;c[7]=k*-d+q*b;return c},frustum:function(a,b,c,d,e,g,h){h||(h=t.create());var k=b-a,l=d-c,m=g-e;h[0]=2*e/k;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*e/l;h[6]=0;h[7]=0;h[8]=(b+a)/k;h[9]=(d+c)/l;h[10]=-(g+e)/m;h[11]=-1;h[12]=0;h[13]=0;h[14]=-(2*g*e)/m;h[15]=0;return h},perspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);
b*=a;return t.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,g,h){h||(h=t.create());var k=b-a,l=d-c,m=g-e;h[0]=2/k;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2/l;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=-2/m;h[11]=0;h[12]=-(a+b)/k;h[13]=-(d+c)/l;h[14]=-(g+e)/m;h[15]=1;return h},lookAt:function(a,b,c,d){d||(d=t.create());var e,g,h,k,l,m,n,q,r=a[0],s=a[1];a=a[2];h=c[0];k=c[1];g=c[2];n=b[0];c=b[1];e=b[2];if(r===n&&s===c&&a===e)return t.identity(d);b=r-n;c=s-c;n=a-e;q=1/Math.sqrt(b*b+c*c+n*n);b*=q;c*=q;n*=q;e=k*n-
g*c;g=g*b-h*n;h=h*c-k*b;(q=Math.sqrt(e*e+g*g+h*h))?(q=1/q,e*=q,g*=q,h*=q):h=g=e=0;k=c*h-n*g;l=n*e-b*h;m=b*g-c*e;(q=Math.sqrt(k*k+l*l+m*m))?(q=1/q,k*=q,l*=q,m*=q):m=l=k=0;d[0]=e;d[1]=k;d[2]=b;d[3]=0;d[4]=g;d[5]=l;d[6]=c;d[7]=0;d[8]=h;d[9]=m;d[10]=n;d[11]=0;d[12]=-(e*r+g*s+h*a);d[13]=-(k*r+l*s+m*a);d[14]=-(b*r+c*s+n*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=t.create());var d=a[0],e=a[1],g=a[2],h=a[3],k=d+d,l=e+e,m=g+g;a=d*k;var n=d*l,d=d*m,q=e*l,e=e*m,g=g*m,k=h*k,l=h*l,h=h*
m;c[0]=1-(q+g);c[1]=n+h;c[2]=d-l;c[3]=0;c[4]=n-h;c[5]=1-(a+g);c[6]=e+k;c[7]=0;c[8]=d+l;c[9]=e-k;c[10]=1-(a+q);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},u={create:function(a){var b=new k(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,
d){var e=new k(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=u.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},r=u.identity();u.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e));return b};u.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};u.inverse=function(a,b){var c=
a[0],d=a[1],e=a[2],g=a[3],c=(c=c*c+d*d+e*e+g*g)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};u.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};u.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)};u.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],g=a[3],h=Math.sqrt(c*c+d*d+e*e+g*g);if(0===h)return b[0]=
0,b[1]=0,b[2]=0,b[3]=0,b;h=1/h;b[0]=c*h;b[1]=d*h;b[2]=e*h;b[3]=g*h;return b};u.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};u.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];var h=b[0],k=b[1],l=b[2];b=b[3];c[0]=d*b+a*h+e*l-g*k;c[1]=e*b+a*k+g*h-d*l;c[2]=g*b+a*l+d*k-e*h;c[3]=a*b-d*h-e*k-g*l;return c};u.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],g=b[2];b=a[0];
var h=a[1],k=a[2];a=a[3];var l=a*d+h*g-k*e,m=a*e+k*d-b*g,n=a*g+b*e-h*d,d=-b*d-h*e-k*g;c[0]=l*a+d*-b+m*-k-n*-h;c[1]=m*a+d*-h+n*-b-l*-k;c[2]=n*a+d*-k+l*-h-m*-b;return c};u.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};u.toMat3=function(a,b){b||(b=v.create());var c=a[0],d=a[1],e=a[2],g=a[3],h=c+c,k=d+d,l=e+e,m=c*h,n=c*k,c=c*l,q=d*k,d=d*l,e=e*l,h=g*h,k=g*k,g=g*l;b[0]=1-(q+e);b[1]=n+g;b[2]=c-k;b[3]=n-g;b[4]=1-(m+e);
b[5]=d+h;b[6]=c+k;b[7]=d-h;b[8]=1-(m+q);return b};u.toMat4=function(a,b){b||(b=t.create());var c=a[0],d=a[1],e=a[2],g=a[3],h=c+c,k=d+d,l=e+e,m=c*h,n=c*k,c=c*l,q=d*k,d=d*l,e=e*l,h=g*h,k=g*k,g=g*l;b[0]=1-(q+e);b[1]=n+g;b[2]=c-k;b[3]=0;b[4]=n-g;b[5]=1-(m+e);b[6]=d+h;b[7]=0;b[8]=c+k;b[9]=d-h;b[10]=1-(m+q);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};u.slerp=function(a,b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],g,h;if(1<=Math.abs(e))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],
d[3]=a[3]),d;g=Math.acos(e);h=Math.sqrt(1-e*e);if(0.0010>Math.abs(h))return d[0]=0.5*a[0]+0.5*b[0],d[1]=0.5*a[1]+0.5*b[1],d[2]=0.5*a[2]+0.5*b[2],d[3]=0.5*a[3]+0.5*b[3],d;e=Math.sin((1-c)*g)/h;c=Math.sin(c*g)/h;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};u.fromRotationMatrix=function(a,b){b||(b=u.create());var c=a[0]+a[4]+a[8],d;if(0<c)d=Math.sqrt(c+1),b[3]=0.5*d,d=0.5/d,b[0]=(a[7]-a[5])*d,b[1]=(a[2]-a[6])*d,b[2]=(a[3]-a[1])*d;else{d=u.fromRotationMatrix.s_iNext=
u.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var e=d[c],g=d[e];d=Math.sqrt(a[3*c+c]-a[3*e+e]-a[3*g+g]+1);b[c]=0.5*d;d=0.5/d;b[3]=(a[3*g+e]-a[3*e+g])*d;b[e]=(a[3*e+c]+a[3*c+e])*d;b[g]=(a[3*g+c]+a[3*c+g])*d}return b};v.toQuat4=u.fromRotationMatrix;(function(){var a=v.create();u.fromAxes=function(b,c,d,e){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return u.fromRotationMatrix(a,e)}})();u.identity=function(a){a||(a=u.create());
a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};u.fromAngleAxis=function(a,b,c){c||(c=u.create());a*=0.5;var d=Math.sin(a);c[3]=Math.cos(a);c[0]=d*b[0];c[1]=d*b[1];c[2]=d*b[2];return c};u.toAngleAxis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<c?(b[3]=2*Math.acos(a[3]),c=m.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0);return b};u.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var w={create:function(a){var b=new k(4);a?(b[0]=a[0],b[1]=a[1],
b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,d){var e=new k(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},identity:function(a){a||(a=w.create());a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b){var c=a[1];a[1]=a[2];a[2]=c;return a}b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=
a[1],e=a[2],g=a[3],h=c*g-e*d;if(!h)return null;h=1/h;b[0]=g*h;b[1]=-d*h;b[2]=-e*h;b[3]=c*h;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];c[0]=d*b[0]+e*b[2];c[1]=d*b[1]+e*b[3];c[2]=g*b[0]+a*b[2];c[3]=g*b[1]+a*b[3];return c},rotate:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];var h=Math.sin(b);b=Math.cos(b);c[0]=d*b+e*h;c[1]=d*-h+e*b;c[2]=g*b+a*h;c[3]=g*-h+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[1];c[1]=d*a[2]+b*
a[3];return c},scale:function(a,b,c){c||(c=a);var d=a[1],e=a[2],g=a[3],h=b[0];b=b[1];c[0]=a[0]*h;c[1]=d*b;c[2]=e*h;c[3]=g*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}},y=n?"":"d";a["glMath"+y]=m;a["vec2"+y]={create:function(a){var b=new k(2);a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new k(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-
b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},dist2:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return c*c+d*d},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},negate:function(a,b){b||(b=a);
b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*b;c[1]=a*b;return c},
lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+"]"}};a["vec3"+y]=g;a["vec4"+y]={create:function(a){var b=new k(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,d){var e=new k(4);e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,b,c){c||(c=b);c[0]=
a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set4:function(a,
b,c,d,e){e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};a["mat2"+y]=w;a["mat3"+y]=v;a["mat4"+y]=t;a["quat4"+y]=u});return a})},"esri/views/3d/navigation/NavigationConstants":function(){define([],function(){return{Pan:{Direction:{LEFT:1,
RIGHT:2,FORWARD:4,BACKWARD:8,UP:16,DOWN:32},Mode:{HORIZONTAL:0,VERTICAL:1},Momentum:{DURATION_SHORT:1,DURATION_LONG:3,DURATION_LONG_VEL:8,INPUT_FILTER:0.2,BUFFER_SIZE:5},Vertical:{ELEVATION_THRESHOLD:3E4,ANGLE_THRESHOLD:8/180*Math.PI}},Rotate:{PivotPoint:{POI:1,EYE:2}}}})},"esri/widgets/Zoom":function(){define("../core/sniff ../core/watchUtils ./support/viewModelWiring ./Widget ./Zoom/ZoomViewModel dijit/_TemplatedMixin dijit/a11yclick dojo/dom dojo/dom-class dojo/dom-attr dojo/on dojo/i18n!./Zoom/nls/Zoom dojo/text!./Zoom/templates/Zoom.html".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q){var v={base:"esri-zoom",button:"esri-button esri-widget-button",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon",isLayoutHorizontal:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus"};return m.createSubclass([g],{declaredClass:"esri.widgets.Zoom",baseClass:v.base,templateString:q,constructor:function(){this._handleZoomOutClick=this._handleZoomOutClick.bind(this);this._handleZoomInClick=
this._handleZoomInClick.bind(this);this._handleStateChange=this._handleStateChange.bind(this);this._handleZoomInChange=this._handleZoomInChange.bind(this);this._handleZoomOutChange=this._handleZoomOutChange.bind(this)},postCreate:function(){this.inherited(arguments);a("css-user-select")||e.setSelectable(this.domNode,!1);this.own(b(this._zoomInNode,h,this._handleZoomInClick),b(this._zoomOutNode,h,this._handleZoomOutClick),l.init(this.viewModel,"state",this._handleStateChange),l.init(this.viewModel,
"canZoomIn",this._handleZoomInChange),l.init(this.viewModel,"canZoomOut",this._handleZoomOutChange))},_css:v,_i18n:s,properties:{layout:{value:"vertical",set:function(a){"horizontal"!==a&&(a="vertical");d.toggle(this.domNode,v.isLayoutHorizontal,"horizontal"===a);this._set("layout",a)}},view:{aliasOf:"viewModel.view"},viewModel:{type:k}},zoomIn:n.createMethodDelegate("zoomIn"),zoomOut:n.createMethodDelegate("zoomOut"),_handleStateChange:function(a){(a="ready"===a)?(c.set(this._zoomInNode,"tabindex",
0),c.set(this._zoomOutNode,"tabindex",0),d.add(this._zoomInNode,v.interactive),d.add(this._zoomOutNode,v.interactive)):(c.remove(this._zoomInNode,"tabindex"),c.remove(this._zoomOutNode,"tabindex"),d.remove(this._zoomInNode,v.interactive),d.remove(this._zoomOutNode,v.interactive));d.toggle(this.domNode,v.disabled,!a)},_handleZoomInChange:function(a){d.toggle(this._zoomInNode,v.disabled,!a);d.toggle(this._zoomInNode,v.interactive,a)},_handleZoomOutChange:function(a){d.toggle(this._zoomOutNode,v.disabled,
!a);d.toggle(this._zoomOutNode,v.interactive,a)},_handleZoomInClick:function(){this.viewModel.zoomIn()},_handleZoomOutClick:function(){this.viewModel.zoomOut()}})})},"esri/widgets/Zoom/ZoomViewModel":function(){define(["../../core/Accessor"],function(a){return a.createSubclass({properties:{state:{dependsOn:["view.ready"],readOnly:!0},canZoomIn:{dependsOn:["view.ready","view.scale"],readOnly:!0},canZoomOut:{dependsOn:["view.ready","view.scale"],readOnly:!0},view:{}},declaredClass:"esri.widgets.Zoom.ZoomViewModel",
constructor:function(){this.zoomIn=this.zoomIn.bind(this);this.zoomOut=this.zoomOut.bind(this)},state:"disabled",_stateGetter:function(){return this.get("view.ready")?"ready":"disabled"},view:null,_canZoomInGetter:function(){if("2d"!==this.get("view.type"))return!0;var a=this.get("view.scale"),n=this.get("view.constraints.effectiveMaxScale");return 0===n||a>n},_canZoomOutGetter:function(){if("2d"!==this.get("view.type"))return!0;var a=this.get("view.scale"),n=this.get("view.constraints.effectiveMinScale");
return 0===n||a<n},zoomIn:function(){this.canZoomIn&&this._zoomToFactor(0.5)},zoomOut:function(){this.canZoomOut&&this._zoomToFactor(2)},_zoomToFactor:function(a){"ready"===this.state&&this.view.goTo({scale:this.get("view.scale")*a})}})})},"esri/views/ui/Component":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ../../core/Accessor dojo/dom dojo/dom-class".split(" "),function(a,l,n,m,k,g,h,e){return function(a){function c(){a.apply(this,
arguments);this.widget=null}n(c,a);c.prototype.destroy=function(){this.widget&&this.widget.destroy();this.node=null};Object.defineProperty(c.prototype,"id",{get:function(){return this._get("id")||this.get("node.id")},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"node",{set:function(a){var c=this._get("node");if(a!==c){var d;a&&a.domNode?(d=a.domNode,this._set("widget",a)):(d=h.byId(a),this._set("widget",null));d&&e.add(d,"esri-component");c&&e.remove(c,"esri-component");this._set("node",
d)}},enumerable:!0,configurable:!0});m([k.property()],c.prototype,"id",null);m([k.property()],c.prototype,"node",null);m([k.property({readOnly:!0})],c.prototype,"widget",void 0);return c=m([k.subclass("esri.views.ui.Component")],c)}(k.declared(g))})},"esri/views/ui/UI":function(){define("../../core/Accessor ../../core/HandleRegistry ../../core/watchUtils ./Component dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),function(a,l,n,m,k,g,h,e){var d={left:0,top:0,bottom:0,
right:0},c={bottom:30,top:15,right:15,left:15};return a.createSubclass({properties:{container:{},height:{readOnly:!0,dependsOn:["view.height"]},padding:{},view:{},width:{readOnly:!0,dependsOn:["view.width"]}},declaredClass:"esri.views.ui.UI",constructor:function(){this._components=[];this._handles=new l;this._initContainers()},getDefaults:function(){return k.mixin(this.inherited(arguments),{padding:c})},initialize:function(){this._handles.add(n.init(this,"view.padding, container",this._applyViewPadding.bind(this)),
n.init(this,"padding",this._applyUIPadding.bind(this)))},destroy:function(){this.container=null;this._components.forEach(function(a){a.destroy()});this._components.length=0;this._handles.destroy()},_cornerNameToContainerLookup:null,_positionNameToContainerLookup:null,_components:null,_handles:null,container:null,_containerSetter:function(a){var c=this._get("container");a!==c&&(a&&(g.add(a,"esri-ui"),this._attachContainers(a)),c&&(g.remove(c,"esri-ui"),e.set(c,{top:"",bottom:"",left:"",right:""}),
h.empty(c)),this._set("container",a))},_heightGetter:function(){var a=this.get("view.height")||0;if(0===a)return a;var c=this._getViewPadding();return Math.max(a-(c.top+c.bottom),0)},_paddingSetter:function(a){"number"===typeof a?this._set("padding",{bottom:a,top:a,right:a,left:a}):this._set("padding",k.mixin({},c,a))},view:null,_widthGetter:function(){var a=this.get("view.width")||0;if(0===a)return a;var c=this._getViewPadding();return Math.max(a-(c.left+c.right),0)},add:function(a,c){var d;if(Array.isArray(a))a.forEach(function(a){this.add(a,
c)},this);else if(c&&"object"===typeof c&&(d=c.index,c=c.position),a&&(!c||this._isValidPosition(c))){if(!a.isInstanceOf||!a.isInstanceOf(m))a=new m({node:a});this._place({component:a,position:c,index:d});this._components.push(a)}},remove:function(a){if(a){if(Array.isArray(a))return a.map(this.remove,this);if(a=this.find(a)){var c=this._components.indexOf(a);a.node.parentNode&&a.node.parentNode.removeChild(a.node);return this._components.splice(c,1)[0]}}},empty:function(a){if(Array.isArray(a))return a.map(function(a){return this.empty(a).reduce(function(a,
b){return a.concat(b)})},this);a=a||"manual";if("manual"===a)return Array.prototype.slice.call(this._manualContainer.children).filter(function(a){return!g.contains(a,"esri-ui-corner")},this).map(this.remove,this);if(this._isValidPosition(a))return Array.prototype.slice.call(this._cornerNameToContainerLookup[a].children).map(this.remove,this)},move:function(a,c){if(!c||this._isValidPosition(c)){var d=this.remove(a);d&&this.add(d,c)}},find:function(a){return!a?null:a.isInstanceOf&&a.isInstanceOf(m)?
this._findByComponent(a):"string"===typeof a?this._findById(a):this._findByNode(a.domNode||a)},_getViewPadding:function(){return this.get("view.padding")||d},_attachContainers:function(a){h.place(this._innerContainer,a);h.place(this._manualContainer,a)},_initContainers:function(){var a=h.create("div",{className:"esri-ui-inner-container esri-ui-corner-container"}),c=h.create("div",{className:"esri-ui-inner-container esri-ui-manual-container"}),d,e,g,l;d=h.create("div",{className:"esri-ui-top-left esri-ui-corner"},
a);e=h.create("div",{className:"esri-ui-top-right esri-ui-corner"},a);g=h.create("div",{className:"esri-ui-bottom-left esri-ui-corner"},a);l=h.create("div",{className:"esri-ui-bottom-right esri-ui-corner"},a);this._innerContainer=a;this._manualContainer=c;this._cornerNameToContainerLookup={"top-left":d,"top-right":e,"bottom-left":g,"bottom-right":l};this._positionNameToContainerLookup=k.mixin({manual:c},this._cornerNameToContainerLookup)},_isValidPosition:function(a){return!!this._positionNameToContainerLookup[a]},
_place:function(a){var c=a.component,d=a.position||"manual";a=a.index;var e=this._positionNameToContainerLookup[d],d="bottom-right"===d,g,h;-1<a?(g=e.children,0===a?this._placeComponent(c,e,d?"last":"first"):(h=a>=g.length)?this._placeComponent(c,e,d?"first":"last"):(a=d?g.length-1-a:a,a=g[a],this._placeComponent(c,a,d?"after":"before"))):this._placeComponent(c,e,d?"first":"last")},_placeComponent:function(a,c,d){a.widget?(a.widget.placeAt(c,d),a.widget.startup()):h.place(a.node,c,d)},_applyViewPadding:function(){var a=
this.container;a&&e.set(a,this._toPxPosition(this._getViewPadding()))},_applyUIPadding:function(){this._innerContainer&&e.set(this._innerContainer,this._toPxPosition(this.padding))},_toPxPosition:function(a){return{top:this._toPxUnit(a.top),left:this._toPxUnit(a.left),right:this._toPxUnit(a.right),bottom:this._toPxUnit(a.bottom)}},_toPxUnit:function(a){return 0===a?0:a+"px"},_findByComponent:function(a){var c=null,d;this._components.some(function(e){(d=e===a)&&(c=e);return d});return c},_findById:function(a){var c=
null,d;this._components.some(function(e){(d=e.id===a)&&(c=e);return d});return c},_findByNode:function(a){var c=null,d;this._components.some(function(e){(d=e.node===a)&&(c=e);return d});return c}})})},"esri/views/support/DefaultsFromMap":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators dojo/_base/lang ../../core/Accessor ../../core/watchUtils ../../core/HandleRegistry".split(" "),function(a,l,n,m,
k,g,h,e,d){return function(a){function b(e){a.call(this);this.isDone=!1;this.extent=this.spatialReference=null;this.mapCollectionPaths=b.DefaultMapCollectionPaths.slice();this._handles=new d;this._waitTask=null;this._isStarted=!1}n(b,a);b.prototype.normalizeCtorArgs=function(a){a=g.mixin({},a);this._set("view",a.view);delete a.view;return a};b.prototype.initialize=function(){var a=this;this.watch("mapCollectionPaths",function(){a._isStarted&&(a.reset(),a.start())})};b.prototype.destroy=function(){this._handles&&
(this._handles.destroy(),this._handles=null,this._isStarted=!1);this._cancelLoading()};b.prototype.reset=function(){this._handles.removeAll();this._isStarted=!1;this._set("spatialReference",null);this._set("extent",null);this._set("isDone",!1)};b.prototype.start=function(){this._handles.removeAll();this._isStarted=!0;for(var a=this._updateLayerChange.bind(this),b=0;b<this.mapCollectionPaths.length;b++)this._handles.add(e.on(this.view,"map."+this.mapCollectionPaths[b],"change",a,a,a))};b.prototype.supportedSpatialReferenceForLayer=
function(a){if(a.spatialReference&&this.view.isSpatialReferenceSupported(a.spatialReference,a))return a.spatialReference};b.prototype._ownerNameFromCollectionName=function(a){var b=a.lastIndexOf(".");return-1===b?"view":"view."+a.slice(0,b)};b.prototype._ensureLoadedOwnersFromCollectionName=function(a){a=this._ownerNameFromCollectionName(a).split(".");for(var b,c=0;c<a.length;c++){b=this.get(a.slice(0,c+1).join("."));if(!b)break;if(b.load&&!b.isFulfilled())return{owner:null,loading:b.load()}}return{owner:b}};
b.prototype._cancelLoading=function(){this._waitTask=null};b.prototype._updateWhen=function(a){var b=this,c=!0,d=!1,e=a.always(function(){c?d=!0:e===b._waitTask&&b._update()}),c=!1;d||(this._waitTask=e);return d};b.prototype._updateLayerChange=function(){this.spatialReference||this.isDone&&this._set("isDone",!1);this._update()};b.prototype._update=function(){this._cancelLoading();if(!this.isDone){for(var a=!1,b=0;b<this.mapCollectionPaths.length;b++){var c="map."+this.mapCollectionPaths[b],d=this._ensureLoadedOwnersFromCollectionName(c);
if(d.loading&&!this._updateWhen(d.loading)){a=!0;break}if((d=d.owner)&&(!d.isRejected||!d.isRejected()))if((c=this.view.get(c))&&this._processSpatialReferenceSources(c)){a=!0;break}}a||this._set("isDone",!0);this.isDone&&!this.spatialReference&&this.defaultSpatialReference&&this._set("spatialReference",this.defaultSpatialReference)}};b.prototype._processSpatialReferenceSources=function(a){for(var b=0;b<a.length;b++){var c=a.getItemAt(b);if(c.load&&!c.isFulfilled()&&!this._updateWhen(c.load()))return!0;
if(!c.load||c.isResolved()){var d=c.fullExtent,e=this.supportedSpatialReferenceForLayer(c);(e||!this.extent)&&d&&this._set("extent",d);if(e)return this._set("spatialReference",e),this._set("isDone",!0),!0;if(c.layers&&this._processSpatialReferenceSources(c.layers))return!0}}return!1};b.DefaultMapCollectionPaths=["basemap.baseLayers","layers","ground.layers","basemap.referenceLayers"];m([k.property({readOnly:!0})],b.prototype,"isDone",void 0);m([k.property({readOnly:!0})],b.prototype,"view",void 0);
m([k.property({readOnly:!0})],b.prototype,"spatialReference",void 0);m([k.property({readOnly:!0})],b.prototype,"extent",void 0);m([k.property()],b.prototype,"mapCollectionPaths",void 0);m([k.property()],b.prototype,"defaultSpatialReference",void 0);return b=m([k.subclass("esri.views.support.DefaultsFromMap")],b)}(k.declared(h))})},"esri/widgets/Popup":function(){define("./support/viewModelWiring ./Widget ./Popup/PopupViewModel ../core/HandleRegistry ../core/watchUtils ../views/2d/viewpointUtils dijit/a11yclick dijit/_TemplatedMixin dojo/keys dojo/on dojo/query dojo/Deferred dojo/i18n!./Popup/nls/Popup dojo/text!./Popup/templates/Popup.html ../core/lang dojo/_base/lang dojo/dom-class dojo/dom-attr dojo/dom-construct dojo/dom-geometry dojo/dom-style ./Popup/PopupRenderer ./Popup/PopupRendererViewModel ./Spinner ./Message require".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v,t,u,r,w,y,f,p,x,z,K,A,E){var L=E.toUrl("./Popup/images/default-action.svg"),B={hidden:"esri-hidden",invisible:"esri-invisible",iconText:"esri-icon-font-fallback-text",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",
iconPaginationMenu:"esri-icon-layer-list",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-rotating esri-icon-loading-indicator",iconZoom:"esri-icon-zoom-in-magnifying-glass",base:"esri-popup",container:"esri-popup__size-container",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",shadow:"esri-popup--shadow",showDock:"esri-popup--dock-button-visible",showContent:"esri-popup--content-visible",showFooter:"esri-popup--footer-visible",showTitle:"esri-popup--title-visible",
showPagination:"esri-popup--pagination-visible",hasPopupRenderer:"esri-popup--has-popup-renderer",hasPromiseFeatures:"esri-popup--has-promise-features",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",
canDockToLeft:"esri-popup--can-dock-to-left",canDockToRight:"esri-popup--can-dock-to-right",canDockToTop:"esri-popup--can-dock-to-top",canDockToBottom:"esri-popup--can-dock-to-bottom",hasPaginationMenuOpen:"esri-popup--feature-menu-open",alignTop:"esri-popup--top-aligned",alignBottom:"esri-popup--bottom-aligned",alignLeft:"esri-popup--left-aligned",alignRight:"esri-popup--right-aligned",hasPendingPromises:"esri-popup--has-pending-promises",isPendingPromisesResult:"esri-popup--is-pending-promises-result",
hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",button:"esri-popup__button",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",pointer:"esri-popup__pointer",
pointerDirection:"esri-popup__pointer-direction",pagination:"esri-popup__pagination",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",paginationText:"esri-popup__pagination-page-text",paginationDocked:"esri-popup__pagination-docked",
paginationDockedButtons:"esri-popup__pagination-docked-buttons",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title"},
I={auto:"auto",topLeft:"top-left",topCenter:"top-center",topRight:"top-right",bottomLeft:"bottom-left",bottomCenter:"bottom-center",bottomRight:"bottom-right"},U={buttonEnabled:!0,position:I.auto,breakpoint:{width:544}},S={popupRenderer:"popup-renderer",acions:"actions",actionsChange:"actions-change",paginationTitles:"pagination-titles",view:"view"};return l.createSubclass([e],{declaredClass:"esri.widgets.Popup",baseClass:B.base,templateString:v,constructor:function(){this._handleRegistry=new m;this._contentStorage=
y.create("div")},postCreate:function(){var b=this;this.inherited(arguments);var d=this.viewModel;this.own(k.whenTrue(d,"view.ready",function(){this._wireUpView(this.viewModel.view)}.bind(this)),k.init(d,"pendingPromisesCount,featureCount,promises,location",function(){var a=this.viewModel;this._displayPendingFeaturesStatus(a.pendingPromisesCount,a.featureCount,a.promises,a.location)}.bind(this)),k.init(d,"features",this._updateFeatures.bind(this)),k.init(d,"selectedFeatureIndex,selectedFeature",function(){var a=
this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateActions(a.actions,a.features,a.selectedFeature);this._updatePageText(a.features,a.selectedFeatureIndex);this._createPaginationNodes(a.features,a.selectedFeatureIndex);this._bodyContentNode.scrollTop=0}.bind(this)),k.init(d,"title",function(a){this._updateTitle(a);this.reposition()}.bind(this)),k.init(d,"actions",function(a){var b=this.viewModel;this._updateActions(a,b.features,b.selectedFeature);this._actionChangeListener(a)}.bind(this)),
k.init(d,"content",function(a){this._updateContent(a);this.reposition()}.bind(this)),k.init(d,"location",function(a){this._togglePopupLocationRepositioning(this.visible);this.reposition()}.bind(this)),c(this._dockNode,h,this._toggleDock.bind(this)),c(this._closeNode,h,this.close.bind(this)),c(this._previousNode,h,d.previous.bind(d)),c(this._previousDockedNode,h,d.previous.bind(d)),c(this._nextNode,h,d.next.bind(d)),c(this._nextDockedNode,h,d.next.bind(d)),c(this._pageMenuNode,h,this._togglePageMenu.bind(this)),
c(this._pageMenuDockedNode,h,this._togglePageMenu.bind(this)),c(this._pageMenuInfoNode,h,this._togglePageMenu.bind(this)),c(this._paginationNode,c.selector("li",h),function(){b._selectFeature(this)}),c(this._paginationNode,c.selector("li","keyup"),function(a){b._keyupFeature(a,this)}),c(this._actionsNode,c.selector("[data-action-index]",h),function(){b._actionEvent(this)}),c(d,"trigger-action",function(a){a.action&&"zoom-to"===a.action.id&&this.viewModel.zoomToLocation()}.bind(this)));a.setUpEventDelegates(this,
"trigger-action")},destroy:function(){this._destroyPopupRendererVMs();this._destroyMessage();this._destroySpinner();this._destroyPopupRenderer();this._handleRegistry.destroy();this._handleRegistry=null},properties:{actions:{aliasOf:"viewModel.actions"},alignment:{value:"top",set:function(a){this._set("alignment",a);this.reposition()}},autoPanEnabled:!0,content:{aliasOf:"viewModel.content"},closeOnViewChangeEnabled:!1,currentDockPosition:{readOnly:!0,value:null},dockOptions:{value:U,set:function(a){var b=
u.clone(U),c=this.viewModel.get("view.breakpoints"),d={};c&&(d.width=c.xsmall,d.height=c.xsmall);a=u.mixin({},b,a);b=u.mixin({},b.breakpoint,d);!0===a.breakpoint?a.breakpoint=b:"object"===typeof a.breakpoint&&(a.breakpoint=u.mixin({},b,a.breakpoint));this._set("dockOptions",a);this._toggleDockButton(a)}},dockEnabled:{value:!1,set:function(a){this._set("dockEnabled",a);this._togglePopupDocking(a);this._togglePopupLocationRepositioning(this.visible);this.reposition()}},featureCount:{aliasOf:"viewModel.featureCount"},
features:{aliasOf:"viewModel.features"},location:{aliasOf:"viewModel.location"},messageEnabled:{value:!0,set:function(a){this._set("messageEnabled",a);this._createMessage(a,this.viewModel.view)}},paginationEnabled:{value:!0,set:function(a){var b=this.viewModel;this._set("paginationEnabled",a);this._updatePagination(b.features,b.selectedFeatureIndex);this._updateFooterVisibility(b.features,b.actions);this.reposition()}},promises:{aliasOf:"viewModel.promises"},selectedFeature:{aliasOf:"viewModel.selectedFeature"},
selectedFeatureIndex:{aliasOf:"viewModel.selectedFeatureIndex"},spinnerEnabled:{value:!0,set:function(a){this._set("spinnerEnabled",a);this._createSpinner(a,this.viewModel.view)}},title:{aliasOf:"viewModel.title"},view:{aliasOf:"viewModel.view"},viewModel:{type:n},visible:{value:!1,set:function(a){this._set("visible",a);r.remove(this._containerNode,B.hasPaginationMenuOpen);r.toggle(this.domNode,B.invisible,!a);this._togglePopupLocationRepositioning(a);this._toggleContentVisibility(a);this.reposition()}}},
_css:B,_i18n:q,_hideActionsTextNum:3,_animationDelay:10,_popupRendererVMs:[],clear:a.createMethodDelegate("clear"),close:function(){this.set("visible",!1)},next:a.createMethodDelegate("next"),previous:a.createMethodDelegate("previous"),reposition:function(){this._positionPopup();return this._moveIntoView()},open:function(a){a=u.mixin({updateLocationEnabled:!1},a);this.viewModel.set(a);this.set("visible",!0)},triggerAction:a.createMethodDelegate("triggerAction"),_actionChangeListener:function(a){this._handleRegistry.remove(S.actionsChange);
a&&this._handleRegistry.add([a.on("change",function(){var a=this.viewModel;this._updateActions(a.actions,a.features,a.selectedFeature)}.bind(this))],S.actionsChange)},_actionEvent:function(a){var b=this.viewModel;if(a=w.get(a,"data-action-index"))a=parseInt(a,10),b.triggerAction(a)},_addContent:function(){var a=this.viewModel;this._updateSelectedFeature(a.selectedFeature);this._updateContent(a.content);this._updateTitle(a.title);this._updatePageText(a.features,a.selectedFeatureIndex)},_updateActions:function(a,
b,c){this._updateActionButtons(a,c);this._updateFooterVisibility(b,a);this.reposition()},_updateActionButtons:function(a,b){this._handleRegistry.remove(S.actions);if(this._actionsNode){var c=document.createDocumentFragment(),d=a.length;d&&a.forEach(function(a,e){"zoom-to"===a.id&&(a.title=this._i18n.zoom,a.className=B.iconZoom);var f=a.title,g=a.className,h=a.image;!h&&!g&&(h=L);var l=b&&b.attributes;l&&(f=f?t.substitute(l,f):"",g=g?t.substitute(l,g):null,h=h?t.substitute(l,h):null);var m=y.create("div",
{tabindex:"0",title:f},c);w.set(m,"data-action-index",e);r.add(m,[B.button,B.action]);var n=y.create("span",{"aria-hidden":!0},m);r.add(n,B.icon);g&&r.add(n,g);h&&(r.add(n,B.actionImage),p.set(n,"background-image","url("+h+")"));f={className:B.actionText,textContent:f};d>=this._hideActionsTextNum&&(f.className=B.iconText);var q=y.create("span",f,m);this._handleRegistry.add([k.init(a,"visible",function(a){r.toggle(m,B.hidden,!a)}),k.init(a,"className",function(a,b){l&&(a=t.substitute(l,a),b=t.substitute(l,
b));r.remove(n,b);r.add(n,a)}),k.init(a,"image",function(a){l&&(a=t.substitute(l,a));r.toggle(n,B.actionImage,!!a);p.set(n,"background-image",a?"url("+a+")":"")}),k.init(a,"title",function(a){l&&(a=t.substitute(l,a));a=a||"";w.set(m,"title",a);w.set(q,"textContent",a)})],S.actions)},this);y.place(c,this._actionsNode,"only")}},_getLocationScreenPoint:function(){var a=this.viewModel,b;if(a.location&&this.visible){var c=a.location;c&&a.get("view.ready")&&(b=a.view.toScreen(c))}return b},_calculatePosition:function(a,
b,c){var d=this.alignment,e,f,g=null,h=null,k=null,l=null;if(a&&b&&c){f=b.pointer.height;var m=b.pointer.width;e=b.popup.height;if("top"===d||"bottom"===d)e+=f;b=b.popup.width;if("left"===d||"right"===d)b+=m;var n=b/2,p=e/2;switch(d){case "bottom":g=a.y+f;h=a.x-n;d=n;f=e;break;case "left":g=a.y-p;l=c.width-a.x+m;d=b;f=p;break;case "right":g=a.y-p;h=a.x+m;d=b;f=p;break;default:k=c.height-a.y+f,h=a.x-n,d=n,f=e}c=c.padding;c=this.dockEnabled?{left:c.left?c.left+"px":"",top:c.top?c.top+"px":"",right:c.right?
c.right+"px":"",bottom:c.bottom?c.bottom+"px":""}:{top:null!==g?g+"px":"auto",left:null!==h?h+"px":"auto",bottom:null!==k?k+"px":"auto",right:null!==l?l+"px":"auto"};return{height:e,width:b,box:{top:null!==g?g:a.y-f,left:null!==h?h:a.x-d,bottom:null!==k?k:a.y+f,right:null!==l?l:a.x+d},style:c}}},_createPopupRendererVMs:function(a){this._destroyPopupRendererVMs();a&&1<a.length&&a.forEach(function(a,b){var c=new z({contentEnabled:!1,graphic:a});this._popupRendererVMs.push(c)},this)},_destroyPopupRendererVMs:function(){this._handleRegistry.remove(S.paginationTitles);
this._popupRendererVMs.forEach(function(a){a.destroy()});this._popupRendererVMs.length=0},_createPaginationNodes:function(a,b){this._handleRegistry.remove(S.paginationTitles);if(a){var c=a.length;this._paginationNode&&w.set(this._paginationNode,"innerHTML","");1<c&&(c=t.substitute({total:c},this._i18n.selectedFeatures),w.set(this._pageMenuInfoNode,"textContent",c),a.forEach(function(a,c){var d=this._i18n.untitled,e=y.create("li",{role:"menu-item",className:B.featureMenuItem},this._paginationNode);
c===b?(w.set(e,"aria-label",q.selectedFeature),r.add(e,B.featureMenuSelected)):w.set(e,"data-feature-index",c);var f=y.create("span",{className:B.featureMenuTitle,innerHTML:d},e);if(d=this._popupRendererVMs[c])d=k.init(d,"title",function(a){w.set(f,"innerHTML",a)}),this._handleRegistry.add(d,S.paginationTitles);c===b&&y.create("span",{className:B.iconCheckMark},f)},this))}},_createMessage:function(a,b){this._destroyMessage();a&&b&&(this._message=new A({visible:!1,text:this._i18n.noFeaturesFound,viewModel:{view:b}}),
this._message.startup(),y.place(this._message.domNode,b.root))},_createSpinner:function(a,b){this._destroySpinner();a&&b&&(this._spinner=new K({visible:!1,viewModel:{view:b}}),this._spinner.startup(),y.place(this._spinner.domNode,b.root))},_updateContent:function(a){a&&a.nodeName?(y.place(a,this._contentStorage),y.place(a,this._bodyContentNode,"only")):"string"===typeof a&&(this._destroyPopupRenderer(),w.set(this._bodyContentNode,"innerHTML",a));this._bodyContentNode.scrollTop=0;r.toggle(this._containerNode,
B.hasPopupRenderer,!!(this._popupRenderer&&this._popupRenderer.viewModel.content===a));r.toggle(this._containerNode,B.showContent,!!a);r.remove(this._containerNode,B.hasPaginationMenuOpen)},_destroyPopupRenderer:function(){this._popupRenderer&&!this._popupRenderer._destroyed&&(this._handleRegistry.remove(S.popupRenderer),this._popupRenderer.destroy(),this._popupRenderer=null)},_destroyMessage:function(){this._message&&(this._message.destroyRendering(),this._message.destroy(),this._message=null)},
_destroySpinner:function(){this._spinner&&(this._spinner.destroyRendering(),this._spinner.destroy(),this._spinner=null)},_setDockEnabledForViewSize:function(a){a.breakpoint&&this.set("dockEnabled",this._shouldDockAtCurrentViewSize(a))},_togglePopupDocking:function(a){r.remove(this._containerNode,B.hasPaginationMenuOpen);r.toggle(this._containerNode,B.isDocked,!!a);w.set(this._dockNode,"title",a?this._i18n.undock:this._i18n.dock);this._updateDockPosition(this.dockOptions)},_dockingThresholdCrossed:function(a,
b,c){var d=a[0];a=a[1];var e=b[0];b=b[1];var f=c.width;c=c.height;return d<=f&&e>f||d>f&&e<=f||a<=c&&b>c||a>c&&b<=c},_determineDockPosition:function(a){var b=this.viewModel,c=b.view,d=c&&c.padding,d=c&&c.width-d.left-d.right;return(b=c&&b.get("view.breakpoints"))&&d<=b.xsmall?a.bottomCenter:!this.isLeftToRight()?a.topLeft:a.topRight},_updateDockPosition:function(a){r.remove(this._containerNode,[B.isDockedTopLeft,B.isDockedTopCenter,B.isDockedTopRight,B.isDockedBottomLeft,B.isDockedBottomCenter,B.isDockedBottomRight,
B.canDockToTop,B.canDockToBottom,B.canDockToLeft,B.canDockToRight]);var b,c,d;b=a.position;b=b===I.auto?this._determineDockPosition(I):"function"===typeof b?b.call(this):b;switch(b){case I.topLeft:c=B.isDockedTopLeft;d=B.canDockToLeft;break;case I.topCenter:c=B.isDockedTopCenter;d=B.canDockToTop;break;case I.bottomLeft:c=B.isDockedBottomLeft;d=B.canDockToLeft;break;case I.bottomCenter:c=B.isDockedBottomCenter;d=B.canDockToBottom;break;case I.bottomRight:c=B.isDockedBottomRight;d=B.canDockToRight;
break;default:c=B.isDockedTopRight,d=B.canDockToRight}r.toggle(this._containerNode,d,!!a.buttonEnabled);this.dockEnabled?(r.add(this._containerNode,c),this._set("currentDockPosition",b)):this._set("currentDockPosition",null);this._popupRenderer&&this._popupRenderer.resize();this.reposition()},_toggleDockButton:function(a){var b=this._containerNode;r.toggle(b,B.showDock,!!a.buttonEnabled);r.toggle(b,B.isDocked,!!this.dockEnabled);this._updateDockPosition(a)},_updateFooterVisibility:function(a,b){var c=
this._isPaginationEnabled(a)||b&&b.length;r.toggle(this._containerNode,B.showFooter,!!c)},_isPaginationEnabled:function(a){return this.paginationEnabled&&a&&1<a.length},_updatePagination:function(a,b){this._updatePageText(a,b);this._createPaginationNodes(a,b);r.toggle(this._containerNode,B.showPagination,this._isPaginationEnabled(a))},_displayPendingFeaturesStatus:function(a,b,c,d){var e=0<a&&0===b;a&&(c.length&&a===c.length)&&this.set("visible",!1);r.toggle(this._containerNode,B.hasPendingPromises,
!!a);r.toggle(this._containerNode,B.isPendingPromisesResult,!!e);r.toggle(this._containerNode,B.hasPromiseFeatures,!!b);this._message&&this._message.set({visible:!1});e?this._spinner&&(this._spinner.set({visible:!0}),this._spinner.viewModel.point=d):(this._spinner&&(this._spinner.viewModel.point=null),b&&!this.visible&&this.set("visible",!0),!b&&(c&&c.length)&&this._message&&(this._message.set({visible:!0}),this._message.viewModel.point=d))},_moveIntoView:function(){var a=new s;setTimeout(a.resolve.bind(this),
this._animationDelay);return a.then(function(){if(!this._destroyed){var a=this.viewModel,b=this.get("viewModel.view");if(a&&b&&b.stationary){var c=this._getLocationScreenPoint();if(c){var d=this._sizePopup(),d=this._calculatePosition(c,d,b),e=b.width,f=b.height,h=b.padding,k=b.ui.padding;if(this.autoPanEnabled){if(c.y<h.top||c.y>f-h.bottom||c.x<h.left||c.x>e-h.right)return a.centerAtLocation();if(!this.dockEnabled&&d&&d.width<b.width&&d.height<b.height){var l=c=0;d.box.top<h.top?l=-d.box.top+k.top+
h.top:d.box.bottom>f-h.bottom&&(l=-(d.box.bottom-f+h.bottom)-k.bottom);d.box.left<h.left?c=d.box.left-k.left-h.left:d.box.right>e-h.right&&(c=d.box.right-e+h.right+k.right);if(c||l)return d=g.translateBy(g.create(),b.viewpoint,[c,l]),b.goTo(d,a.animationOptions)}}}}}}.bind(this))},_positionPopup:function(){var a=this.viewModel.view;if(a){r.remove(this._containerNode,[B.alignTop,B.alignBottom,B.alignLeft,B.alignRight]);var b;switch(this.alignment){case "bottom":b=B.alignBottom;break;case "right":b=
B.alignRight;break;case "left":b=B.alignLeft;break;default:b=B.alignTop}r.add(this._containerNode,b);b=this._getLocationScreenPoint();var c=this._sizePopup();(a=(a=this._calculatePosition(b,c,a))&&a.style)&&p.set(this._containerNode,a)}},_removeContent:function(){this._destroyPopupRenderer();w.set(this._bodyContentNode,"innerHTML","");w.set(this._titleNode,"innerHTML","");w.set(this._pageTextNode,"innerHTML","");w.set(this._pageTextDockedNode,"innerHTML","");r.remove(this._containerNode,[B.showTitle,
B.showContent])},_keyupFeature:function(a,c){var e=a.keyCode;if(e===d.UP_ARROW||e===d.DOWN_ARROW){a.stopPropagation();a.preventDefault();var f=b("li",this._paginationNode),g=f.length,h=f.indexOf(c),k;e===d.UP_ARROW?k=h-1:e===d.DOWN_ARROW&&(k=h+1);0>k?k=g-1:k>=g&&(k=0);f[k].focus()}},_selectFeature:function(a){var b=this.viewModel,c=-1;(a=w.get(a,"data-feature-index"))&&(c=parseInt(a,10));-1!==c&&(b.selectedFeatureIndex=c);r.remove(this._containerNode,B.hasPaginationMenuOpen);this._pageMenuNode.focus()},
_updateSelectedFeature:function(a){var b=this.viewModel,d,e="",f="";if(a){if(d=a.layer)e=d.id||"",f=d.title||"";if(!this._popupRenderer||this._popupRenderer&&this._popupRenderer._destroyed){this._handleRegistry.remove(S.popupRenderer);this._popupRenderer=new x;d=this._popupRenderer.viewModel.watch("title",function(a){b.title=a});var g=this._popupRenderer.viewModel.watch("content",function(a){b.content=a?this._popupRenderer.domNode:null}.bind(this)),h=c(this._popupRenderer,"resize",this.reposition.bind(this));
this._handleRegistry.add([d,g,h],S.popupRenderer);this._popupRenderer.startup()}this._popupRenderer.viewModel.graphic=a}this._toggleFeatureUpdatedClass();w.set(this._containerNode,"data-layer-title",f);w.set(this._containerNode,"data-layer-id",e);this.reposition()},_updateFeatures:function(a){var b=this.viewModel;this._createPopupRendererVMs(a);this._updatePagination(a,b.selectedFeatureIndex);this._updateFooterVisibility(a,b.actions);this.reposition()},_shouldDockAtCurrentViewSize:function(a){var b=
this.viewModel;a=a.breakpoint;return b.view&&(a.hasOwnProperty("width")&&b.view.ui.width<=a.width||a.hasOwnProperty("height")&&b.view.ui.height<=a.height)},_sizePopup:function(){var a=f.getContentBox(this._containerNode),b=f.getContentBox(this._pointerNode);return{popup:{height:a.h,width:a.w},pointer:{height:b.h,width:b.w}}},_updateTitle:function(a){a=a||"";w.set(this._titleNode,"innerHTML",a);r.toggle(this._containerNode,B.showTitle,!!a);r.remove(this._containerNode,B.hasPaginationMenuOpen)},_toggleDock:function(){this.set("dockEnabled",
!this.dockEnabled)},_togglePageMenu:function(){r.toggle(this._containerNode,B.hasPaginationMenuOpen);var a=r.contains(this._containerNode,B.hasPaginationMenuOpen);w.set(this._pageMenuSectionNode,"aria-hidden",!a);var c=b("li",this._paginationNode),d=c[0];c.forEach(function(b){w.set(b,"tabIndex",a?"0":"")});a?d&&d.focus():this._pageMenuNode.focus()},_updatePageText:function(a,b){var c="";this._isPaginationEnabled(a)&&(c=t.substitute({index:b+1,total:a.length},this._i18n.pageText));this._pageTextNode&&
w.set(this._pageTextNode,{textContent:c});this._pageTextDockedNode&&w.set(this._pageTextDockedNode,{textContent:c})},_toggleFeatureUpdatedClass:function(){r.remove(this._containerNode,B.hasFeatureUpdated);this._containerNode.offsetWidth=this._containerNode.offsetWidth;r.add(this._containerNode,B.hasFeatureUpdated)},_viewPointChanged:function(){this.closeOnViewChangeEnabled?this.close():this._positionPopup()},_wireUpView:function(a){this._handleRegistry.remove(S.view);this._viewPointEvent=null;if(a){var b=
"viewpoint";"3d"===a.type&&(b="camera");this._viewPointEvent=k.pausable(a,b,this._viewPointChanged.bind(this));this._handleRegistry.add([a.watch("padding",this.reposition.bind(this)),a.watch("size",this._updateDockEnabledForViewSize.bind(this)),c(a,"resize",this.reposition.bind(this)),this._viewPointEvent],S.view);this._togglePopupLocationRepositioning(this.visible);this._createMessage(this.messageEnabled,a);this._createSpinner(this.spinnerEnabled,a);this._setDockEnabledForViewSize(this.dockOptions);
this._toggleDockButton(this.dockOptions);this.reposition()}},_updateDockEnabledForViewSize:function(a,b){var c=this.get("viewModel.view.padding"),d=c.left+c.right,e=c.top+c.bottom,c=[],f=[];c[0]=a[0]-d;c[1]=a[1]-e;f[0]=b[0]-d;f[1]=b[1]-e;d=this.dockOptions;this._dockingThresholdCrossed(c,f,d.breakpoint)&&this._setDockEnabledForViewSize(d);this._updateDockPosition(d)},_togglePopupLocationRepositioning:function(a){var b=this.viewModel;this._viewPointEvent&&(a&&b.location&&!this.dockEnabled?this._viewPointEvent.resume():
this._viewPointEvent.pause())},_toggleContentVisibility:function(a){a?this._addContent():this._removeContent()}})})},"esri/widgets/Popup/PopupViewModel":function(){define("../../PopupTemplate ../../core/Accessor ../../core/Collection ../../core/Evented ../../core/HandleRegistry ../../core/promiseUtils ../../core/watchUtils dojo/fx/easing dojo/_base/lang".split(" "),function(a,l,n,m,k,g,h,e,d){var c={id:"zoom-to"};return l.createSubclass([m],{declaredClass:"esri.widgets.Popup.PopupViewModel",properties:{actions:{type:n.ofType(a.Action)},
animationOptions:{},content:{},featureCount:{readOnly:!0},features:{},location:{},pendingPromisesCount:{readOnly:!0},promises:{},selectedFeature:{readOnly:!0},selectedFeatureIndex:{},state:{readOnly:!0},title:{},updateLocationEnabled:{},view:{},waitingForResult:{dependsOn:["pendingPromisesCount","featureCount"],readOnly:!0},zoomFactor:{},zoomScale:{readOnly:!0}},_handles:null,constructor:function(){this._handles=new k},getDefaults:function(a){return d.mixin(this.inherited(arguments),{actions:[c],
animationOptions:{duration:300,easing:e.quadInOut},promises:[]})},initialize:function(){this._handles.add(h.init(this,"view.scale",this._scaleWatcher))},destroy:function(){this._handles.destroy();this.view=this._handles=null},actions:[c],animationOptions:{duration:300,easing:e.quadInOut},content:null,featureCount:0,features:null,_featuresSetter:function(a){this._set("features",a);this._updateFeatureCount(a);this.pendingPromisesCount||(this.selectedFeatureIndex=-1,a.length&&(this.selectedFeatureIndex=
0))},location:null,pendingPromisesCount:0,waitingForResult:!1,_waitingForResultGetter:function(){return 0<this.pendingPromisesCount&&0===this.featureCount},promises:[],_promisesSetter:function(a){var c=this._get("promises");c&&c.forEach(function(a){a.cancel()});this.features=[];this._set("pendingPromisesCount",0);this._set("promises",a);a&&a.length&&(this._set("pendingPromisesCount",a.length),a=a.slice(0),a.forEach(function(a){a.always(function(b){a.isCanceled()||(this._set("pendingPromisesCount",
this.pendingPromisesCount-1),this._updateFeatures(a,b))}.bind(this))},this))},selectedFeature:null,selectedFeatureIndex:-1,_selectedFeatureIndexSetter:function(a){if(isNaN(a)||-1>a)a=-1;var c=null,d=this.features;d&&d.length&&(a=(a+d.length)%d.length,c=d[a]);this._set("selectedFeature",c);this._set("selectedFeatureIndex",a);this._selectedFeatureChange(c,this.updateLocationEnabled)},_stateGetter:function(){this._set("state",this.get("view.ready")?"ready":"disabled")},title:"",updateLocationEnabled:!1,
_updateLocationEnabledSetter:function(a){this._selectedFeatureChange(this.selectedFeature,a);this._set("updateLocationEnabled",a)},view:null,zoomFactor:4,_zoomFactorSetter:function(a){var c=this.view;c&&null!=c.scale&&this._setZoomScale(c.scale,a);this._set("zoomFactor",a)},zoomScale:0,centerAtLocation:function(){if(this.location&&this.view)return this.view.goTo({target:this.location,scale:this.view.scale},this.animationOptions)},clear:function(){this.set({promises:[],features:[],content:null,title:null,
location:null})},triggerAction:function(a){(a=this.actions.getItemAt(a))&&this.emit("trigger-action",{action:a})},next:function(){this.selectedFeatureIndex+=1;return this},previous:function(){this.selectedFeatureIndex-=1;return this},zoomToLocation:function(){var a=this.view;if(a){var c=this.selectedFeature,d=c&&c.geometry,e=c&&"3d"===a.type;d||e?(e={target:c},d&&("point"===d.type&&this._isScreenSize(c))&&(e.scale=this.zoomScale,this.location=d)):e={target:this.location,scale:this.zoomScale};return a.goTo(e,
this.animationOptions)}return g.resolve()},_isScreenSize:function(a){if("3d"!==this.view.type||"esri.Graphic"!==a.declaredClass)return!0;var c=!0,d=this.view.getViewForGraphic(a);d&&d.whenGraphicBounds&&d.whenGraphicBounds(a).then(function(a){c=!a||a[0]===a[3]&&a[1]===a[4]&&a[2]===a[5]});return c},_getSelectedFeatureActions:function(){this._originalActions&&(this.actions=this._originalActions,this._originalActions=null);var a=this.actions.filter(function(a){return!a.temporary},this),c=a,d=this.selectedFeature.getEffectivePopupTemplate();
if(d&&d.actions){for(var c=d.actions,e=0;e<c.length;e++)c.getItemAt(e).temporary=!0;d.overwriteActions?this._originalActions=a:c=a.concat(c)}this.actions=c},_scaleWatcher:function(a){null!=a&&this._setZoomScale(a,this.zoomFactor)},_getPointFromGeometry:function(a){switch(a&&a.type){case "point":return a;case "extent":return a.center;case "polygon":return a.centroid;case "multipoint":case "polyline":return a.extent.center;default:return null}},_selectedFeatureChange:function(a,c){a&&(c&&(this.location=
this._getPointFromGeometry(this.selectedFeature.geometry)),this._getSelectedFeatureActions())},_updateFeatureCount:function(a){var c=0;a&&a.length&&(c=a.length);this._set("featureCount",c)},_setZoomScale:function(a,c){this._set("zoomScale",a/c)},_updateFeatures:function(a,c){if(a&&this.promises)if(!this._validatePromise(a)||c instanceof Error)console.error(this.declaredClass+":: Invalid promise");else if(c&&c.length){var d={};if(!this.features||!this.features.length)d.features=c,d.selectedFeatureIndex=
0;else{var e=c.filter(function(a){return-1===this.features.indexOf(a)},this);d.features=this.features.concat(e)}this.set(d)}},_validatePromise:function(a){return-1<this.promises.indexOf(a)}})})},"dojo/fx/easing":function(){define(["../_base/lang"],function(a){var l={linear:function(a){return a},quadIn:function(a){return Math.pow(a,2)},quadOut:function(a){return-1*a*(a-2)},quadInOut:function(a){a*=2;return 1>a?Math.pow(a,2)/2:-1*(--a*(a-2)-1)/2},cubicIn:function(a){return Math.pow(a,3)},cubicOut:function(a){return Math.pow(a-
1,3)+1},cubicInOut:function(a){a*=2;return 1>a?Math.pow(a,3)/2:(Math.pow(a-2,3)+2)/2},quartIn:function(a){return Math.pow(a,4)},quartOut:function(a){return-1*(Math.pow(a-1,4)-1)},quartInOut:function(a){a*=2;return 1>a?Math.pow(a,4)/2:-0.5*(Math.pow(a-2,4)-2)},quintIn:function(a){return Math.pow(a,5)},quintOut:function(a){return Math.pow(a-1,5)+1},quintInOut:function(a){a*=2;return 1>a?Math.pow(a,5)/2:(Math.pow(a-2,5)+2)/2},sineIn:function(a){return-1*Math.cos(a*(Math.PI/2))+1},sineOut:function(a){return Math.sin(a*
(Math.PI/2))},sineInOut:function(a){return-1*(Math.cos(Math.PI*a)-1)/2},expoIn:function(a){return 0==a?0:Math.pow(2,10*(a-1))},expoOut:function(a){return 1==a?1:-1*Math.pow(2,-10*a)+1},expoInOut:function(a){if(0==a)return 0;if(1==a)return 1;a*=2;if(1>a)return Math.pow(2,10*(a-1))/2;--a;return(-1*Math.pow(2,-10*a)+2)/2},circIn:function(a){return-1*(Math.sqrt(1-Math.pow(a,2))-1)},circOut:function(a){return Math.sqrt(1-Math.pow(a-1,2))},circInOut:function(a){a*=2;return 1>a?-0.5*(Math.sqrt(1-Math.pow(a,
2))-1):0.5*(Math.sqrt(1-Math.pow(a-2,2))+1)},backIn:function(a){return Math.pow(a,2)*(2.70158*a-1.70158)},backOut:function(a){a-=1;return Math.pow(a,2)*(2.70158*a+1.70158)+1},backInOut:function(a){a*=2;if(1>a)return Math.pow(a,2)*(3.5949095*a-2.5949095)/2;a-=2;return(Math.pow(a,2)*(3.5949095*a+2.5949095)+2)/2},elasticIn:function(a){if(0==a||1==a)return a;a-=1;return-1*Math.pow(2,10*a)*Math.sin((a-0.075)*2*Math.PI/0.3)},elasticOut:function(a){return 0==a||1==a?a:Math.pow(2,-10*a)*Math.sin((a-0.075)*
2*Math.PI/0.3)+1},elasticInOut:function(a){if(0==a)return 0;a*=2;if(2==a)return 1;var l=0.3*1.5,k=l/4;if(1>a)return a-=1,-0.5*Math.pow(2,10*a)*Math.sin((a-k)*2*Math.PI/l);a-=1;return 0.5*Math.pow(2,-10*a)*Math.sin((a-k)*2*Math.PI/l)+1},bounceIn:function(a){return 1-l.bounceOut(1-a)},bounceOut:function(a){a<1/2.75?a=7.5625*Math.pow(a,2):a<2/2.75?a=7.5625*Math.pow(a-1.5/2.75,2)+0.75:a<2.5/2.75?(a-=2.25/2.75,a=7.5625*Math.pow(a,2)+0.9375):(a-=2.625/2.75,a=7.5625*Math.pow(a,2)+0.984375);return a},bounceInOut:function(a){return 0.5>
a?l.bounceIn(2*a)/2:l.bounceOut(2*a-1)/2+0.5}};a.setObject("dojo.fx.easing",l);return l})},"esri/views/2d/viewpointUtils":function(){define("./math/common ./math/mat2d ./math/vec2 ../../Viewpoint ../../core/promiseUtils ../../geometry/SpatialReference ../../geometry/Geometry ../../geometry/Point ../../geometry/Extent ../../geometry/support/webMercatorUtils ../../geometry/support/scaleUtils".split(" "),function(a,l,n,m,k,g,h,e,d,c,b){var s=6370997*Math.PI/180,q=180/Math.PI,v=function(b,d,e,f){return f&&
(e&&!f.equals(e)&&c.canProject(f,e))&&f.isWebMercator?(f.isWebMercator?(e=d[1],89.99999<e?e=89.99999:-89.99999>e&&(e=-89.99999),e=Math.sin(a.toRadian(e)),b=n.set(b,6378137*a.toRadian(d[0]),3189068.5*Math.log((1+e)/(1-e)))):(e=a.toDegree(d[0]/6378137),b=n.set(b,e-360*Math.floor((e+180)/360),a.toDegree(0.5*Math.PI-2*Math.atan(Math.exp(-1*d[1]/6378137))))),b):n.copy(b,d)},t=function(a){return a.wkid?a:a.spatialReference||g.WGS84},u=function(a,b){return b.type?n.set(a,b.x,b.y):n.copy(a,b)},r=function(a,
b){return Math.max(a.width/b[0],a.height/b[1])*U(a.spatialReference)},w=function(a,b,f){var g;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1])return new e(a);if(a.forEach)return a.reduce(function(a,c){return w(c,b,a)},f);if(Array.isArray(a)){for(g=0;g<a.length;g++)if(f=w(a[g],b,f),!f)return null;return f}a instanceof h?g=a:a.geometry&&(g=a.geometry);if(!g)return null;a="point"===g.type?new d({xmin:g.x,ymin:g.y,xmax:g.x,ymax:g.y,spatialReference:g.spatialReference}):
g.extent;if(!a||!c.canProject(a.spatialReference,b))return null;a=c.project(a,b);return f=f?f.union(a):a.clone()},y=function(a,b){if(!a)return new m({targetGeometry:new e,scale:0,rotation:0});var c=b.spatialReference,d=b.size,f=b.currentViewpoint,g=b.constraints,k=null;"esri.Viewpoint"===a.declaredClass?k=a:a.viewpoint?k=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(k=a.target);var l=null,p=null;if(k&&k.targetGeometry)p=k.targetGeometry;else if(a instanceof h)p=a;else if(a||a&&
(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target")))p=w(a.center,c)||w(a.extent,c)||w(a.target,c)||w(a,c);!p&&f&&f.targetGeometry?p=f.targetGeometry:!p&&b.extent&&(p=b.extent);var q=t(p);c||(c=t(b.spatialReference||b.extent||p));l=p.center?p.center:p;l=u(n.create(),l);l=new e(v(l,l,q,c),c);c=null;c=k&&k.targetGeometry&&"point"===k.targetGeometry.type?k.scale:a.hasOwnProperty("scale")?a.scale:a.hasOwnProperty("zoom")&&g&&g.effectiveLODs?g.zoomToScale(a.zoom):Array.isArray(p)||
"point"===p.type||"extent"===p.type&&0===p.width&&0===p.height?b.extent?r(b.extent,d):f.scale:r(p.extent,d);d=0;k?d=k.rotation:a.hasOwnProperty("rotation")?d=a.rotation:f&&(d=f.rotation);g&&(g.rotationEnabled||(d=0),g.snapToZoom&&(c=g.snapScale(c)),0!==g.effectiveMinScale&&(c=Math.min(g.effectiveMinScale,c)),0!==g.effectiveMaxScale&&(c=Math.max(g.effectiveMaxScale,c)));return new m({targetGeometry:l,scale:c,rotation:d})},f=function(a,b){var c=a.targetGeometry,d=b.targetGeometry;c.x=d.x;c.y=d.y;c.spatialReference=
d.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a},p=function(a,b,c){if(!c)return n.scale(a,b,0.5);n.set(a,0.5*(b[0]-c.right+c.left),0.5*(b[1]-c.bottom+c.top));return a},x=function(){var a=n.create();return function(b,c,d){var e=c.targetGeometry;u(a,e);c=0.5*B(c);b.xmin=a[0]-c*d[0];b.ymin=a[1]-c*d[1];b.xmax=a[0]+c*d[0];b.ymax=a[1]+c*d[1];b.spatialReference=e.spatialReference;return b}}(),z=function(a,b,c){a=J(a,b,c);return l.invert(a,a)},K=function(){var a=n.create(),b=n.create();
return function(c,d,e){u(a,d.targetGeometry);A(b,d,e);e=0.5*B(d);c.set({xmin:a[0]-e*b[0],ymin:a[1]-e*b[1],xmax:a[0]+e*b[0],ymax:a[1]+e*b[1],spatialReference:d.targetGeometry.spatialReference});return c}}(),A=function(b,c,d){var e=a.toRadian(c.rotation)||0;c=Math.abs(Math.cos(e));e=Math.abs(Math.sin(e));return n.set(b,Math.round(d[1]*e+d[0]*c),Math.round(d[1]*c+d[0]*e))},E=function(){var a=n.create();return function(b,c,d){return n.sub(b,S(b,c),p(a,c,d))}}(),L=function(){var b=l.create(),c=n.create();
return function(d,e,f,g){var h=B(e);e=a.toRadian(e.rotation)||0;n.set(c,h,h);l.fromScaling(b,c);l.rotate(b,b,e);l.translate(b,b,E(c,f,g));l.translate(b,b,[0,g.top-g.bottom]);n.set(d,b[4],b[5]);return d}}(),B=function(a){return a.scale*I(a.targetGeometry.spatialReference)},I=function(a){return 1/(96*39.37*(b.getUnitValueForSR(a)||s))},U=function(a){return 96*39.37*(b.getUnitValueForSR(a)||s)},S=function(a,b){return n.scale(a,b,0.5)},D=function(){var a=n.create(),b=n.create(),c=n.create();return function(d,
e,f,g,h){n.negate(a,e);n.scale(b,f,0.5);n.set(c,1/g,-1/g);l.identity(d);l.translate(d,d,b);h&&l.rotate(d,d,h);l.scale(d,d,c);l.translate(d,d,a);return d}}(),J=function(){var b=n.create();return function(c,d,e){var f=B(d),g=a.toRadian(d.rotation)||0;u(b,d.targetGeometry);return D(c,b,e,f,g)}}(),G=function(){var a=n.create();return function(b,c,d){var e=B(c);u(a,c.targetGeometry);return D(b,a,d,e,0)}}(),F=function(){var a=n.create(),b=n.create(),c=n.create();return function(d,e,f){n.subtract(a,d,e);
n.normalize(a,a);n.subtract(b,d,f);n.normalize(b,b);n.cross(c,a,b);d=Math.acos(n.dot(a,b)/(n.length(a)*n.length(b)))*q;0>c[2]&&(d=-d);isNaN(d)&&(d=0);return d}}(),M=function(){var a=n.create();return function(b,c,d,e){var g=b.targetGeometry;f(b,c);L(a,c,d,e);g.x+=a[0];g.y+=a[1];return b}}(),P=function(){var a=n.create();return function(b,c,d,e){var g=b.targetGeometry;f(b,c);L(a,c,d,e);g.x-=a[0];g.y-=a[1];return b}}(),X=function(){var a=n.create();return function(b,c,d){f(b,c);c=b.targetGeometry;var e=
t(d),g=t(c);u(a,d);v(a,a,e,g);c.x=a[0];c.y=a[1];return b}}(),N=function(){var a=n.create();return function(b,c,d,e,f){f||(f="center");n.sub(a,d,e);n.scale(a,a,0.5);d=a[0];e=a[1];switch(f){case "center":n.set(a,0,0);break;case "left":n.set(a,-d,0);break;case "top":n.set(a,0,e);break;case "right":n.set(a,d,0);break;case "bottom":n.set(a,0,-e);break;case "top-left":n.set(a,-d,e);break;case "bottom-left":n.set(a,-d,-e);break;case "top-right":n.set(a,d,e);break;case "bottom-right":n.set(a,d,-e)}Z(b,c,
a);return b}}(),H=function(){var a=n.create();return function(b,c,d,e,g){f(b,c);0!==d&&(Y(a,e,c,g),b.scale=c.scale/d,V(a,a,b,g),Z(b,b,n.set(a,a[0]-e[0],e[1]-a[1])));return b}}(),O=function(){var a=n.create();return function(b,c,d,e,g,h){f(b,c);0!==d&&(Y(a,g,c,h),b.scale=c.scale/d,b.rotation+=e,V(a,a,b,h),Z(b,b,n.set(a,a[0]-g[0],g[1]-a[1])));return b}}(),Y=function(){var a=l.create();return function(b,c,d,e){return n.transformMat2d(b,c,z(a,d,e))}}(),V=function(){var a=l.create();return function(b,
c,d,e){return n.transformMat2d(b,c,J(a,d,e))}}(),Z=function(){var b=n.create(),c=l.create();return function(d,e,g){f(d,e);var h=B(e),k=d.targetGeometry;l.fromRotation(c,a.toRadian(e.rotation)||0);l.scale(c,c,n.fromValues(h,h));n.transformMat2d(b,g,c);k.x+=b[0];k.y+=b[1];return d}}();return{create:y,createAsync:function(a,b){return k.resolve(y(a,b))},copy:f,getAnchor:p,getExtent:x,setExtent:function(a,b,c,d,e){X(a,b,c.center);a.scale=r(c,d);e&&e.constraints&&e.constraints.constrain(a);return a},getPaddingMapTranslation:L,
getPaddingScreenTranslation:E,getResolution:B,getScreenCenter:S,getTransform:J,getTransformNoRotation:G,getInverseTransform:z,getOuterExtent:K,getOuterSize:A,getResolutionToScaleFactor:U,getScaleToResolutionFactor:I,angleBetween:F,addPadding:M,centerAt:X,pixelSizeAt:function(a,b,c){return B(b)},removePadding:P,resize:N,rotateBy:function(a,b,c){f(a,b);a.rotation+=c;return a},rotateTo:function(a,b,c){f(a,b);a.rotation=c;return a},scaleBy:H,scaleTo:function(a,b,c){f(a,b);a.scale=c;return a},scaleAndRotateBy:O,
toMap:Y,toScreen:V,translateBy:Z}})},"esri/views/2d/math/common":function(){define([],function(){if(!a)var a=1E-6;if(!l)var l="undefined"!==typeof Float32Array?Float32Array:Array;if(!n)var n=Math.random;var m={GLMAT_EPSILON:a,GLMAT_ARRAY_TYPE:l,GLMAT_RANDOM:n,setMatrixArrayType:function(a){m.GLMAT_ARRAY_TYPE=a}},k=Math.PI/180,g=180/Math.PI;m.toRadian=function(a){return a*k};m.toDegree=function(a){return a*g};m.setMatrixArrayType(Array);return m})},"esri/views/2d/math/mat2d":function(){define(["./common"],
function(a){var l=a.GLMAT_ARRAY_TYPE;a={create:function(){var a=new l(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var m=new l(6);m[0]=a[0];m[1]=a[1];m[2]=a[2];m[3]=a[3];m[4]=a[4];m[5]=a[5];return m},copy:function(a,l){a[0]=l[0];a[1]=l[1];a[2]=l[2];a[3]=l[3];a[4]=l[4];a[5]=l[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,l){var k=l[0],g=l[1],h=l[2],e=l[3],d=l[4],c=l[5],b=k*e-g*h;if(!b)return null;b=1/b;a[0]=e*b;a[1]=
-g*b;a[2]=-h*b;a[3]=k*b;a[4]=(h*c-e*d)*b;a[5]=(g*d-k*c)*b;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,l,k){var g=l[0],h=l[1],e=l[2],d=l[3],c=l[4];l=l[5];var b=k[0],s=k[1],q=k[2],v=k[3],t=k[4];k=k[5];a[0]=g*b+e*s;a[1]=h*b+d*s;a[2]=g*q+e*v;a[3]=h*q+d*v;a[4]=g*t+e*k+c;a[5]=h*t+d*k+l;return a}};a.mul=a.multiply;a.rotate=function(a,l,k){var g=l[0],h=l[1],e=l[2],d=l[3],c=l[4];l=l[5];var b=Math.sin(k);k=Math.cos(k);a[0]=g*k+e*b;a[1]=h*k+d*b;a[2]=g*-b+e*k;a[3]=h*-b+d*
k;a[4]=c;a[5]=l;return a};a.scale=function(a,l,k){var g=l[1],h=l[2],e=l[3],d=l[4],c=l[5],b=k[0];k=k[1];a[0]=l[0]*b;a[1]=g*b;a[2]=h*k;a[3]=e*k;a[4]=d;a[5]=c;return a};a.translate=function(a,l,k){var g=l[0],h=l[1],e=l[2],d=l[3],c=l[4];l=l[5];var b=k[0];k=k[1];a[0]=g;a[1]=h;a[2]=e;a[3]=d;a[4]=g*b+e*k+c;a[5]=h*b+d*k+l;return a};a.fromRotation=function(a,l){var k=Math.sin(l),g=Math.cos(l);a[0]=g;a[1]=k;a[2]=-k;a[3]=g;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,l){a[0]=l[0];a[1]=0;a[2]=0;a[3]=l[1];
a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,l){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=l[0];a[5]=l[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return a})},"esri/views/2d/math/vec2":function(){define(["./common"],function(a){var l=a.GLMAT_ARRAY_TYPE,n=a.GLMAT_RANDOM,m={create:function(){var a=new l(2);
a[0]=0;a[1]=0;return a},clone:function(a){var g=new l(2);g[0]=a[0];g[1]=a[1];return g},fromValues:function(a,g){var h=new l(2);h[0]=a;h[1]=g;return h},copy:function(a,g){a[0]=g[0];a[1]=g[1];return a},set:function(a,g,h){a[0]=g;a[1]=h;return a},add:function(a,g,h){a[0]=g[0]+h[0];a[1]=g[1]+h[1];return a},subtract:function(a,g,h){a[0]=g[0]-h[0];a[1]=g[1]-h[1];return a}};m.sub=m.subtract;m.multiply=function(a,g,h){a[0]=g[0]*h[0];a[1]=g[1]*h[1];return a};m.mul=m.multiply;m.divide=function(a,g,h){a[0]=
g[0]/h[0];a[1]=g[1]/h[1];return a};m.div=m.divide;m.min=function(a,g,h){a[0]=Math.min(g[0],h[0]);a[1]=Math.min(g[1],h[1]);return a};m.max=function(a,g,h){a[0]=Math.max(g[0],h[0]);a[1]=Math.max(g[1],h[1]);return a};m.scale=function(a,g,h){a[0]=g[0]*h;a[1]=g[1]*h;return a};m.scaleAndAdd=function(a,g,h,e){a[0]=g[0]+h[0]*e;a[1]=g[1]+h[1]*e;return a};m.distance=function(a,g){var h=g[0]-a[0],e=g[1]-a[1];return Math.sqrt(h*h+e*e)};m.dist=m.distance;m.squaredDistance=function(a,g){var h=g[0]-a[0],e=g[1]-
a[1];return h*h+e*e};m.sqrDist=m.squaredDistance;m.length=function(a){var g=a[0];a=a[1];return Math.sqrt(g*g+a*a)};m.len=m.length;m.squaredLength=function(a){var g=a[0];a=a[1];return g*g+a*a};m.sqrLen=m.squaredLength;m.negate=function(a,g){a[0]=-g[0];a[1]=-g[1];return a};m.inverse=function(a,g){a[0]=1/g[0];a[1]=1/g[1];return a};m.normalize=function(a,g){var h=g[0],e=g[1],h=h*h+e*e;0<h&&(h=1/Math.sqrt(h),a[0]=g[0]*h,a[1]=g[1]*h);return a};m.dot=function(a,g){return a[0]*g[0]+a[1]*g[1]};m.cross=function(a,
g,h){g=g[0]*h[1]-g[1]*h[0];a[0]=a[1]=0;a[2]=g;return a};m.lerp=function(a,g,h,e){var d=g[0];g=g[1];a[0]=d+e*(h[0]-d);a[1]=g+e*(h[1]-g);return a};m.random=function(a,g){g=g||1;var h=2*n()*Math.PI;a[0]=Math.cos(h)*g;a[1]=Math.sin(h)*g;return a};m.transformMat2=function(a,g,h){var e=g[0];g=g[1];a[0]=h[0]*e+h[2]*g;a[1]=h[1]*e+h[3]*g;return a};m.transformMat2d=function(a,g,h){var e=g[0];g=g[1];a[0]=h[0]*e+h[2]*g+h[4];a[1]=h[1]*e+h[3]*g+h[5];return a};m.transformMat3=function(a,g,h){var e=g[0];g=g[1];a[0]=
h[0]*e+h[3]*g+h[6];a[1]=h[1]*e+h[4]*g+h[7];return a};m.transformMat4=function(a,g,h){var e=g[0];g=g[1];a[0]=h[0]*e+h[4]*g+h[12];a[1]=h[1]*e+h[5]*g+h[13];return a};m.forEach=function(){var a=m.create();return function(g,h,e,d,c,b){h||(h=2);e||(e=0);for(d=d?Math.min(d*h+e,g.length):g.length;e<d;e+=h)a[0]=g[e],a[1]=g[e+1],c(a,a,b),g[e]=a[0],g[e+1]=a[1];return g}}();m.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return m})},"esri/widgets/Popup/PopupRenderer":function(){define("require ../Widget ./PopupRendererViewModel ../../core/requireUtils ../../core/watchUtils dojo/_base/lang dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/on dijit/_TemplatedMixin dijit/a11yclick dojo/i18n!./nls/PopupRenderer dojo/text!./templates/PopupRenderer.html".split(" "),
function(a,l,n,m,k,g,h,e,d,c,b,s,q,v){var t={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",iconDownload:"esri-icon-download",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconMedia:"esri-icon-media",iconChart:"esri-icon-chart",base:"esri-popup-renderer",container:"esri-popup-renderer__size-container",main:"esri-popup-renderer__main-container",btn:"esri-popup-renderer__button",icon:"esri-popup-renderer__icon",
content:"esri-popup-renderer__content",contentElement:"esri-popup-renderer__content-element",text:"esri-popup-renderer__text",showMediaPagination:"esri-popup-renderer--media-pagination-visible",attachments:"esri-popup-renderer__attachments",attachmentsTitle:"esri-popup-renderer__attachments-title",attachmentsItem:"esri-popup-renderer__attachments-item",attachmentsItemIcon:"esri-popup-renderer__attachments-item-icon",fields:"esri-popup-renderer__fields",media:"esri-popup-renderer__media",mediaContainer:"esri-popup-renderer__media-container",
mediaItemContainer:"esri-popup-renderer__media-item-container",mediaItem:"esri-popup-renderer__media-item",mediaItemTitle:"esri-popup-renderer__media-item-title",mediaItemCaption:"esri-popup-renderer__media-item-caption",mediaPrevious:"esri-popup-renderer__media-previous",mediaPreviousIconLTR:"esri-popup-renderer__media-previous-icon",mediaPreviousIconRTL:"esri-popup-renderer__media-previous-icon--rtl",mediaNext:"esri-popup-renderer__media-next",mediaNextIconLTR:"esri-popup-renderer__media-next-icon",
mediaNextIconRTL:"esri-popup-renderer__media-next-icon--rtl",mediaSummary:"esri-popup-renderer__media-summary",mediaCount:"esri-popup-renderer__media-count",mediaImageSummary:"esri-popup-renderer__media-image-summary",mediaImageIcon:"esri-popup-renderer__media-image-icon",mediaChart:"esri-popup-renderer__media-chart",mediaChartSummary:"esri-popup-renderer__media-chart-summary",mediaChartIcon:"esri-popup-renderer__media-chart-icon",loading:"esri-popup-renderer__loading",loadingSpinnerContainer:"esri-popup-renderer__loading-container",
spinner:"esri-popup-renderer__loading-spinner"},u=/^\s*(https?:\/\/[^\s]+)\s*$/i;return l.createSubclass([b],{declaredClass:"esri.widgets.Popup.PopupRenderer",templateString:v,properties:{viewModel:{type:n}},baseClass:t.base,constructor:function(){this._charts=[];this._chartTooltips=[]},postCreate:function(){this.inherited(arguments);var a=this,b=this.viewModel;this.own(k.init(b,"waitingForContent",this._loadingSpinner.bind(this)),k.init(b,"content",this._render.bind(this)),c(this._contentNode,c.selector("."+
t.mediaNext,s),function(){a._nextMedia(this)}),c(this._contentNode,c.selector("."+t.mediaPrevious,s),function(){a._previousMedia(this)}))},destroy:function(){this._destroyCharts();this._clearResizeTimer()},_i18n:q,_css:t,resize:function(){this._resizeCharts();this.emit("resize")},_clearResizeTimer:function(){this._mediaResizeTimer&&(clearTimeout(this._mediaResizeTimer),this._mediaResizeTimer=0)},_countMediaInfos:function(a){var b=0,c=0;a.forEach(function(a){"image"===a.type?b++:-1!==a.type.indexOf("chart")&&
c++});return{total:c+b,images:b,charts:c}},_createMediaNodes:function(a){this._destroyCharts();var b=a.mediaIndex,c=a.mediaInfos[b];a=a.node;d.empty(a);var e=d.create("div",{className:t.mediaItem},a),b=this._createMediaType(c,b);d.place(b,e,"only");c.title&&d.create("div",{className:t.mediaItemTitle,innerHTML:c.title},a);c.caption&&d.create("div",{className:t.mediaItemCaption,innerHTML:c.caption},a);this._clearResizeTimer();this._mediaResizeTimer=setTimeout(function(){this.resize();this._clearResizeTimer()}.bind(this),
0)},_createMediaType:function(b,c){var e=b.value,f;if("image"===b.type){var g=d.create("img",{alt:b.title||"",src:e.sourceURL});e.linkURL?(f=d.create("a",{title:b.title||"",href:e.linkURL,target:this._preventNewTab(e.linkURL)?"":"_blank"}),d.place(g,f)):f=g}else-1!==b.type.indexOf("chart")&&(f=d.create("div",{className:t.mediaChart},f),e=["dojox/charting/Chart2D","dojox/charting/action2d/Tooltip"],g=b.value.theme||this.chartTheme,"string"===typeof g&&(g=g.replace(/\./gi,"/"),-1===g.indexOf("/")&&
(g="dojox/charting/themes/"+g)),g||(g="dojox/charting/themes/Claro"),e.push(g),this._cancelChartModules(),this._chartsPromise=m.when(a,e).then(function(a){this._showChart(f,b.type,b.value,a[0],a[1],a[2]);this._chartsPromise=null}.bind(this)));return f},_cancelChartModules:function(){this._chartsPromise&&this._chartsPromise.cancel()},_destroyCharts:function(){this._cancelChartModules();var a;if(this._chartTooltips&&this._chartTooltips.length)for(a=0;a<this._chartTooltips.length;a++)this._chartTooltips[a].destroy();
this._chartTooltips.length=0;if(this._charts&&this._charts.length)for(a=0;a<this._charts.length;a++)this._charts[a].destroy();this._charts.length=0},_loadingSpinner:function(a){e.toggle(this.domNode,t.loading,!!a)},_nextMedia:function(a){this._pageMedia(a,"next")},_pageMedia:function(a,b){var c,d=h.get(a,"data-element-index");d&&(c=parseInt(d,10),c=this._elementInfo[c]);if(c){var d=c.mediaInfos,e=c.mediaIndex;"previous"===b?e--:e++;d&&d.length&&(e=(e+d.length)%d.length);c.mediaIndex=e;this._createMediaNodes(c)}},
_preventNewTab:function(a){return(a=a&&g.trim(a).toLowerCase())&&(0===a.indexOf("mailto:")||0===a.indexOf("tel:"))},_previousMedia:function(a){this._pageMedia(a,"previous")},_render:function(a){this._elementInfo=[];this._destroyCharts();d.empty(this._contentNode);var b=this.viewModel;a&&("string"===typeof a?(a=this._renderText({type:"text",text:a}))&&d.place(a,this._contentNode,"only"):a.nodeName?d.place(a,this._contentNode,"only"):Array.isArray(a)&&a.forEach(function(a,c){var e;switch(a.type){case b.contentTypes.attachments:e=
this._renderAttachments(a,c);break;case b.contentTypes.fields:e=this._renderFields(a,c);break;case b.contentTypes.media:e=this._renderMedia(a,c);break;case b.contentTypes.text:e=this._renderText(a,c)}e&&d.place(e,this._contentNode,0===c?"only":"last")},this));this.resize()},_renderAttachments:function(a,b){var c,f=a.attachmentInfos;if(f&&f.length){c=d.create("div");e.add(c,[t.attachments,t.contentElement]);d.create("div",{className:t.attachmentsTitle,textContent:q.attach},c);var g=d.create("ul",{},
c);f.forEach(function(a){var b=d.create("li",{},g),b=d.create("a",{href:a.url,target:"_blank"},b);d.create("span",{className:t.iconDownload+" "+t.attachmentsItemIcon},b);d.create("span",{className:t.attachmentsItem,textContent:a.name||q.noTitle},b)},this)}return c},_renderFields:function(a,b){var c=this.viewModel,f,g=c.graphic.getEffectivePopupTemplate();if(g=a.fieldInfos||g&&g.fieldInfos){var h=c.formattedAttributes.content[b]||c.formattedAttributes.global;f=d.create("div");e.add(f,[t.fields,t.contentElement]);
var c=d.create("table",{summary:q.fieldsSummary},f),k=d.create("tbody",{},c);g.forEach(function(a){if(a.hasOwnProperty("visible")?a.visible:1){var b=a.fieldName;a=a.label||b;var b=h[b]||"",c;b&&"string"===typeof b&&(c=b.replace(u,'\x3ca target\x3d"_blank" href\x3d"$1" title\x3d"'+a+'"\x3e'+q.view+"\x3c/a\x3e"));var e=d.create("tr",{},k),f=a,g=b;c&&c!==b&&(f=a,g=c);d.create("th",{innerHTML:f},e);d.create("td",{innerHTML:g},e)}},this)}return f},_renderMedia:function(a,b){var c,f=a.mediaInfos;if(f&&
f.length){var h=this._countMediaInfos(f),k={tabIndex:"0",role:"button"};k["data-element-index"]=b;c=d.create("div");e.add(c,[t.media,t.contentElement]);e.toggle(c,t.showMediaPagination,1<h.total);var l=d.create("ul",{className:t.mediaSummary},c),m=d.create("li",{className:t.mediaImageSummary},l);d.create("span",{className:t.mediaCount,"aria-label":q.numImages,textContent:"("+h.images+")"},m);d.create("span",{"aria-hidden":!0,className:t.mediaImageIcon+" "+t.iconMedia},m);l=d.create("li",{className:t.mediaImageSummary},
l);d.create("span",{className:t.mediaCount,"aria-label":q.numCharts,textContent:"("+h.charts+")"},l);d.create("span",{"aria-hidden":!0,className:t.mediaChartIcon+" "+t.iconChart},l);h=d.create("div",{className:t.mediaContainer},c);l=d.create("div",g.mixin({title:q.previous},k),h);e.add(l,[t.btn,t.mediaPrevious]);m=d.create("span",{"aria-hidden":!0},l);e.add(m,[t.icon,t.mediaPreviousIconLTR,t.iconLeftTriangleArrow]);m=d.create("span",{"aria-hidden":!0},l);e.add(m,[t.icon,t.mediaPreviousIconRTL,t.iconRightTriangleArrow]);
d.create("span",{className:t.iconText,textContent:q.previous},l);f={mediaIndex:0,node:d.create("div",{className:t.mediaItemContainer},h),mediaInfos:f};this._elementInfo[b]=f;this._createMediaNodes(f);k=d.create("div",g.mixin({title:q.next},k),h);e.add(k,[t.btn,t.mediaNext]);f=d.create("span",{"aria-hidden":!0},k);e.add(f,[t.icon,t.mediaNextIconLTR,t.iconRightTriangleArrow]);f=d.create("span",{"aria-hidden":!0},k);e.add(f,[t.icon,t.mediaNextIconRTL,t.iconLeftTriangleArrow]);d.create("span",{className:t.iconText,
textContent:q.next},k)}return c},_renderText:function(a,b){var c;a&&a.text&&(c=d.create("div",{innerHTML:a.text}),e.add(c,[t.text,t.contentElement]));return c},_resizeCharts:function(){if(this._charts&&this._charts.length)for(var a=0;a<this._charts.length;a++){var b=this._charts[a],c=b.node;c&&(c.offsetWidth&&c.offsetHeight)&&b.resize()}},_showChart:function(a,b,c,d,e,g){a=new d(a,{margins:{l:4,t:4,r:4,b:4}});g&&a.setTheme(g);switch(b){case "pie-chart":a.addPlot("default",{type:"Pie",labels:!1});
a.addSeries("Series A",c.fields);break;case "line-chart":a.addPlot("default",{type:"Markers"});a.addAxis("x",{min:0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});c.fields.forEach(function(a,b){a.x=b+1});a.addSeries("Series A",c.fields);break;case "column-chart":a.addPlot("default",{type:"Columns",gap:3});a.addAxis("y",{includeZero:!0,vertical:!0,fixUpper:"minor"});a.addSeries("Series A",c.fields);break;case "bar-chart":a.addPlot("default",
{type:"Bars",gap:3}),a.addAxis("x",{includeZero:!0,fixUpper:"minor",minorLabels:!1}),a.addAxis("y",{vertical:!0,majorTicks:!1,minorTicks:!1,majorLabels:!1,minorLabels:!1}),a.addSeries("Series A",c.fields)}b=new e(a);a.render();this._charts.push(a);this._chartTooltips.push(b)}})})},"esri/widgets/Spinner":function(){define("./Widget ./support/AnchorElementViewModel dojo/i18n!./Spinner/nls/Spinner dojo/dom-class dojo/dom-construct dojo/dom-style".split(" "),function(a,l,n,m,k,g){var h={base:"esri-spinner",
visible:"esri-spinner--visible",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};return a.createSubclass({properties:{viewModel:{type:l}},declaredClass:"esri.widgets.Spinner",baseClass:h.base,postCreate:function(){this.inherited(arguments);this.own(this.viewModel.watch("point",function(a){this._setDomClasses(a)}.bind(this)),this.viewModel.watch("screenPoint",function(a){this._positionDomNode(a)}.bind(this)))},destroy:function(){this._clearTimeout()},_css:h,_i18n:n,animationDelay:500,
visible:!0,_setVisibleAttr:function(a){this._set("visible",a);this._visibleChange()},_clearTimeout:function(){this._resetTimeout&&clearTimeout(this._resetTimeout)},_setDomClasses:function(a){this.visible&&a?(m.remove(this.domNode,h.spinnerStart),m.remove(this.domNode,h.spinnerFinish),this.domNode.offsetWidth=this.domNode.offsetWidth,m.add(this.domNode,h.spinnerStart)):this.visible&&!a?m.add(this.domNode,h.spinnerFinish):(m.remove(this.domNode,h.spinnerStart),m.remove(this.domNode,h.spinnerFinish))},
_positionDomNode:function(a){a?g.set(this.domNode,{left:a.x+"px",top:a.y+"px"}):(this._clearTimeout(),this._resetTimeout=setTimeout(function(){g.set(this.domNode,{left:"",top:""});this._resetTimeout=0}.bind(this),this.animationDelay))},_visibleChange:function(){m.toggle(this.domNode,h.visible,this.visible)}})})},"esri/widgets/support/AnchorElementViewModel":function(){define(["../../core/Accessor","../../core/HandleRegistry","../../core/watchUtils"],function(a,l,n){return a.createSubclass({properties:{point:{},
screenPoint:{},state:{},view:{}},declaredClass:"esri.widgets.support.AnchorElementViewModel",constructor:function(){this._handles=new l},destroy:function(){this._viewReady&&this._viewReady.cancel();this.view=null;this._handles.destroy();this._viewWatch=this._handles=null},point:null,_pointSetter:function(a){this._viewControl(a);this._createScreenPoint(a,this.view);this._set("point",a)},screenPoint:null,state:"disabled",view:null,_viewSetter:function(a){this._handles&&(this._handles.remove("viewHandles"),
this._viewWatch=null);this._viewReady&&this._viewReady.cancel();this.state="disabled";a&&(this._viewReady=a.then(function(){this.state="ready";var k="viewpoint";"3d"===a.type&&(k="camera");this._viewWatch=n.pausable(a,k,function(){this._createScreenPoint(this.point,this.view)}.bind(this));this._handles.add(this._viewWatch,"viewHandles");this._viewControl(this.point)}.bind(this)));this._set("view",a)},_viewControl:function(a){this._viewWatch&&(a?this._viewWatch.resume():this._viewWatch.pause())},_createScreenPoint:function(a,
k){this.screenPoint=a&&k?k.toScreen(a.x,a.y,a.z):null}})})},"esri/widgets/Message":function(){define(["./Widget","./support/AnchorElementViewModel","dojo/dom-class","dojo/dom-construct","dojo/dom-style"],function(a,l,n,m,k){var g={base:"esri-message",visible:"esri-message--visible",text:"esri-message__text",messageFadeIn:"esri-message--fade-in"};return a.createSubclass({properties:{viewModel:{type:l}},declaredClass:"esri.widgets.Message",baseClass:g.base,constructor:function(){this._text=m.create("span",
{className:g.text})},postCreate:function(){this.inherited(arguments);m.place(this._text,this.domNode);this.own(this.viewModel.watch("point",function(a){this._setDomClasses(a)}.bind(this)),this.viewModel.watch("screenPoint",function(a){this._positionDomNode(a)}.bind(this)))},destroy:function(){this._clearTimeout()},_css:g,animationDelay:3E3,visible:!0,_setVisibleAttr:function(a){this._set("visible",a);this._visibleChange()},text:"",_setTextAttr:{node:"_text",type:"innerText"},_clearTimeout:function(){this._resetTimeout&&
(clearTimeout(this._resetTimeout),this._resetTimeout=0)},_setDomClasses:function(a){this._clearTimeout();n.remove(this.domNode,g.messageFadeIn);this.domNode.offsetWidth=this.domNode.offsetWidth;a&&(n.add(this.domNode,g.messageFadeIn),this._resetTimeout=setTimeout(function(){this.viewModel.point=null;this._resetTimeout=0}.bind(this),this.animationDelay))},_positionDomNode:function(a){a?k.set(this.domNode,{left:a.x+"px",top:a.y+"px"}):k.set(this.domNode,{left:"",top:""})},_visibleChange:function(){n.toggle(this.domNode,
g.visible,this.visible)}})})},"esri/views/ViewAnimation":function(){define(["../core/declare","dojo/Deferred","../core/Accessor","../core/Promise","../core/Scheduler"],function(a,l,n,m,k){var g={RUNNING:"running",FINISHED:"finished",STOPPED:"stopped"};a=a([n,m],{declaredClass:"esri.views.ViewAnimation",properties:{state:{value:null},target:{value:null}},constructor:function(){this._dfd=new l;this.addResolvingPromise(this._dfd.promise)},initialize:function(){this.state=g.RUNNING},stop:function(){this.state=
g.STOPPED;k.schedule(this._dfd.resolve)},finish:function(){this.state=g.FINISHED;k.schedule(this._dfd.resolve)}});a.State=g;return a})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:esri/widgets/Attribution/templates/Attribution.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${_css.sources}" data-dojo-attach-point\x3d"_sourcesNode"\x3e\x3c/div\x3e\r\n  \x3cdiv class\x3d"${_css.poweredBy}"\x3ePowered by \x3ca target\x3d"_blank" href\x3d"http://www.esri.com/" class\x3d"${_css.link}"\x3eEsri\x3c/a\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:esri/widgets/Compass/templates/Compass.html":'\x3cdiv role\x3d"button" tabindex\x3d"0"\x3e\r\n  \x3cspan data-dojo-attach-point\x3d"_iconNode" aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.rotationIcon}" title\x3d"${_i18n.reset}"\x3e\x3c/span\x3e\r\n  \x3cspan class\x3d"${_css.text}"\x3e${_i18n.reset}\x3c/span\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/NavigationToggle/templates/NavigationToggle.html":'\x3cdiv data-dojo-attach-point\x3d"_navigationToggleNode" title\x3d"${_i18n.toggle}"\x3e\r\n  \x3cdiv class\x3d"${_css.button} ${_css.panButton}"\r\n       data-dojo-attach-point\x3d"_panButtonNode"\x3e\r\n    \x3cspan class\x3d"${_css.panIcon}"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"${_css.button} ${_css.rotateButton}"\r\n       data-dojo-attach-point\x3d"_rotateButtonNode"\x3e\r\n    \x3cspan class\x3d"${_css.rotationIcon}"\x3e\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/Zoom/templates/Zoom.html":'\x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.disabled}"\x3e\r\n  \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_zoomInNode"\r\n       class\x3d"${_css.button} ${_css.interactive}" title\x3d"${_i18n.zoomIn}"\x3e\r\n    \x3cspan aria-hidden\x3d"true" role\x3d"presentation"\r\n          class\x3d"${_css.icon} ${_css.zoomInIcon}"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.zoomIn}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_zoomOutNode"\r\n       class\x3d"${_css.button} ${_css.interactive}" title\x3d"${_i18n.zoomOut}"\x3e\r\n    \x3cspan aria-hidden\x3d"true" role\x3d"presentation"\r\n          class\x3d"${_css.icon} ${_css.zoomOutIcon}"\x3e\x3c/span\x3e\r\n    \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.zoomOut}\x3c/span\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:esri/widgets/Popup/templates/Popup.html":'\x3cdiv role\x3d"presentation" class\x3d"${_css.invisible}"\x3e\r\n  \x3c!-- Popup Container --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"_containerNode" class\x3d"${_css.container} ${_css.alignTop} ${_css.shadow}"\x3e\r\n    \x3cdiv class\x3d"${_css.main}"\x3e\r\n      \x3c!-- Popup Docked Pagination --\x3e\r\n      \x3csection class\x3d"${_css.paginationDocked}"\x3e\r\n        \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n          \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\r\n          \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${_css.paginationDockedButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousDockedNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextDockedNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextDockedNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuDockedNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Docked Pagination --\x3e\r\n      \x3c!-- Popup Header --\x3e\r\n      \x3cheader class\x3d"${_css.header}"\x3e\r\n        \x3ch1 data-dojo-attach-point\x3d"_titleNode" class\x3d"${_css.headerTitle}"\x3e\x3c/h1\x3e\r\n        \x3cdiv class\x3d"${_css.headerButtons}"\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_dockNode" class\x3d"${_css.button} ${_css.buttonDock}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToRight}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToTop}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToLeft}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconDock} ${_css.iconDockToBottom}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.dock}\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconUndock}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.undock}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_closeNode" class\x3d"${_css.button}" title\x3d"${_i18n.close}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconClose}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.close}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/header\x3e\r\n      \x3c!-- /Popup Header --\x3e\r\n      \x3c!-- Popup Content --\x3e\r\n      \x3carticle class\x3d"${_css.content}" data-dojo-attach-point\x3d"_bodyContentNode"\x3e\x3c/article\x3e\r\n      \x3c!-- /Popup Content --\x3e\r\n      \x3c!-- Popup Footer --\x3e\r\n      \x3cfooter class\x3d"${_css.footer}"\x3e\r\n        \x3c!-- Popup Actions --\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"_actionsNode" class\x3d"${_css.actions}"\x3e\x3c/div\x3e\r\n        \x3c!-- /Popup Actions --\x3e\r\n        \x3c!-- Popup Pagination --\x3e\r\n        \x3csection class\x3d"${_css.pagination}"\x3e\r\n          \x3cdiv role\x3d"presentation" class\x3d"${_css.loadingContainer}" title\x3d"${_i18n.loading}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLoading}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.loading}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_previousNode" class\x3d"${_css.button} ${_css.paginationPrevious}" title\x3d"${_i18n.previous}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationPreviousIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationPreviousIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.previous}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"_pageTextNode" class\x3d"${_css.paginationText}"\x3e\x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_nextNode" class\x3d"${_css.button} ${_css.paginationNext}" title\x3d"${_i18n.next}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconRightTriangleArrow} ${_css.paginationNextIconLTR}"\x3e\x3c/span\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconLeftTriangleArrow} ${_css.paginationNextIconRTL}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.next}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv role\x3d"button" tabindex\x3d"0" data-dojo-attach-point\x3d"_pageMenuNode" class\x3d"${_css.button} ${_css.featureMenuButton}" title\x3d"${_i18n.menu}"\x3e\r\n            \x3cspan aria-hidden\x3d"true" class\x3d"${_css.icon} ${_css.iconPaginationMenu}"\x3e\x3c/span\x3e\r\n            \x3cspan class\x3d"${_css.iconText}"\x3e${_i18n.menu}\x3c/span\x3e\r\n          \x3c/div\x3e\r\n        \x3c/section\x3e\r\n        \x3c!-- /Popup Pagination --\x3e\r\n      \x3c/footer\x3e\r\n      \x3c!-- /Popup Footer --\x3e\r\n      \x3c!-- Popup Menu --\x3e\r\n      \x3csection class\x3d"${_css.featureMenu}" data-dojo-attach-point\x3d"_pageMenuSectionNode" aria-hidden\x3d"true"\x3e\r\n        \x3ch2 class\x3d"${_css.featureMenuHeader}" data-dojo-attach-point\x3d"_pageMenuInfoNode"\x3e\x3c/h2\x3e\r\n        \x3cnav class\x3d"${_css.featureMenuViewport}"\x3e\r\n          \x3col class\x3d"${_css.featureMenuList}" role\x3d"menu" data-dojo-attach-point\x3d"_paginationNode"\x3e\x3c/ol\x3e\r\n        \x3c/nav\x3e\r\n      \x3c/section\x3e\r\n      \x3c!-- /Popup Menu --\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- Popup Pointer --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"_pointerNode" class\x3d"${_css.pointer}" role\x3d"presentation"\x3e\r\n      \x3cdiv class\x3d"${_css.pointerDirection} ${_css.shadow}"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!-- /Popup Pointer --\x3e\r\n  \x3c/div\x3e\r\n  \x3c!-- /Popup Container --\x3e\r\n\x3c/div\x3e\r\n',
"url:esri/widgets/Popup/templates/PopupRenderer.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"${_css.container}"\x3e\r\n    \x3cdiv class\x3d"${_css.main}"\x3e\r\n      \x3cdiv class\x3d"${_css.loadingSpinnerContainer}"\x3e\x3cspan class\x3d"${_css.iconLoading} ${_css.spinner}"\x3e\x3c/span\x3e\x3c/div\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"_contentNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e\r\n',"*now":function(a){a(['dojo/i18n!*preload*dojo/nls/dojo*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},
"*noref":1}});require.boot&&require.apply(null,require.boot);